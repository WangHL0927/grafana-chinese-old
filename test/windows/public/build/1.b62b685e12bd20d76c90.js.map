{"version":3,"sources":["webpack:///1.b62b685e12bd20d76c90.js","webpack:///./public/app/containers/Explore/Wrapper.tsx","webpack:///./public/vendor/flot/jquery.flot.js","webpack:///./public/vendor/flot/jquery.flot.time.js","webpack:///./public/app/containers/Explore/Explore.tsx","webpack:///./public/app/containers/Explore/ElapsedTime.tsx","webpack:///./public/app/containers/Explore/QueryRows.tsx","webpack:///./public/app/containers/Explore/QueryField.tsx","webpack:///./public/app/containers/Explore/utils/dom.ts","webpack:///./public/app/containers/Explore/slate-plugins/braces.ts","webpack:///./public/app/containers/Explore/slate-plugins/clear.ts","webpack:///./public/app/containers/Explore/slate-plugins/newline.ts","webpack:///./public/app/containers/Explore/slate-plugins/prism/index.tsx","webpack:///./public/app/containers/Explore/slate-plugins/prism/promql.ts","webpack:///./public/app/containers/Explore/slate-plugins/runner.ts","webpack:///./public/app/containers/Explore/utils/debounce.ts","webpack:///./public/app/containers/Explore/utils/prometheus.ts","webpack:///./public/app/containers/Explore/Typeahead.tsx","webpack:///./public/app/containers/Explore/Graph.tsx","webpack:///./public/app/containers/Explore/Legend.tsx","webpack:///./public/app/containers/Explore/Table.tsx","webpack:///./public/app/containers/Explore/TimePicker.tsx","webpack:///./public/app/containers/Explore/utils/query.ts"],"names":["webpackJsonp","1666","module","__webpack_exports__","__webpack_require__","Object","defineProperty","value","__WEBPACK_IMPORTED_MODULE_0_react__","__WEBPACK_IMPORTED_MODULE_0_react___default","n","__WEBPACK_IMPORTED_MODULE_1__Explore__","__extends","this","extendStatics","setPrototypeOf","__proto__","Array","d","b","p","hasOwnProperty","__","constructor","prototype","create","__assign","assign","t","s","i","arguments","length","call","Wrapper","_super","_this","apply","state","initialState","split","handleChangeSplit","setState","render","_a","a","createElement","className","props","position","onChangeSplit","1670","exports","$","color","make","r","g","o","add","c","charAt","normalize","scale","f","toString","join","clamp","min","max","parseInt","clone","extract","elem","css","toLowerCase","parent","nodeName","get","parse","str","res","m","exec","parseFloat","name","trim","lookupColors","aqua","azure","beige","black","blue","brown","cyan","darkblue","darkcyan","darkgrey","darkgreen","darkkhaki","darkmagenta","darkolivegreen","darkorange","darkorchid","darkred","darksalmon","darkviolet","fuchsia","gold","green","indigo","khaki","lightblue","lightcyan","lightgreen","lightgrey","lightpink","lightyellow","lime","magenta","maroon","navy","olive","orange","pink","purple","violet","red","silver","white","yellow","jQuery","Canvas","cls","container","element","children","document","direction","left","top","appendTo","getContext","window","G_vmlCanvasManager","Error","initElement","context","devicePixelRatio","backingStoreRatio","webkitBackingStorePixelRatio","mozBackingStorePixelRatio","msBackingStorePixelRatio","oBackingStorePixelRatio","backingStorePixelRatio","pixelRatio","resize","width","height","textContainer","text","_textCache","_textSizeCache","flotTextSizeCache","Plot","placeholder","data_","options_","plugins","executeHooks","hook","args","plot","concat","setData","series","parseData","fillInSeriesOptions","processData","extend","options","data","push","axisNumber","obj","coord","allAxes","grep","xaxes","yaxes","canvasToAxisCoords","pos","axis","used","c2p","undefined","x1","x","y1","y","axisToCanvasCoords","key","p2c","getOrCreateAxis","axes","number","xaxis","yaxis","neededColors","maxIndex","sc","colors","colorPool","colorPoolSize","variation","colori","lines","show","v","zero","fill","updateAxis","datamin","fakeInfinity","datamax","j","k","points","ps","val","format","topSentry","Number","POSITIVE_INFINITY","bottomSentry","NEGATIVE_INFINITY","MAX_VALUE","each","_","datapoints","hooks","processRawData","required","bars","autoscale","defaultValue","horizontal","pointsize","insertSteps","steps","nullify","isNaN","Infinity","transform","processDatapoints","xmin","ymin","xmax","ymax","delta","align","barWidth","shutdown","redrawTimeout","clearTimeout","eventHolder","unbind","onMouseMove","onMouseLeave","onClick","setTransformationHelpers","identity","it","inverseTransform","plotWidth","Math","abs","plotHeight","measureTickLabels","opts","ticks","labelWidth","labelHeight","maxWidth","floor","surface","legacyStyles","layer","font","label","info","getTextInfo","allocateAxisBoxFirstPhase","lw","lh","isXAxis","tickLength","axisMargin","grid","padding","labelMargin","eventSectionPadding","eventSectionHeight","innermost","outermost","first","found","reserveSpace","plotOffset","bottom","box","right","allocateAxisBoxSecondPhase","adjustLayoutForThingsStickingOut","minMargin","minBorderMargin","radius","lineWidth","margins","ceil","setupGrid","showGrid","margin","processOffset","borderWidth","axisOpts","setRange","processRange","allocatedAxes","snaped","setupTickGeneration","setTicks","snapRangeToTicks","drawAxisLabels","insertLegend","widen","autoscaleMargin","noTicks","sqrt","dec","log","LN10","maxDec","tickDecimals","size","magn","pow","norm","minTickSize","tickSize","scaledDecimals","mode","tickGenerator","prev","start","floorInBase","NaN","tickFormatter","factor","formatted","round","decimal","indexOf","precision","substr","isFunction","alignTicksWithAxis","otherAxis","niceTicks","extraDec","ts","test","toFixed","oticks","changed","draw","clear","drawBackground","ctx","backgroundColor","aboveData","drawGrid","drawSeries","triggerRedrawOverlay","extractRange","ranges","from","to","tmp","save","translate","fillStyle","getColorOrGradient","fillRect","restore","bw","bc","markings","getAxes","xrange","yrange","xequal","yequal","markingsLineWidth","subPixel","beginPath","strokeStyle","markingsColor","moveTo","lineTo","stroke","xoff","yoff","tickColor","borderColor","strokeRect","tick","halign","valign","removeText","addText","drawSeriesLines","drawSeriesBars","drawSeriesPoints","plotLine","xoffset","yoffset","axisx","axisy","prevx","prevy","x2","y2","lineJoin","sw","shadowSize","angle","PI","sin","cos","getFillStyle","areaOpen","ypos","segmentStart","segmentEnd","x1old","x2old","plotPoints","offset","shadow","symbol","arc","closePath","w","drawBar","barLeft","barRight","fillStyleCallback","drawLeft","drawRight","drawTop","drawBottom","filloptions","seriesColor","fillColor","legend","html","find","remove","fragments","entries","rowStarted","lf","labelFormatter","sorted","sort","reverse","ascending","entry","noColumns","labelBoxBorderColor","table","replace","backgroundOpacity","div","prependTo","findNearbyItem","mouseX","mouseY","seriesFilter","maxDistance","mouseActiveRadius","smallestDistance","item","mx","my","maxx","maxy","dx","dy","dist","datapoint","slice","dataIndex","seriesIndex","e","hoverable","triggerClickHoverEvent","isSelecting","eventname","event","canvasX","pageX","canvasY","pageY","ctrlKey","metaKey","autoHighlight","highlights","h","auto","point","unhighlight","highlight","trigger","interaction","redrawOverlayInterval","drawOverlay","setTimeout","octx","overlay","hi","drawBarHighlight","drawPointHighlight","indexOfHighlight","splice","highlightColor","pointRadius","spec","defaultColor","gradient","createLinearGradient","l","co","brightness","opacity","addColorStop","clickable","processOptions","bindEvents","getPlaceholder","getCanvas","getPlotOffset","getData","getXAxes","getYAxes","getOptions","pointOffset","destroy","removeData","empty","classes","init","axisOptions","axisCount","fontSize","fontSizeDefault","fontDefaults","style","variant","weight","family","lineHeight","x2axis","y2axis","coloredAreas","coloredAreasColor","existing","mousemove","bind","click","base","fn","detach","parentNode","removeChild","clearRect","cache","layerKey","getTextLayer","layerCache","hide","styleKey","styleCache","positions","active","rendered","append","font-size","insertAfter","addClass","textStyle","max-width","outerWidth","outerHeight","text-align","version","1673","formatDate","fmt","monthNames","dayNames","strftime","leftPad","pad","escape","hours","getHours","isAM","hours12","getDay","getMonth","getDate","getMinutes","getSeconds","getFullYear","makeUtcWrapper","addProxyMethod","sourceObj","sourceMethod","targetObj","targetMethod","utc","date","dateGenerator","timezone","Date","timezoneJS","setTimezone","setTime","axisName","minSize","specQuarters","specMonths","timeUnitSize","unit","year","step","setSeconds","setMinutes","setHours","setMonth","setFullYear","setMilliseconds","minute","hour","day","setDate","month","quarter","carry","getTime","end","timeformat","useQuarters","span","suffix","hourCode","twelveHourClock","second","baseSpec","1705","makeTimeSeriesList","dataList","map","seriesData","index","alias","target","colorIndex","__WEBPACK_IMPORTED_MODULE_2_app_core_utils_colors__","__WEBPACK_IMPORTED_MODULE_3_app_core_time_series2__","parseInitialState","initial","parsed","JSON","__WEBPACK_IMPORTED_MODULE_10_app_core_utils_location_util__","queries","q","query","range","console","error","__WEBPACK_IMPORTED_MODULE_8__TimePicker__","__WEBPACK_IMPORTED_MODULE_1_react_hot_loader__","__WEBPACK_IMPORTED_MODULE_4__ElapsedTime__","__WEBPACK_IMPORTED_MODULE_5__QueryRows__","__WEBPACK_IMPORTED_MODULE_6__Graph__","__WEBPACK_IMPORTED_MODULE_7__Table__","__WEBPACK_IMPORTED_MODULE_9__utils_query__","__awaiter","thisArg","_arguments","P","generator","Promise","resolve","reject","fulfilled","next","rejected","result","done","then","__generator","body","verb","op","TypeError","ops","pop","trys","sent","throw","return","Symbol","iterator","Explore","handleAddQueryRow","nextQueries","handleChangeQuery","nextQuery","handleChangeTime","nextRange","handleSubmit","handleClickCloseSplit","handleClickGraphButton","showingGraph","handleClickSplit","handleClickTableButton","showingTable","handleRemoveQueryRow","runTableQuery","runGraphQuery","request","url","datasource","metadataRequest","routeParams","datasourceError","datasourceLoading","graphResult","latency","loading","queryError","requestOptions","tableResult","componentDidMount","testResult","datasourceSrv","testDatasource","status","message","componentDidCatch","now","response_1","_b","interval","instant","tableModel","response_2","showingBoth","graphHeight","graphButtonActive","tableButtonActive","exploreClass","onChangeTime","time","title","onAddQueryRow","onChangeQuery","onExecuteQuery","onRemoveQueryRow","id","Component","1706","ElapsedTime","elapsed","jetzt","timer","setInterval","componentWillReceiveProps","nextProps","clearInterval","componentWillUnmount","1707","__WEBPACK_IMPORTED_MODULE_1__QueryField__","__rest","getOwnPropertySymbols","QueryRow","edited","handleClickAddButton","handleClickRemoveButton","handlePressEnter","initialQuery","onPressEnter","onQueryChange","QueryRows","handlers","1708","flattenSuggestions","reduce","acc","items","__WEBPACK_IMPORTED_MODULE_1_react_dom__","__WEBPACK_IMPORTED_MODULE_1_react_dom___default","__WEBPACK_IMPORTED_MODULE_2_slate__","__WEBPACK_IMPORTED_MODULE_3_slate_react__","__WEBPACK_IMPORTED_MODULE_4_slate_plain_serializer__","__WEBPACK_IMPORTED_MODULE_5__utils_dom__","__WEBPACK_IMPORTED_MODULE_6__slate_plugins_braces__","__WEBPACK_IMPORTED_MODULE_7__slate_plugins_clear__","__WEBPACK_IMPORTED_MODULE_8__slate_plugins_newline__","__WEBPACK_IMPORTED_MODULE_9__slate_plugins_prism_index__","__WEBPACK_IMPORTED_MODULE_10__slate_plugins_runner__","__WEBPACK_IMPORTED_MODULE_11__utils_debounce__","__WEBPACK_IMPORTED_MODULE_12__utils_prometheus__","__WEBPACK_IMPORTED_MODULE_13__Typeahead__","EMPTY_METRIC","TYPEAHEAD_DEBOUNCE","getInitialValue","fromJSON","nodes","object","type","leaves","Portal","node","classList","appendChild","createPortal","QueryField","onChange","requestAnimationFrame","handleTypeahead","onMetricsReceived","metrics","change","insertText","deleteBackward","fetch","serialize","selection","getSelection","anchorNode","wrapperNode","parentElement","editorNode","closest","isBlurred","getRangeAt","textContent","startOffset","prefix_1","suggestionGroups","wrapperClasses","typeaheadContext","metricNode","querySelector","contains","metric","labelKeys","startsWith","labelKeyNode","labelKey","labelValues","fetchMetricLabels","defaultKeys","keys","filter","fetchLabelValues","match","results_1","filteredSuggestions","group","typeaheadPrefix","typeaheadText","suggestions","onKeyDown","menuEl","typeaheadIndex","preventDefault","resetTypeahead","flattenedSuggestions","selected","selectedIndex","suggestion","applyTypeahead","handleBlur","onBlur","resetTimer","handleFocus","onFocus","handleClickMenu","updateMenu","menu","removeAttribute","rect","getBoundingClientRect","scrollY","scrollX","menuRef","el","renderMenu","selectedKeys","selectedItems","onClickItem","groupedItems","handler","fetchMetricNames","componentDidUpdate","nextChar","backward","suffixLength","midWord","forward","deleteForward","focus","pairs","values","e_1","_c","json","onRequestError","e_2","_d","error_1","autoCorrect","spellCheck","1709","getPreviousCousin","selector","sibling","previousSibling","getNextCharacter","global","Element","matches","ownerDocument","querySelectorAll","1710","BracesPlugin","isCollapsed","BRACES","move","anchorText","anchorOffset","space","length_1","[","{","(","1711","ClearPlugin","1712","getIndent","trimLeft","indent","NewlinePlugin","shiftKey","startBlock","currentLineText","splitBlock","1713","configurePrismMetricsTokens","__WEBPACK_IMPORTED_MODULE_1_prismjs___default","languages","promql","pattern","RegExp","PrismPlugin","renderMark","mark","TOKEN_MARK","decorateNode","processToken","token","types","content","startText","endText","endOffset","newlines","available","remaining","texts","shift","anchorKey","focusKey","focusOffset","marks","decorations","_i","subToken","getTexts","toArray","tstring","grammar","tokens","tokenize","tokens_1","__WEBPACK_IMPORTED_MODULE_1_prismjs__","__WEBPACK_IMPORTED_MODULE_2__promql__","1714","OPERATORS","AGGREGATION_OPERATORS","FUNCTIONS","tokenizer","comment","lookbehind","context-aggregation","inside","label-key","context-labels","label-value","greedy","function","context-range","range-duration","operator","punctuation","1715","RunnerPlugin","1716","debounce","func","wait","timeout","later","1717","processLabels","labels","forEach","rest","__name__","RATE_RANGES","cleanText","1718","scrollIntoView","offsetParent","offsetTop","scrollTop","offsetHeight","TypeaheadItem","getRef","prevProps","isSelected","ref","PureComponent","TypeaheadGroup","Typeahead","1719","time_format","secPerTick","__WEBPACK_IMPORTED_MODULE_0_jquery__","__WEBPACK_IMPORTED_MODULE_0_jquery___default","__WEBPACK_IMPORTED_MODULE_1_react__","__WEBPACK_IMPORTED_MODULE_1_react___default","__WEBPACK_IMPORTED_MODULE_2_moment__","__WEBPACK_IMPORTED_MODULE_2_moment___default","__WEBPACK_IMPORTED_MODULE_3_vendor_flot_jquery_flot__","__WEBPACK_IMPORTED_MODULE_4_vendor_flot_jquery_flot_time__","__WEBPACK_IMPORTED_MODULE_5_app_core_utils_datemath__","__WEBPACK_IMPORTED_MODULE_6__Legend__","FLOT_OPTIONS","linewidth","labelMarginX","Graph","userOptions","getFlotPairs","$el","isMoment","valueOf","dynamicOptions","1720","LegendItem","Legend","1721","EMPTY_TABLE","columns","rows","Table","col","row","1722","parseTime","isUtc","asString","epoch","__WEBPACK_IMPORTED_MODULE_1_moment___default","DATE_FORMAT","DEFAULT_RANGE","__WEBPACK_IMPORTED_MODULE_1_moment__","__WEBPACK_IMPORTED_MODULE_2_app_core_utils_datemath__","__WEBPACK_IMPORTED_MODULE_3_app_core_utils_rangeutil__","TimePicker","handleChangeFrom","fromRaw","handleChangeTo","toRaw","handleClickApply","rangeString","isOpen","handleClickLeft","handleClickPicker","handleClickRight","handleClickRefresh","handleClickRelativeOption","dropdownRef","dropdownEl","refreshInterval","timespan","getTimeOptions","renderDropdown","timeOptions","section","option","display","1723","buildQueryOptions","targets","expr","generateQueryKey","random","ensureQueries","hasQuery","some"],"mappings":"AAAAA,cAAc,IAERC,KACA,SAAUC,EAAQC,EAAqBC,GAE7C,YACAC,QAAOC,eAAeH,EAAqB,cAAgBI,OAAO,GAC7C,IAAIC,GAAsCJ,EAAoB,GAC1DK,EAA8CL,EAAoBM,EAAEF,GACpEG,EAAyCP,EAAoB,MAClFQ,EAAaC,MAAQA,KAAKD,WAAc,WACxC,GAAIE,GAAgBT,OAAOU,iBACpBC,uBAA2BC,QAAS,SAAUC,EAAGC,GAAKD,EAAEF,UAAYG,IACvE,SAAUD,EAAGC,GAAK,IAAK,GAAIC,KAAKD,GAAOA,EAAEE,eAAeD,KAAIF,EAAEE,GAAKD,EAAEC,IACzE,OAAO,UAAUF,EAAGC,GAEhB,QAASG,KAAOT,KAAKU,YAAcL,EADnCJ,EAAcI,EAAGC,GAEjBD,EAAEM,UAAkB,OAANL,EAAad,OAAOoB,OAAON,IAAMG,EAAGE,UAAYL,EAAEK,UAAW,GAAIF,QAGnFI,EAAYb,MAAQA,KAAKa,UAAarB,OAAOsB,QAAU,SAASC,GAChE,IAAK,GAAIC,GAAGC,EAAI,EAAGpB,EAAIqB,UAAUC,OAAQF,EAAIpB,EAAGoB,IAAK,CACjDD,EAAIE,UAAUD,EACd,KAAK,GAAIV,KAAKS,GAAOxB,OAAOmB,UAAUH,eAAeY,KAAKJ,EAAGT,KACzDQ,EAAER,GAAKS,EAAET,IAEjB,MAAOQ,ICtBXM,EAAA,SAAAC,GAAA,QAAAD,KAAA,GAAAE,GAAA,OAAAD,KAAAE,MAAAxB,KAAAkB,YAAAlB,IDqCQ,OCpCNuB,GAAAE,OACEC,aAAc,KACdC,OAAO,GAGTJ,EAAAK,kBAAoB,SAACD,EAAOD,GAC1BH,EAAKM,UAAWF,MAAKA,EAAED,aAAYA,KD8BxBH,ECTf,MA5BqCxB,GAAAsB,EAAAC,GAUnCD,EAAAV,UAAAmB,OAAA,WAEQ,GAAAC,GAAA/B,KAAAyB,MAAEC,EAAAK,EAAAL,aAAcC,EAAAI,EAAAJ,KACtB,OACE/B,GAAAoC,EAAAC,cAAA,OAAKC,UAAU,mBACbtC,EAAAoC,EAAAC,cAACnC,EAAA,EAAOe,KAAKb,KAAKmC,OAAOC,SAAS,OAAOC,cAAerC,KAAK4B,kBAAmBD,MAAOA,KACtFA,EACC/B,EAAAoC,EAAAC,cAACnC,EAAA,EAAOe,KACFb,KAAKmC,OACTT,aAAcA,EACdW,cAAerC,KAAK4B,kBACpBQ,SAAS,QACTT,MAAOA,KAEP,OAIZN,GA5BqC1B,EAAA,cDgDRL,GAA6B,QAAI,GAKxDgD,KACA,SAAUjD,EAAQkD,IE3BxB,SAAAC,GAAaA,EAAAC,SAAWD,EAAAC,MAAAC,KAAA,SAAAC,EAAAC,EAAAtC,EAAA0B,GAA+B,GAAAa,KAAonB,OAA3mBA,GAAAF,KAAA,EAASE,EAAAD,KAAA,EAASC,EAAAvC,KAAA,EAASuC,EAAAb,EAAA,MAAAA,IAAA,EAAgBa,EAAAC,IAAA,SAAAC,EAAA1C,GAAoB,OAAAY,GAAA,EAAYA,EAAA8B,EAAA5B,SAAWF,EAAA4B,EAAAE,EAAAC,OAAA/B,KAAAZ,CAAsB,OAAAwC,GAAAI,aAAsBJ,EAAAK,MAAA,SAAAH,EAAAI,GAAsB,OAAAlC,GAAA,EAAYA,EAAA8B,EAAA5B,SAAWF,EAAA4B,EAAAE,EAAAC,OAAA/B,KAAAkC,CAAsB,OAAAN,GAAAI,aAAsBJ,EAAAO,SAAA,WAAsB,MAAAP,GAAAb,GAAA,EAAW,QAAAa,EAAAF,EAAAE,EAAAD,EAAAC,EAAAvC,GAAA+C,KAAA,SAA8C,SAAAR,EAAAF,EAAAE,EAAAD,EAAAC,EAAAvC,EAAAuC,EAAAb,GAAAqB,KAAA,UAAgDR,EAAAI,UAAA,WAAuB,QAAAK,GAAAC,EAAA7D,EAAA8D,GAA8B,MAAA9D,GAAA6D,IAAA7D,EAAA8D,IAAA9D,EAAyJ,MAAhHmD,GAAAF,EAAAW,EAAA,EAAAG,SAAAZ,EAAAF,GAAA,KAA+BE,EAAAD,EAAAU,EAAA,EAAAG,SAAAZ,EAAAD,GAAA,KAA+BC,EAAAvC,EAAAgD,EAAA,EAAAG,SAAAZ,EAAAvC,GAAA,KAA+BuC,EAAAb,EAAAsB,EAAA,EAAAT,EAAAb,EAAA,GAAmBa,GAAUA,EAAAa,MAAA,WAAmB,MAAAlB,GAAAC,MAAAC,KAAAG,EAAAF,EAAAE,EAAAvC,EAAAuC,EAAAD,EAAAC,EAAAb,IAAsCa,EAAAI,aAAsBT,EAAAC,MAAAkB,QAAA,SAAAC,EAAAC,GAAmC,GAAAd,EAAM,IAAiC,QAA9BA,EAAAa,EAAAC,OAAAC,gBAA8B,eAAAf,EAAA,KAAiCa,KAAAG,eAAmBH,EAAAzC,SAAAqB,EAAAwB,SAAAJ,EAAAK,IAAA,WAA6F,OAAzC,oBAAAlB,MAAA,eAAyCP,EAAAC,MAAAyB,MAAAnB,IAAyBP,EAAAC,MAAAyB,MAAA,SAAAC,GAA4B,GAAAC,GAAAC,EAAA7B,EAAAC,MAAAC,IAAuB,IAAA0B,EAAA,kEAAiEE,KAAAH,GAAA,MAAAE,GAAAZ,SAAAW,EAAA,OAAAX,SAAAW,EAAA,OAAAX,SAAAW,EAAA,OAAwF,IAAAA,EAAA,+FAAkEE,KAAAH,GAAA,MAAAE,GAAAZ,SAAAW,EAAA,OAAAX,SAAAW,EAAA,OAAAX,SAAAW,EAAA,OAAAG,WAAAH,EAAA,IAAuI,IAAAA,EAAA,mGAAAE,KAAAH,GAAA,MAAAE,GAAA,KAAAE,WAAAH,EAAA,SAAAG,WAAAH,EAAA,SAAAG,WAAAH,EAAA,IAAsM,IAAAA,EAAA,gIAAAE,KAAAH,GAAA,MAAAE,GAAA,KAAAE,WAAAH,EAAA,SAAAG,WAAAH,EAAA,SAAAG,WAAAH,EAAA,IAAAG,WAAAH,EAAA,IAAsP,IAAAA,EAAA,oDAAwDE,KAAAH,GAAA,MAAAE,GAAAZ,SAAAW,EAAA,OAAAX,SAAAW,EAAA,OAAAX,SAAAW,EAAA,OAAmF,IAAAA,EAAA,2CAAAE,KAAAH,GAAA,MAAAE,GAAAZ,SAAAW,EAAA,GAAAA,EAAA,OAAAX,SAAAW,EAAA,GAAAA,EAAA,OAAAX,SAAAW,EAAA,GAAAA,EAAA,OAAuJ,IAAAI,GAAAhC,EAAAiC,KAAAN,GAAAL,aAAmC,sBAAAU,EAAAH,EAAA,gBAAoDD,EAAAM,EAAAF,KAAA,OAAgCH,EAAAD,EAAA,GAAAA,EAAA,GAAAA,EAAA,KAAiC,IAAAM,IAAkBC,MAAA,WAAAC,OAAA,aAAAC,OAAA,aAAAC,OAAA,OAAAC,MAAA,SAAAC,OAAA,WAAAC,MAAA,WAAAC,UAAA,SAAAC,UAAA,WAAAC,UAAA,aAAAC,WAAA,SAAAC,WAAA,aAAAC,aAAA,WAAAC,gBAAA,WAAAC,YAAA,WAAAC,YAAA,YAAAC,SAAA,SAAAC,YAAA,aAAAC,YAAA,WAAAC,SAAA,WAAAC,MAAA,WAAAC,OAAA,SAAAC,QAAA,UAAAC,OAAA,aAAAC,WAAA,aAAAC,WAAA,aAAAC,YAAA,aAAAC,WAAA,aAAAC,WAAA,aAAAC,aAAA,aAAAC,MAAA,SAAAC,SAAA,WAAAC,QAAA,SAAAC,MAAA,SAAAC,OAAA,WAAAC,QAAA,WAAAC,MAAA,aAAAC,QAAA,WAAAC,QAAA,WAAAC,KAAA,SAAAC,QAAA,aAAAC,OAAA,aAAAC,QAAA,aAAk2BC,QAGpjG,SAAA9E,GAgCA,QAAA+E,GAAAC,EAAAC,GAEA,GAAAC,GAAAD,EAAAE,SAAA,IAAAH,GAAA,EAEA,UAAAE,IAEAA,EAAAE,SAAA3F,cAAA,UACAyF,EAAAxF,UAAAsF,EAEAhF,EAAAkF,GAAA7D,KAAmBgE,UAAA,MAAAzF,SAAA,WAAA0F,KAAA,EAAAC,IAAA,IACnBC,SAAAP,IAIAC,EAAAO,YAAA,CACA,IAAAC,OAAAC,mBAGA,SAAAC,OAAA,wMAFAV,GAAAQ,OAAAC,mBAAAE,YAAAX,GAOA1H,KAAA0H,SAEA,IAAAY,GAAAtI,KAAAsI,QAAAZ,EAAAO,WAAA,MAUAM,EAAAL,OAAAK,kBAAA,EACAC,EACAF,EAAAG,8BACAH,EAAAI,2BACAJ,EAAAK,0BACAL,EAAAM,yBACAN,EAAAO,wBAAA,CAEA7I,MAAA8I,WAAAP,EAAAC,EAIAxI,KAAA+I,OAAAtB,EAAAuB,QAAAvB,EAAAwB,UAIAjJ,KAAAkJ,cAAA,KACAlJ,KAAAmJ,QAKAnJ,KAAAoJ,cACApJ,KAAAqJ,eAAAnB,OAAAoB,kBAAApB,OAAAoB,sBAoYA,QAAAC,GAAAC,EAAAC,EAAAC,EAAAC,GAgNA,QAAAC,GAAAC,EAAAC,GACAA,GAAAC,IAAAC,OAAAF,EACA,QAAA7I,GAAA,EAA2BA,EAAA4I,EAAA1I,SAAiBF,EAC5C4I,EAAA5I,GAAAO,MAAAxB,KAAA8J,GAoKA,QAAAG,GAAA5J,GACA6J,EAAAC,EAAA9J,GACA+J,IACAC,IAGA,QAAAF,GAAA9J,GAEA,OADA+D,MACAnD,EAAA,EAA2BA,EAAAZ,EAAAc,SAAcF,EAAA,CACzC,GAAAD,GAAAwB,EAAA8H,QAAA,KAAyCC,GAAAL,OAEzC,OAAA7J,EAAAY,GAAAuJ,MACAxJ,EAAAwJ,KAAAnK,EAAAY,GAAAuJ,WACAnK,GAAAY,GAAAuJ,KAEAhI,EAAA8H,QAAA,EAAAtJ,EAAAX,EAAAY,IAEAZ,EAAAY,GAAAuJ,KAAAxJ,EAAAwJ,MAGAxJ,EAAAwJ,KAAAnK,EAAAY,GACAmD,EAAAqG,KAAAzJ,GAGA,MAAAoD,GAGA,QAAAsG,GAAAC,EAAAC,GACA,GAAA5I,GAAA2I,EAAAC,EAAA,OAKA,OAJA,gBAAA5I,KACAA,IAAAnC,GACA,gBAAAmC,KACAA,EAAA,GACAA,EAGA,QAAA6I,KAEA,MAAArI,GAAAsI,KAAAC,GAAAf,OAAAgB,IAAA,SAAAhJ,GAA6D,MAAAA,KAG7D,QAAAiJ,GAAAC,GAEA,GAAwBjK,GAAAkK,EAAxB/G,IACA,KAAAnD,EAAA,EAAuBA,EAAA8J,GAAA5J,SAAkBF,GACzCkK,EAAAJ,GAAA9J,KACAkK,EAAAC,OACAhH,EAAA,IAAA+G,EAAAtL,GAAAsL,EAAAE,IAAAH,EAAApD,MAGA,KAAA7G,EAAA,EAAuBA,EAAA+J,GAAA7J,SAAkBF,GACzCkK,EAAAH,GAAA/J,KACAkK,EAAAC,OACAhH,EAAA,IAAA+G,EAAAtL,GAAAsL,EAAAE,IAAAH,EAAAnD,KAQA,YALAuD,KAAAlH,EAAAmH,KACAnH,EAAAoH,EAAApH,EAAAmH,QACAD,KAAAlH,EAAAqH,KACArH,EAAAsH,EAAAtH,EAAAqH,IAEArH,EAGA,QAAAuH,GAAAT,GAEA,GAAwBjK,GAAAkK,EAAAS,EAAxBxH,IAEA,KAAAnD,EAAA,EAAuBA,EAAA8J,GAAA5J,SAAkBF,EAEzC,IADAkK,EAAAJ,GAAA9J,KACAkK,EAAAC,OACAQ,EAAA,IAAAT,EAAAtL,EACA,MAAAqL,EAAAU,IAAA,GAAAT,EAAAtL,IACA+L,EAAA,KAEA,MAAAV,EAAAU,IAAA,CACAxH,EAAA0D,KAAAqD,EAAAU,IAAAX,EAAAU,GACA,OAKA,IAAA3K,EAAA,EAAuBA,EAAA+J,GAAA7J,SAAkBF,EAEzC,IADAkK,EAAAH,GAAA/J,KACAkK,EAAAC,OACAQ,EAAA,IAAAT,EAAAtL,EACA,MAAAqL,EAAAU,IAAA,GAAAT,EAAAtL,IACA+L,EAAA,KAEA,MAAAV,EAAAU,IAAA,CACAxH,EAAA2D,IAAAoD,EAAAU,IAAAX,EAAAU,GACA,OAKA,MAAAxH,GAGA,QAAA0H,GAAAC,EAAAC,GAQA,MAPAD,GAAAC,EAAA,KACAD,EAAAC,EAAA,IACAnM,EAAAmM,EACAnE,UAAAkE,GAAAhB,GAAA,QACAR,QAAA/H,EAAA8H,QAAA,KAA8CyB,GAAAhB,GAAAR,GAAA0B,MAAA1B,GAAA2B,SAG9CH,EAAAC,EAAA,GAGA,QAAA5B,KAEA,GAAAnJ,GAAAkL,EAAAjC,EAAA/I,OAAAiL,GAAA,CAKA,KAAAnL,EAAA,EAAuBA,EAAAiJ,EAAA/I,SAAmBF,EAAA,CAC1C,GAAAoL,GAAAnC,EAAAjJ,GAAAwB,KACA,OAAA4J,IACAF,IACA,gBAAAE,MAAAD,IACAA,EAAAC,IAQAF,GAAAC,IACAD,EAAAC,EAAA,EAMA,IAAArJ,GAAAuJ,KAAAC,EAAAhC,GAAA+B,OACAE,EAAAD,EAAApL,OAAAsL,EAAA,CAEA,KAAAxL,EAAA,EAAuBA,EAAAkL,EAAkBlL,IAEzC8B,EAAAP,EAAAC,MAAAyB,MAAAqI,EAAAtL,EAAAuL,IAAA,QAUAvL,EAAAuL,GAAA,GAAAvL,IAGAwL,EAFAA,GAAA,EACAA,EAAA,IACAA,EAAA,GACyB,GACJA,GAGrBH,EAAArL,GAAA8B,EAAAG,MAAA,QAAAuJ,EAKA,IAAAzL,GAAA0L,EAAA,CACA,KAAAzL,EAAA,EAAuBA,EAAAiJ,EAAA/I,SAAmBF,EAAA,CAY1C,GAXAD,EAAAkJ,EAAAjJ,GAGA,MAAAD,EAAAyB,OACAzB,EAAAyB,MAAA6J,EAAAI,GAAAtJ,aACAsJ,GAEA,gBAAA1L,GAAAyB,QACAzB,EAAAyB,MAAA6J,EAAAtL,EAAAyB,OAAAW,YAGA,MAAApC,EAAA2L,MAAAC,KAAA,CACA,GAAAC,GAAAD,GAAA,CACA,KAAAC,IAAA7L,GACA,GAAAA,EAAA6L,IAAA7L,EAAA6L,GAAAD,KAAA,CACAA,GAAA,CACA,OAEAA,IACA5L,EAAA2L,MAAAC,MAAA,GAMA,MAAA5L,EAAA2L,MAAAG,OACA9L,EAAA2L,MAAAG,OAAA9L,EAAA2L,MAAAI,MAIA/L,EAAAiL,MAAAH,EAAAf,GAAAL,EAAA1J,EAAA,MACAA,EAAAkL,MAAAJ,EAAAd,GAAAN,EAAA1J,EAAA,OAIA,QAAAqJ,KAQA,QAAA2C,GAAA7B,EAAA5H,EAAAC,GACAD,EAAA4H,EAAA8B,SAAA1J,IAAA2J,IACA/B,EAAA8B,QAAA1J,GACAC,EAAA2H,EAAAgC,SAAA3J,GAAA0J,IACA/B,EAAAgC,QAAA3J,GAXA,GAGAvC,GAAAmM,EAAAC,EAAAhJ,EACArD,EAAAsM,EAAAC,EAAAC,EAAArK,EAAA5C,EACAiK,EAAAiD,EALAC,EAAAC,OAAAC,kBACAC,EAAAF,OAAAG,kBACAZ,EAAAS,OAAAI,SAmBA,KAPAvL,EAAAwL,KAAAnD,IAAA,SAAAoD,EAAA9C,GAEAA,EAAA8B,QAAAS,EACAvC,EAAAgC,QAAAU,EACA1C,EAAAC,MAAA,IAGAnK,EAAA,EAAuBA,EAAAiJ,EAAA/I,SAAmBF,EAC1CD,EAAAkJ,EAAAjJ,GACAD,EAAAkN,YAAgCZ,WAEhC1D,EAAAuE,GAAAC,gBAAApN,IAAAwJ,KAAAxJ,EAAAkN,YAIA,KAAAjN,EAAA,EAAuBA,EAAAiJ,EAAA/I,SAAmBF,EAAA,CAM1C,GALAD,EAAAkJ,EAAAjJ,GAEAuJ,EAAAxJ,EAAAwJ,OACAiD,EAAAzM,EAAAkN,WAAAT,QAEA,CAMA,GALAA,KAEAA,EAAAhD,MAAiCe,GAAA,EAAAQ,QAAA,EAAAqC,UAAA,IACjCZ,EAAAhD,MAAiCiB,GAAA,EAAAM,QAAA,EAAAqC,UAAA,IAEjCrN,EAAAsN,KAAA1B,MAAA5L,EAAA2L,MAAAC,MAAA5L,EAAA2L,MAAAI,KAAA,CACA,GAAAwB,MAAAvN,EAAAsN,KAAA1B,MAAA5L,EAAAsN,KAAAxB,MAAA9L,EAAA2L,MAAAC,MAAA5L,EAAA2L,MAAAG,KACAW,GAAAhD,MAAqCiB,GAAA,EAAAM,QAAA,EAAAqC,UAAA,EAAAG,aAAA,EAAAD,cACrCvN,EAAAsN,KAAAG,mBACAhB,KAAAtM,OAAA,GAAAuK,EACA+B,IAAAtM,OAAA,GAAAqK,GAAA,GAIAxK,EAAAkN,WAAAT,SAGA,SAAAzM,EAAAkN,WAAAQ,UAAA,CAGA1N,EAAAkN,WAAAQ,UAAAjB,EAAAtM,OAEAoM,EAAAvM,EAAAkN,WAAAQ,UACApB,EAAAtM,EAAAkN,WAAAZ,MAEA,IAAAqB,GAAA3N,EAAA2L,MAAAC,MAAA5L,EAAA2L,MAAAiC,KAGA,KAFA5N,EAAAiL,MAAAb,KAAApK,EAAAkL,MAAAd,MAAA,EAEAgC,EAAAC,EAAA,EAA+BD,EAAA5C,EAAArJ,SAAiBiM,EAAAC,GAAAE,EAAA,CAChDhN,EAAAiK,EAAA4C,EAEA,IAAAyB,GAAA,MAAAtO,CACA,KAAAsO,EACA,IAAAxK,EAAA,EAAmCA,EAAAkJ,IAAQlJ,EAC3CmJ,EAAAjN,EAAA8D,GACAlB,EAAAsK,EAAApJ,GAEAlB,IACAA,EAAA6I,QAAA,MAAAwB,IACAA,KACAsB,MAAAtB,GACAA,EAAA,KACAA,GAAAuB,IACAvB,EAAAN,EACAM,IAAAuB,MACAvB,GAAAN,IAGA,MAAAM,IACArK,EAAAkL,WACAQ,GAAA,GAEA,MAAA1L,EAAAqL,eACAhB,EAAArK,EAAAqL,gBAIAlB,EAAAD,EAAAhJ,GAAAmJ,CAIA,IAAAqB,EACA,IAAAxK,EAAA,EAAmCA,EAAAkJ,IAAQlJ,EAC3CmJ,EAAAF,EAAAD,EAAAhJ,GACA,MAAAmJ,IACArK,EAAAsK,EAAApJ,IAEA,IAAAlB,EAAAoL,YACApL,EAAAqI,GACAwB,EAAAhM,EAAAiL,MAAAuB,KAEArK,EAAAuI,GACAsB,EAAAhM,EAAAkL,MAAAsB,OAIAF,EAAAD,EAAAhJ,GAAA,IAIA,IAAAsK,GAAAtB,EAAA,KAAAwB,GAAA,MAAAvB,EAAAD,EAAAE,IAAA,CAEA,IAAAlJ,EAAA,EAAmCA,EAAAkJ,IAAQlJ,EAC3CiJ,EAAAD,EAAAE,EAAAlJ,GAAAiJ,EAAAD,EAAAhJ,EAGAiJ,GAAAD,EAAA,GAAAC,EAAAD,EAAAE,EAAA,MAGAsB,IACAvB,EAAAD,GAAA9M,EAAA,IAGA8M,GAAAE,KAMA,IAAAtM,EAAA,EAAuBA,EAAAiJ,EAAA/I,SAAmBF,EAAA,CAM1C,GALAD,EAAAkJ,EAAAjJ,GACAqM,EAAAtM,EAAAkN,WAAAZ,OACAC,EAAAvM,EAAAkN,WAAAQ,UAGA,eAAA1N,EAAAgO,UACA,IAAA5B,EAAA,EAA6BA,EAAAE,EAAAnM,OAAmBiM,GAAAG,EAChD,MAAAD,EAAAF,KAGAI,EAAAF,EAAAF,EAAA,GACAE,EAAAF,EAAA,IAAAI,EAIA5D,GAAAuE,GAAAc,mBAAAjO,IAAAkN,aAIA,IAAAjN,EAAA,EAAuBA,EAAAiJ,EAAA/I,SAAmBF,EAAA,CAC1CD,EAAAkJ,EAAAjJ,GACAqM,EAAAtM,EAAAkN,WAAAZ,OACAC,EAAAvM,EAAAkN,WAAAQ,UACAjB,EAAAzM,EAAAkN,WAAAT,MAEA,IAAAyB,GAAAxB,EAAAyB,EAAAzB,EACA0B,EAAAvB,EAAAwB,EAAAxB,CAEA,KAAAT,EAAA,EAA2BA,EAAAE,EAAAnM,OAAmBiM,GAAAG,EAC9C,SAAAD,EAAAF,GAGA,IAAA/I,EAAA,EAA+BA,EAAAkJ,IAAQlJ,EACvCmJ,EAAAF,EAAAF,EAAA/I,IACAlB,EAAAsK,EAAApJ,MACA,IAAAlB,EAAAoL,WAAAf,GAAAN,GAAAM,IAAAN,IAGA/J,EAAAqI,IACAgC,EAAA0B,IACAA,EAAA1B,GACAA,EAAA4B,IACAA,EAAA5B,IAEArK,EAAAuI,IACA8B,EAAA2B,IACAA,EAAA3B,GACAA,EAAA6B,IACAA,EAAA7B,IAKA,IAAAxM,EAAAsN,KAAA1B,KAAA,CAEA,GAAA0C,EAEA,QAAAtO,EAAAsN,KAAAiB,OACA,WACAD,EAAA,CACA,MACA,aACAA,GAAAtO,EAAAsN,KAAAkB,QACA,MACA,SACAF,GAAAtO,EAAAsN,KAAAkB,SAAA,EAGAxO,EAAAsN,KAAAG,YACAU,GAAAG,EACAD,GAAAC,EAAAtO,EAAAsN,KAAAkB,WAGAN,GAAAI,EACAF,GAAAE,EAAAtO,EAAAsN,KAAAkB,UAIAxC,EAAAhM,EAAAiL,MAAAiD,EAAAE,GACApC,EAAAhM,EAAAkL,MAAAiD,EAAAE,GAGA7M,EAAAwL,KAAAnD,IAAA,SAAAoD,EAAA9C,GACAA,EAAA8B,SAAAS,IACAvC,EAAA8B,QAAA,MACA9B,EAAAgC,SAAAU,IACA1C,EAAAgC,QAAA,QAuDA,QAAAsC,KACAC,IACAC,aAAAD,IAEAE,GAAAC,OAAA,YAAAC,GACAF,GAAAC,OAAA,aAAAE,GACAH,GAAAC,OAAA,QAAAG,GAEApG,EAAAuE,GAAAsB,UAAAG,KAGA,QAAAK,GAAA9E,GAIA,QAAA+E,GAAA1E,GAAkC,MAAAA,GAElC,GAAAxK,GAAAqD,EAAAtD,EAAAoK,EAAAZ,QAAAyE,WAAAkB,EACAC,EAAAhF,EAAAZ,QAAA6F,gBAIA,MAAAjF,EAAAtD,WACA7G,EAAAmK,EAAAjI,MAAAmN,GAAAC,KAAAC,IAAAxP,EAAAoK,EAAA3H,KAAAzC,EAAAoK,EAAA5H,MACAc,EAAAiM,KAAA/M,IAAAxC,EAAAoK,EAAA3H,KAAAzC,EAAAoK,EAAA5H,QAGAvC,EAAAmK,EAAAjI,MAAAsN,GAAAF,KAAAC,IAAAxP,EAAAoK,EAAA3H,KAAAzC,EAAAoK,EAAA5H,MACAvC,KACAqD,EAAAiM,KAAA9M,IAAAzC,EAAAoK,EAAA3H,KAAAzC,EAAAoK,EAAA5H,OAKA4H,EAAAU,IADA9K,GAAAmP,EACA,SAAA3P,GAAyC,OAAAA,EAAA8D,GAAArD,GAEzC,SAAAT,GAAyC,OAAAQ,EAAAR,GAAA8D,GAAArD,GAKzCmK,EAAAE,IAHA8E,EAGA,SAAApN,GAAyC,MAAAoN,GAAA9L,EAAAtB,EAAA/B,IAFzC,SAAA+B,GAAyC,MAAAsB,GAAAtB,EAAA/B,GAKzC,QAAAyP,GAAAtF,GAWA,OATAuF,GAAAvF,EAAAZ,QACAoG,EAAAxF,EAAAwF,UACAC,EAAAF,EAAAE,YAAA,EACAC,EAAAH,EAAAG,aAAA,EACAC,EAAAF,IAAA,KAAAzF,EAAAtD,UAAAyI,KAAAS,MAAAC,GAAAhI,OAAA2H,EAAAxP,QAAA,UACA8P,EAAA9F,EAAAtD,UAAA,QAAAsD,EAAAtD,UAAAsD,EAAAtL,EAAA,OACAqR,EAAA,QAAA/F,EAAAtD,UAAA,cAAAsD,EAAAtD,UAAAsD,EAAAtL,EAAA,SAAAoR,EACAE,EAAAT,EAAAS,MAAA,4BAEAlQ,EAAA,EAA2BA,EAAA0P,EAAAxP,SAAkBF,EAAA,CAE7C,GAAAF,GAAA4P,EAAA1P,EAEA,IAAAF,EAAAqQ,MAAA,CAGA,GAAAC,GAAAL,GAAAM,YAAAJ,EAAAnQ,EAAAqQ,MAAAD,EAAA,KAAAL,EAGAF,GAAAN,KAAA9M,IAAAoN,EAAAS,EAAArI,MAAA,GACA6H,EAAAP,KAAA9M,IAAAqN,EAAAQ,EAAApI,SAGAkC,EAAAyF,WAAAF,EAAAE,cACAzF,EAAA0F,YAAAH,EAAAG,eAGA,QAAAU,GAAApG,GAOA,GAAAqG,GAAArG,EAAAyF,WACAa,EAAAtG,EAAA0F,YACA3F,EAAAC,EAAAZ,QAAAnI,SACAsP,EAAA,MAAAvG,EAAAtD,UACA8J,EAAAxG,EAAAZ,QAAAoH,WACAC,EAAArH,GAAAsH,KAAAD,WACAE,EAAAvH,GAAAsH,KAAAE,YACAC,EAAAzH,GAAAsH,KAAAI,mBACAC,GAAA,EACAC,GAAA,EACAC,GAAA,EACAC,GAAA,CAIA7P,GAAAwL,KAAA0D,EAAA3G,GAAAC,GAAA,SAAA/J,EAAAe,GACAA,MAAA4K,MAAA5K,EAAAsQ,gBACAtQ,IAAAmJ,EACAkH,GAAA,EACqBrQ,EAAAuI,QAAAnI,WAAA8I,IACrBmH,EACAF,GAAA,EAEAD,GAAA,GAGAG,IACAD,GAAA,MAOAD,IACAP,EAAA,GAKA,MAAAD,IACAA,EAAAS,EAAA,UAGAtD,OAAA6C,KACAG,IAAAH,GAEAD,GAEAD,GAAAK,EACAL,GAAAO,EAEA,UAAA9G,GACAqH,GAAAC,QAAAf,EAAAG,EACAzG,EAAAsH,KAAgC1K,IAAAiJ,GAAA/H,OAAAsJ,GAAAC,OAAAvJ,OAAAwI,KAGhCtG,EAAAsH,KAAgC1K,IAAAwK,GAAAxK,IAAA6J,EAAA3I,OAAAwI,GAChCc,GAAAxK,KAAA0J,EAAAG,KAIAJ,GAAAM,EAEA,QAAA5G,GACAC,EAAAsH,KAAgC3K,KAAAyK,GAAAzK,KAAA8J,EAAA5I,MAAAwI,GAChCe,GAAAzK,MAAA0J,EAAAI,IAGAW,GAAAG,OAAAlB,EAAAI,EACAzG,EAAAsH,KAAgC3K,KAAAkJ,GAAAhI,MAAAuJ,GAAAG,MAAA1J,MAAAwI,KAKhCrG,EAAA/I,SAAA8I,EACAC,EAAAwG,aACAxG,EAAAsH,IAAAX,UACA3G,EAAAsH,IAAAT,sBACA7G,EAAA+G,YAGA,QAAAS,GAAAxH,GAGA,KAAAA,EAAAtD,WACAsD,EAAAsH,IAAA3K,KAAAyK,GAAAzK,KAAAqD,EAAAyF,WAAA,EACAzF,EAAAsH,IAAAzJ,MAAAgI,GAAAhI,MAAAuJ,GAAAzK,KAAAyK,GAAAG,MAAAvH,EAAAyF,aAGAzF,EAAAsH,IAAA1K,IAAAwK,GAAAxK,IAAAoD,EAAA0F,YAAA,EACA1F,EAAAsH,IAAAxJ,OAAA+H,GAAA/H,OAAAsJ,GAAAC,OAAAD,GAAAxK,IAAAoD,EAAA0F,aAIA,QAAA+B,KAIA,GACA3R,GADA4R,EAAAtI,GAAAsH,KAAAiB,eAMA,UAAAD,EAEA,IADAA,EAAA,EACA5R,EAAA,EAA2BA,EAAAiJ,EAAA/I,SAAmBF,EAC9C4R,EAAAvC,KAAA9M,IAAAqP,EAAA,GAAA3I,EAAAjJ,GAAAqM,OAAAyF,OAAA7I,EAAAjJ,GAAAqM,OAAA0F,UAAA,GAGA,IAAAC,IACAnL,KAAA+K,EACAH,MAAAG,EACA9K,IAAA8K,EACAL,OAAAK,EAMArQ,GAAAwL,KAAAnD,IAAA,SAAAoD,EAAA9C,GACAA,EAAAmH,cAAAnH,EAAAwF,OAAAxF,EAAAwF,MAAAxP,SACA,MAAAgK,EAAAtD,WACAoL,EAAAnL,KAAAwI,KAAA9M,IAAAyP,EAAAnL,KAAAqD,EAAAyF,WAAA,GACAqC,EAAAP,MAAApC,KAAA9M,IAAAyP,EAAAP,MAAAvH,EAAAyF,WAAA,KAEAqC,EAAAT,OAAAlC,KAAA9M,IAAAyP,EAAAT,OAAArH,EAAA0F,YAAA,GACAoC,EAAAlL,IAAAuI,KAAA9M,IAAAyP,EAAAlL,IAAAoD,EAAA0F,YAAA,OAKA0B,GAAAzK,KAAAwI,KAAA4C,KAAA5C,KAAA9M,IAAAyP,EAAAnL,KAAAyK,GAAAzK,OACAyK,GAAAG,MAAApC,KAAA4C,KAAA5C,KAAA9M,IAAAyP,EAAAP,MAAAH,GAAAG,QACAH,GAAAxK,IAAAuI,KAAA4C,KAAA5C,KAAA9M,IAAAyP,EAAAlL,IAAAwK,GAAAxK,MACAwK,GAAAC,OAAAlC,KAAA4C,KAAA5C,KAAA9M,IAAAyP,EAAAT,OAAAD,GAAAC,SAGA,QAAAW,KACA,GAAAlS,GAAA8K,EAAAlB,IAAAuI,EAAA7I,GAAAsH,KAAAjF,IAIA,QAAA5K,KAAAuQ,IAAA,CACA,GAAAc,GAAA9I,GAAAsH,KAAAwB,QAAA,CACAd,IAAAvQ,GAAA,gBAAAqR,OAAArR,IAAA,EAGA4H,EAAAuE,GAAAmF,eAAAf,IAIA,QAAAvQ,KAAAuQ,IACA,gBAAAhI,IAAAsH,KAAA,YACAU,GAAAvQ,IAAAoR,EAAA7I,GAAAsH,KAAA0B,YAAAvR,GAAA,EAGAuQ,GAAAvQ,IAAAoR,EAAA7I,GAAAsH,KAAA0B,YAAA,CAaA,IATA/Q,EAAAwL,KAAAjC,EAAA,SAAAkC,EAAA9C,GACA,GAAAqI,GAAArI,EAAAZ,OACAY,GAAAyB,KAAA,MAAA4G,EAAA5G,KAAAzB,EAAAC,KAAAoI,EAAA5G,KACAzB,EAAAmH,aAAA,MAAAkB,EAAAlB,aAAAnH,EAAAyB,KAAA4G,EAAAlB,aACAmB,EAAAtI,KAGAvB,EAAAuE,GAAAuF,iBAEAN,EAAA,CAOA,OALAO,GAAAnR,EAAAsI,KAAAiB,EAAA,SAAAZ,GACA,MAAAA,GAAAyB,MAAAzB,EAAAmH,eAGAsB,GAAA,EACA3S,EAAA,EAA+BA,EAAA,IAC/BuB,EAAAwL,KAAA2F,EAAA,SAAA1F,EAAA9C,GAEA0I,EAAA1I,GACA2I,EAAA3I,GACAyI,EAAAG,EAAA5I,IAAAwF,QAAAiD,EAEAnD,EAAAtF,KAGAyI,GAAAzF,GAAAuF,aAAAvS,OAAA,GAVsCF,IAWtC2I,EAAAuE,GAAAuF,iBACAE,GAAA,CASA,KAAA3S,EAAA0S,EAAAxS,OAAA,EAAkDF,GAAA,IAAQA,EAC1DsQ,EAAAoC,EAAA1S,GAIA2R,KAEApQ,EAAAwL,KAAA2F,EAAA,SAAA1F,EAAA9C,GACAwH,EAAAxH,KAKAkF,GAAAW,GAAAhI,MAAAuJ,GAAAzK,KAAAyK,GAAAG,MACAlC,GAAAQ,GAAA/H,OAAAsJ,GAAAC,OAAAD,GAAAxK,IAGAvF,EAAAwL,KAAAjC,EAAA,SAAAkC,EAAA9C,GACA8E,EAAA9E,KAGAiI,GACAY,IAGAC,IAGA,QAAAR,GAAAtI,GACA,GAAAuF,GAAAvF,EAAAZ,QACAhH,IAAA,MAAAmN,EAAAnN,IAAAmN,EAAAnN,IAAA4H,EAAA8B,SACAzJ,IAAA,MAAAkN,EAAAlN,IAAAkN,EAAAlN,IAAA2H,EAAAgC,SACAmC,EAAA9L,EAAAD,CAEA,OAAA+L,EAAA,CAGA,GACA4E,GAAA5D,KAAAC,IAAA,GAAA/M,EAAA,EADA,IACAA,EAEA,OAAAkN,EAAAnN,MACAA,GAAA2Q,GAIA,MAAAxD,EAAAlN,KAAA,MAAAkN,EAAAnN,MACAC,GAAA0Q,OAGA,CAEA,GAAAb,GAAA3C,EAAAyD,eACA,OAAAd,IACA,MAAA3C,EAAAnN,MACAA,GAAA+L,EAAA+D,GAGA,SAAAlI,EAAA8B,SAAA9B,EAAA8B,SAAA,IACA1J,EAAA,GAEA,MAAAmN,EAAAlN,MACAA,GAAA8L,EAAA+D,GACA,SAAAlI,EAAAgC,SAAAhC,EAAAgC,SAAA,IACA3J,EAAA,IAIA2H,EAAA5H,MACA4H,EAAA3H,MAGA,QAAAqQ,GAAA1I,GACA,GAGAiJ,GAHA1D,EAAAvF,EAAAZ,OAKA6J,GADA,gBAAA1D,GAAAC,OAAAD,EAAAC,MAAA,EACAD,EAAAC,MAIA,GAAAL,KAAA+D,KAAA,KAAAlJ,EAAAtD,UAAAmJ,GAAAhI,MAAAgI,GAAA/H,OAEA,IAAAqG,IAAAnE,EAAA3H,IAAA2H,EAAA5H,KAAA6Q,EACAE,GAAAhE,KAAAS,MAAAT,KAAAiE,IAAAjF,GAAAgB,KAAAkE,MACAC,EAAA/D,EAAAgE,YAEA,OAAAD,GAAAH,EAAAG,IACAH,EAAAG,EAGA,IAEAE,GAFAC,EAAAtE,KAAAuE,IAAA,IAAAP,GACAQ,EAAAxF,EAAAsF,CAiCA,IA9BAE,EAAA,IACAH,EAAA,EACaG,EAAA,GACbH,EAAA,EAEAG,EAAA,aAAAL,GAAAH,EAAA,GAAAG,KACAE,EAAA,MACAL,IAGAK,EADaG,EAAA,IACb,EAEA,GAGAH,GAAAC,EAEA,MAAAlE,EAAAqE,aAAAJ,EAAAjE,EAAAqE,cACAJ,EAAAjE,EAAAqE,aAGA5J,EAAAmE,QACAnE,EAAAuJ,aAAApE,KAAA9M,IAAA,QAAAiR,IAAAH,GACAnJ,EAAA6J,SAAAtE,EAAAsE,UAAAL,EAEAxJ,EAAA8J,eAAA9J,EAAAuJ,aAAApE,KAAAS,MAAAT,KAAAiE,IAAApJ,EAAA6J,UAAA1E,KAAAkE,MAKA,QAAA9D,EAAAwE,OAAA/J,EAAAgK,cACA,SAAA/M,OAAA,2CAgDA,IA1CA+C,EAAAgK,gBAEAhK,EAAAgK,cAAA,SAAAhK,GAEA,GAIAiK,GAJAzE,KACA0E,EAAAC,EAAAnK,EAAA5H,IAAA4H,EAAA6J,UACA/T,EAAA,EACA4L,EAAAc,OAAA4H,GAGA,IACAH,EAAAvI,EACAA,EAAAwI,EAAApU,EAAAkK,EAAA6J,SACArE,EAAAlG,KAAAoC,KACA5L,QACqB4L,EAAA1B,EAAA3H,KAAAqJ,GAAAuI,EACrB,OAAAzE,IAGAxF,EAAAqK,cAAA,SAAA9V,EAAAyL,GAEA,GAAAsK,GAAAtK,EAAAuJ,aAAApE,KAAAuE,IAAA,GAAA1J,EAAAuJ,cAAA,EACAgB,EAAA,GAAApF,KAAAqF,MAAAjW,EAAA+V,IAKA,UAAAtK,EAAAuJ,aAAA,CACA,GAAAkB,GAAAF,EAAAG,QAAA,KACAC,GAAA,GAAAF,EAAA,EAAAF,EAAAvU,OAAAyU,EAAA,CACA,IAAAE,EAAA3K,EAAAuJ,aACA,OAAAoB,EAAAJ,IAAA,SAAAD,GAAAM,OAAA,EAAA5K,EAAAuJ,aAAAoB,GAIA,MAAAJ,KAIAlT,EAAAwT,WAAAtF,EAAA8E,iBACArK,EAAAqK,cAAA,SAAA3I,EAAA1B,GAAyD,SAAAuF,EAAA8E,cAAA3I,EAAA1B,KAEzD,MAAAuF,EAAAuF,mBAAA,CACA,GAAAC,IAAA,KAAA/K,EAAAtD,UAAAkD,GAAAC,IAAA0F,EAAAuF,mBAAA,EACA,IAAAC,KAAA9K,MAAA8K,GAAA/K,EAAA,CAEA,GAAAgL,GAAAhL,EAAAgK,cAAAhK,EAqBA,IApBAgL,EAAAhV,OAAA,IACA,MAAAuP,EAAAnN,MACA4H,EAAA5H,IAAA+M,KAAA/M,IAAA4H,EAAA5H,IAAA4S,EAAA,KACA,MAAAzF,EAAAlN,KAAA2S,EAAAhV,OAAA,IACAgK,EAAA3H,IAAA8M,KAAA9M,IAAA2H,EAAA3H,IAAA2S,IAAAhV,OAAA,MAGAgK,EAAAgK,cAAA,SAAAhK,GAEA,GAAA0B,GAAA5L,EAAA0P,IACA,KAAA1P,EAAA,EAAmCA,EAAAiV,EAAAvF,MAAAxP,SAA4BF,EAC/D4L,GAAAqJ,EAAAvF,MAAA1P,GAAA4L,EAAAqJ,EAAA3S,MAAA2S,EAAA1S,IAAA0S,EAAA3S,KACAsJ,EAAA1B,EAAA5H,IAAAsJ,GAAA1B,EAAA3H,IAAA2H,EAAA5H,KACAoN,EAAAlG,KAAAoC,EAEA,OAAA8D,KAKAxF,EAAA+J,MAAA,MAAAxE,EAAAgE,aAAA,CACA,GAAA0B,GAAA9F,KAAA9M,IAAA,IAAA8M,KAAAS,MAAAT,KAAAiE,IAAApJ,EAAAmE,OAAAgB,KAAAkE,OACA6B,EAAAlL,EAAAgK,cAAAhK,EAKAkL,GAAAlV,OAAA,YAAAmV,MAAAD,EAAA,GAAAA,EAAA,IAAAE,QAAAH,MACAjL,EAAAuJ,aAAA0B,MAMA,QAAAtC,GAAA3I,GACA,GAAAqL,GAAArL,EAAAZ,QAAAoG,UACA,OAAA6F,GAAA,gBAAAA,MAAA,EACA7F,EAAAxF,EAAAgK,cAAAhK,GACAqL,IAGA7F,EAFAnO,EAAAwT,WAAAQ,GAEAA,EAAArL,GAEAqL,EAIA,IAAAvV,GAAA4L,CAEA,KADA1B,EAAAwF,SACA1P,EAAA,EAAuBA,EAAA0P,EAAAxP,SAAkBF,EAAA,CACzC,GAAAmQ,GAAA,KACArQ,EAAA4P,EAAA1P,EACA,iBAAAF,IACA8L,GAAA9L,EAAA,GACAA,EAAAI,OAAA,IACAiQ,EAAArQ,EAAA,KAGA8L,GAAA9L,EACA,MAAAqQ,IACAA,EAAAjG,EAAAqK,cAAA3I,EAAA1B,IACA2D,MAAAjC,IACA1B,EAAAwF,MAAAlG,MAAqCoC,IAAAuE,WAIrC,QAAA2C,GAAA5I,EAAAwF,GACA,GAAA8F,IAAA,CAYA,OAXAtL,GAAAZ,QAAA4J,iBAAAxD,EAAAxP,OAAA,IAEA,MAAAgK,EAAAZ,QAAAhH,MACA4H,EAAA5H,IAAA+M,KAAA/M,IAAA4H,EAAA5H,IAAAoN,EAAA,GAAA9D,GACA4J,GAAA,GAEA,MAAAtL,EAAAZ,QAAA/G,KAAAmN,EAAAxP,OAAA,IACAgK,EAAA3H,IAAA8M,KAAA9M,IAAA2H,EAAA3H,IAAAmN,IAAAxP,OAAA,GAAA0L,GACA4J,GAAA,IAGAA,EAGA,QAAAC,KAEA1F,GAAA2F,QAEA/M,EAAAuE,GAAAyI,gBAAAC,IAEA,IAAAhF,GAAAtH,GAAAsH,IAGAA,GAAAjF,MAAAiF,EAAAiF,iBACAF,IAEA/E,EAAAjF,OAAAiF,EAAAkF,WACAC,GAGA,QAAA/V,GAAA,EAA2BA,EAAAiJ,EAAA/I,SAAmBF,EAC9C2I,EAAAuE,GAAA8I,YAAAJ,GAAA3M,EAAAjJ,KACAgW,EAAA/M,EAAAjJ,GAGA2I,GAAAuE,GAAAuI,MAAAG,KAEAhF,EAAAjF,MAAAiF,EAAAkF,WACAC,IAGAhG,GAAAlP,SAKAoV,IAGA,QAAAC,GAAAC,EAAAxM,GAGA,OAFAO,GAAAkM,EAAAC,EAAA1L,EAAAG,EAAAlB,IAEA5J,EAAA,EAA2BA,EAAA8K,EAAA5K,SAAiBF,EAE5C,GADAkK,EAAAY,EAAA9K,GACAkK,EAAAtD,WAAA+C,IACAgB,EAAAhB,EAAAO,EAAAtL,EAAA,OACAuX,EAAAxL,IAAA,GAAAT,EAAAtL,IACA+L,EAAAhB,EAAA,QACAwM,EAAAxL,IAAA,CACAyL,EAAAD,EAAAxL,GAAAyL,KACAC,EAAAF,EAAAxL,GAAA0L,EACA,OAaA,GAPAF,EAAAxL,KACAT,EAAA,KAAAP,EAAAG,GAAA,GAAAC,GAAA,GACAqM,EAAAD,EAAAxM,EAAA,KACA0M,EAAAF,EAAAxM,EAAA,MAIA,MAAAyM,GAAA,MAAAC,GAAAD,EAAAC,EAAA,CACA,GAAAC,GAAAF,CACAA,GAAAC,EACAA,EAAAC,EAGA,OAAoBF,OAAAC,KAAAnM,QAGpB,QAAAyL,KACAC,GAAAW,OACAX,GAAAY,UAAAlF,GAAAzK,KAAAyK,GAAAxK,KAEA8O,GAAAa,UAAAC,EAAApN,GAAAsH,KAAAiF,gBAAAtG,GAAA,4BACAqG,GAAAe,SAAA,IAAAvH,GAAAG,IACAqG,GAAAgB,UAGA,QAAAb,KACA,GAAA/V,GAAA8K,EAAA+L,EAAAC,CAEAlB,IAAAW,OACAX,GAAAY,UAAAlF,GAAAzK,KAAAyK,GAAAxK,IAGA,IAAAiQ,GAAAzN,GAAAsH,KAAAmG,QACA,IAAAA,EAaA,IAZAxV,EAAAwT,WAAAgC,KACAjM,EAAAhC,GAAAkO,UAGAlM,EAAAmD,KAAAnD,EAAAE,MAAA1I,IACAwI,EAAAqD,KAAArD,EAAAE,MAAAzI,IACAuI,EAAAoD,KAAApD,EAAAG,MAAA3I,IACAwI,EAAAsD,KAAAtD,EAAAG,MAAA1I,IAEAwU,IAAAjM,IAGA9K,EAAA,EAA2BA,EAAA+W,EAAA7W,SAAqBF,EAAA,CAChD,GAAAoD,GAAA2T,EAAA/W,GACAiX,EAAAf,EAAA9S,EAAA,KACA8T,EAAAhB,EAAA9S,EAAA,IAaA,IAVA,MAAA6T,EAAAb,OACAa,EAAAb,KAAAa,EAAA/M,KAAA5H,KACA,MAAA2U,EAAAZ,KACAY,EAAAZ,GAAAY,EAAA/M,KAAA3H,KACA,MAAA2U,EAAAd,OACAc,EAAAd,KAAAc,EAAAhN,KAAA5H,KACA,MAAA4U,EAAAb,KACAa,EAAAb,GAAAa,EAAAhN,KAAA3H,OAGA0U,EAAAZ,GAAAY,EAAA/M,KAAA5H,KAAA2U,EAAAb,KAAAa,EAAA/M,KAAA3H,KACA2U,EAAAb,GAAAa,EAAAhN,KAAA5H,KAAA4U,EAAAd,KAAAc,EAAAhN,KAAA3H,KADA,CAIA0U,EAAAb,KAAA/G,KAAA9M,IAAA0U,EAAAb,KAAAa,EAAA/M,KAAA5H,KACA2U,EAAAZ,GAAAhH,KAAA/M,IAAA2U,EAAAZ,GAAAY,EAAA/M,KAAA3H,KACA2U,EAAAd,KAAA/G,KAAA9M,IAAA2U,EAAAd,KAAAc,EAAAhN,KAAA5H,KACA4U,EAAAb,GAAAhH,KAAA/M,IAAA4U,EAAAb,GAAAa,EAAAhN,KAAA3H,IAEA,IAAA4U,GAAAF,EAAAb,OAAAa,EAAAZ,GACAe,EAAAF,EAAAd,OAAAc,EAAAb,EAEA,KAAAc,IAAAC,EAUA,GALAH,EAAAb,KAAA/G,KAAAS,MAAAmH,EAAA/M,KAAAU,IAAAqM,EAAAb,OACAa,EAAAZ,GAAAhH,KAAAS,MAAAmH,EAAA/M,KAAAU,IAAAqM,EAAAZ,KACAa,EAAAd,KAAA/G,KAAAS,MAAAoH,EAAAhN,KAAAU,IAAAsM,EAAAd,OACAc,EAAAb,GAAAhH,KAAAS,MAAAoH,EAAAhN,KAAAU,IAAAsM,EAAAb,KAEAc,GAAAC,EAAA,CACA,GAAArF,GAAA3O,EAAA2O,WAAAzI,GAAAsH,KAAAyG,kBACAC,EAAAvF,EAAA,MACA6D,IAAA2B,YACA3B,GAAA4B,YAAApU,EAAA5B,OAAA8H,GAAAsH,KAAA6G,cACA7B,GAAA7D,YACAoF,GACAvB,GAAA8B,OAAAT,EAAAZ,GAAAiB,EAAAJ,EAAAd,MACAR,GAAA+B,OAAAV,EAAAZ,GAAAiB,EAAAJ,EAAAb,MAEAT,GAAA8B,OAAAT,EAAAb,KAAAc,EAAAb,GAAAiB,GACA1B,GAAA+B,OAAAV,EAAAZ,GAAAa,EAAAb,GAAAiB,IAEA1B,GAAAgC,aAEAhC,IAAAa,UAAArT,EAAA5B,OAAA8H,GAAAsH,KAAA6G,cACA7B,GAAAe,SAAAM,EAAAb,KAAAc,EAAAb,GACAY,EAAAZ,GAAAY,EAAAb,KACAc,EAAAd,KAAAc,EAAAb,KAMAvL,EAAAlB,IACAiN,EAAAvN,GAAAsH,KAAA0B,WAEA,QAAAnG,GAAA,EAA2BA,EAAArB,EAAA5K,SAAiBiM,EAAA,CAC5C,GACA5B,GAAAE,EAAAoN,EAAAC,EADA5N,EAAAY,EAAAqB,GAAAqF,EAAAtH,EAAAsH,IACA1R,EAAAoK,EAAAwG,UACA,IAAAxG,EAAAyB,MAAA,GAAAzB,EAAAwF,MAAAxP,OAAA,CAiDA,IA9CA0V,GAAA7D,UAAA,EAGA,KAAA7H,EAAAtD,WACA2D,EAAA,EAEAE,EADA,QAAA3K,EACA,OAAAoK,EAAA/I,SAAA,EAAAoO,GAEAiC,EAAA1K,IAAAwK,GAAAxK,KAAA,OAAAoD,EAAA/I,SAAAqQ,EAAAxJ,OAAA,KAGAyC,EAAA,EAEAF,EADA,QAAAzK,EACA,QAAAoK,EAAA/I,SAAA,EAAAiO,GAEAoC,EAAA3K,KAAAyK,GAAAzK,MAAA,QAAAqD,EAAA/I,SAAAqQ,EAAAzJ,MAAA,IAIAmC,EAAA+G,YACA2E,GAAA4B,YAAAtN,EAAAZ,QAAA9H,MACAoU,GAAA2B,YACAM,EAAAC,EAAA,EACA,KAAA5N,EAAAtD,UACAiR,EAAAzI,GAAA,EAEA0I,EAAAvI,GAAA,EAEA,GAAAqG,GAAA7D,YACA,KAAA7H,EAAAtD,UACA6D,EAAA4E,KAAAS,MAAArF,GAAA,GAEAF,EAAA8E,KAAAS,MAAAvF,GAAA,IAIAqL,GAAA8B,OAAAnN,EAAAE,GACAmL,GAAA+B,OAAApN,EAAAsN,EAAApN,EAAAqN,GACAlC,GAAAgC,UAKAhC,GAAA4B,YAAAtN,EAAAZ,QAAAyO,UAEAnC,GAAA2B,YACAvX,EAAA,EAA2BA,EAAAkK,EAAAwF,MAAAxP,SAAuBF,EAAA,CAClD,GAAA4L,GAAA1B,EAAAwF,MAAA1P,GAAA4L,CAEAiM,GAAAC,EAAA,EAEAjK,MAAAjC,MAAA1B,EAAA5H,KAAAsJ,EAAA1B,EAAA3H,KAEA,QAAAzC,IACA,gBAAA+W,MAAA3M,EAAA/I,UAAA,GAAA0V,EAAA,KACAjL,GAAA1B,EAAA5H,KAAAsJ,GAAA1B,EAAA3H,OAGA,KAAA2H,EAAAtD,WACA2D,EAAAL,EAAAU,IAAAgB,GACAkM,EAAA,QAAAhY,GAAAyP,GAAAzP,EAEA,OAAAoK,EAAA/I,WACA2W,QAGArN,EAAAP,EAAAU,IAAAgB,GACAiM,EAAA,QAAA/X,GAAAsP,GAAAtP,EAEA,QAAAoK,EAAA/I,WACA0W,OAGA,GAAAjC,GAAA7D,YACA,KAAA7H,EAAAtD,UACA2D,EAAA8E,KAAAS,MAAAvF,GAAA,GAEAE,EAAA4E,KAAAS,MAAArF,GAAA,IAGAmL,GAAA8B,OAAAnN,EAAAE,GACAmL,GAAA+B,OAAApN,EAAAsN,EAAApN,EAAAqN,IAGAlC,GAAAgC,UAKAf,IAGAC,EAAAxN,GAAAsH,KAAAoH,YACA,gBAAAnB,IAAA,gBAAAC,IACA,gBAAAD,KACAA,GAA8B/P,IAAA+P,EAAApF,MAAAoF,EAAAtF,OAAAsF,EAAAhQ,KAAAgQ,IAE9B,gBAAAC,KACAA,GAA8BhQ,IAAAgQ,EAAArF,MAAAqF,EAAAvF,OAAAuF,EAAAjQ,KAAAiQ,IAG9BD,EAAA/P,IAAA,IACA8O,GAAA4B,YAAAV,EAAAhQ,IACA8O,GAAA7D,UAAA8E,EAAA/P,IACA8O,GAAA2B,YACA3B,GAAA8B,OAAA,EAAAb,EAAAhQ,KAAA,EAAAgQ,EAAA/P,IAAA,GACA8O,GAAA+B,OAAAvI,GAAA,EAAAyH,EAAA/P,IAAA,GACA8O,GAAAgC,UAGAf,EAAApF,MAAA,IACAmE,GAAA4B,YAAAV,EAAArF,MACAmE,GAAA7D,UAAA8E,EAAApF,MACAmE,GAAA2B,YACA3B,GAAA8B,OAAAtI,GAAAyH,EAAApF,MAAA,IAAAoF,EAAA/P,KACA8O,GAAA+B,OAAAvI,GAAAyH,EAAApF,MAAA,EAAAlC,IACAqG,GAAAgC,UAGAf,EAAAtF,OAAA,IACAqE,GAAA4B,YAAAV,EAAAvF,OACAqE,GAAA7D,UAAA8E,EAAAtF,OACAqE,GAAA2B,YACA3B,GAAA8B,OAAAtI,GAAAyH,EAAApF,MAAAlC,GAAAsH,EAAAtF,OAAA,GACAqE,GAAA+B,OAAA,EAAApI,GAAAsH,EAAAtF,OAAA,GACAqE,GAAAgC,UAGAf,EAAAhQ,KAAA,IACA+O,GAAA4B,YAAAV,EAAAjQ,KACA+O,GAAA7D,UAAA8E,EAAAhQ,KACA+O,GAAA2B,YACA3B,GAAA8B,OAAA,EAAAb,EAAAhQ,KAAA,EAAA0I,GAAAsH,EAAAtF,QACAqE,GAAA+B,OAAA,EAAAd,EAAAhQ,KAAA,KACA+O,GAAAgC,YAIAhC,GAAA7D,UAAA8E,EACAjB,GAAA4B,YAAAlO,GAAAsH,KAAAoH,YACApC,GAAAqC,YAAApB,EAAA,GAAAA,EAAA,EAAAzH,GAAAyH,EAAAtH,GAAAsH,KAIAjB,GAAAgB,UAGA,QAAA7D,KAEAxR,EAAAwL,KAAAnD,IAAA,SAAAoD,EAAA9C,GACA,GAIAgO,GAAA3N,EAAAE,EAAA0N,EAAAC,EAJA5G,EAAAtH,EAAAsH,IACAxB,EAAA9F,EAAAtD,UAAA,QAAAsD,EAAAtD,UAAAsD,EAAAtL,EAAA,OACAqR,EAAA,QAAA/F,EAAAtD,UAAA,cAAAsD,EAAAtD,UAAAsD,EAAAtL,EAAA,SAAAoR,EACAE,EAAAhG,EAAAZ,QAAA4G,MAAA,2BASA,IAFAH,GAAAsI,WAAApI,GAEA/F,EAAAyB,MAAA,GAAAzB,EAAAwF,MAAAxP,OAGA,OAAAF,GAAA,EAA+BA,EAAAkK,EAAAwF,MAAAxP,SAAuBF,EAEtDkY,EAAAhO,EAAAwF,MAAA1P,IACAkY,EAAA/H,OAAA+H,EAAAtM,EAAA1B,EAAA5H,KAAA4V,EAAAtM,EAAA1B,EAAA3H,MAGA,KAAA2H,EAAAtD,WACAuR,EAAA,SACA5N,EAAA+G,GAAAzK,KAAAqD,EAAAU,IAAAsN,EAAAtM,GACA,UAAA1B,EAAA/I,SACAsJ,EAAA+G,EAAA1K,IAAA0K,EAAAX,QAAAW,EAAAT,qBAEAtG,EAAA+G,EAAA1K,IAAA0K,EAAAxJ,OAAAwJ,EAAAX,QACAuH,EAAA,YAGAA,EAAA,SACA3N,EAAA6G,GAAAxK,IAAAoD,EAAAU,IAAAsN,EAAAtM,GACA,QAAA1B,EAAA/I,UACAoJ,EAAAiH,EAAA3K,KAAA2K,EAAAzJ,MAAAyJ,EAAAX,QACAsH,EAAA,SAEA5N,EAAAiH,EAAA3K,KAAA2K,EAAAX,SAIAd,GAAAuI,QAAArI,EAAA1F,EAAAE,EAAAyN,EAAA/H,MAAAD,EAAA,UAAAiI,EAAAC,MAKA,QAAApC,GAAA/M,GACAA,EAAAyC,MAAAC,MACA4M,EAAAtP,GACAA,EAAAoE,KAAA1B,MACA6M,EAAAvP,GACAA,EAAAoD,OAAAV,MACA8M,EAAAxP,GAGA,QAAAsP,GAAAtP,GACA,QAAAyP,GAAAzL,EAAA0L,EAAAC,EAAAC,EAAAC,GACA,GAAAzM,GAAAY,EAAAZ,OACAC,EAAAW,EAAAQ,UACAsL,EAAA,KAAAC,EAAA,IAEApD,IAAA2B,WACA,QAAAvX,GAAAsM,EAAgCtM,EAAAqM,EAAAnM,OAAmBF,GAAAsM,EAAA,CACnD,GAAAhC,GAAA+B,EAAArM,EAAAsM,GAAA9B,EAAA6B,EAAArM,EAAAsM,EAAA,GACA2M,EAAA5M,EAAArM,GAAAkZ,EAAA7M,EAAArM,EAAA,EAEA,UAAAsK,GAAA,MAAA2O,EAAA,CAIA,GAAAzO,GAAA0O,GAAA1O,EAAAsO,EAAAxW,IAAA,CACA,GAAA4W,EAAAJ,EAAAxW,IACA,QAEAgI,IAAAwO,EAAAxW,IAAAkI,IAAA0O,EAAA1O,IAAAyO,EAAA3O,KACAE,EAAAsO,EAAAxW,QAEA,IAAA4W,GAAA1O,GAAA0O,EAAAJ,EAAAxW,IAAA,CACA,GAAAkI,EAAAsO,EAAAxW,IACA,QACA2W,IAAAH,EAAAxW,IAAAkI,IAAA0O,EAAA1O,IAAAyO,EAAA3O,KACA4O,EAAAJ,EAAAxW,IAIA,GAAAkI,GAAA0O,GAAA1O,EAAAsO,EAAAvW,IAAA,CACA,GAAA2W,EAAAJ,EAAAvW,IACA,QACA+H,IAAAwO,EAAAvW,IAAAiI,IAAA0O,EAAA1O,IAAAyO,EAAA3O,KACAE,EAAAsO,EAAAvW,QAEA,IAAA2W,GAAA1O,GAAA0O,EAAAJ,EAAAvW,IAAA,CACA,GAAAiI,EAAAsO,EAAAvW,IACA,QACA0W,IAAAH,EAAAvW,IAAAiI,IAAA0O,EAAA1O,IAAAyO,EAAA3O,KACA4O,EAAAJ,EAAAvW,IAIA,GAAA+H,GAAA2O,GAAA3O,EAAAuO,EAAAvW,IAAA,CACA,GAAA2W,EAAAJ,EAAAvW,IACA,QACAkI,IAAAqO,EAAAvW,IAAAgI,IAAA2O,EAAA3O,IAAA4O,EAAA1O,KACAF,EAAAuO,EAAAvW,QAEA,IAAA2W,GAAA3O,GAAA2O,EAAAJ,EAAAvW,IAAA,CACA,GAAAgI,EAAAuO,EAAAvW,IACA,QACA4W,IAAAL,EAAAvW,IAAAgI,IAAA2O,EAAA3O,IAAA4O,EAAA1O,KACAyO,EAAAJ,EAAAvW,IAIA,GAAAgI,GAAA2O,GAAA3O,EAAAuO,EAAAtW,IAAA,CACA,GAAA0W,EAAAJ,EAAAtW,IACA,QACAiI,IAAAqO,EAAAtW,IAAA+H,IAAA2O,EAAA3O,IAAA4O,EAAA1O,KACAF,EAAAuO,EAAAtW,QAEA,IAAA0W,GAAA3O,GAAA2O,EAAAJ,EAAAtW,IAAA,CACA,GAAA+H,EAAAuO,EAAAtW,IACA,QACA2W,IAAAL,EAAAtW,IAAA+H,IAAA2O,EAAA3O,IAAA4O,EAAA1O,KACAyO,EAAAJ,EAAAtW,IAGA+H,GAAAyO,GAAAvO,GAAAwO,GACApD,GAAA8B,OAAAmB,EAAAjO,IAAAN,GAAAqO,EAAAG,EAAAlO,IAAAJ,GAAAoO,GAEAG,EAAAE,EACAD,EAAAE,EACAtD,GAAA+B,OAAAkB,EAAAjO,IAAAqO,GAAAN,EAAAG,EAAAlO,IAAAsO,GAAAN,IAEAhD,GAAAgC,SAiJAhC,GAAAW,OACAX,GAAAY,UAAAlF,GAAAzK,KAAAyK,GAAAxK,KACA8O,GAAAuD,SAAA,OAEA,IAAA5I,GAAAtH,EAAAyC,MAAAqG,UACAqH,EAAAnQ,EAAAoQ,UAEA,IAAA9I,EAAA,GAAA6I,EAAA,GAEAxD,GAAA7D,UAAAqH,EACAxD,GAAA4B,YAAA,iBAEA,IAAA8B,GAAAjK,KAAAkK,GAAA,EACAb,GAAAzP,EAAAgE,WAAAoC,KAAAmK,IAAAF,IAAA/I,EAAA,EAAA6I,EAAA,GAAA/J,KAAAoK,IAAAH,IAAA/I,EAAA,EAAA6I,EAAA,GAAAnQ,EAAA+B,MAAA/B,EAAAgC,OACA2K,GAAA7D,UAAAqH,EAAA,EACAV,EAAAzP,EAAAgE,WAAAoC,KAAAmK,IAAAF,IAAA/I,EAAA,EAAA6I,EAAA,GAAA/J,KAAAoK,IAAAH,IAAA/I,EAAA,EAAA6I,EAAA,GAAAnQ,EAAA+B,MAAA/B,EAAAgC,OAGA2K,GAAA7D,UAAAxB,EACAqF,GAAA4B,YAAAvO,EAAAzH,KACA,IAAAiV,GAAAiD,EAAAzQ,EAAAyC,MAAAzC,EAAAzH,MAAA,EAAA+N,GACAkH,KACAb,GAAAa,YApKA,SAAAxJ,EAAA4L,EAAAC,GAUA,IATA,GAAAzM,GAAAY,EAAAZ,OACAC,EAAAW,EAAAQ,UACA8D,EAAAlC,KAAA/M,IAAA+M,KAAA9M,IAAA,EAAAuW,EAAAxW,KAAAwW,EAAAvW,KACAvC,EAAA,EAAA2Z,GAAA,EACAC,EAAA,EAAAC,EAAA,EAAAC,EAAA,IAMAxN,EAAA,GAAAtM,EAAAqM,EAAAnM,OAAAoM,IADA,CAIAtM,GAAAsM,CAEA,IAAAhC,GAAA+B,EAAArM,EAAAsM,GACA9B,EAAA6B,EAAArM,EAAAsM,EAAAsN,GACAX,EAAA5M,EAAArM,GAAAkZ,EAAA7M,EAAArM,EAAA4Z,EAEA,IAAAD,EAAA,CACA,GAAArN,EAAA,SAAAhC,GAAA,MAAA2O,EAAA,CAEAa,EAAA9Z,EACAsM,KACAsN,EAAA,CACA,UAGA,GAAAtN,EAAA,GAAAtM,GAAA6Z,EAAAvN,EAAA,CAEAsJ,GAAA9J,OACA6N,GAAA,EACArN,KACAsN,EAAA,EACA5Z,EAAA6Z,EAAAC,EAAAxN,CACA,WAIA,SAAAhC,GAAA,MAAA2O,EAAA,CAMA,GAAA3O,GAAA2O,GAAA3O,EAAAuO,EAAAvW,IAAA,CACA,GAAA2W,EAAAJ,EAAAvW,IACA,QACAkI,IAAAqO,EAAAvW,IAAAgI,IAAA2O,EAAA3O,IAAA4O,EAAA1O,KACAF,EAAAuO,EAAAvW,QAEA,IAAA2W,GAAA3O,GAAA2O,EAAAJ,EAAAvW,IAAA,CACA,GAAAgI,EAAAuO,EAAAvW,IACA,QACA4W,IAAAL,EAAAvW,IAAAgI,IAAA2O,EAAA3O,IAAA4O,EAAA1O,KACAyO,EAAAJ,EAAAvW,IAIA,GAAAgI,GAAA2O,GAAA3O,EAAAuO,EAAAtW,IAAA,CACA,GAAA0W,EAAAJ,EAAAtW,IACA,QACAiI,IAAAqO,EAAAtW,IAAA+H,IAAA2O,EAAA3O,IAAA4O,EAAA1O,KACAF,EAAAuO,EAAAtW,QAEA,IAAA0W,GAAA3O,GAAA2O,EAAAJ,EAAAtW,IAAA,CACA,GAAA+H,EAAAuO,EAAAtW,IACA,QACA2W,IAAAL,EAAAtW,IAAA+H,IAAA2O,EAAA3O,IAAA4O,EAAA1O,KACAyO,EAAAJ,EAAAtW,IAWA,GARAoX,IAEA/D,GAAA2B,YACA3B,GAAA8B,OAAAmB,EAAAjO,IAAAN,GAAAwO,EAAAlO,IAAA2G,IACAoI,GAAA,GAIAnP,GAAAsO,EAAAvW,KAAA2W,GAAAJ,EAAAvW,IACAqT,GAAA+B,OAAAkB,EAAAjO,IAAAN,GAAAwO,EAAAlO,IAAAkO,EAAAvW,MACAqT,GAAA+B,OAAAkB,EAAAjO,IAAAqO,GAAAH,EAAAlO,IAAAkO,EAAAvW,UAGA,IAAAiI,GAAAsO,EAAAxW,KAAA4W,GAAAJ,EAAAxW,IACAsT,GAAA+B,OAAAkB,EAAAjO,IAAAN,GAAAwO,EAAAlO,IAAAkO,EAAAxW,MACAsT,GAAA+B,OAAAkB,EAAAjO,IAAAqO,GAAAH,EAAAlO,IAAAkO,EAAAxW,UAFA,CAUA,GAAAyX,GAAAzP,EAAA0P,EAAAf,CAMAzO,IAAA0O,GAAA1O,EAAAsO,EAAAxW,KAAA4W,GAAAJ,EAAAxW,KACAgI,GAAAwO,EAAAxW,IAAAkI,IAAA0O,EAAA1O,IAAAyO,EAAA3O,KACAE,EAAAsO,EAAAxW,KAEA4W,GAAA1O,GAAA0O,EAAAJ,EAAAxW,KAAAkI,GAAAsO,EAAAxW,MACA2W,GAAAH,EAAAxW,IAAAkI,IAAA0O,EAAA1O,IAAAyO,EAAA3O,KACA4O,EAAAJ,EAAAxW,KAIAkI,GAAA0O,GAAA1O,EAAAsO,EAAAvW,KAAA2W,GAAAJ,EAAAvW,KACA+H,GAAAwO,EAAAvW,IAAAiI,IAAA0O,EAAA1O,IAAAyO,EAAA3O,KACAE,EAAAsO,EAAAvW,KAEA2W,GAAA1O,GAAA0O,EAAAJ,EAAAvW,KAAAiI,GAAAsO,EAAAvW,MACA0W,GAAAH,EAAAvW,IAAAiI,IAAA0O,EAAA1O,IAAAyO,EAAA3O,KACA4O,EAAAJ,EAAAvW,KAKA+H,GAAAyP,GACAnE,GAAA+B,OAAAkB,EAAAjO,IAAAmP,GAAAjB,EAAAlO,IAAAJ,IAOAoL,GAAA+B,OAAAkB,EAAAjO,IAAAN,GAAAwO,EAAAlO,IAAAJ,IACAoL,GAAA+B,OAAAkB,EAAAjO,IAAAqO,GAAAH,EAAAlO,IAAAsO,IAGAD,GAAAe,IACApE,GAAA+B,OAAAkB,EAAAjO,IAAAqO,GAAAH,EAAAlO,IAAAsO,IACAtD,GAAA+B,OAAAkB,EAAAjO,IAAAoP,GAAAlB,EAAAlO,IAAAsO,SA4BAjQ,EAAAgE,WAAAhE,EAAA+B,MAAA/B,EAAAgC,QAGAsF,EAAA,GACAmI,EAAAzP,EAAAgE,WAAA,IAAAhE,EAAA+B,MAAA/B,EAAAgC,OACA2K,GAAAgB,UAGA,QAAA6B,GAAAxP,GACA,QAAAgR,GAAAhN,EAAA6E,EAAA2E,EAAAyD,EAAAC,EAAAtB,EAAAC,EAAAsB,GAGA,OAFA/N,GAAAY,EAAAZ,OAAAC,EAAAW,EAAAQ,UAEAzN,EAAA,EAA+BA,EAAAqM,EAAAnM,OAAmBF,GAAAsM,EAAA,CAClD,GAAA/B,GAAA8B,EAAArM,GAAAyK,EAAA4B,EAAArM,EAAA,EACA,OAAAuK,KAAAsO,EAAAvW,KAAAiI,EAAAsO,EAAAtW,KAAAkI,EAAAqO,EAAAxW,KAAAmI,EAAAqO,EAAAvW,MAGAqT,GAAA2B,YACAhN,EAAAsO,EAAAjO,IAAAL,GACAE,EAAAqO,EAAAlO,IAAAH,GAAAyP,EACA,UAAAE,EACAxE,GAAAyE,IAAA9P,EAAAE,EAAAqH,EAAA,EAAAqI,EAAA9K,KAAAkK,GAAA,EAAAlK,KAAAkK,IAAA,GAEAa,EAAAxE,GAAArL,EAAAE,EAAAqH,EAAAqI,GACAvE,GAAA0E,YAEA7D,IACAb,GAAAa,YACAb,GAAA9J,QAEA8J,GAAAgC,WAIAhC,GAAAW,OACAX,GAAAY,UAAAlF,GAAAzK,KAAAyK,GAAAxK,IAEA,IAAAyJ,GAAAtH,EAAAoD,OAAA0F,UACAqH,EAAAnQ,EAAAoQ,WACAvH,EAAA7I,EAAAoD,OAAAyF,OACAsI,EAAAnR,EAAAoD,OAAA+N,MAUA,IAHA,GAAA7J,IACAA,EAAA,MAEAA,EAAA,GAAA6I,EAAA,GAEA,GAAAmB,GAAAnB,EAAA,CACAxD,IAAA7D,UAAAwI,EACA3E,GAAA4B,YAAA,kBACAyC,EAAAhR,EAAAgE,WAAA6E,EAAA,KAAAyI,IAAA,KACAtR,EAAA+B,MAAA/B,EAAAgC,MAAAmP,GAEAxE,GAAA4B,YAAA,kBACAyC,EAAAhR,EAAAgE,WAAA6E,EAAA,KAAAyI,EAAA,KACAtR,EAAA+B,MAAA/B,EAAAgC,MAAAmP,GAGAxE,GAAA7D,UAAAxB,EACAqF,GAAA4B,YAAAvO,EAAAzH,MACAyY,EAAAhR,EAAAgE,WAAA6E,EACA4H,EAAAzQ,EAAAoD,OAAApD,EAAAzH,OAAA,KACAyH,EAAA+B,MAAA/B,EAAAgC,MAAAmP,GACAxE,GAAAgB,UAGA,QAAA4D,GAAAjQ,EAAAE,EAAApL,EAAAob,EAAAC,EAAAC,EAAA9B,EAAAC,EAAAhX,EAAA0L,EAAAuE,GACA,GAAAlL,GAAA4K,EAAAF,EAAAzK,EACA8T,EAAAC,EAAAC,EAAAC,EACAzE,CAKA9I,IACAuN,EAAAF,EAAAC,GAAA,EACAF,GAAA,EACA/T,EAAAxH,EACAoS,EAAAlH,EACAzD,EAAA2D,EAAAgQ,EACAlJ,EAAA9G,EAAAiQ,EAGAjJ,EAAA5K,IACAyP,EAAA7E,EACAA,EAAA5K,EACAA,EAAAyP,EACAsE,GAAA,EACAC,GAAA,KAIAD,EAAAC,EAAAC,GAAA,EACAC,GAAA,EACAlU,EAAA0D,EAAAkQ,EACAhJ,EAAAlH,EAAAmQ,EACAnJ,EAAAlS,GACAyH,EAAA2D,GAGA8G,IACA+E,EAAAxP,EACAA,EAAAyK,EACAA,EAAA+E,EACAyE,GAAA,EACAD,GAAA,IAKArJ,EAAAoH,EAAAvW,KAAAuE,EAAAgS,EAAAtW,KACAuE,EAAAgS,EAAAxW,KAAAiP,EAAAuH,EAAAvW,MAGAsE,EAAAgS,EAAAvW,MACAuE,EAAAgS,EAAAvW,IACAsY,GAAA,GAGAnJ,EAAAoH,EAAAtW,MACAkP,EAAAoH,EAAAtW,IACAsY,GAAA,GAGAtJ,EAAAuH,EAAAxW,MACAiP,EAAAuH,EAAAxW,IACAyY,GAAA,GAGAjU,EAAAgS,EAAAvW,MACAuE,EAAAgS,EAAAvW,IACAuY,GAAA,GAGAjU,EAAAgS,EAAAjO,IAAA/D,GACA0K,EAAAuH,EAAAlO,IAAA2G,GACAE,EAAAoH,EAAAjO,IAAA6G,GACA3K,EAAAgS,EAAAlO,IAAA9D,GAGA6T,IACA7Y,EAAA2U,UAAAkE,EAAApJ,EAAAzK,GACAhF,EAAA6U,SAAA9P,EAAAC,EAAA2K,EAAA5K,EAAA0K,EAAAzK,IAIAiL,EAAA,IAAA6I,GAAAC,GAAAC,GAAAC,KACAjZ,EAAAyV,YAGAzV,EAAA4V,OAAA7Q,EAAA0K,GACAqJ,EACA9Y,EAAA6V,OAAA9Q,EAAAC,GAEAhF,EAAA4V,OAAA7Q,EAAAC,GACAgU,EACAhZ,EAAA6V,OAAAlG,EAAA3K,GAEAhF,EAAA4V,OAAAjG,EAAA3K,GACA+T,EACA/Y,EAAA6V,OAAAlG,EAAAF,GAEAzP,EAAA4V,OAAAjG,EAAAF,GACAwJ,EACAjZ,EAAA6V,OAAA9Q,EAAA0K,GAEAzP,EAAA4V,OAAA7Q,EAAA0K,GACAzP,EAAA8V,WAIA,QAAAY,GAAAvP,GAWA2M,GAAAW,OACAX,GAAAY,UAAAlF,GAAAzK,KAAAyK,GAAAxK,KAGA8O,GAAA7D,UAAA9I,EAAAoE,KAAA0E,UACA6D,GAAA4B,YAAAvO,EAAAzH,KAEA,IAAAiZ,EAEA,QAAAxR,EAAAoE,KAAAiB,OACA,WACAmM,EAAA,CACA,MACA,aACAA,GAAAxR,EAAAoE,KAAAkB,QACA,MACA,SACAkM,GAAAxR,EAAAoE,KAAAkB,SAAA,EAGA,GAAAoM,GAAA1R,EAAAoE,KAAAvB,KAAA,SAAAyF,EAAAzK,GAA+E,MAAA4S,GAAAzQ,EAAAoE,KAAApE,EAAAzH,MAAA+P,EAAAzK,IAA+D,MA9B9I,SAAAmG,EAAAwN,EAAAC,EAAAC,EAAA9B,EAAAC,GAGA,OAFAzM,GAAAY,EAAAZ,OAAAC,EAAAW,EAAAQ,UAEAzN,EAAA,EAA+BA,EAAAqM,EAAAnM,OAAmBF,GAAAsM,EAClD,MAAAD,EAAArM,IAEAwa,EAAAnO,EAAArM,GAAAqM,EAAArM,EAAA,GAAAqM,EAAArM,EAAA,GAAAya,EAAAC,EAAAC,EAAA9B,EAAAC,EAAAlD,GAAA3M,EAAAoE,KAAAG,WAAAvE,EAAAoE,KAAA0E,YAyBA9I,EAAAgE,WAAAwN,IAAAxR,EAAAoE,KAAAkB,SAAAoM,EAAA1R,EAAA+B,MAAA/B,EAAAgC,OACA2K,GAAAgB,UAGA,QAAA8C,GAAAsB,EAAAC,EAAA1J,EAAAzK,GACA,GAAAgF,GAAAkP,EAAAlP,IACA,KAAAA,EACA,WAEA,IAAAkP,EAAAE,UACA,MAAAxE,GAAAsE,EAAAE,UAAA3J,EAAAzK,EAAAmU,EAEA,IAAAnZ,GAAAP,EAAAC,MAAAyB,MAAAgY,EAGA,OAFAnZ,GAAAf,EAAA,gBAAA+K,KAAA,GACAhK,EAAAE,YACAF,EAAAK,WAGA,QAAA6Q,KAQA,GANA,MAAA1J,GAAA6R,OAAA3U,UACAjF,EAAA+H,GAAA6R,OAAA3U,WAAA4U,KAAA,IAEA7S,EAAA8S,KAAA,WAAAC,SAGAhS,GAAA6R,OAAAxP,KAAA,CASA,OAJA5L,GAAAoQ,EADAoL,KAAAC,KAAAC,GAAA,EACAC,EAAApS,GAAA6R,OAAAQ,eAIA3b,EAAA,EAA2BA,EAAAiJ,EAAA/I,SAAmBF,EAC9CD,EAAAkJ,EAAAjJ,GACAD,EAAAoQ,QACAA,EAAAuL,IAAA3b,EAAAoQ,MAAApQ,KAAAoQ,QAEAqL,EAAAhS,MACA2G,QACA3O,MAAAzB,EAAAyB,OAQA,IAAA8H,GAAA6R,OAAAS,OACA,GAAAra,EAAAwT,WAAAzL,GAAA6R,OAAAS,QACAJ,EAAAK,KAAAvS,GAAA6R,OAAAS,YACiB,eAAAtS,GAAA6R,OAAAS,OACjBJ,EAAAM,cACiB,CACjB,GAAAC,GAAA,cAAAzS,GAAA6R,OAAAS,MACAJ,GAAAK,KAAA,SAAA9a,EAAA1B,GACA,MAAA0B,GAAAoP,OAAA9Q,EAAA8Q,MAAA,EACApP,EAAAoP,MAAA9Q,EAAA8Q,OAAA4L,EAAA,OAQA,OAAA/b,GAAA,EAA2BA,EAAAwb,EAAAtb,SAAoBF,EAAA,CAE/C,GAAAgc,GAAAR,EAAAxb,EAEAA,GAAAsJ,GAAA6R,OAAAc,WAAA,IACAR,GACAF,EAAA/R,KAAA,SACA+R,EAAA/R,KAAA,QACAiS,GAAA,GAGAF,EAAA/R,KACA,2DAAAF,GAAA6R,OAAAe,oBAAA,iEAAoKF,EAAAxa,MAAA,8DACpKwa,EAAA7L,MAAA,SAOA,GAHAsL,GACAF,EAAA/R,KAAA,SAEA,GAAA+R,EAAArb,OAAA,CAGA,GAAAic,GAAA,yCAAyD7S,GAAAsH,KAAApP,MAAA,KAAA+Z,EAAAnZ,KAAA,cACzD,UAAAkH,GAAA6R,OAAA3U,UACAjF,EAAA+H,GAAA6R,OAAA3U,WAAA4U,KAAAe,OACA,CACA,GAAAlS,GAAA,GACA3K,EAAAgK,GAAA6R,OAAAha,SACAiC,EAAAkG,GAAA6R,OAAA/I,MACA,OAAAhP,EAAA,KACAA,SACA,KAAA9D,EAAAyC,OAAA,GACAkI,GAAA,QAAA7G,EAAA,GAAAkO,GAAAxK,KAAA,MACA,KAAAxH,EAAAyC,OAAA,KACAkI,GAAA,WAAA7G,EAAA,GAAAkO,GAAAC,QAAA,OACA,KAAAjS,EAAAyC,OAAA,GACAkI,GAAA,UAAA7G,EAAA,GAAAkO,GAAAG,OAAA,MACA,KAAAnS,EAAAyC,OAAA,KACAkI,GAAA,SAAA7G,EAAA,GAAAkO,GAAAzK,MAAA,MACA,IAAAsU,GAAA5Z,EAAA,uBAAA4a,EAAAC,QAAA,sCAA2GnS,EAAA,KAAW,UAAAlD,SAAAwB,EACtH,OAAAe,GAAA6R,OAAAkB,kBAAA,CAIA,GAAAva,GAAAwH,GAAA6R,OAAAtF,eACA,OAAA/T,IACAA,EAAAwH,GAAAsH,KAAAiF,gBAEA/T,EADAA,GAAA,gBAAAA,GACAP,EAAAC,MAAAyB,MAAAnB,GAEAP,EAAAC,MAAAkB,QAAAyY,EAAA,oBACArZ,EAAAf,EAAA,EACAe,IAAAK,WAEA,IAAAma,GAAAnB,EAAAzU,UACAnF,GAAA,uCAAqD+a,EAAAvU,QAAA,aAA4BuU,EAAAtU,SAAA,MAA8BiC,EAAA,oBAAAnI,EAAA,cAAqCya,UAAApB,GAAAvY,IAAA,UAAA0G,GAAA6R,OAAAkB,uBAYpJ,QAAAG,GAAAC,EAAAC,EAAAC,GACA,GAEA3c,GAAAmM,EAAAG,EAFAsQ,EAAAtT,GAAAsH,KAAAiM,kBACAC,EAAAF,IAAA,EACAG,EAAA,IAEA,KAAA/c,EAAAiJ,EAAA/I,OAAA,EAAuCF,GAAA,IAAQA,EAC/C,GAAA2c,EAAA1T,EAAAjJ,IAAA,CAGA,GAAAD,GAAAkJ,EAAAjJ,GACA6Y,EAAA9Y,EAAAiL,MACA8N,EAAA/Y,EAAAkL,MACAoB,EAAAtM,EAAAkN,WAAAZ,OACA2Q,EAAAnE,EAAAzO,IAAAqS,GACAQ,EAAAnE,EAAA1O,IAAAsS,GACAQ,EAAAN,EAAA/D,EAAA5W,MACAkb,EAAAP,EAAA9D,EAAA7W,KAUA,IARAqK,EAAAvM,EAAAkN,WAAAQ,UAGAoL,EAAAvP,QAAA6F,mBACA+N,EAAAxQ,OAAAI,WACAgM,EAAAxP,QAAA6F,mBACAgO,EAAAzQ,OAAAI,WAEA/M,EAAA2L,MAAAC,MAAA5L,EAAAsM,OAAAV,KACA,IAAAQ,EAAA,EAA+BA,EAAAE,EAAAnM,OAAmBiM,GAAAG,EAAA,CAClD,GAAA/B,GAAA8B,EAAAF,GAAA1B,EAAA4B,EAAAF,EAAA,EACA,UAAA5B,KAKAA,EAAAyS,EAAAE,GAAA3S,EAAAyS,GAAAE,GACAzS,EAAAwS,EAAAE,GAAA1S,EAAAwS,GAAAE,GADA,CAMA,GAAAC,GAAA/N,KAAAC,IAAAuJ,EAAAjO,IAAAL,GAAAkS,GACAY,EAAAhO,KAAAC,IAAAwJ,EAAAlO,IAAAH,GAAAiS,GACAY,EAAAF,IAAAC,GAIAC,GAAAR,IACAA,EAAAQ,EACAP,GAAA/c,EAAAmM,EAAAG,KAKA,GAAAvM,EAAAsN,KAAA1B,OAAAoR,EAAA,CAEA,GAAAtC,GAAAC,CAEA,QAAA3a,EAAAsN,KAAAiB,OACA,WACAmM,EAAA,CACA,MACA,aACAA,GAAA1a,EAAAsN,KAAAkB,QACA,MACA,SACAkM,GAAA1a,EAAAsN,KAAAkB,SAAA,EAKA,IAFAmM,EAAAD,EAAA1a,EAAAsN,KAAAkB,SAEApC,EAAA,EAA+BA,EAAAE,EAAAnM,OAAmBiM,GAAAG,EAAA,CAClD,GAAA/B,GAAA8B,EAAAF,GAAA1B,EAAA4B,EAAAF,EAAA,GAAA9M,EAAAgN,EAAAF,EAAA,EACA,OAAA5B,KAIAtB,EAAAjJ,GAAAqN,KAAAG,WACAwP,GAAA3N,KAAA9M,IAAAlD,EAAAkL,IAAAyS,GAAA3N,KAAA/M,IAAAjD,EAAAkL,IACA0S,GAAAxS,EAAAgQ,GAAAwC,GAAAxS,EAAAiQ,EACAsC,GAAAzS,EAAAkQ,GAAAuC,GAAAzS,EAAAmQ,GACAuC,GAAA5N,KAAA/M,IAAAjD,EAAAoL,IAAAwS,GAAA5N,KAAA9M,IAAAlD,EAAAoL,MACAsS,GAAA/c,EAAAmM,EAAAG,OAKA,MAAAyQ,IACA/c,EAAA+c,EAAA,GACA5Q,EAAA4Q,EAAA,GACAzQ,EAAArD,EAAAjJ,GAAAiN,WAAAQ,WAEwB8P,UAAAtU,EAAAjJ,GAAAiN,WAAAZ,OAAAmR,MAAArR,EAAAG,GAAAH,EAAA,GAAAG,GACxBmR,UAAAtR,EACAlD,SAAAjJ,GACA0d,YAAA1d,IAGA,KAGA,QAAA6O,GAAA8O,GACArU,GAAAsH,KAAAgN,WACAC,EAAA,YAAAF,EACA,SAAA5d,GAAqD,UAAAA,EAAA,YAGrD,QAAA+O,GAAA6O,GACArU,GAAAsH,KAAAgN,WACAC,EAAA,YAAAF,EACA,SAAA5d,GAAqD,WAGrD,QAAAgP,GAAA4O,GACA7U,GAAAgV,aAIAD,EAAA,YAAAF,EAAA,SAAA5d,GAA+D,UAAAA,EAAA,YAK/D,QAAA8d,GAAAE,EAAAC,EAAArB,GACA,GAAAzC,GAAAvL,GAAAuL,SACA+D,EAAAD,EAAAE,MAAAhE,EAAArT,KAAAyK,GAAAzK,KACAsX,EAAAH,EAAAI,MAAAlE,EAAApT,IAAAwK,GAAAxK,IACAmD,EAAAD,GAAsCnD,KAAAoX,EAAAnX,IAAAqX,GAEtClU,GAAAiU,MAAAF,EAAAE,MACAjU,EAAAmU,MAAAJ,EAAAI,MAGAnU,EAAAoU,QAAAL,EAAAK,QACApU,EAAAqU,QAAAN,EAAAM,OAEA,IAAAvB,GAAAP,EAAAyB,EAAAE,EAAAxB,EAQA,IANAI,IAEAA,EAAAmB,MAAA1b,SAAAua,EAAA9T,OAAA+B,MAAAJ,IAAAmS,EAAAQ,UAAA,IAAArD,EAAArT,KAAAyK,GAAAzK,KAAA,IACAkW,EAAAqB,MAAA5b,SAAAua,EAAA9T,OAAAgC,MAAAL,IAAAmS,EAAAQ,UAAA,IAAArD,EAAApT,IAAAwK,GAAAxK,IAAA,KAGAwC,GAAAsH,KAAA2N,cAAA,CAEA,OAAAve,GAAA,EAA+BA,EAAAwe,GAAAte,SAAuBF,EAAA,CACtD,GAAAye,GAAAD,GAAAxe,EACAye,GAAAC,MAAAX,GACAhB,GAAA0B,EAAAxV,QAAA8T,EAAA9T,QACAwV,EAAAE,MAAA,IAAA5B,EAAAQ,UAAA,IACAkB,EAAAE,MAAA,IAAA5B,EAAAQ,UAAA,IACAqB,EAAAH,EAAAxV,OAAAwV,EAAAE,OAGA5B,GACA8B,EAAA9B,EAAA9T,OAAA8T,EAAAQ,UAAAQ,GAGAxV,EAAAuW,QAAAf,GAAA9T,EAAA8S,IAGA,QAAA9G,KACA,GAAAnW,GAAAwJ,GAAAyV,YAAAC,qBACA,QAAAlf,EAEA,WADAmf,IAIAxQ,MACAA,GAAAyQ,WAAAD,EAAAnf,IAGA,QAAAmf,KACAxQ,GAAA,KAGA0Q,GAAA5I,OACA6I,GAAA1J,QACAyJ,GAAA3I,UAAAlF,GAAAzK,KAAAyK,GAAAxK,IAEA,IAAA9G,GAAAqf,CACA,KAAArf,EAAA,EAAuBA,EAAAwe,GAAAte,SAAuBF,EAC9Cqf,EAAAb,GAAAxe,GAEAqf,EAAApW,OAAAoE,KAAA1B,KACA2T,EAAAD,EAAApW,OAAAoW,EAAAV,OAEAY,EAAAF,EAAApW,OAAAoW,EAAAV,MAEAQ,IAAAvI,UAEAjO,EAAAuE,GAAA+R,aAAAE,KAGA,QAAAN,GAAA9e,EAAA4e,EAAAD,GAIA,GAHA,gBAAA3e,KACAA,EAAAkJ,EAAAlJ,IAEA,gBAAA4e,GAAA,CACA,GAAArS,GAAAvM,EAAAkN,WAAAQ,SACAkR,GAAA5e,EAAAkN,WAAAZ,OAAAmR,MAAAlR,EAAAqS,EAAArS,GAAAqS,EAAA,IAGA,GAAA3e,GAAAwf,EAAAzf,EAAA4e,IACA,GAAA3e,GACAwe,GAAAhV,MAAiCP,OAAAlJ,EAAA4e,QAAAD,SAEjCzI,KAEAyI,IACAF,GAAAxe,GAAA0e,MAAA,GAGA,QAAAE,GAAA7e,EAAA4e,GACA,SAAA5e,GAAA,MAAA4e,EAGA,MAFAH,WACAvI,IAOA,IAHA,gBAAAlW,KACAA,EAAAkJ,EAAAlJ,IAEA,gBAAA4e,GAAA,CACA,GAAArS,GAAAvM,EAAAkN,WAAAQ,SACAkR,GAAA5e,EAAAkN,WAAAZ,OAAAmR,MAAAlR,EAAAqS,EAAArS,GAAAqS,EAAA,IAGA,GAAA3e,GAAAwf,EAAAzf,EAAA4e,IACA,GAAA3e,IACAwe,GAAAiB,OAAAzf,EAAA,GAEAiW,KAIA,QAAAuJ,GAAAzf,EAAAT,GACA,OAAAU,GAAA,EAA2BA,EAAAwe,GAAAte,SAAuBF,EAAA,CAClD,GAAAye,GAAAD,GAAAxe,EACA,IAAAye,EAAAxV,QAAAlJ,GAAA0e,EAAAE,MAAA,IAAArf,EAAA,IACAmf,EAAAE,MAAA,IAAArf,EAAA,GACA,MAAAU,GAEA,SAGA,QAAAuf,GAAAtW,EAAA0V,GACA,GAAApU,GAAAoU,EAAA,GAAAlU,EAAAkU,EAAA,GACA9F,EAAA5P,EAAA+B,MAAA8N,EAAA7P,EAAAgC,MACAyU,EAAA,gBAAAzW,GAAAyW,eAAAzW,EAAAyW,eAAAne,EAAAC,MAAAyB,MAAAgG,EAAAzH,OAAAS,MAAA,QAAAE,UAEA,MAAAoI,EAAAsO,EAAAvW,KAAAiI,EAAAsO,EAAAtW,KAAAkI,EAAAqO,EAAAxW,KAAAmI,EAAAqO,EAAAvW,KAAA,CAGA,GAAAod,GAAA1W,EAAAoD,OAAAyF,OAAA7I,EAAAoD,OAAA0F,UAAA,CACAoN,IAAApN,UAAA4N,EACAR,GAAA3H,YAAAkI,CACA,IAAA5N,GAAA,IAAA6N,CACApV,GAAAsO,EAAAjO,IAAAL,GACAE,EAAAqO,EAAAlO,IAAAH,GAEA0U,GAAA5H,YACA,UAAAtO,EAAAoD,OAAA+N,OACA+E,GAAA9E,IAAA9P,EAAAE,EAAAqH,EAAA,IAAAzC,KAAAkK,IAAA,GAEAtQ,EAAAoD,OAAA+N,OAAA+E,GAAA5U,EAAAE,EAAAqH,GAAA,GACAqN,GAAA7E,YACA6E,GAAAvH,UAGA,QAAA0H,GAAArW,EAAA0V,GACA,GAEAlE,GAFAiF,EAAA,gBAAAzW,GAAAyW,eAAAzW,EAAAyW,eAAAne,EAAAC,MAAAyB,MAAAgG,EAAAzH,OAAAS,MAAA,QAAAE,WACAsU,EAAAiJ,CAGA,QAAAzW,EAAAoE,KAAAiB,OACA,WACAmM,EAAA,CACA,MACA,aACAA,GAAAxR,EAAAoE,KAAAkB,QACA,MACA,SACAkM,GAAAxR,EAAAoE,KAAAkB,SAAA,EAGA4Q,GAAApN,UAAA9I,EAAAoE,KAAA0E,UACAoN,GAAA3H,YAAAkI,EAEAlF,EAAAmE,EAAA,GAAAA,EAAA,GAAAA,EAAA,MAAAlE,IAAAxR,EAAAoE,KAAAkB,SACA,WAAiC,MAAAkI,IAAoBxN,EAAA+B,MAAA/B,EAAAgC,MAAAkU,GAAAlW,EAAAoE,KAAAG,WAAAvE,EAAAoE,KAAA0E,WAGrD,QAAA2E,GAAAkJ,EAAArO,EAAAzK,EAAA+Y,GACA,mBAAAD,GACA,MAAAA,EAOA,QAFAE,GAAAlK,GAAAmK,qBAAA,EAAAjZ,EAAA,EAAAyK,GAEAvR,EAAA,EAAAggB,EAAAJ,EAAAvU,OAAAnL,OAAuDF,EAAAggB,IAAOhgB,EAAA,CAC9D,GAAA8B,GAAA8d,EAAAvU,OAAArL,EACA,oBAAA8B,GAAA,CACA,GAAAme,GAAA1e,EAAAC,MAAAyB,MAAA4c,EACA,OAAA/d,EAAAoe,aACAD,IAAAhe,MAAA,MAAAH,EAAAoe,aACA,MAAApe,EAAAqe,UACAF,EAAAlf,GAAAe,EAAAqe,SACAre,EAAAme,EAAA9d,WAEA2d,EAAAM,aAAApgB,GAAAggB,EAAA,GAAAle,GAGA,MAAAge,GA5mFA,GAAA7W,MACAK,IAEA+B,QAAA,mDACA8P,QACAxP,MAAA,EACAsQ,UAAA,EACAN,eAAA,KACAO,oBAAA,OACA1V,UAAA,KACArF,SAAA,KACAiR,OAAA,EACAyD,gBAAA,KACAwG,kBAAA,IACAT,OAAA,MAEA5Q,OACAW,KAAA,KACAxK,SAAA,SACA8S,KAAA,KACA/D,KAAA,KACA1O,MAAA,KACAuW,UAAA,KACAhK,UAAA,KACAoB,iBAAA,KACA7M,IAAA,KACAC,IAAA,KACA2Q,gBAAA,KACAxD,MAAA,KACA6E,cAAA,KACA5E,WAAA,KACAC,YAAA,KACAyB,aAAA,KACAX,WAAA,KACAsE,mBAAA,KACAvB,aAAA,KACAM,SAAA,KACAD,YAAA,MAEA7I,OACAiI,gBAAA,IACA/R,SAAA,QAEA2I,SACAC,SACAd,QACAoD,QACAV,MAAA,EACAmG,OAAA,EACAC,UAAA,EACAjG,MAAA,EACAoP,UAAA,UACAd,OAAA,UAEA1O,OAGAqG,UAAA,EACAjG,MAAA,EACAoP,UAAA,KACAvN,OAAA,GAIAN,MACA1B,MAAA,EACAoG,UAAA,EACAxD,SAAA,EACAzC,MAAA,EACAoP,UAAA,KACA5M,MAAA,OACAd,YAAA,EACA3B,MAAA,GAEAwN,WAAA,EACAqG,eAAA,MAEA9O,MACAjF,MAAA,EACAmK,WAAA,EACAtU,MAAA,UACAqU,gBAAA,KACAmC,YAAA,KACAD,UAAA,KACA3F,OAAA,EACAtB,YAAA,EACAE,mBAAA,EACAL,WAAA,EACA2B,YAAA,EACAT,gBAAA,KACAkF,SAAA,KACAU,cAAA,UACAJ,kBAAA,EAEAgJ,WAAA,EACAzC,WAAA,EACAW,eAAA,EACA1B,kBAAA,IAEAkC,aACAC,sBAAA,QAEA9R,UAEA6C,GAAA,KACAqP,GAAA,KACAzQ,GAAA,KACAiH,GAAA,KAAAuJ,GAAA,KACArV,MAAAC,MACAuH,IAAsBzK,KAAA,EAAA4K,MAAA,EAAA3K,IAAA,EAAAyK,OAAA,GACtBnC,GAAA,EAAAG,GAAA,EACArC,IACAoT,kBACAnT,kBACAa,qBACAqE,iBACAI,gBACAkD,kBACAK,cACAP,QACA8K,cACAtB,eACAzQ,aAEA1F,GAAA/J,IAGA+J,IAAAE,UACAF,GAAAoJ,YACApJ,GAAA2M,OACA3M,GAAA0X,eAAA,WAA0C,MAAAjY,IAC1CO,GAAA2X,UAAA,WAAqC,MAAA1Q,IAAAtJ,SACrCqC,GAAA4X,cAAA,WAAyC,MAAApP,KACzCxI,GAAAf,MAAA,WAAkC,MAAAqH,KAClCtG,GAAAd,OAAA,WAAmC,MAAAuH,KACnCzG,GAAAoR,OAAA,WACA,GAAAtY,GAAA+M,GAAAuL,QAGA,OAFAtY,GAAAiF,MAAAyK,GAAAzK,KACAjF,EAAAkF,KAAAwK,GAAAxK,IACAlF,GAEAkH,GAAA6X,QAAA,WAAoC,MAAA1X,IACpCH,GAAAkO,QAAA,WACA,GAAA7T,KAKA,OAJA5B,GAAAwL,KAAAjD,GAAAf,OAAAgB,IAAA,SAAAiD,EAAA9C,GACAA,IACA/G,EAAA+G,EAAAtD,WAAA,GAAAsD,EAAAtL,EAAAsL,EAAAtL,EAAA,YAAAsL,KAEA/G,GAEA2F,GAAA8X,SAAA,WAAqC,MAAA9W,KACrChB,GAAA+X,SAAA,WAAqC,MAAA9W,KACrCjB,GAAAsB,IAAAJ,EACAlB,GAAA8B,IAAAF,EACA5B,GAAAgY,WAAA,WAAuC,MAAAxX,KACvCR,GAAA+V,YACA/V,GAAA8V,cACA9V,GAAAmN,uBACAnN,GAAAiY,YAAA,SAAApC,GACA,OACA9X,KAAArE,SAAAsH,GAAAL,EAAAkV,EAAA,QAAA/T,KAAA+T,EAAApU,GAAA+G,GAAAzK,KAAA,IACAC,IAAAtE,SAAAuH,GAAAN,EAAAkV,EAAA,QAAA/T,KAAA+T,EAAAlU,GAAA6G,GAAAxK,IAAA,MAGAgC,GAAA0F,WACA1F,GAAAkY,QAAA,WACAxS,IACAjG,EAAA0Y,WAAA,QAAAC,QAEAjY,KACAK,GAAA,KACAyG,GAAA,KACAqP,GAAA,KACAzQ,GAAA,KACAiH,GAAA,KACAuJ,GAAA,KACArV,MACAC,MACAmD,GAAA,KACAsR,MACA1V,GAAA,MAEAA,GAAAhB,OAAA,WACA,GAAAC,GAAAQ,EAAAR,QACAC,EAAAO,EAAAP,QACA+H,IAAAjI,OAAAC,EAAAC,GACAoX,GAAAtX,OAAAC,EAAAC,IAIAc,GAAAoE,SAkBA,WAQA,OAJAiU,IACA7a,UAGAtG,EAAA,EAA2BA,EAAA0I,EAAAxI,SAAoBF,EAAA,CAC/C,GAAAV,GAAAoJ,EAAA1I,EACAV,GAAA8hB,KAAAtY,GAAAqY,GACA7hB,EAAAgK,SACA/H,EAAA8H,QAAA,EAAAC,GAAAhK,EAAAgK,aAIA,SAAAmG,GAEAlO,EAAA8H,QAAA,EAAAC,GAAAmG,GAOAA,KAAApE,SACA/B,GAAA+B,OAAAoE,EAAApE,QAGA,MAAA/B,GAAA0B,MAAAxJ,QACA8H,GAAA0B,MAAAxJ,MAAAD,EAAAC,MAAAyB,MAAAqG,GAAAsH,KAAApP,OAAAS,MAAA,SAAAE,YACA,MAAAmH,GAAA2B,MAAAzJ,QACA8H,GAAA2B,MAAAzJ,MAAAD,EAAAC,MAAAyB,MAAAqG,GAAAsH,KAAApP,OAAAS,MAAA,SAAAE,YAEA,MAAAmH,GAAA0B,MAAA+M,YACAzO,GAAA0B,MAAA+M,UAAAzO,GAAAsH,KAAAmH,WAAAzO,GAAA0B,MAAAxJ,OACA,MAAA8H,GAAA2B,MAAA8M,YACAzO,GAAA2B,MAAA8M,UAAAzO,GAAAsH,KAAAmH,WAAAzO,GAAA2B,MAAAzJ,OAEA,MAAA8H,GAAAsH,KAAAoH,cACA1O,GAAAsH,KAAAoH,YAAA1O,GAAAsH,KAAApP,OACA,MAAA8H,GAAAsH,KAAAmH,YACAzO,GAAAsH,KAAAmH,UAAAxW,EAAAC,MAAAyB,MAAAqG,GAAAsH,KAAApP,OAAAS,MAAA,SAAAE,WAQA,IAAAnC,GAAAqhB,EAAAC,EACAC,EAAAhZ,EAAA3F,IAAA,aACA4e,EAAAD,KAAAnF,QAAA,YACAqF,GACAC,MAAAnZ,EAAA3F,IAAA,cACA8Q,KAAArE,KAAAqF,MAAA,GAAA8M,GACAG,QAAApZ,EAAA3F,IAAA,gBACAgf,OAAArZ,EAAA3F,IAAA,eACAif,OAAAtZ,EAAA3F,IAAA,eAIA,KADA0e,EAAAhY,GAAAQ,MAAA5J,QAAA,EACAF,EAAA,EAAuBA,EAAAshB,IAAethB,EAEtCqhB,EAAA/X,GAAAQ,MAAA9J,GACAqhB,MAAAtJ,YACAsJ,EAAAtJ,UAAAsJ,EAAA7f,OAGA6f,EAAA9f,EAAA8H,QAAA,KAA+CC,GAAA0B,MAAAqW,GAC/C/X,GAAAQ,MAAA9J,GAAAqhB,EAEAA,EAAAnR,OACAmR,EAAAnR,KAAA3O,EAAA8H,UAAkDoY,EAAAJ,EAAAnR,MAClDmR,EAAAnR,KAAA1O,QACA6f,EAAAnR,KAAA1O,MAAA6f,EAAA7f,OAEA6f,EAAAnR,KAAA4R,aACAT,EAAAnR,KAAA4R,WAAAzS,KAAAqF,MAAA,KAAA2M,EAAAnR,KAAAwD,OAMA,KADA4N,EAAAhY,GAAAS,MAAA7J,QAAA,EACAF,EAAA,EAAuBA,EAAAshB,IAAethB,EAEtCqhB,EAAA/X,GAAAS,MAAA/J,GACAqhB,MAAAtJ,YACAsJ,EAAAtJ,UAAAsJ,EAAA7f,OAGA6f,EAAA9f,EAAA8H,QAAA,KAA+CC,GAAA2B,MAAAoW,GAC/C/X,GAAAS,MAAA/J,GAAAqhB,EAEAA,EAAAnR,OACAmR,EAAAnR,KAAA3O,EAAA8H,UAAkDoY,EAAAJ,EAAAnR,MAClDmR,EAAAnR,KAAA1O,QACA6f,EAAAnR,KAAA1O,MAAA6f,EAAA7f,OAEA6f,EAAAnR,KAAA4R,aACAT,EAAAnR,KAAA4R,WAAAzS,KAAAqF,MAAA,KAAA2M,EAAAnR,KAAAwD,OAgDA,KA1CApK,GAAA0B,MAAAmI,SAAA,MAAA7J,GAAA0B,MAAA0E,QACApG,GAAA0B,MAAA0E,MAAApG,GAAA0B,MAAAmI,SACA7J,GAAA2B,MAAAkI,SAAA,MAAA7J,GAAA2B,MAAAyE,QACApG,GAAA2B,MAAAyE,MAAApG,GAAA2B,MAAAkI,SACA7J,GAAAyY,SACAzY,GAAAQ,MAAA,GAAAvI,EAAA8H,QAAA,KAAoDC,GAAA0B,MAAA1B,GAAAyY,QACpDzY,GAAAQ,MAAA,GAAA3I,SAAA,MAEA,MAAAmI,GAAAyY,OAAAzf,MACAgH,GAAAQ,MAAA,GAAAxH,IAAA,MAEA,MAAAgH,GAAAyY,OAAAxf,MACA+G,GAAAQ,MAAA,GAAAvH,IAAA,OAGA+G,GAAA0Y,SACA1Y,GAAAS,MAAA,GAAAxI,EAAA8H,QAAA,KAAoDC,GAAA2B,MAAA3B,GAAA0Y,QACpD1Y,GAAAS,MAAA,GAAA5I,SAAA,QAEA,MAAAmI,GAAA0Y,OAAA1f,MACAgH,GAAAS,MAAA,GAAAzH,IAAA,MAEA,MAAAgH,GAAA0Y,OAAAzf,MACA+G,GAAAS,MAAA,GAAAxH,IAAA,OAGA+G,GAAAsH,KAAAqR,eACA3Y,GAAAsH,KAAAmG,SAAAzN,GAAAsH,KAAAqR,cACA3Y,GAAAsH,KAAAsR,oBACA5Y,GAAAsH,KAAA6G,cAAAnO,GAAAsH,KAAAsR,mBACA5Y,GAAAoC,OACAnK,EAAA8H,QAAA,EAAAC,GAAAL,OAAAyC,MAAApC,GAAAoC,OACApC,GAAA+C,QACA9K,EAAA8H,QAAA,EAAAC,GAAAL,OAAAoD,OAAA/C,GAAA+C,QACA/C,GAAA+D,MACA9L,EAAA8H,QAAA,EAAAC,GAAAL,OAAAoE,KAAA/D,GAAA+D,MACA,MAAA/D,GAAA+P,aACA/P,GAAAL,OAAAoQ,WAAA/P,GAAA+P,YACA,MAAA/P,GAAAoW,iBACApW,GAAAL,OAAAyW,eAAApW,GAAAoW,gBAGA1f,EAAA,EAAuBA,EAAAsJ,GAAAQ,MAAA5J,SAA0BF,EACjD6K,EAAAf,GAAA9J,EAAA,GAAAsJ,WAAAQ,MAAA9J,EACA,KAAAA,EAAA,EAAuBA,EAAAsJ,GAAAS,MAAA7J,SAA0BF,EACjD6K,EAAAd,GAAA/J,EAAA,GAAAsJ,WAAAS,MAAA/J,EAGA,QAAApB,KAAAsO,IACA5D,GAAA4D,MAAAtO,IAAA0K,GAAA4D,MAAAtO,GAAAsB,SACAgN,GAAAtO,GAAAsO,GAAAtO,GAAAmK,OAAAO,GAAA4D,MAAAtO,IAEA+J,GAAAuE,GAAAoT,gBAAAhX,MA5KAb,GA4lBA,WAIAF,EAAA8S,KAAA,mBAAAC,SAEA,UAAA/S,EAAA3F,IAAA,aACA2F,EAAA3F,IAAA,uBAEAmN,GAAA,GAAAzJ,GAAA,YAAAiC,GACA6W,GAAA,GAAA9Y,GAAA,eAAAiC,GAEAqN,GAAA7F,GAAA1I,QACA8X,GAAAC,GAAA/X,QAGAsH,GAAApN,EAAA6d,GAAA3Y,SAAAmI,QAIA,IAAAuT,GAAA5Z,EAAAgB,KAAA,OAEA4Y,KACAA,EAAA3T,WACA4Q,GAAA1J,SAIAnN,EAAAgB,KAAA,OAAAT,OAtnBAE,EAAAR,GACA0J,IACAuD,IAunBA,WAEAnM,GAAAsH,KAAAgN,YACAjP,GAAAyT,UAAAvT,GAQAF,GAAA0T,KAAA,aAAAvT,IAGAxF,GAAAsH,KAAAyP,WACA1R,GAAA2T,MAAAvT,GAEApG,EAAAuE,GAAAqT,YAAA5R,OA+9CA,IAAA6P,OACA/P,GAAA,KAyVA,QAAA4F,GAAAzV,EAAA2jB,GACA,MAAAA,GAAAlT,KAAAS,MAAAlR,EAAA2jB,GAxmGA,GAAAhjB,GAAAhB,OAAAmB,UAAAH,cAQAgC,GAAAihB,GAAAC,SACAlhB,EAAAihB,GAAAC,OAAA,WACA,MAAA1jB,MAAAgO,KAAA,WACAhO,KAAA2jB,YACA3jB,KAAA2jB,WAAAC,YAAA5jB,UAkFAuH,EAAA5G,UAAAoI,OAAA,SAAAC,EAAAC,GAEA,GAAAD,GAAA,GAAAC,GAAA,EACA,SAAAb,OAAA,wCAAAY,EAAA,cAAAC,EAGA,IAAAvB,GAAA1H,KAAA0H,QACAY,EAAAtI,KAAAsI,QACAQ,EAAA9I,KAAA8I,UASA9I,MAAAgJ,WACAtB,EAAAsB,QAAAF,EACApB,EAAAib,MAAA3Z,QAAA,KACAhJ,KAAAgJ,SAGAhJ,KAAAiJ,YACAvB,EAAAuB,SAAAH,EACApB,EAAAib,MAAA1Z,SAAA,KACAjJ,KAAAiJ,UAOAX,EAAAuP,UACAvP,EAAAkP,OAMAlP,EAAApF,MAAA4F,MAKAvB,EAAA5G,UAAAgW,MAAA,WACA3W,KAAAsI,QAAAub,UAAA,IAAA7jB,KAAAgJ,MAAAhJ,KAAAiJ,SAKA1B,EAAA5G,UAAAmB,OAAA,WAEA,GAAAgiB,GAAA9jB,KAAAoJ,UAKA,QAAA2a,KAAAD,GACA,GAAAtjB,EAAAY,KAAA0iB,EAAAC,GAAA,CAEA,GAAA7S,GAAAlR,KAAAgkB,aAAAD,GACAE,EAAAH,EAAAC,EAEA7S,GAAAgT,MAEA,QAAAC,KAAAF,GACA,GAAAzjB,EAAAY,KAAA6iB,EAAAE,GAAA,CACA,GAAAC,GAAAH,EAAAE,EACA,QAAAvY,KAAAwY,GACA,GAAA5jB,EAAAY,KAAAgjB,EAAAxY,GAAA,CAIA,OAAAxJ,GAFAiiB,EAAAD,EAAAxY,GAAAyY,UAEApjB,EAAA,EAAiCmB,EAAAiiB,EAAApjB,GAAyBA,IAC1DmB,EAAAkiB,OACAliB,EAAAmiB,WACArT,EAAAsT,OAAApiB,EAAAsF,SACAtF,EAAAmiB,UAAA,IAGAF,EAAA3D,OAAAzf,IAAA,GACAmB,EAAAmiB,UACAniB,EAAAsF,QAAAgc,SAKA,IAAAW,EAAAljB,cACAijB,GAAAxY,IAOAsF,EAAAtE,SAWArF,EAAA5G,UAAAqjB,aAAA,SAAA5B,GAEA,GAAAlR,GAAAlR,KAAAmJ,KAAAiZ,EAkCA,OA9BA,OAAAlR,IAIA,MAAAlR,KAAAkJ,gBACAlJ,KAAAkJ,cAAA1G,EAAA,gDACAqB,KACAzB,SAAA,WACA2F,IAAA,EACAD,KAAA,EACA0K,OAAA,EACAE,MAAA,EACA+R,YAAA,UACAhiB,MAAA,YAEAiiB,YAAA1kB,KAAA0H,UAGAwJ,EAAAlR,KAAAmJ,KAAAiZ,GAAA5f,EAAA,eACAmiB,SAAAvC,GACAve,KACAzB,SAAA,WACA2F,IAAA,EACAD,KAAA,EACA0K,OAAA,EACAE,MAAA,IAEA1K,SAAAhI,KAAAkJ,gBAGAgI,GA2CA3J,EAAA5G,UAAA2Q,YAAA,SAAAJ,EAAA/H,EAAAgI,EAAAoJ,EAAAvR,GAEA,GAAA4b,GAAAX,EAAAG,EAAA/S,CAgCA,IA5BAlI,EAAA,GAAAA,EAKAyb,EADA,gBAAAzT,GACAA,EAAAwR,MAAA,IAAAxR,EAAAyR,QAAA,IAAAzR,EAAA0R,OAAA,IAAA1R,EAAAwD,KAAA,MAAAxD,EAAA4R,WAAA,MAAA5R,EAAA2R,OAEA3R,EAKA8S,EAAAjkB,KAAAoJ,WAAA8H,GAEA,MAAA+S,IACAA,EAAAjkB,KAAAoJ,WAAA8H,OAGAkT,EAAAH,EAAAW,GAEA,MAAAR,IACAA,EAAAH,EAAAW,OAOA,OAJAvT,EAAA+S,EAAAjb,IAIA,CAEA,GAAAzB,GAAAlF,EAAA,eAAA6Z,KAAAlT,GACAtF,KACAzB,SAAA,WACAyiB,YAAA7b,EACAjB,KAAA,OAEAC,SAAAhI,KAAAgkB,aAAA9S,GAEA,iBAAAC,GACAzJ,EAAA7D,KACAsN,KAAAyT,EACAniB,MAAA0O,EAAA1O,QAEI,gBAAA0O,IACJzJ,EAAAid,SAAAxT,GAGAE,EAAA+S,EAAAjb,IAAiCzB,UAAA2c,aAEjC,IAAA1P,GAAA3U,KAAAqJ,eAAAF,EACAwL,IACAtD,EAAArI,MAAA2L,EAAA3L,MACAqI,EAAApI,OAAA0L,EAAA1L,SAEAoI,EAAArI,MAAAtB,EAAAod,YAAA,GACAzT,EAAApI,OAAAvB,EAAAqd,aAAA,GACA/kB,KAAAqJ,eAAAF,IAAqCH,MAAAqI,EAAArI,MAAAC,OAAAoI,EAAApI,SAErCvB,EAAAgc,SAGA,MAAArS,IAuBA9J,EAAA5G,UAAA4Y,QAAA,SAAArI,EAAA1F,EAAAE,EAAAvC,EAAAgI,EAAAoJ,EAAAvR,EAAAoQ,EAAAC,GAEA,GAAAhI,GAAArR,KAAAsR,YAAAJ,EAAA/H,EAAAgI,EAAAoJ,EAAAvR,GACAqb,EAAAhT,EAAAgT,SAIA,WAAAjL,EACA5N,GAAA6F,EAAArI,MAAA,EACG,SAAAoQ,IACH5N,GAAA6F,EAAArI,OAGA,UAAAqQ,EACA3N,GAAA2F,EAAApI,OAAA,EACG,UAAAoQ,IACH3N,GAAA2F,EAAApI,OAMA,QAAA7G,GAAAnB,EAAA,EAA2BmB,EAAAiiB,EAAApjB,GAAyBA,IACpD,GAAAmB,EAAAoJ,MAAApJ,EAAAsJ,KAEA,YADAtJ,EAAAkiB,QAAA,EAUAliB,IACAkiB,QAAA,EACAC,UAAA,EACA7c,QAAA2c,EAAAljB,OAAAkQ,EAAA3J,QAAAhE,QAAA2N,EAAA3J,QACA8D,IACAE,KAGA2Y,EAAA5Z,KAAArI,GAIAA,EAAAsF,QAAA7D,KACAkE,IAAAuI,KAAAqF,MAAAjK,GACA5D,KAAAwI,KAAAqF,MAAAnK,GACAwZ,aAAA5L,KAwBA7R,EAAA5G,UAAA2Y,WAAA,SAAApI,EAAA1F,EAAAE,EAAAvC,EAAAgI,EAAAoJ,GACA,SAAApR,EAAA,CACA,GAAA8a,GAAAjkB,KAAAoJ,WAAA8H,EACA,UAAA+S,EACA,OAAAE,KAAAF,GACA,GAAAzjB,EAAAY,KAAA6iB,EAAAE,GAAA,CACA,GAAAC,GAAAH,EAAAE,EACA,QAAAvY,KAAAwY,GACA,GAAA5jB,EAAAY,KAAAgjB,EAAAxY,GAEA,OAAAxJ,GADAiiB,EAAAD,EAAAxY,GAAAyY,UACApjB,EAAA,EAAiCmB,EAAAiiB,EAAApjB,GAAyBA,IAC1DmB,EAAAkiB,QAAA,OASA,QAAAliB,GADAiiB,EAAArkB,KAAAsR,YAAAJ,EAAA/H,EAAAgI,EAAAoJ,GAAA8J,UACApjB,EAAA,EAA4BmB,EAAAiiB,EAAApjB,GAAyBA,IACrDmB,EAAAoJ,MAAApJ,EAAAsJ,OACAtJ,EAAAkiB,QAAA,IAkoFA9hB,EAAAuH,KAAA,SAAAP,EAAAgB,EAAAD,GAIA,MAFA,IAAAhB,GAAA/G,EAAAgH,GAAAgB,EAAAD,EAAA/H,EAAAuH,KAAAJ,UAKAnH,EAAAuH,KAAAkb,QAAA,QAEAziB,EAAAuH,KAAAJ,WAIAnH,EAAAihB,GAAA1Z,KAAA,SAAAS,EAAAD,GACA,MAAAvK,MAAAgO,KAAA,WACAxL,EAAAuH,KAAA/J,KAAAwK,EAAAD,OASCjD,SFiEK4d,KACA,SAAU7lB,EAAQkD,IGzsGxB,SAAAC,GAaA,QAAA8S,GAAAzV,EAAA2jB,GACA,MAAAA,GAAAlT,KAAAS,MAAAlR,EAAA2jB,GAMA,QAAA2B,GAAA9kB,EAAA+kB,EAAAC,EAAAC,GAEA,qBAAAjlB,GAAAklB,SACA,MAAAllB,GAAAklB,SAAAH,EAGA,IAAAI,GAAA,SAAA3lB,EAAA4lB,GAGA,MAFA5lB,GAAA,GAAAA,EACA4lB,EAAA,UAAAA,EAAA,IAAAA,GACA,GAAA5lB,EAAAsB,OAAAskB,EAAA5lB,KAGA8C,KACA+iB,GAAA,EACAC,EAAAtlB,EAAAulB,WACAC,EAAAF,EAAA,EAEA,OAAAN,IACAA,GAAA,0EAGA,MAAAC,IACAA,GAAA,2CAGA,IAAAQ,EAGAA,GADAH,EAAA,GACAA,EAAA,GACG,GAAAA,EACH,GAEAA,CAGA,QAAA1kB,GAAA,EAAiBA,EAAAmkB,EAAAjkB,SAAgBF,EAAA,CAEjC,GAAA8B,GAAAqiB,EAAApiB,OAAA/B,EAEA,IAAAykB,EAAA,CACA,OAAA3iB,GACA,QAAAA,EAAA,GAAAuiB,EAAAjlB,EAAA0lB,SAA6C,MAC7C,SAAAhjB,EAAA,GAAAsiB,EAAAhlB,EAAA2lB,WAAiD,MACjD,SAAAjjB,EAAAyiB,EAAAnlB,EAAA4lB,UAAA,GAA4C,MAC5C,SAAAljB,EAAAyiB,EAAAnlB,EAAA4lB,UAAA,IAA6C,MAC7C,SACA,QAAAljB,EAAAyiB,EAAAG,EAAkC,MAClC,SAAA5iB,EAAAyiB,EAAAM,EAAoC,MACpC,SAAA/iB,EAAAyiB,EAAAM,EAAA,IAAyC,MACzC,SAAA/iB,EAAAyiB,EAAAnlB,EAAA2lB,WAAA,KAAiD,MACjD,SAAAjjB,EAAAyiB,EAAAnlB,EAAA6lB,aAA2C,MAE3C,SACAnjB,EAAA,IAAAuN,KAAAS,MAAA1Q,EAAA2lB,WAAA,KAAkD,MAClD,SAAAjjB,EAAAyiB,EAAAnlB,EAAA8lB,aAA2C,MAC3C,SAAApjB,EAAAyiB,EAAAnlB,EAAA+lB,cAAA,IAAkD,MAClD,SAAArjB,EAAA,GAAA1C,EAAA+lB,aAAwC,MACxC,SAAArjB,EAAA,WAAsD,MACtD,SAAAA,EAAA,WAAsD,MACtD,SAAAA,EAAA,GAAA1C,EAAA0lB,SAEApjB,EAAA8H,KAAA1H,GACA2iB,GAAA,MAEA,KAAA3iB,EACA2iB,GAAA,EAEA/iB,EAAA8H,KAAA1H,GAKA,MAAAJ,GAAAU,KAAA,IAQA,QAAAgjB,GAAAhmB,GAEA,QAAAimB,GAAAC,EAAAC,EAAAC,EAAAC,GACAH,EAAAC,GAAA,WACA,MAAAC,GAAAC,GAAAllB,MAAAilB,EAAAvlB,YAIA,GAAAylB,IACAC,KAAAvmB,OAKAiL,IAAAjL,EAAAklB,UACAe,EAAAK,EAAA,WAAAtmB,EAAA,YAGAimB,EAAAK,EAAA,UAAAtmB,EAAA,WACAimB,EAAAK,EAAA,UAAAtmB,EAAA,UAIA,QAFA8B,IAAA,4EAEA5B,EAAA,EAAiBA,EAAA4B,EAAAhB,OAAkBZ,IACnC+lB,EAAAK,EAAA,MAAAxkB,EAAA5B,GAAAF,EAAA,SAAA8B,EAAA5B,IACA+lB,EAAAK,EAAA,MAAAxkB,EAAA5B,GAAAF,EAAA,SAAA8B,EAAA5B,GAGA,OAAAomB,GAMA,QAAAE,GAAAxQ,EAAA3F,GACA,cAAAA,EAAAoW,SACA,UAAAC,MAAA1Q,EACG,IAAA3F,EAAAoW,UAAA,OAAApW,EAAAoW,SAEA,uBAAAE,iBAAA,KAAAA,WAAAD,KAAA,CACH,GAAA1mB,GAAA,GAAA2mB,YAAAD,IAKA,OAFA1mB,GAAA4mB,YAAAvW,EAAAoW,UACAzmB,EAAA6mB,QAAA7Q,GACAhW,EAEA,MAAAgmB,GAAA,GAAAU,MAAA1Q,IATA,MAAAgQ,GAAA,GAAAU,MAAA1Q,IAgDA,QAAAgM,GAAAtY,GACAA,EAAAoE,MAAAoT,eAAA9W,KAAA,SAAAV,EAAAQ,GACA/H,EAAAwL,KAAAjE,EAAAkO,UAAA,SAAAkP,EAAAhc,GAEA,GAAAuF,GAAAvF,EAAAZ,OAEA,SAAAmG,EAAAwE,OACA/J,EAAAgK,cAAA,SAAAhK,GAEA,GAAAwF,MACAtQ,EAAAwmB,EAAA1b,EAAA5H,IAAAmN,GACA0W,EAAA,EAKAvG,EAAAnQ,EAAAsE,UACA,YADAtE,EAAAsE,SAAA,IAEAtE,EAAAqE,aACA,YADArE,EAAAqE,YAAA,GACAsS,EAAAC,CAEA,OAAA5W,EAAAqE,cAEAqS,EADA,gBAAA1W,GAAAsE,SACAtE,EAAAsE,SAEAtE,EAAAqE,YAAA,GAAAwS,EAAA7W,EAAAqE,YAAA,IAIA,QAAA9T,GAAA,EAAqBA,EAAA4f,EAAA1f,OAAA,KACrBgK,EAAAmE,OAAAuR,EAAA5f,GAAA,GAAAsmB,EAAA1G,EAAA5f,GAAA,IACA4f,EAAA5f,EAAA,MAAAsmB,EAAA1G,EAAA5f,EAAA,WACA4f,EAAA5f,GAAA,GAAAsmB,EAAA1G,EAAA5f,GAAA,KAAAmmB,KAH0CnmB,GAQ1C,GAAA0T,GAAAkM,EAAA5f,GAAA,GACAumB,EAAA3G,EAAA5f,GAAA,EAIA,YAAAumB,EAAA,CAKA,SAAA9W,EAAAqE,aAAA,QAAArE,EAAAqE,YAAA,GACAJ,EAAArE,KAAAS,MAAAL,EAAAqE,YAAA,QACQ,CAER,GAAAH,GAAAtE,KAAAuE,IAAA,GAAAvE,KAAAS,MAAAT,KAAAiE,IAAApJ,EAAAmE,MAAAiY,EAAAE,MAAAnX,KAAAkE,OACAM,EAAA3J,EAAAmE,MAAAiY,EAAAE,KAAA7S,CAGAD,GADAG,EAAA,IACA,EACSA,EAAA,EACT,EACSA,EAAA,IACT,EAEA,GAGAH,GAAAC,EAKAD,EAAA,IACAA,EAAA,GAIAxJ,EAAA6J,SAAAtE,EAAAsE,WAAAL,EAAA6S,EACA,IAAAxS,GAAA7J,EAAA6J,SAAA,EACAwS,GAAArc,EAAA6J,SAAA,EAEA,IAAA0S,GAAA1S,EAAAuS,EAAAC,EAEA,WAAAA,EACAnnB,EAAAsnB,WAAArS,EAAAjV,EAAA8lB,aAAAnR,IACO,UAAAwS,EACPnnB,EAAAunB,WAAAtS,EAAAjV,EAAA6lB,aAAAlR,IACO,QAAAwS,EACPnnB,EAAAwnB,SAAAvS,EAAAjV,EAAAulB,WAAA5Q,IACO,SAAAwS,EACPnnB,EAAAynB,SAAAxS,EAAAjV,EAAA2lB,WAAAhR,IACO,WAAAwS,EACPnnB,EAAAynB,SAAA,EAAAxS,EAAAjV,EAAA2lB,WAAA,EACAhR,IACO,QAAAwS,GACPnnB,EAAA0nB,YAAAzS,EAAAjV,EAAA+lB,cAAApR,IAKA3U,EAAA2nB,gBAAA,GAEAN,GAAAH,EAAAU,QACA5nB,EAAAsnB,WAAA,GAEAD,GAAAH,EAAAW,MACA7nB,EAAAunB,WAAA,GAEAF,GAAAH,EAAAY,KACA9nB,EAAAwnB,SAAA,GAEAH,GAAA,EAAAH,EAAAY,KACA9nB,EAAA+nB,QAAA,GAEAV,GAAA,EAAAH,EAAAc,OACAhoB,EAAAynB,SAAAxS,EAAAjV,EAAA2lB,WAAA,IAEA0B,GAAA,EAAAH,EAAAe,SACAjoB,EAAAynB,SAAAxS,EAAAjV,EAAA2lB,WAAA,IAEA0B,GAAAH,EAAAE,MACApnB,EAAAynB,SAAA,EAGA,IAEA1S,GAFAmT,EAAA,EACA1b,EAAAc,OAAA4H,GAGA,IAMA,GAJAH,EAAAvI,EACAA,EAAAxM,EAAAmoB,UACA7X,EAAAlG,KAAAoC,GAEA,SAAA2a,GAAA,WAAAA,EACA,GAAAxS,EAAA,GAOA3U,EAAA+nB,QAAA,EACA,IAAA/S,GAAAhV,EAAAmoB,SACAnoB,GAAAynB,SAAAznB,EAAA2lB,YACA,WAAAwB,EAAA,KACA,IAAAiB,GAAApoB,EAAAmoB,SACAnoB,GAAA6mB,QAAAra,EAAA0b,EAAAhB,EAAAW,MAAAO,EAAApT,GAAAL,GACAuT,EAAAloB,EAAAulB,WACAvlB,EAAAwnB,SAAA,OAEAxnB,GAAAynB,SAAAznB,EAAA2lB,WACAhR,GAAA,WAAAwS,EAAA,UAEQ,QAAAA,EACRnnB,EAAA0nB,YAAA1nB,EAAA+lB,cAAApR,GAEA3U,EAAA6mB,QAAAra,EAAA6a,SAEO7a,EAAA1B,EAAA3H,KAAAqJ,GAAAuI,EAEP,OAAAzE,IAGAxF,EAAAqK,cAAA,SAAA3I,EAAA1B,GAEA,GAAA9K,GAAAwmB,EAAAha,EAAA1B,EAAAZ,QAIA,UAAAmG,EAAAgY,WACA,MAAAvD,GAAA9kB,EAAAqQ,EAAAgY,WAAAhY,EAAA2U,WAAA3U,EAAA4U,SAMA,IASAF,GATAuD,EAAAxd,EAAAZ,QAAAyK,UACA,WAAA7J,EAAAZ,QAAAyK,SAAA,IACA7J,EAAAZ,QAAAwK,aACA,WAAA5J,EAAAZ,QAAAwK,YAAA,GAEAhU,EAAAoK,EAAA6J,SAAA,GAAAuS,EAAApc,EAAA6J,SAAA,IACA4T,EAAAzd,EAAA3H,IAAA2H,EAAA5H,IACAslB,EAAAnY,EAAA,yBACAoY,EAAApY,EAAA,yBAgCA,OA5BA0U,GADArkB,EAAAwmB,EAAAU,OACAa,EAAA,SAAAD,EACO9nB,EAAAwmB,EAAAY,IACPS,EAAA,EAAArB,EAAAY,IACAW,EAAA,MAAAD,EAEA,SAAAC,EAAA,MAAAD,EAEO9nB,EAAAwmB,EAAAc,MACP,QACOM,GAAA5nB,EAAAwmB,EAAAe,UACPK,GAAA5nB,EAAAwmB,EAAAE,KACAmB,EAAArB,EAAAE,KACA,KAEA,QAEOkB,GAAA5nB,EAAAwmB,EAAAE,KACPmB,EAAArB,EAAAE,KACA,MAEA,SAGA,KAGAtC,EAAA9kB,EAAA+kB,EAAA1U,EAAA2U,WAAA3U,EAAA4U,gBA5YA,GAAA/a,IACA0B,OACA6a,SAAA,KACA4B,WAAA,KACAK,iBAAA,EACA1D,WAAA,OAkJAkC,GACAyB,OAAA,IACAf,OAAA,IACAC,KAAA,KACAC,IAAA,MACAE,MAAA,OACAC,QAAA,OACAb,KAAA,iBAMAwB,IACA,qDACA,cACA,qDACA,cACA,iCACA,uBACA,8BACA,uCACA,YAMA3B,EAAA2B,EAAAjf,SAAA,wBACA,YACAqd,EAAA4B,EAAAjf,SAAA,4BACA,WA+NAxH,GAAAuH,KAAAJ,QAAAc,MACA4X,OACA9X,UACA/F,KAAA,OACAygB,QAAA,QAOAziB,EAAAuH,KAAAob,cAEC7d,SH0tGK4hB,KACA,SAAU7pB,EAAQC,EAAqBC,GAE7C,cAC4B,SAASF,GI9nHrC,QAAA8pB,GAA4BC,EAAU7e,GACpC,MAAO6e,GAASC,IAAI,SAACC,EAAYC,GAC/B,GAAMrb,GAAaob,EAAWpb,eACxBsb,EAAQF,EAAWG,OACnBC,EAAaH,EAAQI,EAAA,EAAOxoB,OAC5BsB,EAAQknB,EAAA,EAAOD,EASrB,OAPe,IAAIE,GAAA,GACjB1b,WAAUA,EACVsb,MAAKA,EACL/mB,MAAKA,EACL+kB,KAAM8B,EAAW9B,SAOvB,QAAAqC,GAA2BC,GACzB,IACE,GAAMC,GAASC,KAAK9lB,MAAM1E,OAAAyqB,EAAA,GAAoBH,GAC9C,QACEI,QAASH,EAAOG,QAAQb,IAAI,SAAAc,GAAK,MAAAA,GAAEC,QACnCC,MAAON,EAAOM,OAEhB,MAAOzL,GAEP,MADA0L,SAAQC,MAAM3L,IACLsL,WAAaG,MAAOG,EAAA,IJomHZ,GAAI7qB,GAAsCJ,EAAoB,GAC1DK,EAA8CL,EAAoBM,EAAEF,GACpE8qB,EAAiDlrB,EAAoB,KAErEoqB,GADyDpqB,EAAoBM,EAAE4qB,GACzBlrB,EAAoB,MAC1EqqB,EAAsDrqB,EAAoB,KAC1EmrB,EAA6CnrB,EAAoB,MACjEorB,EAA2CprB,EAAoB,MAC/DqrB,EAAuCrrB,EAAoB,MAC3DsrB,EAAuCtrB,EAAoB,MAC3DirB,EAA4CjrB,EAAoB,MAChEurB,EAA6CvrB,EAAoB,MACjE0qB,EAA8D1qB,EAAoB,KACvGQ,EAAaC,MAAQA,KAAKD,WAAc,WACxC,GAAIE,GAAgBT,OAAOU,iBACpBC,uBAA2BC,QAAS,SAAUC,EAAGC,GAAKD,EAAEF,UAAYG,IACvE,SAAUD,EAAGC,GAAK,IAAK,GAAIC,KAAKD,GAAOA,EAAEE,eAAeD,KAAIF,EAAEE,GAAKD,EAAEC,IACzE,OAAO,UAAUF,EAAGC,GAEhB,QAASG,KAAOT,KAAKU,YAAcL,EADnCJ,EAAcI,EAAGC,GAEjBD,EAAEM,UAAkB,OAANL,EAAad,OAAOoB,OAAON,IAAMG,EAAGE,UAAYL,EAAEK,UAAW,GAAIF,QAGnFI,EAAYb,MAAQA,KAAKa,UAAarB,OAAOsB,QAAU,SAASC,GAChE,IAAK,GAAIC,GAAGC,EAAI,EAAGpB,EAAIqB,UAAUC,OAAQF,EAAIpB,EAAGoB,IAAK,CACjDD,EAAIE,UAAUD,EACd,KAAK,GAAIV,KAAKS,GAAOxB,OAAOmB,UAAUH,eAAeY,KAAKJ,EAAGT,KACzDQ,EAAER,GAAKS,EAAET,IAEjB,MAAOQ,IAEPgqB,EAAa/qB,MAAQA,KAAK+qB,WAAc,SAAUC,EAASC,EAAYC,EAAGC,GAC1E,MAAO,KAAKD,IAAMA,EAAIE,UAAU,SAAUC,EAASC,GAC/C,QAASC,GAAU7rB,GAAS,IAAMgoB,EAAKyD,EAAUK,KAAK9rB,IAAW,MAAOkf,GAAK0M,EAAO1M,IACpF,QAAS6M,GAAS/rB,GAAS,IAAMgoB,EAAKyD,EAAiB,MAAEzrB,IAAW,MAAOkf,GAAK0M,EAAO1M,IACvF,QAAS8I,GAAKgE,GAAUA,EAAOC,KAAON,EAAQK,EAAOhsB,OAAS,GAAIwrB,GAAE,SAAUG,GAAWA,EAAQK,EAAOhsB,SAAWksB,KAAKL,EAAWE,GACnI/D,GAAMyD,EAAYA,EAAU3pB,MAAMwpB,EAASC,QAAmBO,WAGlEK,EAAe7rB,MAAQA,KAAK6rB,aAAgB,SAAUb,EAASc,GAG/D,QAASC,GAAKlsB,GAAK,MAAO,UAAUgN,GAAK,MAAO6a,IAAM7nB,EAAGgN,KACzD,QAAS6a,GAAKsE,GACV,GAAI7oB,EAAG,KAAM,IAAI8oB,WAAU,kCAC3B,MAAOhe,GAAG,IACN,GAAI9K,EAAI,EAAGuI,IAAM3K,EAAY,EAARirB,EAAG,GAAStgB,EAAU,OAAIsgB,EAAG,GAAKtgB,EAAS,SAAO3K,EAAI2K,EAAU,SAAM3K,EAAEK,KAAKsK,GAAI,GAAKA,EAAE8f,SAAWzqB,EAAIA,EAAEK,KAAKsK,EAAGsgB,EAAG,KAAKL,KAAM,MAAO5qB,EAE3J,QADI2K,EAAI,EAAG3K,IAAGirB,GAAc,EAARA,EAAG,GAAQjrB,EAAErB,QACzBssB,EAAG,IACP,IAAK,GAAG,IAAK,GAAGjrB,EAAIirB,CAAI,MACxB,KAAK,GAAc,MAAX/d,GAAEmD,SAAkB1R,MAAOssB,EAAG,GAAIL,MAAM,EAChD,KAAK,GAAG1d,EAAEmD,QAAS1F,EAAIsgB,EAAG,GAAIA,GAAM,EAAI,SACxC,KAAK,GAAGA,EAAK/d,EAAEie,IAAIC,MAAOle,EAAEme,KAAKD,KAAO,SACxC,SACI,GAAMprB,EAAIkN,EAAEme,OAAMrrB,EAAIA,EAAEI,OAAS,GAAKJ,EAAEA,EAAEI,OAAS,MAAkB,IAAV6qB,EAAG,IAAsB,IAAVA,EAAG,IAAW,CAAE/d,EAAI,CAAG,UACjG,GAAc,IAAV+d,EAAG,MAAcjrB,GAAMirB,EAAG,GAAKjrB,EAAE,IAAMirB,EAAG,GAAKjrB,EAAE,IAAM,CAAEkN,EAAEmD,MAAQ4a,EAAG,EAAI,OAC9E,GAAc,IAAVA,EAAG,IAAY/d,EAAEmD,MAAQrQ,EAAE,GAAI,CAAEkN,EAAEmD,MAAQrQ,EAAE,GAAIA,EAAIirB,CAAI,OAC7D,GAAIjrB,GAAKkN,EAAEmD,MAAQrQ,EAAE,GAAI,CAAEkN,EAAEmD,MAAQrQ,EAAE,GAAIkN,EAAEie,IAAIzhB,KAAKuhB,EAAK,OACvDjrB,EAAE,IAAIkN,EAAEie,IAAIC,MAChBle,EAAEme,KAAKD,KAAO,UAEtBH,EAAKF,EAAK1qB,KAAK4pB,EAAS/c,GAC1B,MAAO2Q,GAAKoN,GAAM,EAAGpN,GAAIlT,EAAI,EAAK,QAAUvI,EAAIpC,EAAI,EACtD,GAAY,EAARirB,EAAG,GAAQ,KAAMA,GAAG,EAAI,QAAStsB,MAAOssB,EAAG,GAAKA,EAAG,OAAK,GAAQL,MAAM,GAvB9E,GAAsGxoB,GAAGuI,EAAG3K,EAAG6B,EAA3GqL,GAAMmD,MAAO,EAAGib,KAAM,WAAa,GAAW,EAAPtrB,EAAE,GAAQ,KAAMA,GAAE,EAAI,OAAOA,GAAE,IAAOqrB,QAAUF,OAC3F,OAAOtpB,IAAM4oB,KAAMO,EAAK,GAAIO,MAASP,EAAK,GAAIQ,OAAUR,EAAK,IAAwB,kBAAXS,UAA0B5pB,EAAE4pB,OAAOC,UAAY,WAAa,MAAOzsB,QAAU4C,GIxnH3J8pB,EAAA,SAAAprB,GAGE,QAAAorB,GAAYvqB,GAAZ,GAAAZ,GACED,EAAAF,KAAApB,KAAMmC,IAAMnC,IAkCduB,GAAAorB,kBAAoB,SAAApD,GACV,GAAAW,GAAA3oB,EAAAE,MAAAyoB,QACF0C,EACD1C,EAAQzL,MAAM,EAAG8K,EAAQ,GAAEvf,SAC5BogB,MAAO,GAAIxe,IAAKpM,OAAAsrB,EAAA,OACfZ,EAAQzL,MAAM8K,EAAQ,GAE3BhoB,GAAKM,UAAWqoB,QAAS0C,KAG3BrrB,EAAAsrB,kBAAoB,SAACzC,EAAOb,GAClB,GAAAW,GAAA3oB,EAAAE,MAAAyoB,QACF4C,EAASjsB,KACVqpB,EAAQX,IACXa,MAAKA,IAEDwC,EAAkB1C,EAAOzL,OAC/BmO,GAAYrD,GAASuD,EACrBvrB,EAAKM,UAAWqoB,QAAS0C,KAG3BrrB,EAAAwrB,iBAAmB,SAAAC,GACjB,GAAM3C,IACJhT,KAAM2V,EAAU3V,KAChBC,GAAI0V,EAAU1V,GAEhB/V,GAAKM,UAAWwoB,MAAKA,GAAI,WAAM,MAAA9oB,GAAK0rB,kBAGtC1rB,EAAA2rB,sBAAwB,WACd,GAAA7qB,GAAAd,EAAAY,MAAAE,aACJA,IACFA,GAAc,IAIlBd,EAAA4rB,uBAAyB,WACvB5rB,EAAKM,SAAS,SAAAJ,GAAS,OAAG2rB,cAAe3rB,EAAM2rB,iBAGjD7rB,EAAA8rB,iBAAmB,WACT,GAAAhrB,GAAAd,EAAAY,MAAAE,aACJA,IACFA,GAAc,EAAMd,EAAKE,QAI7BF,EAAA+rB,uBAAyB,WACvB/rB,EAAKM,SAAS,SAAAJ,GAAS,OAAG8rB,cAAe9rB,EAAM8rB,iBAGjDhsB,EAAAisB,qBAAuB,SAAAjE,GACb,GAAAW,GAAA3oB,EAAAE,MAAAyoB,OACR,MAAIA,EAAQ/oB,QAAU,GAAtB,CAGA,GAAMyrB,GAAkB1C,EAAQzL,MAAM,EAAG8K,GAAMvf,OAAKkgB,EAAQzL,MAAM8K,EAAQ,GAC1EhoB,GAAKM,UAAWqoB,QAAS0C,GAAe,WAAM,MAAArrB,GAAK0rB,mBAGrD1rB,EAAA0rB,aAAe,WACP,GAAAlrB,GAAAR,EAAAE,MAAE2rB,EAAArrB,EAAAqrB,YAAcrrB,GAAAwrB,cAEpBhsB,EAAKksB,gBAEHL,GACF7rB,EAAKmsB,iBAwDTnsB,EAAAosB,QAAU,SAAAC,GAER,MADQrsB,GAAAE,MAAAosB,WACUC,gBAAgBF,GA7J5B,IAAA7rB,GAAA8nB,EAAA1nB,EAAA4rB,YAAAjE,SAAEO,EAAAtoB,EAAAsoB,MAAOH,EAAAnoB,EAAAmoB,OJsvHX,OIrvHJ3oB,GAAKE,MAAKZ,GACRgtB,WAAY,KACZG,gBAAiB,KACjBC,mBAAmB,EACnBC,YAAa,KACbC,QAAS,EACTC,SAAS,EACTlE,QAAS1qB,OAAAsrB,EAAA,GAAcZ,GACvBmE,WAAY,KACZhE,MAAOA,GAAKxpB,KAAS2pB,EAAA,GACrB8D,eAAgB,KAChBlB,cAAc,EACdG,cAAc,EACdgB,YAAa,MACVpsB,EAAMT,cJuuHAH,EIl/Gf,MAzQ6BxB,GAAA2sB,EAAAprB,GAwBrBorB,EAAA/rB,UAAA6tB,kBAAN,WJsuHM,MAAOzD,GAAU/qB,SAAM,OAAQ,GAAQ,WACnC,GAAI6tB,GAAYY,EACZltB,EAAQvB,IACZ,OAAO6rB,GAAY7rB,KAAM,SAAU+B,GAC/B,OAAQA,EAAGqP,OACP,IAAK,GI1uHF,SAAMpR,KAAKmC,MAAMusB,cAAczqB,MJ2uHlC,KAAK,GI1uHF,MADb4pB,GAAa9rB,EAAAsqB,QACA,EAAMwB,EAAWc,iBJ6uHpB,KAAK,GAQD,MIrvHdF,GAAa1sB,EAAAsqB,OACO,YAAtBoC,EAAWG,OACb5uB,KAAK6B,UAAWgsB,WAAUA,EAAEG,gBAAiB,KAAMC,mBAAmB,GAAS,WAAM,MAAA1sB,GAAK0rB,iBAE1FjtB,KAAK6B,UAAWgsB,WAAY,KAAMG,gBAAiBS,EAAWI,QAASZ,mBAAmB,KJivHhE,SI7uH9BvB,EAAA/rB,UAAAmuB,kBAAA,SAAkBvE,GAChBD,QAAQC,MAAMA,IAyEVmC,EAAA/rB,UAAA+sB,cAAN,WJ4qHM,MAAO3C,GAAU/qB,SAAM,OAAQ,GAAQ,WACnC,GAAI+B,GAAI8rB,EAAY3D,EAASG,EAAO0E,EAAKxkB,EAASnG,EAAKsnB,EAAQyC,EAASa,EAAYX,CACpF,OAAOxC,GAAY7rB,KAAM,SAAUivB,GAC/B,OAAQA,EAAG7d,OACP,IAAK,GI9qHrB,GADMrP,EAAiC/B,KAAKyB,MAApCosB,EAAU9rB,EAAA8rB,WAAE3D,EAAOnoB,EAAAmoB,QAAEG,EAAKtoB,EAAAsoB,OAC7B7qB,OAAAsrB,EAAA,GAASZ,GACZ,SAEFlqB,MAAK6B,UAAWssB,QAAS,EAAGC,SAAS,EAAMF,YAAa,KAAMG,WAAY,OACpEU,EAAMhI,KAAKgI,MACXxkB,EAAU/K,OAAAsrB,EAAA,IACdrd,OAAQ,cACRyhB,SAAUrB,EAAWqB,SACrBC,SAAS,EACT9E,MAAKA,EACLH,QAASA,EAAQb,IAAI,SAAAc,GAAK,MAAAA,GAAEC,UJkrHV6E,EAAG7d,MAAQ,CACf,KAAK,GIhrHP,MJirHM6d,GAAG7C,KAAK3hB,MAAM,EAAG,EAAG,CAAE,KIjrH5B,EAAMojB,EAAWzD,MAAM7f,GJmrHrB,KAAK,GAKD,MIxrHZnG,GAAM6qB,EAAA5C,OACNX,EAASvC,EAAmB/kB,EAAIoG,KAAMD,GACtC4jB,EAAUpH,KAAKgI,MAAQA,EAC7B/uB,KAAK6B,UAAWssB,QAAOA,EAAEC,SAAS,EAAOF,YAAaxC,EAAQ4C,eAAgB/jB,KJqrHpD,EAAa,EACzB,KAAK,GAKD,MAJAykB,GAAaC,EAAG5C,OIrrHlC/B,QAAQC,MAAMyE,GACRX,EAAaW,EAASxkB,KAAOwkB,EAASxkB,KAAK+f,MAAQyE,EACzDhvB,KAAK6B,UAAWusB,SAAS,EAAOC,WAAUA,KJurHhB,EAAa,EACzB,KAAK,GAAG,OAAQ,SIprH5B3B,EAAA/rB,UAAA8sB,cAAN,WJ0rHM,MAAO1C,GAAU/qB,SAAM,OAAQ,GAAQ,WACnC,GAAI+B,GAAI8rB,EAAY3D,EAASG,EAAO0E,EAAKxkB,EAASnG,EAAKgrB,EAAYjB,EAASkB,EAAYhB,CACxF,OAAOxC,GAAY7rB,KAAM,SAAUivB,GAC/B,OAAQA,EAAG7d,OACP,IAAK,GI5rHrB,GADMrP,EAAiC/B,KAAKyB,MAApCosB,EAAU9rB,EAAA8rB,WAAE3D,EAAOnoB,EAAAmoB,QAAEG,EAAKtoB,EAAAsoB,OAC7B7qB,OAAAsrB,EAAA,GAASZ,GACZ,SAEFlqB,MAAK6B,UAAWssB,QAAS,EAAGC,SAAS,EAAMC,WAAY,KAAME,YAAa,OACpEQ,EAAMhI,KAAKgI,MACXxkB,EAAU/K,OAAAsrB,EAAA,IACdrd,OAAQ,QACRyhB,SAAUrB,EAAWqB,SACrBC,SAAS,EACT9E,MAAKA,EACLH,QAASA,EAAQb,IAAI,SAAAc,GAAK,MAAAA,GAAEC,UJgsHV6E,EAAG7d,MAAQ,CACf,KAAK,GI9rHP,MJ+rHM6d,GAAG7C,KAAK3hB,MAAM,EAAG,EAAG,CAAE,KI/rH5B,EAAMojB,EAAWzD,MAAM7f,GJisHrB,KAAK,GAKD,MItsHZnG,GAAM6qB,EAAA5C,OACN+C,EAAahrB,EAAIoG,KAAK,GACtB2jB,EAAUpH,KAAKgI,MAAQA,EAC7B/uB,KAAK6B,UAAWssB,QAAOA,EAAEC,SAAS,EAAOG,YAAaa,EAAYd,eAAgB/jB,KJmsHxD,EAAa,EACzB,KAAK,GAKD,MAJA8kB,GAAaJ,EAAG5C,OInsHlC/B,QAAQC,MAAM8E,GACRhB,EAAagB,EAAS7kB,KAAO6kB,EAAS7kB,KAAK+f,MAAQ8E,EACzDrvB,KAAK6B,UAAWusB,SAAS,EAAOC,WAAUA,KJqsHhB,EAAa,EACzB,KAAK,GAAG,OAAQ,SI7rHlC3B,EAAA/rB,UAAAmB,OAAA,WACQ,GAAAC,GAAA/B,KAAAmC,MAAEC,EAAAL,EAAAK,SAAUT,EAAAI,EAAAJ,MACZstB,EAAAjvB,KAAAyB,MACJosB,EAAAoB,EAAApB,WACAG,EAAAiB,EAAAjB,gBACAC,EAAAgB,EAAAhB,kBACAC,EAAAe,EAAAf,YACAC,EAAAc,EAAAd,QACAC,EAAAa,EAAAb,QACAlE,EAAA+E,EAAA/E,QACAmE,EAAAY,EAAAZ,WACAhE,EAAA4E,EAAA5E,MACAiE,EAAAW,EAAAX,eACAlB,EAAA6B,EAAA7B,aACAG,EAAA0B,EAAA1B,aACAgB,EAAAU,EAAAV,YAEIe,EAAclC,GAAgBG,EAC9BgC,EAAcD,EAAc,QAAU,QACtCE,EAAoBF,GAAelC,EAAe,SAAW,GAC7DqC,EAAoBH,GAAe/B,EAAe,SAAW,GAC7DmC,EAAe/tB,EAAQ,wBAA0B,SACvD,OACE/B,GAAAoC,EAAAC,cAAA,OAAKC,UAAWwtB,GACd9vB,EAAAoC,EAAAC,cAAA,OAAKC,UAAU,UACC,SAAbE,EACCxC,EAAAoC,EAAAC,cAAA,WACErC,EAAAoC,EAAAC,cAAA,KAAGC,UAAU,mBACXtC,EAAAoC,EAAAC,cAAA,KAAGC,UAAU,iBJmrHL,YI9qHZtC,EAAAoC,EAAAC,cAAA,OAAKC,UAAU,uCACbtC,EAAAoC,EAAAC,cAAA,UAAQC,UAAU,oBAAoB8N,QAAShQ,KAAKktB,uBAAqB,gBAK7EttB,EAAAoC,EAAAC,cAAA,OAAKC,UAAU,mBACD,SAAbE,GAAwBT,EAMrB,KALF/B,EAAAoC,EAAAC,cAAA,OAAKC,UAAU,kBACbtC,EAAAoC,EAAAC,cAAA,UAAQC,UAAU,oBAAoB8N,QAAShQ,KAAKqtB,kBAAgB,UAKxEztB,EAAAoC,EAAAC,cAAA,OAAKC,UAAU,kBACbtC,EAAAoC,EAAAC,cAAA,UAAQC,UAAW,qBAAqBstB,EAAqBxf,QAAShQ,KAAKmtB,wBAAsB,SAGjGvtB,EAAAoC,EAAAC,cAAA,UAAQC,UAAW,qBAAqButB,EAAqBzf,QAAShQ,KAAKstB,wBAAsB,UAInG1tB,EAAAoC,EAAAC,cAACuoB,EAAA,GAAWH,MAAOA,EAAOsF,aAAc3vB,KAAK+sB,mBAC7CntB,EAAAoC,EAAAC,cAAA,OAAKC,UAAU,2BACbtC,EAAAoC,EAAAC,cAAA,UAAQC,UAAU,6BAA6B8N,QAAShQ,KAAKitB,cJiqHjD,aIhqHArtB,EAAAoC,EAAAC,cAAA,KAAGC,UAAU,+BAExBksB,GAAWD,EAAUvuB,EAAAoC,EAAAC,cAACyoB,EAAA,GAAYkF,KAAMzB,EAASjsB,UAAU,cAAiB,OAIhF+rB,EAAoBruB,EAAAoC,EAAAC,cAAA,OAAKC,UAAU,qBAAmB,yBAA+B,KAErF8rB,EACCpuB,EAAAoC,EAAAC,cAAA,OAAKC,UAAU,oBAAoB2tB,MAAO7B,GAAe,mCAGvD,KAEHH,EACCjuB,EAAAoC,EAAAC,cAAA,OAAKC,UAAU,qBACbtC,EAAAoC,EAAAC,cAAC0oB,EAAA,GACCT,QAASA,EACTyD,QAAS3tB,KAAK2tB,QACdmC,cAAe9vB,KAAK2sB,kBACpBoD,cAAe/vB,KAAK6sB,kBACpBmD,eAAgBhwB,KAAKitB,aACrBgD,iBAAkBjwB,KAAKwtB,uBAExBa,EAAazuB,EAAAoC,EAAAC,cAAA,OAAKC,UAAU,sBAAsBmsB,GAAoB,KACvEzuB,EAAAoC,EAAAC,cAAA,QAAMC,UAAU,SACbkrB,EACCxtB,EAAAoC,EAAAC,cAAC2oB,EAAA,GACCpgB,KAAM0jB,EACNgC,GAAI,iBAAiB9tB,EACrBmI,QAAS+jB,EACTrlB,OAAQsmB,EACR5tB,MAAOA,IAEP,KACH4rB,EAAe3tB,EAAAoC,EAAAC,cAAC4oB,EAAA,GAAMrgB,KAAM+jB,EAAarsB,UAAU,UAAa,OAGnE,OAIZwqB,GAzQ6B9sB,EAAAoC,EAAMmuB,UA2QnC7wB,GAAA,EAAeE,OAAAirB,EAAA,KAAIprB,GAAQqtB,KJqoHEtrB,KAAK9B,EAAqBC,EAAoB,KAAKF,KAI1E+wB,KACA,SAAU/wB,EAAQC,EAAqBC,GAE7C,YACqB,IAAII,GAAsCJ,EAAoB,GAC1DK,EAA8CL,EAAoBM,EAAEF,GACzFI,EAAaC,MAAQA,KAAKD,WAAc,WACxC,GAAIE,GAAgBT,OAAOU,iBACpBC,uBAA2BC,QAAS,SAAUC,EAAGC,GAAKD,EAAEF,UAAYG,IACvE,SAAUD,EAAGC,GAAK,IAAK,GAAIC,KAAKD,GAAOA,EAAEE,eAAeD,KAAIF,EAAEE,GAAKD,EAAEC,IACzE,OAAO,UAAUF,EAAGC,GAEhB,QAASG,KAAOT,KAAKU,YAAcL,EADnCJ,EAAcI,EAAGC,GAEjBD,EAAEM,UAAkB,OAANL,EAAad,OAAOoB,OAAON,IAAMG,EAAGE,UAAYL,EAAEK,UAAW,GAAIF,QK39HvF4vB,EAAA,SAAA/uB,GAAA,QAAA+uB,KAAA,GAAA9uB,GAAA,OAAAD,KAAAE,MAAAxB,KAAAkB,YAAAlB,IL4+HQ,OKx+HNuB,GAAAE,OACE6uB,QAAS,GAQX/uB,EAAA4X,KAAO,WACL,GAAMoX,GAAQxJ,KAAKgI,MACbuB,EAAUC,EAAQhvB,EAAK4Z,MAC7B5Z,GAAKM,UAAWyuB,QAAOA,KL49HZ/uB,EKn8Hf,MAzCyCxB,GAAAswB,EAAA/uB,GAQvC+uB,EAAA1vB,UAAA0U,MAAA,WACErV,KAAKmb,OAAS4L,KAAKgI,MACnB/uB,KAAKwwB,MAAQtoB,OAAOuoB,YAAYzwB,KAAKmZ,KAZxB,MAqBfkX,EAAA1vB,UAAA+vB,0BAAA,SAA0BC,GACpBA,EAAUf,KACZgB,cAAc5wB,KAAKwwB,OACVxwB,KAAKmC,MAAMytB,MACpB5vB,KAAKqV,SAITgb,EAAA1vB,UAAA6tB,kBAAA,WACExuB,KAAKqV,SAGPgb,EAAA1vB,UAAAkwB,qBAAA,WACED,cAAc5wB,KAAKwwB,QAGrBH,EAAA1vB,UAAAmB,OAAA,WACU,GAAAwuB,GAAAtwB,KAAAyB,MAAA6uB,QACFvuB,EAAA/B,KAAAmC,MAAED,EAAAH,EAAAG,UAAW0tB,EAAA7tB,EAAA6tB,KACblwB,GAASkwB,GAAQU,GAAW,GAClC,OAAO1wB,GAAAoC,EAAAC,cAAA,QAAMC,UAAW,gBAAgBA,GAAcxC,EAAM6W,QAAQ,GL+9H5D,MK79HZ8Z,GAzCyC1wB,EAAA,cL0gIZL,GAAuB,EAAI,GAKlDwxB,KACA,SAAUzxB,EAAQC,EAAqBC,GAE7C,YACqB,IAAII,GAAsCJ,EAAoB,GAC1DK,EAA8CL,EAAoBM,EAAEF,GACpEoxB,EAA4CxxB,EAAoB,MACrFQ,EAAaC,MAAQA,KAAKD,WAAc,WACxC,GAAIE,GAAgBT,OAAOU,iBACpBC,uBAA2BC,QAAS,SAAUC,EAAGC,GAAKD,EAAEF,UAAYG,IACvE,SAAUD,EAAGC,GAAK,IAAK,GAAIC,KAAKD,GAAOA,EAAEE,eAAeD,KAAIF,EAAEE,GAAKD,EAAEC,IACzE,OAAO,UAAUF,EAAGC,GAEhB,QAASG,KAAOT,KAAKU,YAAcL,EADnCJ,EAAcI,EAAGC,GAEjBD,EAAEM,UAAkB,OAANL,EAAad,OAAOoB,OAAON,IAAMG,EAAGE,UAAYL,EAAEK,UAAW,GAAIF,QAGnFI,EAAYb,MAAQA,KAAKa,UAAarB,OAAOsB,QAAU,SAASC,GAChE,IAAK,GAAIC,GAAGC,EAAI,EAAGpB,EAAIqB,UAAUC,OAAQF,EAAIpB,EAAGoB,IAAK,CACjDD,EAAIE,UAAUD,EACd,KAAK,GAAIV,KAAKS,GAAOxB,OAAOmB,UAAUH,eAAeY,KAAKJ,EAAGT,KACzDQ,EAAER,GAAKS,EAAET,IAEjB,MAAOQ,IAEPiwB,EAAUhxB,MAAQA,KAAKgxB,QAAW,SAAUhwB,EAAG4d,GAC/C,GAAI7d,KACJ,KAAK,GAAIR,KAAKS,GAAOxB,OAAOmB,UAAUH,eAAeY,KAAKJ,EAAGT,IAAMqe,EAAE/I,QAAQtV,GAAK,IAC9EQ,EAAER,GAAKS,EAAET,GACb,IAAS,MAALS,GAAqD,kBAAjCxB,QAAOyxB,sBAC3B,IAAK,GAAIhwB,GAAI,EAAGV,EAAIf,OAAOyxB,sBAAsBjwB,GAAIC,EAAIV,EAAEY,OAAQF,IAAS2d,EAAE/I,QAAQtV,EAAEU,IAAM,IAC1FF,EAAER,EAAEU,IAAMD,EAAET,EAAEU,IACtB,OAAOF,IM/iIXmwB,EAAA,SAAA5vB,GACE,QAAA4vB,GAAY/uB,GAAZ,GAAAZ,GACED,EAAAF,KAAApB,KAAMmC,IAAMnC,INolIR,OM7kINuB,GAAAsrB,kBAAoB,SAAAntB,GACZ,GAAAqC,GAAAR,EAAAY,MAAEonB,EAAAxnB,EAAAwnB,MAAOwG,EAAAhuB,EAAAguB,cACP3F,EAAA7oB,EAAAE,MAAA2oB,MACF+G,EAAS/G,IAAU1qB,CACzB6B,GAAKM,UAAWsvB,OAAMA,EAAE/G,MAAO1qB,IAC3BqwB,GACFA,EAAcrwB,EAAO6pB,IAIzBhoB,EAAA6vB,qBAAuB,WACf,GAAArvB,GAAAR,EAAAY,MAAEonB,EAAAxnB,EAAAwnB,MAAOuG,EAAA/tB,EAAA+tB,aACXA,IACFA,EAAcvG,IAIlBhoB,EAAA8vB,wBAA0B,WAClB,GAAAtvB,GAAAR,EAAAY,MAAEonB,EAAAxnB,EAAAwnB,MAAO0G,EAAAluB,EAAAkuB,gBACXA,IACFA,EAAiB1G,IAIrBhoB,EAAA+vB,iBAAmB,WACT,GAAAtB,GAAAzuB,EAAAY,MAAA6tB,cACJA,IACFA,KAjCFzuB,EAAKE,OACH0vB,QAAQ,EACR/G,MAAOjoB,EAAMioB,OAAS,INilIb7oB,EMrhIf,MAjEuBxB,GAAAmxB,EAAA5vB,GAwCrB4vB,EAAAvwB,UAAAmB,OAAA,WACU,GAAA6rB,GAAA3tB,KAAAmC,MAAAwrB,QACF5rB,EAAA/B,KAAAyB,MAAE0vB,EAAApvB,EAAAovB,OAAQ/G,EAAAroB,EAAAqoB,KAChB,OACExqB,GAAAoC,EAAAC,cAAA,OAAKC,UAAU,aACbtC,EAAAoC,EAAAC,cAAA,OAAKC,UAAU,mBACbtC,EAAAoC,EAAAC,cAAA,UAAQC,UAAU,yCAAyC8N,QAAShQ,KAAKoxB,sBACvExxB,EAAAoC,EAAAC,cAAA,KAAGC,UAAU,gBAEftC,EAAAoC,EAAAC,cAAA,UAAQC,UAAU,yCAAyC8N,QAAShQ,KAAKqxB,yBACvEzxB,EAAAoC,EAAAC,cAAA,KAAGC,UAAU,kBAGjBtC,EAAAoC,EAAAC,cAAA,OAAKC,UAAU,uBACbtC,EAAAoC,EAAAC,cAAC8uB,EAAA,GACCQ,aAAcJ,EAAS,KAAO/G,EAC9BoH,aAAcxxB,KAAKsxB,iBACnBG,cAAezxB,KAAK6sB,kBACpBrjB,YAAY,uBACZmkB,QAASA,OAMrBuD,GAjEuBvxB,EAAA,eAmEvB+xB,EAAA,SAAApwB,GAAA,QAAAowB,KNsiIQ,MAAkB,QAAXpwB,GAAmBA,EAAOE,MAAMxB,KAAMkB,YAAclB,KM7hInE,MATuCD,GAAA2xB,EAAApwB,GACrCowB,EAAA/wB,UAAAmB,OAAA,WACE,GAAMC,GAAA/B,KAAAmC,MAAE8sB,EAAAltB,EAAAG,gBAAA,KAAA+sB,EAAA,GAAAA,EAAgB/E,EAAAnoB,EAAAmoB,QAASyH,EAAAX,EAAAjvB,GAAA,uBACjC,OACEnC,GAAAoC,EAAAC,cAAA,OAAKC,UAAWA,GACbgoB,EAAQb,IAAI,SAACc,EAAGZ,GAAU,MAAA3pB,GAAAoC,EAAAC,cAACivB,EAAQrwB,GAAC+K,IAAKue,EAAEve,IAAK2d,MAAOA,EAAOa,MAAOD,EAAEC,OAAWuH,QAI3FD,GATuC/xB,EAAA,cN8iIVL,GAAuB,EAAI,GAKlDsyB,KACA,SAAUvyB,EAAQC,EAAqBC,GAE7C,YOxmIA,SAAAsyB,GAA4B7wB,GAC1B,MAAOA,GAAIA,EAAE8wB,OAAO,SAACC,EAAKnvB,GAAM,MAAAmvB,GAAI/nB,OAAOpH,EAAEovB,ePwmI1B,GAAIryB,GAAsCJ,EAAoB,GAC1DK,EAA8CL,EAAoBM,EAAEF,GACpEsyB,EAA0C1yB,EAAoB,IAC9D2yB,EAAkD3yB,EAAoBM,EAAEoyB,GACxEE,EAAsC5yB,EAAoB,IAC1D6yB,EAA4C7yB,EAAoB,KAChE8yB,EAAuD9yB,EAAoB,KAC3E+yB,EAA2C/yB,EAAoB,MAC/DgzB,EAAsDhzB,EAAoB,MAC1EizB,EAAqDjzB,EAAoB,MACzEkzB,EAAuDlzB,EAAoB,MAC3EmzB,EAA2DnzB,EAAoB,MAC/EozB,EAAuDpzB,EAAoB,MAC3EqzB,EAAiDrzB,EAAoB,MACrEszB,EAAmDtzB,EAAoB,MACvEuzB,EAA4CvzB,EAAoB,MACrFQ,EAAaC,MAAQA,KAAKD,WAAc,WACxC,GAAIE,GAAgBT,OAAOU,iBACpBC,uBAA2BC,QAAS,SAAUC,EAAGC,GAAKD,EAAEF,UAAYG,IACvE,SAAUD,EAAGC,GAAK,IAAK,GAAIC,KAAKD,GAAOA,EAAEE,eAAeD,KAAIF,EAAEE,GAAKD,EAAEC,IACzE,OAAO,UAAUF,EAAGC,GAEhB,QAASG,KAAOT,KAAKU,YAAcL,EADnCJ,EAAcI,EAAGC,GAEjBD,EAAEM,UAAkB,OAANL,EAAad,OAAOoB,OAAON,IAAMG,EAAGE,UAAYL,EAAEK,UAAW,GAAIF,QAGnFI,EAAYb,MAAQA,KAAKa,UAAarB,OAAOsB,QAAU,SAASC,GAChE,IAAK,GAAIC,GAAGC,EAAI,EAAGpB,EAAIqB,UAAUC,OAAQF,EAAIpB,EAAGoB,IAAK,CACjDD,EAAIE,UAAUD,EACd,KAAK,GAAIV,KAAKS,GAAOxB,OAAOmB,UAAUH,eAAeY,KAAKJ,EAAGT,KACzDQ,EAAER,GAAKS,EAAET,IAEjB,MAAOQ,IAEPgqB,EAAa/qB,MAAQA,KAAK+qB,WAAc,SAAUC,EAASC,EAAYC,EAAGC,GAC1E,MAAO,KAAKD,IAAMA,EAAIE,UAAU,SAAUC,EAASC,GAC/C,QAASC,GAAU7rB,GAAS,IAAMgoB,EAAKyD,EAAUK,KAAK9rB,IAAW,MAAOkf,GAAK0M,EAAO1M,IACpF,QAAS6M,GAAS/rB,GAAS,IAAMgoB,EAAKyD,EAAiB,MAAEzrB,IAAW,MAAOkf,GAAK0M,EAAO1M,IACvF,QAAS8I,GAAKgE,GAAUA,EAAOC,KAAON,EAAQK,EAAOhsB,OAAS,GAAIwrB,GAAE,SAAUG,GAAWA,EAAQK,EAAOhsB,SAAWksB,KAAKL,EAAWE,GACnI/D,GAAMyD,EAAYA,EAAU3pB,MAAMwpB,EAASC,QAAmBO,WAGlEK,EAAe7rB,MAAQA,KAAK6rB,aAAgB,SAAUb,EAASc,GAG/D,QAASC,GAAKlsB,GAAK,MAAO,UAAUgN,GAAK,MAAO6a,IAAM7nB,EAAGgN,KACzD,QAAS6a,GAAKsE,GACV,GAAI7oB,EAAG,KAAM,IAAI8oB,WAAU,kCAC3B,MAAOhe,GAAG,IACN,GAAI9K,EAAI,EAAGuI,IAAM3K,EAAY,EAARirB,EAAG,GAAStgB,EAAU,OAAIsgB,EAAG,GAAKtgB,EAAS,SAAO3K,EAAI2K,EAAU,SAAM3K,EAAEK,KAAKsK,GAAI,GAAKA,EAAE8f,SAAWzqB,EAAIA,EAAEK,KAAKsK,EAAGsgB,EAAG,KAAKL,KAAM,MAAO5qB,EAE3J,QADI2K,EAAI,EAAG3K,IAAGirB,GAAc,EAARA,EAAG,GAAQjrB,EAAErB,QACzBssB,EAAG,IACP,IAAK,GAAG,IAAK,GAAGjrB,EAAIirB,CAAI,MACxB,KAAK,GAAc,MAAX/d,GAAEmD,SAAkB1R,MAAOssB,EAAG,GAAIL,MAAM,EAChD,KAAK,GAAG1d,EAAEmD,QAAS1F,EAAIsgB,EAAG,GAAIA,GAAM,EAAI,SACxC,KAAK,GAAGA,EAAK/d,EAAEie,IAAIC,MAAOle,EAAEme,KAAKD,KAAO,SACxC,SACI,GAAMprB,EAAIkN,EAAEme,OAAMrrB,EAAIA,EAAEI,OAAS,GAAKJ,EAAEA,EAAEI,OAAS,MAAkB,IAAV6qB,EAAG,IAAsB,IAAVA,EAAG,IAAW,CAAE/d,EAAI,CAAG,UACjG,GAAc,IAAV+d,EAAG,MAAcjrB,GAAMirB,EAAG,GAAKjrB,EAAE,IAAMirB,EAAG,GAAKjrB,EAAE,IAAM,CAAEkN,EAAEmD,MAAQ4a,EAAG,EAAI,OAC9E,GAAc,IAAVA,EAAG,IAAY/d,EAAEmD,MAAQrQ,EAAE,GAAI,CAAEkN,EAAEmD,MAAQrQ,EAAE,GAAIA,EAAIirB,CAAI,OAC7D,GAAIjrB,GAAKkN,EAAEmD,MAAQrQ,EAAE,GAAI,CAAEkN,EAAEmD,MAAQrQ,EAAE,GAAIkN,EAAEie,IAAIzhB,KAAKuhB,EAAK,OACvDjrB,EAAE,IAAIkN,EAAEie,IAAIC,MAChBle,EAAEme,KAAKD,KAAO,UAEtBH,EAAKF,EAAK1qB,KAAK4pB,EAAS/c,GAC1B,MAAO2Q,GAAKoN,GAAM,EAAGpN,GAAIlT,EAAI,EAAK,QAAUvI,EAAIpC,EAAI,EACtD,GAAY,EAARirB,EAAG,GAAQ,KAAMA,GAAG,EAAI,QAAStsB,MAAOssB,EAAG,GAAKA,EAAG,OAAK,GAAQL,MAAM,GAvB9E,GAAsGxoB,GAAGuI,EAAG3K,EAAG6B,EAA3GqL,GAAMmD,MAAO,EAAGib,KAAM,WAAa,GAAW,EAAPtrB,EAAE,GAAQ,KAAMA,GAAE,EAAI,OAAOA,GAAE,IAAOqrB,QAAUF,OAC3F,OAAOtpB,IAAM4oB,KAAMO,EAAK,GAAIO,MAASP,EAAK,GAAIQ,OAAUR,EAAK,IAAwB,kBAAXS,UAA0B5pB,EAAE4pB,OAAOC,UAAY,WAAa,MAAOzsB,QAAU4C,GOxpIrJmwB,EAAe,GACfC,EAAqB,IAMrBC,EAAkB,SAAA7I,GACtB,MAAA+H,GAAA,MAAMe,UACJtrB,UACEurB,QAEIC,OAAQ,QACRC,KAAM,YACNF,QAEIC,OAAQ,OACRE,SAEInqB,KAAMihB,YAUxBmJ,EAAA,SAAAjyB,GAEE,QAAAiyB,GAAYpxB,GAAZ,GAAAZ,GACED,EAAAF,KAAApB,KAAMmC,IAAMnC,IPksIR,OOjsIJuB,GAAKiyB,KAAO5rB,SAAS3F,cAAc,OACnCV,EAAKiyB,KAAKC,UAAU3wB,IAAI,oBAAqB,qBAAqBX,EAAMonB,OACxE3hB,SAASkkB,KAAK4H,YAAYnyB,EAAKiyB,MP+rIpBjyB,EOrrIf,MAhBqBxB,GAAAwzB,EAAAjyB,GASnBiyB,EAAA5yB,UAAAkwB,qBAAA,WACEjpB,SAASkkB,KAAKlI,YAAY5jB,KAAKwzB,OAGjCD,EAAA5yB,UAAAmB,OAAA,WACE,MAAOowB,GAAAlwB,EAAS2xB,aAAa3zB,KAAKmC,MAAMwF,SAAU3H,KAAKwzB,OAE3DD,GAhBqB3zB,EAAAoC,EAAMmuB,WAkB3ByD,EAAA,SAAAtyB,GAKE,QAAAsyB,GAAYzxB,EAAOmG,GAAnB,GAAA/G,GACED,EAAAF,KAAApB,KAAMmC,EAAOmG,IAAQtI,IP+9IjB,OOh7INuB,GAAAsyB,SAAW,SAAC9xB,GP6oIF,GO7oIIrC,GAAAqC,EAAArC,MACN+W,EAAU/W,EAAMkI,WAAarG,EAAKE,MAAM/B,MAAMkI,QACpDrG,GAAKM,UAAWnC,MAAKA,GAAI,WACnB+W,GACFlV,EAAKsrB,sBAIT3kB,OAAO4rB,sBAAsBvyB,EAAKwyB,kBAGpCxyB,EAAAyyB,kBAAoB,WACbzyB,EAAKE,MAAMwyB,UAGhBz0B,OAAAkzB,EAAA,GAA4BnxB,EAAKE,MAAMwyB,SAEvC/rB,OAAO4rB,sBAAsB,WAE3B,GAAMI,GAAS3yB,EAAKE,MAAM/B,MACvBw0B,SACAC,WAAW,KACXC,eAAe,EAClB7yB,GAAKsyB,SAASK,OAIlB3yB,EAAAosB,QAAU,SAAAC,GACR,MAAIrsB,GAAKY,MAAMwrB,QACNpsB,EAAKY,MAAMwrB,QAAQC,GAErByG,MAAMzG,IAGfrsB,EAAAsrB,kBAAoB,WAEV,GAAA4E,GAAAlwB,EAAAY,MAAAsvB,aACJA,IACFA,EAAcY,EAAA,QAAMiC,UAAU/yB,EAAKE,MAAM/B,SAI7C6B,EAAAwyB,gBAAkBv0B,OAAAozB,EAAA,GAAS,WACzB,GAAM2B,GAAYrsB,OAAOssB,cACzB,IAAID,EAAUE,WAAY,CACxB,GAAMC,GAAcH,EAAUE,WAAWE,cACnCC,EAAaF,EAAYG,QAAQ,eACvC,KAAKD,GAAcrzB,EAAKE,MAAM/B,MAAMo1B,UAElC,MAGF,IAAMzK,GAAQkK,EAAUQ,WAAW,GAC7B5rB,EAAOorB,EAAUE,WAAWO,YAC5B7Z,EAASkP,EAAM4K,YACfC,EAAS11B,OAAAqzB,EAAA,GAAU1pB,EAAK4M,OAAO,EAAGoF,IAGlCga,KACAC,EAAiBV,EAAYjB,UAC/B4B,EAAmB,KAGjBC,EAAaV,EAAWW,cAAc,UAE5C,IAAIH,EAAeI,SAAS,iBAE1BH,EAAmB,gBACnBF,EAAiB1qB,MACf2G,MAAO,eACP4gB,MAAWa,EAAA,EAAWpU,cAEnB,IAAI2W,EAAeI,SAAS,mBAAqBF,EAAY,CAClE,GAAMG,GAASH,EAAWN,YACpBU,EAAYn0B,EAAKE,MAAMi0B,UAAUD,EACvC,IAAIC,EACF,GAAKvsB,GAAQA,EAAKwsB,WAAW,MAASP,EAAeI,SAAS,cAAe,CAE3E,GAAMI,GAAep2B,OAAA8yB,EAAA,GAAkBoC,EAAa,aACpD,IAAIkB,EAAc,CAChB,GAAMC,GAAWD,EAAaZ,YACxBc,EAAcv0B,EAAKE,MAAMq0B,YAAYL,GAAQI,EACnDR,GAAmB,uBACnBF,EAAiB1qB,MACf2G,MAAO,eACP4gB,MAAO8D,SAKXT,GAAmB,iBACnBF,EAAiB1qB,MAAO2G,MAAO,SAAU4gB,MAAO0D,QAGlDn0B,GAAKw0B,kBAAkBN,OAEpB,IAAIL,EAAeI,SAAS,oBAAsBF,EAAY,CAEnE,GAAMU,IAAe,MAAO,YAEtBN,EAAYl2B,OAAOy2B,KAAK10B,EAAKE,MAAMi0B,WAAW5D,OAAO,SAACC,EAAK0D,GAC/D,MAAO1D,GAAI/nB,OAAOzI,EAAKE,MAAMi0B,UAAUD,GAAQS,OAAO,SAAAtqB,GAAO,OAAsB,IAAtBmmB,EAAIlc,QAAQjK,OACxEoqB,EACH,IAAK7sB,GAAQA,EAAKwsB,WAAW,MAASP,EAAeI,SAAS,cAAe,CAE3E,GAAMI,GAAep2B,OAAA8yB,EAAA,GAAkBoC,EAAa,aACpD,IAAIkB,EAAc,CAChB,GAAMC,GAAWD,EAAaZ,WAC9B,IAAIzzB,EAAKE,MAAMq0B,YAAY/C,GAAe,CACxC,GAAM+C,GAAcv0B,EAAKE,MAAMq0B,YAAY/C,GAAc8C,EACzDR,GAAmB,uBACnBF,EAAiB1qB,MACf2G,MAAO,eACP4gB,MAAO8D,QAITv0B,GAAK40B,iBAAiBN,QAK1BR,GAAmB,iBACnBF,EAAiB1qB,MAAO2G,MAAO,SAAU4gB,MAAO0D,QAE7C,IAAIJ,GAAcF,EAAeI,SAAS,uBAAwB,CACvEH,EAAmB,qBACnB,IAAMI,GAASH,EAAWN,YACpBU,EAAYn0B,EAAKE,MAAMi0B,UAAUD,EACnCC,GACFP,EAAiB1qB,MAAO2G,MAAO,SAAU4gB,MAAO0D,IAEhDn0B,EAAKw0B,kBAAkBN,QAGxBl0B,EAAKE,MAAMwyB,UAAaiB,IAAWE,EAAeI,SAAS,UAAarsB,EAAKitB,MAAM,gBACpFhB,EAAeI,SAAS,uBAGxBH,EAAmB,kBACnBF,EAAiB1qB,MACf2G,MAAO,UACP4gB,MAAOzwB,EAAKE,MAAMwyB,UAItB,IAAIoC,GAAU,EACRC,EAAsBnB,EAAiB9L,IAAI,SAAAkN,GAK/C,MAJIA,GAAMvE,QACRuE,EAAMvE,MAAQuE,EAAMvE,MAAMkE,OAAO,SAAAnzB,GAAK,MAAAA,GAAE5B,SAAW+zB,EAAO/zB,QAAU4B,EAAE8S,QAAQqf,IAAW,IACzFmB,GAAWE,EAAMvE,MAAM7wB,QAElBo1B,GAGTjM,SAAQ/V,IAAI,kBAAmBggB,EAAUE,WAAYW,EAAgBjsB,EAAMgS,EAAQ+Z,EAAQG,GAE3F9zB,EAAKM,UACH20B,gBAAiBtB,EACjBG,iBAAgBA,EAChBoB,cAAettB,EACfutB,YAAaL,EAAU,EAAIC,SAG9BtD,GAiDHzxB,EAAAo1B,UAAY,SAAC1X,EAAOiV,GAClB,GAAI3yB,EAAKq1B,OAAQ,CACT,GAAA70B,GAAAR,EAAAE,MAAEo1B,EAAA90B,EAAA80B,eAAgBH,EAAA30B,EAAA20B,WAExB,QAAQzX,EAAMrT,KACZ,IAAK,SACH,GAAIrK,EAAKq1B,OAGP,MAFA3X,GAAM6X,iBACNv1B,EAAKw1B,kBACE,CAET,MAGF,KAAK,MAGH,GADA9X,EAAM6X,kBACDJ,GAAsC,IAAvBA,EAAYv1B,OAC9B,MAIF,IAAM61B,GAAuBnF,EAAmB6E,GAC1CO,EAAW3mB,KAAKC,IAAIsmB,GACpBK,EAAgBD,EAAWD,EAAqB71B,QAAU,EAC1Dg2B,EAAaH,EAAqBE,EAGxC,OADA31B,GAAK61B,eAAelD,EAAQiD,IACrB,CAGT,KAAK,YAEHlY,EAAM6X,iBACNv1B,EAAKM,UAAWg1B,eAAgBA,EAAiB,GACjD,MAGF,KAAK,UAEH5X,EAAM6X,iBACNv1B,EAAKM,UAAWg1B,eAAgBvmB,KAAK9M,IAAI,EAAGqzB,EAAiB,QAarEt1B,EAAAw1B,eAAiB,WACfx1B,EAAKM,UACH60B,eACAG,eAAgB,EAChBL,gBAAiB,GACjBnB,iBAAkB,QAuEtB9zB,EAAA81B,WAAa,WACH,GAAAC,GAAA/1B,EAAAY,MAAAm1B,MAGR/1B,GAAKg2B,WAAapX,WAAW5e,EAAKw1B,eAAgB,KAC9CO,GACFA,KAIJ/1B,EAAAi2B,YAAc,WACJ,GAAAC,GAAAl2B,EAAAY,MAAAs1B,OACJA,IACFA,KAIJl2B,EAAAm2B,gBAAkB,SAAA1Z,GAEhB,GAAMkW,GAAS3yB,EAAK61B,eAAe71B,EAAKE,MAAM/B,MAAMw0B,SAAUlW,EAC9Dzc,GAAKsyB,SAASK,IAGhB3yB,EAAAo2B,WAAa,WACH,GAAAjB,GAAAn1B,EAAAE,MAAAi1B,YACFkB,EAAOr2B,EAAKq1B,OACZrC,EAAYrsB,OAAOssB,eACnBhB,EAAOe,EAAUE,UAGvB,IAAKmD,EAAL,CAMA,KADwBlB,GAAeA,EAAYv1B,OAAS,GAG1D,WADAy2B,GAAKC,gBAAgB,QAKvB,IAAIrE,EAAM,CACR,GAAMsE,GAAOtE,EAAKmB,cAAcoD,uBAChCH,GAAKjV,MAAMvB,QAAU,EACrBwW,EAAKjV,MAAM5a,IAAS+vB,EAAK/vB,IAAMG,OAAO8vB,QAAUF,EAAK7uB,OAAS,EAAC,KAC/D2uB,EAAKjV,MAAM7a,KAAUgwB,EAAKhwB,KAAOI,OAAO+vB,QAAU,EAAC,QAIvD12B,EAAA22B,QAAU,SAAAC,GACR52B,EAAKq1B,OAASuB,GAGhB52B,EAAA62B,WAAa,WACH,GAAA1B,GAAAn1B,EAAAE,MAAAi1B,WAER,MADwBA,GAAeA,EAAYv1B,OAAS,GAE1D,MAAO,KAIT,IAAI+1B,GAAgB5mB,KAAK9M,IAAIjC,EAAKE,MAAMo1B,eAAgB,GAClDG,EAAuBnF,EAAmB6E,EAChDQ,GAAgBA,EAAgBF,EAAqB71B,QAAU,CAC/D,IAAMk3B,GAAerB,EAAqB71B,OAAS,GAAK61B,EAAqBE,MAG7E,OACEt3B,GAAAoC,EAAAC,cAACsxB,EAAM,KACL3zB,EAAAoC,EAAAC,cAAC6wB,EAAA,GACCoF,QAAS32B,EAAK22B,QACdI,cAAeD,EACfE,YAAah3B,EAAKm2B,gBAClBc,aAAc9B,MA9cpBn1B,EAAKoI,SACHnK,OAAA+yB,EAAA,KACA/yB,OAAAgzB,EAAA,KACAhzB,OAAAmzB,EAAA,IAAe8F,QAASt2B,EAAMqvB,eAC9BhyB,OAAAizB,EAAA,KACAjzB,OAAAkzB,EAAA,MAGFnxB,EAAKE,OACHi0B,aACAI,eACA7B,QAAS9xB,EAAM8xB,YACfyC,eACAG,eAAgB,EAChBL,gBAAiB,GACjB92B,MAAOuzB,EAAgB9wB,EAAMovB,cAAgB,KP88IpChwB,EOv/Hf,MA9eyBxB,GAAA6zB,EAAAtyB,GA2BvBsyB,EAAAjzB,UAAA6tB,kBAAA,WACExuB,KAAK23B,iBAEsBrsB,KAAvBtL,KAAKmC,MAAM8xB,SACbj0B,KAAK04B,oBAIT9E,EAAAjzB,UAAAkwB,qBAAA,WACElhB,aAAa3P,KAAKu3B,aAGpB3D,EAAAjzB,UAAAg4B,mBAAA,WACE34B,KAAK23B,cAGP/D,EAAAjzB,UAAA+vB,0BAAA,SAA0BC,GACpBA,EAAUsD,SAAWtD,EAAUsD,UAAYj0B,KAAKmC,MAAM8xB,SACxDj0B,KAAK6B,UAAWoyB,QAAStD,EAAUsD,SAAWj0B,KAAKg0B,mBAGtB,OAA3BrD,EAAUY,cAAyBZ,EAAUY,eAAiBvxB,KAAKmC,MAAMovB,cAC3EvxB,KAAK6B,UAAWnC,MAAOuzB,EAAgBtC,EAAUY,iBA0KrDqC,EAAAjzB,UAAAy2B,eAAA,SAAelD,EAAQiD,GACf,GAAAp1B,GAAA/B,KAAAyB,MAAE+0B,EAAAz0B,EAAAy0B,gBAAiBnB,EAAAtzB,EAAAszB,iBAAkBoB,EAAA10B,EAAA00B,aAG3C,QAAQpB,GACN,IAAK,iBACH,GAAMuD,GAAWp5B,OAAA8yB,EAAA,IACZsG,IAAyB,MAAbA,GAAiC,MAAbA,IACnCzB,GAAc,IAEhB,MAGF,KAAK,uBAEGV,EAAcd,WAAW,OAASc,EAAcd,WAAW,OAC/DwB,EAAa,IAAIA,GAEQ,MAAvB33B,OAAA8yB,EAAA,OACF6E,GAA0B,KAQhCn3B,KAAK+2B,gBAGL,IAAI8B,GAAWrC,EAAgBr1B,OACzBgI,EAAO3J,OAAAqzB,EAAA,GAAU4D,GACjBqC,EAAe3vB,EAAKhI,OAASq1B,EAAgBr1B,OAC7Cga,EAASsb,EAAc5gB,QAAQ2gB,GAC/BuC,EAAUvC,IAAqBsC,EAAe,GAAK3d,GAAU,GAAMgc,IAAeV,GAClFuC,EAAUD,EAAUD,EAAe3d,EAAS,CAElD,OACE+Y,GAEGE,eAAeyE,GACfI,cAAcD,GACd7E,WAAWgD,GACX+B,SAmEDtF,EAAAjzB,UAAAw1B,iBAAN,SAAuBvqB,GP0tIjB,MAAOmf,GAAU/qB,SAAM,OAAQ,GAAQ,WACnC,GAAI+B,GAAIktB,EAAIrB,EAAKxpB,EAAK0nB,EAAMqN,EAAOC,EAAQtD,EAAauD,CACxD,OAAOxN,GAAY7rB,KAAM,SAAUs5B,GAC/B,OAAQA,EAAGloB,OACP,IAAK,GO7tIfwc,EAAM,iBAAiBhiB,EAAG,UP+tIZ0tB,EAAGloB,MAAQ,CACf,KAAK,GO9tIP,MP+tIMkoB,GAAGlN,KAAK3hB,MAAM,EAAG,EAAG,CAAE,KO/tI5B,EAAMzK,KAAK2tB,QAAQC,GPiuIjB,KAAK,GOhuIN,MADPxpB,GAAMk1B,EAAAjN,QACC,EAAOjoB,EAAIoG,MAAQpG,EAAIm1B,OPmuItB,KAAK,GAMD,MOzuIZzN,GAAOwN,EAAAjN,OACP8M,EAAQn5B,KAAKyB,MAAMq0B,YAAY/C,GAC/BqG,EAAMv4B,KACPs4B,GAAKp3B,OACP6J,GAAMkgB,EAAKthB,KAAIzI,IAMZ+zB,EAAWj1B,KACZb,KAAKyB,MAAMq0B,aAAW7G,OACxB8D,GAAeqG,EAAMnK,IAExBjvB,KAAK6B,UAAWi0B,YAAWA,GAAI91B,KAAK+zB,kBP2tIV,EAAa,EACzB,KAAK,GAQD,MAPAsF,GAAMC,EAAGjN,OO3tIvBrsB,KAAKmC,MAAMq3B,eACbx5B,KAAKmC,MAAMq3B,eAAeH,GAE1B/O,QAAQC,MAAM8O,IP+tIU,EAAa,EACzB,KAAK,GAAG,OAAQ,SO3tI5BzF,EAAAjzB,UAAAo1B,kBAAN,SAAwBvxB,GPiuIlB,MAAOumB,GAAU/qB,SAAM,OAAQ,GAAQ,WACnC,GAAI+B,GAAIktB,EAAIrB,EAAKxpB,EAAK0nB,EAAMwN,EAAIrD,EAAMmD,EAAQ1D,EAAWI,EAAa2D,CACtE,OAAO5N,GAAY7rB,KAAM,SAAU05B,GAC/B,OAAQA,EAAGtoB,OACP,IAAK,GOpuIfwc,EAAM,0BAA0BppB,EPsuIlBk1B,EAAGtoB,MAAQ,CACf,KAAK,GOruIP,MPsuIMsoB,GAAGtN,KAAK3hB,MAAM,EAAG,EAAG,CAAE,KOtuI5B,EAAMzK,KAAK2tB,QAAQC,GPwuIjB,KAAK,GOvuIN,MADPxpB,GAAMs1B,EAAArN,QACC,EAAOjoB,EAAIoG,MAAQpG,EAAIm1B,OP0uItB,KAAK,GAMD,MOhvIZzN,GAAO4N,EAAArN,OACPiN,EAAmB95B,OAAAqzB,EAAA,GAAc/G,EAAKthB,MAApCyrB,EAAIqD,EAAArD,KAAEmD,EAAME,EAAAF,OACd1D,EAAS70B,KACVb,KAAKyB,MAAMi0B,WAAS3zB,OACtByC,GAAOyxB,EAAIl0B,IAER+zB,EAAWj1B,KACZb,KAAKyB,MAAMq0B,aAAW7G,OACxBzqB,GAAO40B,EAAMnK,IAEhBjvB,KAAK6B,UAAW6zB,UAASA,EAAEI,YAAWA,GAAI91B,KAAK+zB,kBPsuIrB,EAAa,EACzB,KAAK,GAQD,MAPA0F,GAAMC,EAAGrN,OOtuIvBrsB,KAAKmC,MAAMq3B,eACbx5B,KAAKmC,MAAMq3B,eAAeC,GAE1BnP,QAAQC,MAAMkP,IP0uIU,EAAa,EACzB,KAAK,GAAG,OAAQ,SOtuI5B7F,EAAAjzB,UAAA+3B,iBAAN,WP4uIM,MAAO3N,GAAU/qB,SAAM,OAAQ,GAAQ,WACnC,GAAI4tB,GAAKxpB,EAAK0nB,EAAM6N,CACpB,OAAO9N,GAAY7rB,KAAM,SAAU+B,GAC/B,OAAQA,EAAGqP,OACP,IAAK,GO/uIfwc,EAAM,gCPivIQ7rB,EAAGqP,MAAQ,CACf,KAAK,GOhvIP,MPivIMrP,GAAGqqB,KAAK3hB,MAAM,EAAG,EAAG,CAAE,KOjvI5B,EAAMzK,KAAK2tB,QAAQC,GPmvIjB,KAAK,GOlvIN,MADPxpB,GAAMrC,EAAAsqB,QACC,EAAOjoB,EAAIoG,MAAQpG,EAAIm1B,OPqvItB,KAAK,GAGD,MOxvIZzN,GAAO/pB,EAAAsqB,OACbrsB,KAAK6B,UAAWoyB,QAASnI,EAAKthB,MAAQxK,KAAKg0B,oBPuvIjB,EAAa,EACzB,KAAK,GAQD,MAPA2F,GAAU53B,EAAGsqB,OOvvI3BrsB,KAAKmC,MAAMq3B,eACbx5B,KAAKmC,MAAMq3B,eAAeG,GAE1BrP,QAAQC,MAAMoP,IP2vIU,EAAa,EACzB,KAAK,GAAG,OAAQ,SOvqIlC/F,EAAAjzB,UAAAmB,OAAA,WACE,MACElC,GAAAoC,EAAAC,cAAA,OAAKC,UAAU,eACZlC,KAAKo4B,aACNx4B,EAAAoC,EAAAC,cAACmwB,EAAA,QACCwH,aAAa,EACbtC,OAAQt3B,KAAKq3B,WACbV,UAAW32B,KAAK22B,UAChB9C,SAAU7zB,KAAK6zB,SACf4D,QAASz3B,KAAKw3B,YACdhuB,YAAaxJ,KAAKmC,MAAMqH,YACxBG,QAAS3J,KAAK2J,QACdkwB,YAAY,EACZn6B,MAAOM,KAAKyB,MAAM/B,UAK5Bk0B,GA9eyBh0B,EAAAoC,EAAMmuB,UAgf/B7wB,GAAA,KPoqIMw6B,KACA,SAAUz6B,EAAQC,EAAqBC,GAE7C,YQxsJM,SAAAw6B,GAA4BvG,EAAMwG,GAGtC,IAFA,GACI7B,GADA8B,EAAUzG,EAAKmB,cAAcuF,gBAE1BD,GAAS,CAEd,GADA9B,EAAK8B,EAAQ1E,cAAcyE,GAEzB,MAAO7B,EAET8B,GAAUA,EAAQC,iBAKhB,QAAAC,GAA2BC,OAAA,KAAAA,MAAAlyB,OAC/B,IAAMqsB,GAAY6F,EAAO5F,cACzB,KAAKD,EAAUE,WACb,MAAO,KAGT,IAAMpK,GAAQkK,EAAUQ,WAAW,GAC7B5rB,EAAOorB,EAAUE,WAAWO,YAC5B7Z,EAASkP,EAAM4K,WACrB,OAAO9rB,GAAK4M,OAAOoF,EAAQ,GRmrJI7b,EAAuB,EAAIy6B,EQztJ5Dz6B,EAAA,EAAA66B,EACI,WAAajyB,UAAWmyB,QAAQ15B,UAAUk0B,UAC5CwF,QAAQ15B,UAAUk0B,QAAU,SAAS7zB,GACnC,GAEIC,GAFEq5B,GAAWt6B,KAAK4H,UAAY5H,KAAKu6B,eAAeC,iBAAiBx5B,GACnEm3B,EAAKn4B,IAGT,IAGE,IAFAiB,EAAIq5B,EAAQn5B,SAEHF,GAAK,GAAKq5B,EAAQtc,KAAK/c,KAAOk3B,WAChCl3B,EAAI,IAAMk3B,EAAKA,EAAGxD,eAC3B,OAAOwD,MRyvJLsC,KACA,SAAUp7B,EAAQC,EAAqBC,GAE7C,YSlwJc,SAAAm7B,KACZ,OACE/D,UAAS,SAAC1X,EAAOiV,GACP,GAAAx0B,GAAAw0B,EAAAx0B,KACR,IAAKA,EAAMi7B,YAIX,OAAQ1b,EAAMrT,KACZ,IAAK,IACL,IAAK,IAOH,MANAqT,GAAM6X,iBAEN5C,EACGC,WAAW,GAAGlV,EAAMrT,IAAMgvB,EAAO3b,EAAMrT,MACvCivB,MAAM,GACN3B,SACI,CAGT,KAAK,IACHja,EAAM6X,gBACN,IAAM3tB,GAAOzJ,EAAMo7B,WAAW3xB,KACxBgS,EAASzb,EAAMq7B,aACfC,EAAQ7xB,EAAK0M,QAAQ,IAAKsF,GAC1B8f,EAASD,EAAQ,EAAIA,EAAQ7xB,EAAKhI,OAClC63B,EAAUiC,EAAS9f,CAQzB,OANA+Y,GACGC,WAAWlV,EAAMrT,KACjBivB,KAAK7B,GACL7E,WAAWyG,EAAO3b,EAAMrT,MACxBivB,MAAM,EAAI7B,GACVE,SACI,KAxCjB55B,EAAA,EAAAo7B,CAAA,IAAME,IACJM,IAAK,IACLC,IAAK,IACLC,IAAK,MT0zJDC,KACA,SAAUh8B,EAAQC,EAAqBC,GAE7C,YU/zJc,SAAA+7B,KACZ,OACE3E,UAAS,SAAC1X,EAAOiV,GACP,GAAAx0B,GAAAw0B,EAAAx0B,KACR,IAAKA,EAAMi7B,aAIO,MAAd1b,EAAMrT,KAAeqT,EAAMK,QAAS,CACtCL,EAAM6X,gBACN,IAAM3tB,GAAOzJ,EAAMo7B,WAAW3xB,KACxBgS,EAASzb,EAAMq7B,aACfE,EAAS9xB,EAAKhI,OACd63B,EAAUiC,EAAS9f,CAEzB,OADA+Y,GAAO+E,cAAcD,IACd,KAhBf15B,EAAA,EAAAg8B,GV21JMC,KACA,SAAUl8B,EAAQC,EAAqBC,GAE7C,YW91JA,SAAAi8B,GAAmBryB,GACjB,GAAIgS,GAAShS,EAAKhI,OAASgI,EAAKsyB,WAAWt6B,MAC3C,IAAIga,EAAQ,CAEV,IADA,GAAIugB,GAASvyB,EAAK,KACTgS,GACPugB,GAAUvyB,EAAK,EAEjB,OAAOuyB,GAET,MAAO,GAGK,QAAAC,KACZ,OACEhF,UAAS,SAAC1X,EAAOiV,GACP,GAAAx0B,GAAAw0B,EAAAx0B,KACR,IAAKA,EAAMi7B,aAIO,UAAd1b,EAAMrT,KAAmBqT,EAAM2c,SAAU,CAC3C3c,EAAM6X,gBAEE,IAAA+E,GAAAn8B,EAAAm8B,WACFC,EAAkBD,EAAW1yB,KAC7BuyB,EAASF,EAAUM,EAEzB,OAAO5H,GACJ6H,aACA5H,WAAWuH,GACXxC,WA9BX55B,EAAA,EAAAq8B,GXm4JMK,KACA,SAAU38B,EAAQC,EAAqBC,GAE7C,YY73JM,SAAA08B,GAAsChI,GAC1CiI,EAAAl6B,EAAMm6B,UAAUC,OAAO3G,QACrBjM,MAAO,WACP6S,QAAS,GAAIC,QAAO,aAAarI,EAAQ5wB,KAAK,KAAI,eAWxC,QAAAk5B,KACZ,OAQEC,WAAU,SAACr6B,GACD,GAAAwF,GAAAxF,EAAAwF,SAAU80B,EAAAt6B,EAAAs6B,IAElB,IAAIA,EAAKpJ,OAASqJ,EAAlB,CAGA,GAAMx6B,GAAY,SAASu6B,EAAKjyB,KAAKvG,IAAI,QACzC,OAAOrE,GAAAoC,EAAAC,cAAA,QAAMC,UAAWA,GAAYyF,KAUtCg1B,aAAY,SAACnJ,GAgBX,QAAAoJ,GAAsBC,EAAO9K,GAE3B,GAAM+K,IAAW/K,GAAO,IAAE,KAAI8K,EAAMxJ,MAAQ,IAAE,KAAIwJ,EAAMrT,OAAS,GAGjE,IAAqB,gBAAVqT,IAA+C,gBAAlBA,GAAME,QAAsB,CAClEC,EAAYC,EACZhI,EAAciI,CAEd,IAAMH,GAA2B,gBAAVF,GAAqBA,EAAQA,EAAME,QACpDI,EAAWJ,EAAQp7B,MAAM,MAAMR,OAAS,EACxC85B,EAAS8B,EAAQ57B,OAASg8B,EAC1B1U,EAAMpT,EAAQ4lB,EAEhBmC,EAAYJ,EAAU7zB,KAAKhI,OAAS8zB,EACpCoI,EAAYpC,CAIhB,KAFAiC,EAAYjI,EAAcoI,EAEnBD,EAAYC,GACjBJ,EAAUK,EAAMC,QAChBF,EAAYpC,EAASmC,EACrBA,EAAYH,EAAQ9zB,KAAKhI,OACzB+7B,EAAYG,CAId,IAAqB,gBAAVR,IAAsB9K,EAAK,CACpC,GAAM1H,IACJmT,UAAWR,EAAUpxB,IACrBmvB,aAAc9F,EACdwI,SAAUR,EAAQrxB,IAClB8xB,YAAaR,EACbS,QAAUtK,KAAMqJ,EAAYlyB,MAAQsyB,MAAKA,KAG3Cc,GAAYnzB,KAAK4f,GAGnBhV,EAAQoT,MACH,IAAIoU,EAAME,SAAWF,EAAME,QAAQ57B,OAExC,IAAuB,GAAA08B,GAAA,EAAA97B,EAAA86B,EAAME,QAANc,EAAA97B,EAAAZ,OAAA08B,IAAe,CAAjC,GAAMC,GAAQ/7B,EAAA87B,EACjBjB,GAAakB,EAAUhB,IA1D7B,GAAkB,cAAdtJ,EAAKH,KACP,QA+DF,KAAoB,GA5DdiK,GAAQ9J,EAAKuK,WAAWC,UACxBC,EAAUX,EAAMjU,IAAI,SAAAtoB,GAAK,MAAAA,GAAEoI,OAAM9F,KAAK,MACtC66B,EAAUhC,EAAAl6B,EAAMm6B,UAAUC,OAC1B+B,EAASjC,EAAAl6B,EAAMo8B,SAASH,EAASC,GACjCN,KACFZ,EAAYM,EAAMC,QAClBN,EAAUD,EACV/H,EAAc,EACdiI,EAAY,EACZ7nB,EAAQ,EAmDQwoB,EAAA,EAAAQ,EAAAF,EAAAN,EAAAQ,EAAAl9B,OAAA08B,IAAQ,CAC1BjB,EADcyB,EAAAR,IAIhB,MAAOD,KZixJoBt+B,EAAuB,EAAI28B,EAC3B38B,EAAuB,EAAIi9B,CACvC,IAAI58B,GAAsCJ,EAAoB,GAC1DK,EAA8CL,EAAoBM,EAAEF,GACpE2+B,EAAwC/+B,EAAoB,KAC5D28B,EAAgD38B,EAAoBM,EAAEy+B,GACtEC,EAAwCh/B,EAAoB,KYx4JrF28B,GAAAl6B,EAAMm6B,UAAUC,OAASmC,EAAA,CAEzB,IAAM7B,GAAa,eZm/Jb8B,KACA,SAAUn/B,EAAQC,EAAqBC,GAE7C,Ya7/JO,IAAMk/B,IAAa,KAAM,aAAc,cAAe,WAAY,KAAM,SAAU,WAEnFC,GACJ,MACA,MACA,MACA,MACA,SACA,SACA,QACA,eACA,UACA,OACA,YAGWC,EACRD,EAAqB10B,QACxB,MACA,SACA,OACA,UACA,YACA,YACA,eACA,eACA,cACA,gBACA,QACA,QACA,qBACA,MACA,QACA,qBACA,eACA,OACA,SACA,WACA,QACA,gBACA,KACA,OACA,QACA,SACA,QACA,iBACA,OACA,SACA,QACA,SACA,OACA,YACA,OACA,OACA,SACA,OACA,gBACA,gBACA,gBACA,gBACA,kBACA,qBACA,mBACA,qBAGI40B,GACJC,SACExC,QAAS,eACTyC,YAAY,GAEdC,uBACE1C,QAAS,6BACTyC,YAAY,EACZE,QACEC,aACE5C,QAAS,qBACT7S,MAAO,eAIb0V,kBACE7C,QAAS,eACT2C,QACEC,aACE5C,QAAS,+BACT7S,MAAO,aAET2V,eACE9C,QAAS,oBACT+C,QAAQ,EACR5V,MAAO,gBAIb6V,SAAU,GAAI/C,QAAO,SAASqC,EAAUt7B,KAAK,KAAI,eAAgB,KACjEi8B,kBAEIjD,QAAS,gBACT2C,QACEO,kBACElD,QAAS,mBACT7S,MAAO,aAKX6S,QAAS,iBACTyC,YAAY,EACZE,QACEO,kBACElD,QAAS,mBACT7S,MAAO,aAKfxd,OAAQ,sCACRwzB,SAAU,GAAIlD,QAAO,0DAA0DmC,EAAUp7B,KAAK,KAAI,OAAQ,KAC1Go8B,YAAa,aAGfngC,GAAA,KbggKMogC,KACA,SAAUrgC,EAAQC,EAAqBC,GAE7C,Yc7nKc,SAAAogC,GAAuB59B,GdgoKjC,GchoKmC02B,GAAA12B,EAAA02B,OACrC,QACE9B,UAAS,SAAC1X,GAER,GAAIwZ,GAAyB,UAAdxZ,EAAMrT,MAAoBqT,EAAM2c,SAI7C,MAFA3c,GAAM6X,iBACN2B,EAAQxZ,IACD,IdsnKkB3f,EAAuB,EAAIqgC,GAoBtDC,KACA,SAAUvgC,EAAQC,EAAqBC,GAE7C,YeppKc,SAAAsgC,GAAmBC,EAAMC,GACrC,GAAIC,EACJ,OAAO,YACL,GAAM13B,GAAUtI,KACV8J,EAAO5I,UACP++B,EAAQ,WACZD,EAAU,KACVF,EAAKt+B,MAAM8G,EAASwB,GAEtB6F,cAAaqwB,GACbA,EAAU7f,WAAW8f,EAAOF,IAXhCzgC,EAAA,EAAAugC,GfyqKMK,KACA,SAAU7gC,EAAQC,EAAqBC,GAE7C,YgB1qKM,SAAA4gC,GAAwBC,GAC5B,GAAMhH,KAYN,OAXAgH,GAAOC,QAAQ,SAAApf,GACL,GAAUqf,IAAVrf,EAAAsf,SAAUvP,EAAA/P,GAAA,aAClBzhB,QAAOy2B,KAAKqK,GAAMD,QAAQ,SAAAz0B,GACnBwtB,EAAOxtB,KACVwtB,EAAOxtB,QAE+B,IAApCwtB,EAAOxtB,GAAKiK,QAAQyqB,EAAK10B,KAC3BwtB,EAAOxtB,GAAKnB,KAAK61B,EAAK10B,SAInBwtB,OAAMA,EAAEnD,KAAMz2B,OAAOy2B,KAAKmD,IhB8pKN75B,EAAoBc,EAAEf,EAAqB,IAAK,WAAa,MAAOkhC,KAClElhC,EAAuB,EAAI6gC,EAC7B5gC,EAAoBc,EAAEf,EAAqB,IAAK,WAAa,MAAOmhC,IACnG,IAAIzP,GAAUhxB,MAAQA,KAAKgxB,QAAW,SAAUhwB,EAAG4d,GAC/C,GAAI7d,KACJ,KAAK,GAAIR,KAAKS,GAAOxB,OAAOmB,UAAUH,eAAeY,KAAKJ,EAAGT,IAAMqe,EAAE/I,QAAQtV,GAAK,IAC9EQ,EAAER,GAAKS,EAAET,GACb,IAAS,MAALS,GAAqD,kBAAjCxB,QAAOyxB,sBAC3B,IAAK,GAAIhwB,GAAI,EAAGV,EAAIf,OAAOyxB,sBAAsBjwB,GAAIC,EAAIV,EAAEY,OAAQF,IAAS2d,EAAE/I,QAAQtV,EAAEU,IAAM,IAC1FF,EAAER,EAAEU,IAAMD,EAAET,EAAEU,IACtB,OAAOF,IgBvrKEy/B,GAAe,KAAM,KAAM,MAAO,MAAO,MAmBzCC,EAAY,SAAAz/B,GAAK,MAAAA,GAAEqc,QAAQ,0BAA0B,IAAI5Y,ShB4rKhEi8B,KACA,SAAUrhC,EAAQC,EAAqBC,GAE7C,YiBhtKA,SAAAohC,GAAwBxI,GACtB,GAAKA,GAAOA,EAAGyI,aAAf,CAGA,GAAMn5B,GAAY0wB,EAAGyI,cACjBzI,EAAG0I,UAAYp5B,EAAUq5B,UAAYr5B,EAAUs5B,cAAgB5I,EAAG0I,UAAYp5B,EAAUq5B,aAC1Fr5B,EAAUq5B,UAAY3I,EAAG0I,UAAYp5B,EAAUo5B,YjB2sK9B,GAAIlhC,GAAsCJ,EAAoB,GAC1DK,EAA8CL,EAAoBM,EAAEF,GACzFI,EAAaC,MAAQA,KAAKD,WAAc,WACxC,GAAIE,GAAgBT,OAAOU,iBACpBC,uBAA2BC,QAAS,SAAUC,EAAGC,GAAKD,EAAEF,UAAYG,IACvE,SAAUD,EAAGC,GAAK,IAAK,GAAIC,KAAKD,GAAOA,EAAEE,eAAeD,KAAIF,EAAEE,GAAKD,EAAEC,IACzE,OAAO,UAAUF,EAAGC,GAEhB,QAASG,KAAOT,KAAKU,YAAcL,EADnCJ,EAAcI,EAAGC,GAEjBD,EAAEM,UAAkB,OAANL,EAAad,OAAOoB,OAAON,IAAMG,EAAGE,UAAYL,EAAEK,UAAW,GAAIF,QAGnFI,EAAYb,MAAQA,KAAKa,UAAarB,OAAOsB,QAAU,SAASC,GAChE,IAAK,GAAIC,GAAGC,EAAI,EAAGpB,EAAIqB,UAAUC,OAAQF,EAAIpB,EAAGoB,IAAK,CACjDD,EAAIE,UAAUD,EACd,KAAK,GAAIV,KAAKS,GAAOxB,OAAOmB,UAAUH,eAAeY,KAAKJ,EAAGT,KACzDQ,EAAER,GAAKS,EAAET,IAEjB,MAAOQ,IiBztKXigC,EAAA,SAAA1/B,GAAA,QAAA0/B,KAAA,GAAAz/B,GAAA,OAAAD,KAAAE,MAAAxB,KAAAkB,YAAAlB,IjB4uKQ,OiBpuKNuB,GAAA0/B,OAAS,SAAA9I,GACP52B,EAAK42B,GAAKA,GjBmuKC52B,EiBttKf,MAtB4BxB,GAAAihC,EAAA1/B,GAE1B0/B,EAAArgC,UAAAg4B,mBAAA,SAAmBuI,GACblhC,KAAKmC,MAAMg/B,aAAeD,EAAUC,YACtCR,EAAe3gC,KAAKm4B,KAQxB6I,EAAArgC,UAAAmB,OAAA,WACQ,GAAAC,GAAA/B,KAAAmC,MAAEg/B,EAAAp/B,EAAAo/B,WAAY/vB,EAAArP,EAAAqP,MAAOmnB,EAAAx2B,EAAAw2B,YACrBr2B,EAAYi/B,EAAa,0CAA4C,iBACrEnxB,EAAU,WAAM,MAAAuoB,GAAYnnB,GAClC,OACExR,GAAAoC,EAAAC,cAAA,MAAIm/B,IAAKphC,KAAKihC,OAAQ/+B,UAAWA,EAAW8N,QAASA,GAClDoB,IAIT4vB,GAtB4BphC,EAAAoC,EAAMq/B,eAwBlCC,EAAA,SAAAhgC,GAAA,QAAAggC,KjBsuKQ,MAAkB,QAAXhgC,GAAmBA,EAAOE,MAAMxB,KAAMkB,YAAclB,KiBxtKnE,MAd6BD,GAAAuhC,EAAAhgC,GAC3BggC,EAAA3gC,UAAAmB,OAAA,WACQ,GAAAC,GAAA/B,KAAAmC,MAAE6vB,EAAAjwB,EAAAiwB,MAAO5gB,EAAArP,EAAAqP,MAAO6lB,EAAAl1B,EAAAk1B,SAAUsB,EAAAx2B,EAAAw2B,WAChC,OACE34B,GAAAoC,EAAAC,cAAA,MAAIC,UAAU,mBACZtC,EAAAoC,EAAAC,cAAA,OAAKC,UAAU,0BAA0BkP,GACzCxR,EAAAoC,EAAAC,cAAA,MAAIC,UAAU,yBACX8vB,EAAM3I,IAAI,SAAArL,GAAQ,MACjBpe,GAAAoC,EAAAC,cAAC++B,GAAcp1B,IAAKoS,EAAMua,YAAaA,EAAa4I,WAAYlK,EAASphB,QAAQmI,IAAS,EAAG5M,MAAO4M,SAMhHsjB,GAd6B1hC,EAAAoC,EAAMq/B,eAgBnCE,EAAA,SAAAjgC,GAAA,QAAAigC,KjBmuKQ,MAAkB,QAAXjgC,GAAmBA,EAAOE,MAAMxB,KAAMkB,YAAclB,KiBxtKnE,MAXwBD,GAAAwhC,EAAAjgC,GACtBigC,EAAA5gC,UAAAmB,OAAA,WACQ,GAAAC,GAAA/B,KAAAmC,MAAEq2B,EAAAz2B,EAAAy2B,aAAcN,EAAAn2B,EAAAm2B,QAASI,EAAAv2B,EAAAu2B,cAAeC,EAAAx2B,EAAAw2B,WAC9C,OACE34B,GAAAoC,EAAAC,cAAA,MAAIC,UAAU,YAAYk/B,IAAKlJ,GAC5BM,EAAanP,IAAI,SAAAzmB,GAAK,MACrBhD,GAAAoC,EAAAC,cAACq/B,EAAczgC,GAAC+K,IAAKhJ,EAAEwO,MAAOmnB,YAAaA,EAAatB,SAAUqB,GAAmB11B,QAK/F2+B,GAXwB3hC,EAAAoC,EAAMq/B,cAa9B/hC,GAAA,KjBmuKMkiC,KACA,SAAUniC,EAAQC,EAAqBC,GAE7C,YkB3xKA,SAAAkiC,GAAqB9wB,EAAOpN,EAAKC,GAC/B,GAAID,GAAOC,GAAOmN,EAAO,CACvB,GAAI0Z,GAAQ7mB,EAAMD,EACdm+B,EAAarX,EAAQ1Z,EAAQ,GAIjC,OAAI+wB,IAAc,GACT,WAELA,GAAc,MAAQrX,GANb,MAOJ,QAELqX,GAAc,IACT,cAELA,GAAc,SAAWrX,GAXf,QAYL,QAEF,QAGT,MAAO,QlBswKY,GAAIsX,GAAuCpiC,EAAoB,IAC3DqiC,EAA+CriC,EAAoBM,EAAE8hC,GACrEE,EAAsCtiC,EAAoB,GAC1DuiC,EAA8CviC,EAAoBM,EAAEgiC,GACpEE,EAAuCxiC,EAAoB,GAC3DyiC,EAA+CziC,EAAoBM,EAAEkiC,GACrEE,EAAwD1iC,EAAoB,MAE5E2iC,GADgE3iC,EAAoBM,EAAEoiC,GACzB1iC,EAAoB,OAEjF4iC,GADqE5iC,EAAoBM,EAAEqiC,GACnC3iC,EAAoB,MAC5E6iC,EAAwC7iC,EAAoB,MACjFQ,EAAaC,MAAQA,KAAKD,WAAc,WACxC,GAAIE,GAAgBT,OAAOU,iBACpBC,uBAA2BC,QAAS,SAAUC,EAAGC,GAAKD,EAAEF,UAAYG,IACvE,SAAUD,EAAGC,GAAK,IAAK,GAAIC,KAAKD,GAAOA,EAAEE,eAAeD,KAAIF,EAAEE,GAAKD,EAAEC,IACzE,OAAO,UAAUF,EAAGC,GAEhB,QAASG,KAAOT,KAAKU,YAAcL,EADnCJ,EAAcI,EAAGC,GAEjBD,EAAEM,UAAkB,OAANL,EAAad,OAAOoB,OAAON,IAAMG,EAAGE,UAAYL,EAAEK,UAAW,GAAIF,QAGnFI,EAAYb,MAAQA,KAAKa,UAAarB,OAAOsB,QAAU,SAASC,GAChE,IAAK,GAAIC,GAAGC,EAAI,EAAGpB,EAAIqB,UAAUC,OAAQF,EAAIpB,EAAGoB,IAAK,CACjDD,EAAIE,UAAUD,EACd,KAAK,GAAIV,KAAKS,GAAOxB,OAAOmB,UAAUH,eAAeY,KAAKJ,EAAGT,KACzDQ,EAAER,GAAKS,EAAET,IAEjB,MAAOQ,IkB/xKLshC,GACJjmB,QACExP,MAAM,GAER1C,QACEyC,OACE21B,UAAW,EACXx1B,MAAM,GAERwN,WAAY,GAEdzI,MACEiB,gBAAiB,EACjBkF,YACAlB,gBAAiB,KACjBvD,YAAa,EAEb+N,WAAW,EACX7e,MAAO,UACP4Q,QAAUvL,KAAM,EAAG4K,MAAO,GAC1B6vB,aAAc,IAWlBC,EAAA,SAAAlhC,GAAA,QAAAkhC,KlB0zKQ,MAAkB,QAAXlhC,GAAmBA,EAAOE,MAAMxB,KAAMkB,YAAclB,KkBzvKnE,MAjEoBD,GAAAyiC,EAAAlhC,GAClBkhC,EAAA7hC,UAAA6tB,kBAAA,WACExuB,KAAK0W,QAGP8rB,EAAA7hC,UAAAg4B,mBAAA,SAAmBuI,GAEfA,EAAU12B,OAASxK,KAAKmC,MAAMqI,MAC9B02B,EAAU32B,UAAYvK,KAAKmC,MAAMoI,SACjC22B,EAAUv/B,QAAU3B,KAAKmC,MAAMR,OAC/Bu/B,EAAUj4B,SAAWjJ,KAAKmC,MAAM8G,QAEhCjJ,KAAK0W,QAIT8rB,EAAA7hC,UAAA+V,KAAA,WACQ,GAAA3U,GAAA/B,KAAAmC,MAAEqI,EAAAzI,EAAAyI,KAAMi4B,EAAA1gC,EAAAwI,OACd,IAAKC,EAAL,CAGA,GAAMN,GAASM,EAAK6e,IAAI,SAAChT,GAAmB,OAC1C5T,MAAO4T,EAAG5T,MACV2O,MAAOiF,EAAGjF,MACV5G,KAAM6L,EAAGqsB,aAAa,WAGlBC,EAAMf,IAAE,IAAI5hC,KAAKmC,MAAM+tB,IACvBvf,EAAQgyB,EAAI35B,QAAU,IACxBimB,EAAAwT,EAAApY,MAAEhT,EAAA4X,EAAA5X,KAAMC,EAAA2X,EAAA3X,EACP0qB,GAAAhgC,EAAO4gC,SAASvrB,KACnBA,EAAO8qB,EAAA,MAAe9qB,GAAM,IAEzB2qB,EAAAhgC,EAAO4gC,SAAStrB,KACnBA,EAAK6qB,EAAA,MAAe7qB,GAAI,GAE1B,IAAM/T,GAAM8T,EAAKwrB,UACXr/B,EAAM8T,EAAGurB,UACTC,GACJ72B,OACEiJ,KAAM,OACN3R,IAAKA,EACLC,IAAKA,EACL4N,MAAO,WACPT,MAAOA,EACP+X,WAAY+Y,EAAY9wB,EAAOpN,EAAKC,KAGlC+G,EAAO1J,KACRwhC,EACAS,EACAL,EAELb,GAAA5/B,EAAE+H,KAAK44B,EAAKz4B,EAAQK,KAGtBi4B,EAAA7hC,UAAAmB,OAAA,WACQ,GAAAC,GAAA/B,KAAAmC,MAAEqI,EAAAzI,EAAAyI,KAAMvB,EAAAlH,EAAAkH,MACd,OACE64B,GAAA9/B,EAAAC,cAAA,OAAKC,UAAU,mBACb4/B,EAAA9/B,EAAAC,cAAA,OAAKiuB,GAAIlwB,KAAKmC,MAAM+tB,GAAIhuB,UAAU,gBAAgBygB,OAAS1Z,OAAMA,KACjE64B,EAAA9/B,EAAAC,cAACmgC,EAAA,GAAO53B,KAAMA,MAItBg4B,GAjEoBX,EAAA,UAmEpBviC,GAAA,KlBmzKMyjC,KACA,SAAU1jC,EAAQC,EAAqBC,GAE7C,YACqB,IAAII,GAAsCJ,EAAoB,GAC1DK,EAA8CL,EAAoBM,EAAEF,GACzFI,EAAaC,MAAQA,KAAKD,WAAc,WACxC,GAAIE,GAAgBT,OAAOU,iBACpBC,uBAA2BC,QAAS,SAAUC,EAAGC,GAAKD,EAAEF,UAAYG,IACvE,SAAUD,EAAGC,GAAK,IAAK,GAAIC,KAAKD,GAAOA,EAAEE,eAAeD,KAAIF,EAAEE,GAAKD,EAAEC,IACzE,OAAO,UAAUF,EAAGC,GAEhB,QAASG,KAAOT,KAAKU,YAAcL,EADnCJ,EAAcI,EAAGC,GAEjBD,EAAEM,UAAkB,OAANL,EAAad,OAAOoB,OAAON,IAAMG,EAAGE,UAAYL,EAAEK,UAAW,GAAIF,QmBr8KjFuiC,EAAa,SAACjhC,GnB08KhB,GmB18KkBmI,GAAAnI,EAAAmI,MAAa,OACjCtK,GAAAoC,EAAAC,cAAA,OAAKC,UAAU,uBACbtC,EAAAoC,EAAAC,cAAA,OAAKC,UAAU,qBACbtC,EAAAoC,EAAAC,cAAA,KAAGC,UAAU,sBAAsBygB,OAASlgB,MAAOyH,EAAOzH,UAE5D7C,EAAAoC,EAAAC,cAAA,KAAGC,UAAU,8BAA8BgI,EAAOsf,SAItDyZ,EAAA,SAAA3hC,GAAA,QAAA2hC,KnB08KQ,MAAkB,QAAX3hC,GAAmBA,EAAOE,MAAMxB,KAAMkB,YAAclB,KmBh8KnE,MAVoCD,GAAAkjC,EAAA3hC,GAClC2hC,EAAAtiC,UAAAmB,OAAA,WACQ,GAAAC,GAAA/B,KAAAmC,MAAE8sB,EAAAltB,EAAAG,gBAAA,KAAA+sB,EAAA,GAAAA,EAAgBzkB,EAAAzI,EAAAyI,KAClBwnB,EAAQxnB,KACd,OACE5K,GAAAoC,EAAAC,cAAA,OAAKC,UAAcA,EAAS,oBACzB8vB,EAAM3I,IAAI,SAAAnf,GAAU,MAAAtK,GAAAoC,EAAAC,cAAC+gC,GAAWp3B,IAAK1B,EAAOgmB,GAAIhmB,OAAQA,QAIjE+4B,GAVoCtjC,EAAA,cnBm9KPL,GAAuB,EAAI,GAKlD4jC,KACA,SAAU7jC,EAAQC,EAAqBC,GAE7C,YACqB,IAAII,GAAsCJ,EAAoB,GAC1DK,EAA8CL,EAAoBM,EAAEF,GACzFI,EAAaC,MAAQA,KAAKD,WAAc,WACxC,GAAIE,GAAgBT,OAAOU,iBACpBC,uBAA2BC,QAAS,SAAUC,EAAGC,GAAKD,EAAEF,UAAYG,IACvE,SAAUD,EAAGC,GAAK,IAAK,GAAIC,KAAKD,GAAOA,EAAEE,eAAeD,KAAIF,EAAEE,GAAKD,EAAEC,IACzE,OAAO,UAAUF,EAAGC,GAEhB,QAASG,KAAOT,KAAKU,YAAcL,EADnCJ,EAAcI,EAAGC,GAEjBD,EAAEM,UAAkB,OAANL,EAAad,OAAOoB,OAAON,IAAMG,EAAGE,UAAYL,EAAEK,UAAW,GAAIF,QoB7+KjF0iC,GACJC,WACAC,SAGFC,EAAA,SAAAhiC,GAAA,QAAAgiC,KpBo/KQ,MAAkB,QAAXhiC,GAAmBA,EAAOE,MAAMxB,KAAMkB,YAAclB,KoBr+KnE,MAfmCD,GAAAujC,EAAAhiC,GACjCgiC,EAAA3iC,UAAAmB,OAAA,WACQ,GAAAC,GAAA/B,KAAAmC,MAAE8sB,EAAAltB,EAAAG,gBAAA,KAAA+sB,EAAA,GAAAA,EAAgBzkB,EAAAzI,EAAAyI,KAClB4kB,EAAa5kB,GAAQ24B,CAC3B,OACEvjC,GAAAoC,EAAAC,cAAA,SAAOC,UAAcA,EAAS,iBAC5BtC,EAAAoC,EAAAC,cAAA,aACErC,EAAAoC,EAAAC,cAAA,UAAKmtB,EAAWgU,QAAQ/Z,IAAI,SAAAka,GAAO,MAAA3jC,GAAAoC,EAAAC,cAAA,MAAI2J,IAAK23B,EAAIp6B,MAAOo6B,EAAIp6B,UAE7DvJ,EAAAoC,EAAAC,cAAA,aACGmtB,EAAWiU,KAAKha,IAAI,SAACma,EAAKviC,GAAM,MAAArB,GAAAoC,EAAAC,cAAA,MAAI2J,IAAK3K,GAAIuiC,EAAIna,IAAI,SAAC0T,EAAS3vB,GAAM,MAAAxN,GAAAoC,EAAAC,cAAA,MAAI2J,IAAKwB,GAAI2vB,WAK7FuG,GAfmC3jC,EAAA,cpBggLNL,GAAuB,EAAI,GAKlDmkC,KACA,SAAUpkC,EAAQC,EAAqBC,GAE7C,YqBngLM,SAAAmkC,GAAoBhkC,EAAOikC,EAAeC,GAC9C,OAD+B,KAAAD,OAAA,OAAe,KAAAC,OAAA,IAChB,IAA1BlkC,EAAMmW,QAAQ,OAChB,MAAOnW,EAET,KAAKoP,MAAMpP,GAAQ,CACjB,GAAMmkC,GAAQpgC,SAAS/D,GACjB2E,EAAIs/B,EAAQG,EAAA9hC,EAAO2kB,IAAIkd,GAASC,IAAOD,EAC7C,OAAOD,GAAWv/B,EAAEoJ,OAAOs2B,GAAe1/B,GrB6/Kf9E,EAAoBc,EAAEf,EAAqB,IAAK,WAAa,MAAO0kC,IAE9E,IAAIrkC,GAAsCJ,EAAoB,GAC1DK,EAA8CL,EAAoBM,EAAEF,GACpEskC,EAAuC1kC,EAAoB,GAC3DukC,EAA+CvkC,EAAoBM,EAAEokC,GACrEC,EAAwD3kC,EAAoB,KAC5E4kC,EAAyD5kC,EAAoB,KAClGQ,EAAaC,MAAQA,KAAKD,WAAc,WACxC,GAAIE,GAAgBT,OAAOU,iBACpBC,uBAA2BC,QAAS,SAAUC,EAAGC,GAAKD,EAAEF,UAAYG,IACvE,SAAUD,EAAGC,GAAK,IAAK,GAAIC,KAAKD,GAAOA,EAAEE,eAAeD,KAAIF,EAAEE,GAAKD,EAAEC,IACzE,OAAO,UAAUF,EAAGC,GAEhB,QAASG,KAAOT,KAAKU,YAAcL,EADnCJ,EAAcI,EAAGC,GAEjBD,EAAEM,UAAkB,OAANL,EAAad,OAAOoB,OAAON,IAAMG,EAAGE,UAAYL,EAAEK,UAAW,GAAIF,QqB1hLjFsjC,EAAc,sBAEPC,GACX3sB,KAAM,SACNC,GAAI,OAeN8sB,EAAA,SAAA9iC,GAEE,QAAA8iC,GAAYjiC,GAAZ,GAAAZ,GACED,EAAAF,KAAApB,KAAMmC,IAAMnC,IA4DduB,GAAA8iC,iBAAmB,SAAAzlB,GACjBrd,EAAKM,UACHyiC,QAAS1lB,EAAE6K,OAAO/pB,SAItB6B,EAAAgjC,eAAiB,SAAA3lB,GACfrd,EAAKM,UACH2iC,MAAO5lB,EAAE6K,OAAO/pB,SAIpB6B,EAAAkjC,iBAAmB,WACT,GAAA9U,GAAApuB,EAAAY,MAAAwtB,aACF5tB,EAAAR,EAAAE,MAAE+iC,EAAAziC,EAAAyiC,MAAOF,EAAAviC,EAAAuiC,QACTja,GACJhT,KAAM6sB,EAAA,MAAeI,GAAS,GAC9BhtB,GAAI4sB,EAAA,MAAeM,GAAO,IAEtBE,EAAcP,EAAA,EAA4B9Z,EAChD9oB,GAAKM,UAED8iC,QAAQ,EACRD,YAAWA,GAEb,WACM/U,GACFA,EAAatF,MAMrB9oB,EAAAqjC,gBAAkB,WAAM,MAAArjC,GAAKs5B,MAAM,IACnCt5B,EAAAsjC,kBAAoB,WAClBtjC,EAAKM,SAAS,SAAAJ,GAAS,OACrBkjC,QAASljC,EAAMkjC,WAGnBpjC,EAAAujC,iBAAmB,WAAM,MAAAvjC,GAAKs5B,KAAK,IACnCt5B,EAAAwjC,mBAAqB,aACrBxjC,EAAAyjC,0BAA4B,SAAA3a,GAClB,GAAAsF,GAAApuB,EAAAY,MAAAwtB,aACF+U,EAAcP,EAAA,EAA4B9Z,EAChD9oB,GAAKM,UAED2iC,MAAOna,EAAM/S,GACbgtB,QAASja,EAAMhT,KACfstB,QAAQ,EACRD,YAAWA,GAEb,WACM/U,GACFA,EAAatF,MAUrB9oB,EAAA0jC,YAAc,SAAA9M,GACZ52B,EAAK2jC,WAAa/M,EA1HlB,IAAMmM,GAAUniC,EAAMkoB,MAAQloB,EAAMkoB,MAAMhT,KAAO2sB,EAAc3sB,KACzDmtB,EAAQriC,EAAMkoB,MAAQloB,EAAMkoB,MAAM/S,GAAK0sB,EAAc1sB,GACrD+S,GACJhT,KAAMqsB,EAAUY,GAChBhtB,GAAIosB,EAAUc,GrB6lLZ,OqB3lLJjjC,GAAKE,OACH6iC,QAASZ,EAAUY,EAASniC,EAAMwhC,OAAO,GACzCgB,OAAQxiC,EAAMwiC,OACdhB,MAAOxhC,EAAMwhC,MACbe,YAAaP,EAAA,EAA4B9Z,GACzC8a,gBAAiB,GACjBX,MAAOd,EAAUc,EAAOriC,EAAMwhC,OAAO,IrBqlL5BpiC,EqB34Kf,MA3NwCxB,GAAAqkC,EAAA9iC,GAqBtC8iC,EAAAzjC,UAAAk6B,KAAA,SAAKhzB,GACK,GAQJyP,GAAID,EARAsY,EAAA3vB,KAAAmC,MAAAwtB,aACF5tB,EAAA/B,KAAAyB,MAAE6iC,EAAAviC,EAAAuiC,QAASE,EAAAziC,EAAAyiC,MACXna,GACJhT,KAAM6sB,EAAA,MAAeI,GAAS,GAC9BhtB,GAAI4sB,EAAA,MAAeM,GAAO,IAGtBY,GAAY/a,EAAM/S,GAAGurB,UAAYxY,EAAMhT,KAAKwrB,WAAa,GAE5C,IAAfh7B,GACFyP,EAAK+S,EAAM/S,GAAGurB,UAAYuC,EAC1B/tB,EAAOgT,EAAMhT,KAAKwrB,UAAYuC,GACP,IAAdv9B,GACTyP,EAAK+S,EAAM/S,GAAGurB,UAAYuC,EAC1B/tB,EAAOgT,EAAMhT,KAAKwrB,UAAYuC,EAC1B9tB,EAAKyP,KAAKgI,OAAS1E,EAAM/S,GAAKyP,KAAKgI,QACrCzX,EAAKyP,KAAKgI,MACV1X,EAAOgT,EAAMhT,KAAKwrB,aAGpBvrB,EAAK+S,EAAM/S,GAAGurB,UACdxrB,EAAOgT,EAAMhT,KAAKwrB,UAGpB,IAAM6B,GAAcP,EAAA,EAA4B9Z,EAEhD/S,GAAKwsB,IAAOxsB,GACZD,EAAOysB,IAAOzsB,GAEdrX,KAAK6B,UAED6iC,YAAWA,EACXJ,QAASjtB,EAAK5J,OAAOs2B,GACrBS,MAAOltB,EAAG7J,OAAOs2B,IAEnB,WACEpU,GAAerY,GAAEA,EAAED,KAAIA,OAgE7B+sB,EAAAzjC,UAAA0kC,eAAA,WACE,MAAOlB,GAAA,KAAmCnkC,KAAKyB,MAAMijC,cAOvDN,EAAAzjC,UAAA2kC,eAAA,cAAA/jC,GAAAvB,KACQ+B,EAAA/B,KAAAyB,MAAE6iC,EAAAviC,EAAAuiC,QAASK,EAAA5iC,EAAA4iC,OAAQH,EAAAziC,EAAAyiC,KACzB,KAAKG,EACH,MAAO,KAET,IAAMY,GAAcvlC,KAAKqlC,gBACzB,OACEzlC,GAAAoC,EAAAC,cAAA,OAAKm/B,IAAKphC,KAAKilC,YAAa/iC,UAAU,0BACpCtC,EAAAoC,EAAAC,cAAA,OAAKC,UAAU,kCACbtC,EAAAoC,EAAAC,cAAA,MAAIC,UAAU,mBAAiB,gBAE/BtC,EAAAoC,EAAAC,cAAA,SAAOC,UAAU,SAAO,SACxBtC,EAAAoC,EAAAC,cAAA,OAAKC,UAAU,kBACbtC,EAAAoC,EAAAC,cAAA,OAAKC,UAAU,wBACbtC,EAAAoC,EAAAC,cAAA,SACEoxB,KAAK,OACLnxB,UAAU,4CACVxC,MAAO4kC,EACPzQ,SAAU7zB,KAAKqkC,qBAKrBzkC,EAAAoC,EAAAC,cAAA,SAAOC,UAAU,SAAO,OACxBtC,EAAAoC,EAAAC,cAAA,OAAKC,UAAU,kBACbtC,EAAAoC,EAAAC,cAAA,OAAKC,UAAU,wBACbtC,EAAAoC,EAAAC,cAAA,SACEoxB,KAAK,OACLnxB,UAAU,0CACVxC,MAAO8kC,EACP3Q,SAAU7zB,KAAKukC,mBAWrB3kC,EAAAoC,EAAAC,cAAA,OAAKC,UAAU,WACbtC,EAAAoC,EAAAC,cAAA,UAAQC,UAAU,gCAAgC8N,QAAShQ,KAAKykC,kBAAgB,WAMpF7kC,EAAAoC,EAAAC,cAAA,OAAKC,UAAU,kCACbtC,EAAAoC,EAAAC,cAAA,MAAIC,UAAU,mBAAiB,gBAC9B1C,OAAOy2B,KAAKsP,GAAalc,IAAI,SAAAmc,GAC5B,GAAMjP,GAAQgP,EAAYC,EAC1B,OACE5lC,GAAAoC,EAAAC,cAAA,MAAI2J,IAAK45B,GACNjP,EAAMlN,IAAI,SAAAoc,GAAU,MACnB7lC,GAAAoC,EAAAC,cAAA,MAAIC,UAAWujC,EAAOnhB,OAAS,SAAW,GAAI1Y,IAAK65B,EAAOC,SACxD9lC,EAAAoC,EAAAC,cAAA,KAAG+N,QAAS,WAAM,MAAAzO,GAAKyjC,0BAA0BS,KAAUA,EAAOC,kBAWpFtB,EAAAzjC,UAAAmB,OAAA,WACQ,GAAAC,GAAA/B,KAAAyB,MAAEkiC,EAAA5hC,EAAA4hC,MAAOe,EAAA3iC,EAAA2iC,YAAaS,EAAApjC,EAAAojC,eAC5B,OACEvlC,GAAAoC,EAAAC,cAAA,OAAKC,UAAU,cACbtC,EAAAoC,EAAAC,cAAA,OAAKC,UAAU,kBACbtC,EAAAoC,EAAAC,cAAA,UAAQC,UAAU,yDAAyD8N,QAAShQ,KAAK4kC,iBACvFhlC,EAAAoC,EAAAC,cAAA,KAAGC,UAAU,wBAEftC,EAAAoC,EAAAC,cAAA,UAAQC,UAAU,0CAA0C8N,QAAShQ,KAAK6kC,mBACxEjlC,EAAAoC,EAAAC,cAAA,KAAGC,UAAU,kBACbtC,EAAAoC,EAAAC,cAAA,QAAMC,UAAU,0BAA0BwiC,GACzCf,EAAQ/jC,EAAAoC,EAAAC,cAAA,QAAMC,UAAU,qBAAmB,OAAc,KACzDijC,EAAkBvlC,EAAAoC,EAAAC,cAAA,QAAMC,UAAU,gBrBs+KvB,mBqBt+K4DijC,GAA0B,MAEpGvlC,EAAAoC,EAAAC,cAAA,UAAQC,UAAU,0DAA0D8N,QAAShQ,KAAK8kC,kBACxFllC,EAAAoC,EAAAC,cAAA,KAAGC,UAAU,0BAGhBlC,KAAKslC,mBAIdlB,GA3NwCzkC,EAAA,crB+rLXL,GAAuB,EAAI,GAKlDqmC,KACA,SAAUtmC,EAAQC,EAAqBC,GAE7C,YsBhuLM,SAAAqmC,GAA4B7jC,GtBsuL9B,GsBtuLgC0L,GAAA1L,EAAA0L,OAAQyhB,EAAAntB,EAAAmtB,SAAUC,EAAAptB,EAAAotB,OACpD,QACED,SAAQA,EACR7E,MAH2DtoB,EAAAsoB,MAI3Dwb,QAJkE9jC,EAAAmoB,QAIjDb,IAAI,SAAAyc,GAAQ,OAC3BA,KAAIA,EACJr4B,OAAMA,EACN0hB,QAAOA,MAKP,QAAA4W,GAA2Bxc,GAC/B,WAD+B,KAAAA,MAAA,GACxB,KAAKxC,KAAKgI,MAAK,IAAIze,KAAK01B,SAAQ,IAAIzc,EAGvC,QAAA0c,GAAwB/b,GAC5B,MAAIA,IAA8B,gBAAZA,IAAwBA,EAAQ/oB,OAAS,GAA2B,gBAAf+oB,GAAQ,GAC1EA,EAAQb,IAAI,SAACe,EAAOnpB,GAAM,OAAG2K,IAAKm6B,EAAiB9kC,GAAImpB,MAAKA,OAE3Dxe,IAAKm6B,IAAoB3b,MAAO,KAGtC,QAAA8b,GAAmBhc,GACvB,MAAOA,GAAQic,KAAK,SAAAhc,GAAK,MAAAA,GAAEC,QtBysLI9qB,EAAuB,EAAIsmC,EAC3BtmC,EAAuB,EAAIymC,EAC3BzmC,EAAuB,EAAI2mC,EAC3B3mC,EAAuB,EAAI4mC","file":"1.b62b685e12bd20d76c90.js","sourcesContent":["webpackJsonp([1],{\n\n/***/ 1666:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_react__ = __webpack_require__(2);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_react___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_react__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__Explore__ = __webpack_require__(1705);\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nvar __assign = (this && this.__assign) || Object.assign || function(t) {\r\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n        s = arguments[i];\r\n        for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\r\n            t[p] = s[p];\r\n    }\r\n    return t;\r\n};\r\n\r\n\r\nvar Wrapper = /** @class */ (function (_super) {\r\n    __extends(Wrapper, _super);\r\n    function Wrapper() {\r\n        var _this = _super !== null && _super.apply(this, arguments) || this;\r\n        _this.state = {\r\n            initialState: null,\r\n            split: false,\r\n        };\r\n        _this.handleChangeSplit = function (split, initialState) {\r\n            _this.setState({ split: split, initialState: initialState });\r\n        };\r\n        return _this;\r\n    }\r\n    Wrapper.prototype.render = function () {\r\n        // State overrides for props from first Explore\r\n        var _a = this.state, initialState = _a.initialState, split = _a.split;\r\n        return (__WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(\"div\", { className: \"explore-wrapper\" },\r\n            __WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_1__Explore__[\"a\" /* default */], __assign({}, this.props, { position: \"left\", onChangeSplit: this.handleChangeSplit, split: split })),\r\n            split ? (__WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_1__Explore__[\"a\" /* default */], __assign({}, this.props, { initialState: initialState, onChangeSplit: this.handleChangeSplit, position: \"right\", split: split }))) : null));\r\n    };\r\n    return Wrapper;\r\n}(__WEBPACK_IMPORTED_MODULE_0_react__[\"PureComponent\"]));\r\n/* harmony default export */ __webpack_exports__[\"default\"] = (Wrapper);\r\n\n\n/***/ }),\n\n/***/ 1670:\n/***/ (function(module, exports) {\n\n/* Javascript plotting library for jQuery, version 0.8.3.\r\n\r\nCopyright (c) 2007-2014 IOLA and Ole Laursen.\r\nLicensed under the MIT license.\r\n\r\n*/\r\n\r\n// first an inline dependency, jquery.colorhelpers.js, we inline it here\r\n// for convenience\r\n\r\n/* Plugin for jQuery for working with colors.\r\n *\r\n * Version 1.1.\r\n *\r\n * Inspiration from jQuery color animation plugin by John Resig.\r\n *\r\n * Released under the MIT license by Ole Laursen, October 2009.\r\n *\r\n * Examples:\r\n *\r\n *   $.color.parse(\"#fff\").scale('rgb', 0.25).add('a', -0.5).toString()\r\n *   var c = $.color.extract($(\"#mydiv\"), 'background-color');\r\n *   console.log(c.r, c.g, c.b, c.a);\r\n *   $.color.make(100, 50, 25, 0.4).toString() // returns \"rgba(100,50,25,0.4)\"\r\n *\r\n * Note that .scale() and .add() return the same modified object\r\n * instead of making a new one.\r\n *\r\n * V. 1.1: Fix error handling so e.g. parsing an empty string does\r\n * produce a color rather than just crashing.\r\n */\r\n(function($){$.color={};$.color.make=function(r,g,b,a){var o={};o.r=r||0;o.g=g||0;o.b=b||0;o.a=a!=null?a:1;o.add=function(c,d){for(var i=0;i<c.length;++i)o[c.charAt(i)]+=d;return o.normalize()};o.scale=function(c,f){for(var i=0;i<c.length;++i)o[c.charAt(i)]*=f;return o.normalize()};o.toString=function(){if(o.a>=1){return\"rgb(\"+[o.r,o.g,o.b].join(\",\")+\")\"}else{return\"rgba(\"+[o.r,o.g,o.b,o.a].join(\",\")+\")\"}};o.normalize=function(){function clamp(min,value,max){return value<min?min:value>max?max:value}o.r=clamp(0,parseInt(o.r),255);o.g=clamp(0,parseInt(o.g),255);o.b=clamp(0,parseInt(o.b),255);o.a=clamp(0,o.a,1);return o};o.clone=function(){return $.color.make(o.r,o.b,o.g,o.a)};return o.normalize()};$.color.extract=function(elem,css){var c;do{c=elem.css(css).toLowerCase();if(c!=\"\"&&c!=\"transparent\")break;elem=elem.parent()}while(elem.length&&!$.nodeName(elem.get(0),\"body\"));if(c==\"rgba(0, 0, 0, 0)\")c=\"transparent\";return $.color.parse(c)};$.color.parse=function(str){var res,m=$.color.make;if(res=/rgb\\(\\s*([0-9]{1,3})\\s*,\\s*([0-9]{1,3})\\s*,\\s*([0-9]{1,3})\\s*\\)/.exec(str))return m(parseInt(res[1],10),parseInt(res[2],10),parseInt(res[3],10));if(res=/rgba\\(\\s*([0-9]{1,3})\\s*,\\s*([0-9]{1,3})\\s*,\\s*([0-9]{1,3})\\s*,\\s*([0-9]+(?:\\.[0-9]+)?)\\s*\\)/.exec(str))return m(parseInt(res[1],10),parseInt(res[2],10),parseInt(res[3],10),parseFloat(res[4]));if(res=/rgb\\(\\s*([0-9]+(?:\\.[0-9]+)?)\\%\\s*,\\s*([0-9]+(?:\\.[0-9]+)?)\\%\\s*,\\s*([0-9]+(?:\\.[0-9]+)?)\\%\\s*\\)/.exec(str))return m(parseFloat(res[1])*2.55,parseFloat(res[2])*2.55,parseFloat(res[3])*2.55);if(res=/rgba\\(\\s*([0-9]+(?:\\.[0-9]+)?)\\%\\s*,\\s*([0-9]+(?:\\.[0-9]+)?)\\%\\s*,\\s*([0-9]+(?:\\.[0-9]+)?)\\%\\s*,\\s*([0-9]+(?:\\.[0-9]+)?)\\s*\\)/.exec(str))return m(parseFloat(res[1])*2.55,parseFloat(res[2])*2.55,parseFloat(res[3])*2.55,parseFloat(res[4]));if(res=/#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})/.exec(str))return m(parseInt(res[1],16),parseInt(res[2],16),parseInt(res[3],16));if(res=/#([a-fA-F0-9])([a-fA-F0-9])([a-fA-F0-9])/.exec(str))return m(parseInt(res[1]+res[1],16),parseInt(res[2]+res[2],16),parseInt(res[3]+res[3],16));var name=$.trim(str).toLowerCase();if(name==\"transparent\")return m(255,255,255,0);else{res=lookupColors[name]||[0,0,0];return m(res[0],res[1],res[2])}};var lookupColors={aqua:[0,255,255],azure:[240,255,255],beige:[245,245,220],black:[0,0,0],blue:[0,0,255],brown:[165,42,42],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgrey:[169,169,169],darkgreen:[0,100,0],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkviolet:[148,0,211],fuchsia:[255,0,255],gold:[255,215,0],green:[0,128,0],indigo:[75,0,130],khaki:[240,230,140],lightblue:[173,216,230],lightcyan:[224,255,255],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightyellow:[255,255,224],lime:[0,255,0],magenta:[255,0,255],maroon:[128,0,0],navy:[0,0,128],olive:[128,128,0],orange:[255,165,0],pink:[255,192,203],purple:[128,0,128],violet:[128,0,128],red:[255,0,0],silver:[192,192,192],white:[255,255,255],yellow:[255,255,0]}})(jQuery);\r\n\r\n// the actual Flot code\r\n(function($) {\r\n\r\n\t// Cache the prototype hasOwnProperty for faster access\r\n\r\n\tvar hasOwnProperty = Object.prototype.hasOwnProperty;\r\n\r\n    // A shim to provide 'detach' to jQuery versions prior to 1.4.  Using a DOM\r\n    // operation produces the same effect as detach, i.e. removing the element\r\n    // without touching its jQuery data.\r\n\r\n    // Do not merge this into Flot 0.9, since it requires jQuery 1.4.4+.\r\n\r\n    if (!$.fn.detach) {\r\n        $.fn.detach = function() {\r\n            return this.each(function() {\r\n                if (this.parentNode) {\r\n                    this.parentNode.removeChild( this );\r\n                }\r\n            });\r\n        };\r\n    }\r\n\r\n\t///////////////////////////////////////////////////////////////////////////\r\n\t// The Canvas object is a wrapper around an HTML5 <canvas> tag.\r\n\t//\r\n\t// @constructor\r\n\t// @param {string} cls List of classes to apply to the canvas.\r\n\t// @param {element} container Element onto which to append the canvas.\r\n\t//\r\n\t// Requiring a container is a little iffy, but unfortunately canvas\r\n\t// operations don't work unless the canvas is attached to the DOM.\r\n\r\n\tfunction Canvas(cls, container) {\r\n\r\n\t\tvar element = container.children(\".\" + cls)[0];\r\n\r\n\t\tif (element == null) {\r\n\r\n\t\t\telement = document.createElement(\"canvas\");\r\n\t\t\telement.className = cls;\r\n\r\n\t\t\t$(element).css({ direction: \"ltr\", position: \"absolute\", left: 0, top: 0 })\r\n\t\t\t\t.appendTo(container);\r\n\r\n\t\t\t// If HTML5 Canvas isn't available, fall back to [Ex|Flash]canvas\r\n\r\n\t\t\tif (!element.getContext) {\r\n\t\t\t\tif (window.G_vmlCanvasManager) {\r\n\t\t\t\t\telement = window.G_vmlCanvasManager.initElement(element);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthrow new Error(\"Canvas is not available. If you're using IE with a fall-back such as Excanvas, then there's either a mistake in your conditional include, or the page has no DOCTYPE and is rendering in Quirks Mode.\");\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tthis.element = element;\r\n\r\n\t\tvar context = this.context = element.getContext(\"2d\");\r\n\r\n\t\t// Determine the screen's ratio of physical to device-independent\r\n\t\t// pixels.  This is the ratio between the canvas width that the browser\r\n\t\t// advertises and the number of pixels actually present in that space.\r\n\r\n\t\t// The iPhone 4, for example, has a device-independent width of 320px,\r\n\t\t// but its screen is actually 640px wide.  It therefore has a pixel\r\n\t\t// ratio of 2, while most normal devices have a ratio of 1.\r\n\r\n\t\tvar devicePixelRatio = window.devicePixelRatio || 1,\r\n\t\t\tbackingStoreRatio =\r\n\t\t\t\tcontext.webkitBackingStorePixelRatio ||\r\n\t\t\t\tcontext.mozBackingStorePixelRatio ||\r\n\t\t\t\tcontext.msBackingStorePixelRatio ||\r\n\t\t\t\tcontext.oBackingStorePixelRatio ||\r\n\t\t\t\tcontext.backingStorePixelRatio || 1;\r\n\r\n\t\tthis.pixelRatio = devicePixelRatio / backingStoreRatio;\r\n\r\n\t\t// Size the canvas to match the internal dimensions of its container\r\n\r\n\t\tthis.resize(container.width(), container.height());\r\n\r\n\t\t// Collection of HTML div layers for text overlaid onto the canvas\r\n\r\n\t\tthis.textContainer = null;\r\n\t\tthis.text = {};\r\n\r\n\t\t// Cache of text fragments and metrics, so we can avoid expensively\r\n\t\t// re-calculating them when the plot is re-rendered in a loop.\r\n\r\n\t\tthis._textCache = {};\r\n\t\tthis._textSizeCache = window.flotTextSizeCache = window.flotTextSizeCache || {};\r\n\t}\r\n\r\n\t// Resizes the canvas to the given dimensions.\r\n\t//\r\n\t// @param {number} width New width of the canvas, in pixels.\r\n\t// @param {number} width New height of the canvas, in pixels.\r\n\r\n\tCanvas.prototype.resize = function(width, height) {\r\n\r\n\t\tif (width <= 0 || height <= 0) {\r\n\t\t\tthrow new Error(\"Invalid dimensions for plot, width = \" + width + \", height = \" + height);\r\n\t\t}\r\n\r\n\t\tvar element = this.element,\r\n\t\t\tcontext = this.context,\r\n\t\t\tpixelRatio = this.pixelRatio;\r\n\r\n\t\t// Resize the canvas, increasing its density based on the display's\r\n\t\t// pixel ratio; basically giving it more pixels without increasing the\r\n\t\t// size of its element, to take advantage of the fact that retina\r\n\t\t// displays have that many more pixels in the same advertised space.\r\n\r\n\t\t// Resizing should reset the state (excanvas seems to be buggy though)\r\n\r\n\t\tif (this.width != width) {\r\n\t\t\telement.width = width * pixelRatio;\r\n\t\t\telement.style.width = width + \"px\";\r\n\t\t\tthis.width = width;\r\n\t\t}\r\n\r\n\t\tif (this.height != height) {\r\n\t\t\telement.height = height * pixelRatio;\r\n\t\t\telement.style.height = height + \"px\";\r\n\t\t\tthis.height = height;\r\n\t\t}\r\n\r\n\t\t// Save the context, so we can reset in case we get replotted.  The\r\n\t\t// restore ensure that we're really back at the initial state, and\r\n\t\t// should be safe even if we haven't saved the initial state yet.\r\n\r\n\t\tcontext.restore();\r\n\t\tcontext.save();\r\n\r\n\t\t// Scale the coordinate space to match the display density; so even though we\r\n\t\t// may have twice as many pixels, we still want lines and other drawing to\r\n\t\t// appear at the same size; the extra pixels will just make them crisper.\r\n\r\n\t\tcontext.scale(pixelRatio, pixelRatio);\r\n\t};\r\n\r\n\t// Clears the entire canvas area, not including any overlaid HTML text\r\n\r\n\tCanvas.prototype.clear = function() {\r\n\t\tthis.context.clearRect(0, 0, this.width, this.height);\r\n\t};\r\n\r\n\t// Finishes rendering the canvas, including managing the text overlay.\r\n\r\n\tCanvas.prototype.render = function() {\r\n\r\n\t\tvar cache = this._textCache;\r\n\r\n\t\t// For each text layer, add elements marked as active that haven't\r\n\t\t// already been rendered, and remove those that are no longer active.\r\n\r\n\t\tfor (var layerKey in cache) {\r\n\t\t\tif (hasOwnProperty.call(cache, layerKey)) {\r\n\r\n\t\t\t\tvar layer = this.getTextLayer(layerKey),\r\n\t\t\t\t\tlayerCache = cache[layerKey];\r\n\r\n\t\t\t\tlayer.hide();\r\n\r\n\t\t\t\tfor (var styleKey in layerCache) {\r\n\t\t\t\t\tif (hasOwnProperty.call(layerCache, styleKey)) {\r\n\t\t\t\t\t\tvar styleCache = layerCache[styleKey];\r\n\t\t\t\t\t\tfor (var key in styleCache) {\r\n\t\t\t\t\t\t\tif (hasOwnProperty.call(styleCache, key)) {\r\n\r\n\t\t\t\t\t\t\t\tvar positions = styleCache[key].positions;\r\n\r\n\t\t\t\t\t\t\t\tfor (var i = 0, position; position = positions[i]; i++) {\r\n\t\t\t\t\t\t\t\t\tif (position.active) {\r\n\t\t\t\t\t\t\t\t\t\tif (!position.rendered) {\r\n\t\t\t\t\t\t\t\t\t\t\tlayer.append(position.element);\r\n\t\t\t\t\t\t\t\t\t\t\tposition.rendered = true;\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\t\tpositions.splice(i--, 1);\r\n\t\t\t\t\t\t\t\t\t\tif (position.rendered) {\r\n\t\t\t\t\t\t\t\t\t\t\tposition.element.detach();\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t\tif (positions.length == 0) {\r\n\t\t\t\t\t\t\t\t\tdelete styleCache[key];\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tlayer.show();\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\r\n\t// Creates (if necessary) and returns the text overlay container.\r\n\t//\r\n\t// @param {string} classes String of space-separated CSS classes used to\r\n\t//     uniquely identify the text layer.\r\n\t// @return {object} The jQuery-wrapped text-layer div.\r\n\r\n\tCanvas.prototype.getTextLayer = function(classes) {\r\n\r\n\t\tvar layer = this.text[classes];\r\n\r\n\t\t// Create the text layer if it doesn't exist\r\n\r\n\t\tif (layer == null) {\r\n\r\n\t\t\t// Create the text layer container, if it doesn't exist\r\n\r\n\t\t\tif (this.textContainer == null) {\r\n\t\t\t\tthis.textContainer = $(\"<div class='flot-text flot-temp-elem'></div>\")\r\n\t\t\t\t\t.css({\r\n\t\t\t\t\t\tposition: \"absolute\",\r\n\t\t\t\t\t\ttop: 0,\r\n\t\t\t\t\t\tleft: 0,\r\n\t\t\t\t\t\tbottom: 0,\r\n\t\t\t\t\t\tright: 0,\r\n\t\t\t\t\t\t'font-size': \"smaller\",\r\n\t\t\t\t\t\tcolor: \"#545454\"\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.insertAfter(this.element);\r\n\t\t\t}\r\n\r\n\t\t\tlayer = this.text[classes] = $(\"<div></div>\")\r\n\t\t\t\t.addClass(classes)\r\n\t\t\t\t.css({\r\n\t\t\t\t\tposition: \"absolute\",\r\n\t\t\t\t\ttop: 0,\r\n\t\t\t\t\tleft: 0,\r\n\t\t\t\t\tbottom: 0,\r\n\t\t\t\t\tright: 0\r\n\t\t\t\t})\r\n\t\t\t\t.appendTo(this.textContainer);\r\n\t\t}\r\n\r\n\t\treturn layer;\r\n\t};\r\n\r\n\t// Creates (if necessary) and returns a text info object.\r\n\t//\r\n\t// The object looks like this:\r\n\t//\r\n\t// {\r\n\t//     width: Width of the text's wrapper div.\r\n\t//     height: Height of the text's wrapper div.\r\n\t//     element: The jQuery-wrapped HTML div containing the text.\r\n\t//     positions: Array of positions at which this text is drawn.\r\n\t// }\r\n\t//\r\n\t// The positions array contains objects that look like this:\r\n\t//\r\n\t// {\r\n\t//     active: Flag indicating whether the text should be visible.\r\n\t//     rendered: Flag indicating whether the text is currently visible.\r\n\t//     element: The jQuery-wrapped HTML div containing the text.\r\n\t//     x: X coordinate at which to draw the text.\r\n\t//     y: Y coordinate at which to draw the text.\r\n\t// }\r\n\t//\r\n\t// Each position after the first receives a clone of the original element.\r\n\t//\r\n\t// The idea is that that the width, height, and general 'identity' of the\r\n\t// text is constant no matter where it is placed; the placements are a\r\n\t// secondary property.\r\n\t//\r\n\t// Canvas maintains a cache of recently-used text info objects; getTextInfo\r\n\t// either returns the cached element or creates a new entry.\r\n\t//\r\n\t// @param {string} layer A string of space-separated CSS classes uniquely\r\n\t//     identifying the layer containing this text.\r\n\t// @param {string} text Text string to retrieve info for.\r\n\t// @param {(string|object)=} font Either a string of space-separated CSS\r\n\t//     classes or a font-spec object, defining the text's font and style.\r\n\t// @param {number=} angle Angle at which to rotate the text, in degrees.\r\n\t//     Angle is currently unused, it will be implemented in the future.\r\n\t// @param {number=} width Maximum width of the text before it wraps.\r\n\t// @return {object} a text info object.\r\n\r\n\tCanvas.prototype.getTextInfo = function(layer, text, font, angle, width) {\r\n\r\n\t\tvar textStyle, layerCache, styleCache, info;\r\n\r\n\t\t// Cast the value to a string, in case we were given a number or such\r\n\r\n\t\ttext = \"\" + text;\r\n\r\n\t\t// If the font is a font-spec object, generate a CSS font definition\r\n\r\n\t\tif (typeof font === \"object\") {\r\n\t\t\ttextStyle = font.style + \" \" + font.variant + \" \" + font.weight + \" \" + font.size + \"px/\" + font.lineHeight + \"px \" + font.family;\r\n\t\t} else {\r\n\t\t\ttextStyle = font;\r\n\t\t}\r\n\r\n\t\t// Retrieve (or create) the cache for the text's layer and styles\r\n\r\n\t\tlayerCache = this._textCache[layer];\r\n\r\n\t\tif (layerCache == null) {\r\n\t\t\tlayerCache = this._textCache[layer] = {};\r\n\t\t}\r\n\r\n\t\tstyleCache = layerCache[textStyle];\r\n\r\n\t\tif (styleCache == null) {\r\n\t\t\tstyleCache = layerCache[textStyle] = {};\r\n\t\t}\r\n\r\n\t\tinfo = styleCache[text];\r\n\r\n\t\t// If we can't find a matching element in our cache, create a new one\r\n\r\n\t\tif (info == null) {\r\n\r\n\t\t\tvar element = $(\"<div></div>\").html(text)\r\n\t\t\t\t.css({\r\n\t\t\t\t\tposition: \"absolute\",\r\n\t\t\t\t\t'max-width': width,\r\n\t\t\t\t\ttop: -9999\r\n\t\t\t\t})\r\n\t\t\t\t.appendTo(this.getTextLayer(layer));\r\n\r\n\t\t\tif (typeof font === \"object\") {\r\n\t\t\t\telement.css({\r\n\t\t\t\t\tfont: textStyle,\r\n\t\t\t\t\tcolor: font.color\r\n\t\t\t\t});\r\n\t\t\t} else if (typeof font === \"string\") {\r\n\t\t\t\telement.addClass(font);\r\n\t\t\t}\r\n\r\n      info = styleCache[text] = { element: element, positions: [] };\r\n\r\n      var size = this._textSizeCache[text];\r\n\t\t\tif (size) {\r\n        info.width = size.width;\r\n        info.height = size.height;\r\n\t\t\t} else {\r\n        info.width = element.outerWidth(true);\r\n        info.height = element.outerHeight(true);\r\n        this._textSizeCache[text] = { width: info.width, height: info.height };\r\n\t\t\t}\r\n\t\t\telement.detach();\r\n\t\t}\r\n\r\n\t\treturn info;\r\n\t};\r\n\r\n\t// Adds a text string to the canvas text overlay.\r\n\t//\r\n\t// The text isn't drawn immediately; it is marked as rendering, which will\r\n\t// result in its addition to the canvas on the next render pass.\r\n\t//\r\n\t// @param {string} layer A string of space-separated CSS classes uniquely\r\n\t//     identifying the layer containing this text.\r\n\t// @param {number} x X coordinate at which to draw the text.\r\n\t// @param {number} y Y coordinate at which to draw the text.\r\n\t// @param {string} text Text string to draw.\r\n\t// @param {(string|object)=} font Either a string of space-separated CSS\r\n\t//     classes or a font-spec object, defining the text's font and style.\r\n\t// @param {number=} angle Angle at which to rotate the text, in degrees.\r\n\t//     Angle is currently unused, it will be implemented in the future.\r\n\t// @param {number=} width Maximum width of the text before it wraps.\r\n\t// @param {string=} halign Horizontal alignment of the text; either \"left\",\r\n\t//     \"center\" or \"right\".\r\n\t// @param {string=} valign Vertical alignment of the text; either \"top\",\r\n\t//     \"middle\" or \"bottom\".\r\n\r\n\tCanvas.prototype.addText = function(layer, x, y, text, font, angle, width, halign, valign) {\r\n\r\n\t\tvar info = this.getTextInfo(layer, text, font, angle, width),\r\n\t\t\tpositions = info.positions;\r\n\r\n\t\t// Tweak the div's position to match the text's alignment\r\n\r\n\t\tif (halign == \"center\") {\r\n\t\t\tx -= info.width / 2;\r\n\t\t} else if (halign == \"right\") {\r\n\t\t\tx -= info.width;\r\n\t\t}\r\n\r\n\t\tif (valign == \"middle\") {\r\n\t\t\ty -= info.height / 2;\r\n\t\t} else if (valign == \"bottom\") {\r\n\t\t\ty -= info.height;\r\n\t\t}\r\n\r\n\t\t// Determine whether this text already exists at this position.\r\n\t\t// If so, mark it for inclusion in the next render pass.\r\n\r\n\t\tfor (var i = 0, position; position = positions[i]; i++) {\r\n\t\t\tif (position.x == x && position.y == y) {\r\n\t\t\t\tposition.active = true;\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t// If the text doesn't exist at this position, create a new entry\r\n\r\n\t\t// For the very first position we'll re-use the original element,\r\n\t\t// while for subsequent ones we'll clone it.\r\n\r\n\t\tposition = {\r\n\t\t\tactive: true,\r\n\t\t\trendered: false,\r\n\t\t\telement: positions.length ? info.element.clone() : info.element,\r\n\t\t\tx: x,\r\n\t\t\ty: y\r\n\t\t};\r\n\r\n\t\tpositions.push(position);\r\n\r\n\t\t// Move the element to its final position within the container\r\n\r\n\t\tposition.element.css({\r\n\t\t\ttop: Math.round(y),\r\n\t\t\tleft: Math.round(x),\r\n\t\t\t'text-align': halign\t// In case the text wraps\r\n\t\t});\r\n\t};\r\n\r\n\t// Removes one or more text strings from the canvas text overlay.\r\n\t//\r\n\t// If no parameters are given, all text within the layer is removed.\r\n\t//\r\n\t// Note that the text is not immediately removed; it is simply marked as\r\n\t// inactive, which will result in its removal on the next render pass.\r\n\t// This avoids the performance penalty for 'clear and redraw' behavior,\r\n\t// where we potentially get rid of all text on a layer, but will likely\r\n\t// add back most or all of it later, as when redrawing axes, for example.\r\n\t//\r\n\t// @param {string} layer A string of space-separated CSS classes uniquely\r\n\t//     identifying the layer containing this text.\r\n\t// @param {number=} x X coordinate of the text.\r\n\t// @param {number=} y Y coordinate of the text.\r\n\t// @param {string=} text Text string to remove.\r\n\t// @param {(string|object)=} font Either a string of space-separated CSS\r\n\t//     classes or a font-spec object, defining the text's font and style.\r\n\t// @param {number=} angle Angle at which the text is rotated, in degrees.\r\n\t//     Angle is currently unused, it will be implemented in the future.\r\n\r\n\tCanvas.prototype.removeText = function(layer, x, y, text, font, angle) {\r\n\t\tif (text == null) {\r\n\t\t\tvar layerCache = this._textCache[layer];\r\n\t\t\tif (layerCache != null) {\r\n\t\t\t\tfor (var styleKey in layerCache) {\r\n\t\t\t\t\tif (hasOwnProperty.call(layerCache, styleKey)) {\r\n\t\t\t\t\t\tvar styleCache = layerCache[styleKey];\r\n\t\t\t\t\t\tfor (var key in styleCache) {\r\n\t\t\t\t\t\t\tif (hasOwnProperty.call(styleCache, key)) {\r\n\t\t\t\t\t\t\t\tvar positions = styleCache[key].positions;\r\n\t\t\t\t\t\t\t\tfor (var i = 0, position; position = positions[i]; i++) {\r\n\t\t\t\t\t\t\t\t\tposition.active = false;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tvar positions = this.getTextInfo(layer, text, font, angle).positions;\r\n\t\t\tfor (var i = 0, position; position = positions[i]; i++) {\r\n\t\t\t\tif (position.x == x && position.y == y) {\r\n\t\t\t\t\tposition.active = false;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\r\n\t///////////////////////////////////////////////////////////////////////////\r\n\t// The top-level container for the entire plot.\r\n\r\n    function Plot(placeholder, data_, options_, plugins) {\r\n        // data is on the form:\r\n        //   [ series1, series2 ... ]\r\n        // where series is either just the data as [ [x1, y1], [x2, y2], ... ]\r\n        // or { data: [ [x1, y1], [x2, y2], ... ], label: \"some label\", ... }\r\n\r\n        var series = [],\r\n            options = {\r\n                // the color theme used for graphs\r\n                colors: [\"#edc240\", \"#afd8f8\", \"#cb4b4b\", \"#4da74d\", \"#9440ed\"],\r\n                legend: {\r\n                    show: true,\r\n                    noColumns: 1, // number of colums in legend table\r\n                    labelFormatter: null, // fn: string -> string\r\n                    labelBoxBorderColor: \"#ccc\", // border color for the little label boxes\r\n                    container: null, // container (as jQuery object) to put legend in, null means default on top of graph\r\n                    position: \"ne\", // position of default legend container within plot\r\n                    margin: 5, // distance from grid edge to default legend container within plot\r\n                    backgroundColor: null, // null means auto-detect\r\n                    backgroundOpacity: 0.85, // set to 0 to avoid background\r\n                    sorted: null    // default to no legend sorting\r\n                },\r\n                xaxis: {\r\n                    show: null, // null = auto-detect, true = always, false = never\r\n                    position: \"bottom\", // or \"top\"\r\n                    mode: null, // null or \"time\"\r\n                    font: null, // null (derived from CSS in placeholder) or object like { size: 11, lineHeight: 13, style: \"italic\", weight: \"bold\", family: \"sans-serif\", variant: \"small-caps\" }\r\n                    color: null, // base color, labels, ticks\r\n                    tickColor: null, // possibly different color of ticks, e.g. \"rgba(0,0,0,0.15)\"\r\n                    transform: null, // null or f: number -> number to transform axis\r\n                    inverseTransform: null, // if transform is set, this should be the inverse function\r\n                    min: null, // min. value to show, null means set automatically\r\n                    max: null, // max. value to show, null means set automatically\r\n                    autoscaleMargin: null, // margin in % to add if auto-setting min/max\r\n                    ticks: null, // either [1, 3] or [[1, \"a\"], 3] or (fn: axis info -> ticks) or app. number of ticks for auto-ticks\r\n                    tickFormatter: null, // fn: number -> string\r\n                    labelWidth: null, // size of tick labels in pixels\r\n                    labelHeight: null,\r\n                    reserveSpace: null, // whether to reserve space even if axis isn't shown\r\n                    tickLength: null, // size in pixels of ticks, or \"full\" for whole line\r\n                    alignTicksWithAxis: null, // axis number or null for no sync\r\n                    tickDecimals: null, // no. of decimals, null means auto\r\n                    tickSize: null, // number or [number, \"unit\"]\r\n                    minTickSize: null // number or [number, \"unit\"]\r\n                },\r\n                yaxis: {\r\n                    autoscaleMargin: 0.02,\r\n                    position: \"left\" // or \"right\"\r\n                },\r\n                xaxes: [],\r\n                yaxes: [],\r\n                series: {\r\n                    points: {\r\n                        show: false,\r\n                        radius: 3,\r\n                        lineWidth: 2, // in pixels\r\n                        fill: true,\r\n                        fillColor: \"#ffffff\",\r\n                        symbol: \"circle\" // or callback\r\n                    },\r\n                    lines: {\r\n                        // we don't put in show: false so we can see\r\n                        // whether lines were actively disabled\r\n                        lineWidth: 2, // in pixels\r\n                        fill: false,\r\n                        fillColor: null,\r\n                        steps: false\r\n                        // Omit 'zero', so we can later default its value to\r\n                        // match that of the 'fill' option.\r\n                    },\r\n                    bars: {\r\n                        show: false,\r\n                        lineWidth: 2, // in pixels\r\n                        barWidth: 1, // in units of the x axis\r\n                        fill: true,\r\n                        fillColor: null,\r\n                        align: \"left\", // \"left\", \"right\", or \"center\"\r\n                        horizontal: false,\r\n                        zero: true\r\n                    },\r\n                    shadowSize: 3,\r\n                    highlightColor: null\r\n                },\r\n                grid: {\r\n                    show: true,\r\n                    aboveData: false,\r\n                    color: \"#545454\", // primary color used for outline and labels\r\n                    backgroundColor: null, // null for transparent, else color\r\n                    borderColor: null, // set if different from the grid color\r\n                    tickColor: null, // color for the ticks, e.g. \"rgba(0,0,0,0.15)\"\r\n                    margin: 0, // distance from the canvas edge to the grid\r\n                    labelMargin: 5, // in pixels\r\n                    eventSectionHeight: 0, // space for event section\r\n                    axisMargin: 8, // in pixels\r\n                    borderWidth: 2, // in pixels\r\n                    minBorderMargin: null, // in pixels, null means taken from points radius\r\n                    markings: null, // array of ranges or fn: axes -> array of ranges\r\n                    markingsColor: \"#f4f4f4\",\r\n                    markingsLineWidth: 2,\r\n                    // interactive stuff\r\n                    clickable: false,\r\n                    hoverable: false,\r\n                    autoHighlight: true, // highlight in case mouse is near\r\n                    mouseActiveRadius: 10 // how far the mouse can be away to activate an item\r\n                },\r\n                interaction: {\r\n                    redrawOverlayInterval: 1000/60 // time between updates, -1 means in same flow\r\n                },\r\n                hooks: {}\r\n            },\r\n        surface = null,     // the canvas for the plot itself\r\n        overlay = null,     // canvas for interactive stuff on top of plot\r\n        eventHolder = null, // jQuery object that events should be bound to\r\n        ctx = null, octx = null,\r\n        xaxes = [], yaxes = [],\r\n        plotOffset = { left: 0, right: 0, top: 0, bottom: 0},\r\n        plotWidth = 0, plotHeight = 0,\r\n        hooks = {\r\n            processOptions: [],\r\n            processRawData: [],\r\n            processDatapoints: [],\r\n            processOffset: [],\r\n            processRange: [],\r\n            drawBackground: [],\r\n            drawSeries: [],\r\n            draw: [],\r\n            bindEvents: [],\r\n            drawOverlay: [],\r\n            shutdown: []\r\n        },\r\n        plot = this;\r\n\r\n        // public functions\r\n        plot.setData = setData;\r\n        plot.setupGrid = setupGrid;\r\n        plot.draw = draw;\r\n        plot.getPlaceholder = function() { return placeholder; };\r\n        plot.getCanvas = function() { return surface.element; };\r\n        plot.getPlotOffset = function() { return plotOffset; };\r\n        plot.width = function () { return plotWidth; };\r\n        plot.height = function () { return plotHeight; };\r\n        plot.offset = function () {\r\n            var o = eventHolder.offset();\r\n            o.left += plotOffset.left;\r\n            o.top += plotOffset.top;\r\n            return o;\r\n        };\r\n        plot.getData = function () { return series; };\r\n        plot.getAxes = function () {\r\n            var res = {}, i;\r\n            $.each(xaxes.concat(yaxes), function (_, axis) {\r\n                if (axis)\r\n                    res[axis.direction + (axis.n != 1 ? axis.n : \"\") + \"axis\"] = axis;\r\n            });\r\n            return res;\r\n        };\r\n        plot.getXAxes = function () { return xaxes; };\r\n        plot.getYAxes = function () { return yaxes; };\r\n        plot.c2p = canvasToAxisCoords;\r\n        plot.p2c = axisToCanvasCoords;\r\n        plot.getOptions = function () { return options; };\r\n        plot.highlight = highlight;\r\n        plot.unhighlight = unhighlight;\r\n        plot.triggerRedrawOverlay = triggerRedrawOverlay;\r\n        plot.pointOffset = function(point) {\r\n            return {\r\n                left: parseInt(xaxes[axisNumber(point, \"x\") - 1].p2c(+point.x) + plotOffset.left, 10),\r\n                top: parseInt(yaxes[axisNumber(point, \"y\") - 1].p2c(+point.y) + plotOffset.top, 10)\r\n            };\r\n        };\r\n        plot.shutdown = shutdown;\r\n        plot.destroy = function () {\r\n            shutdown();\r\n            placeholder.removeData(\"plot\").empty();\r\n\r\n            series = [];\r\n            options = null;\r\n            surface = null;\r\n            overlay = null;\r\n            eventHolder = null;\r\n            ctx = null;\r\n            octx = null;\r\n            xaxes = [];\r\n            yaxes = [];\r\n            hooks = null;\r\n            highlights = [];\r\n            plot = null;\r\n        };\r\n        plot.resize = function () {\r\n        \tvar width = placeholder.width(),\r\n        \t\theight = placeholder.height();\r\n            surface.resize(width, height);\r\n            overlay.resize(width, height);\r\n        };\r\n\r\n        // public attributes\r\n        plot.hooks = hooks;\r\n\r\n        // initialize\r\n        initPlugins(plot);\r\n        parseOptions(options_);\r\n        setupCanvases();\r\n        setData(data_);\r\n        setupGrid();\r\n        draw();\r\n        bindEvents();\r\n\r\n\r\n        function executeHooks(hook, args) {\r\n            args = [plot].concat(args);\r\n            for (var i = 0; i < hook.length; ++i)\r\n                hook[i].apply(this, args);\r\n        }\r\n\r\n        function initPlugins() {\r\n\r\n            // References to key classes, allowing plugins to modify them\r\n\r\n            var classes = {\r\n                Canvas: Canvas\r\n            };\r\n\r\n            for (var i = 0; i < plugins.length; ++i) {\r\n                var p = plugins[i];\r\n                p.init(plot, classes);\r\n                if (p.options)\r\n                    $.extend(true, options, p.options);\r\n            }\r\n        }\r\n\r\n        function parseOptions(opts) {\r\n\r\n            $.extend(true, options, opts);\r\n\r\n            // $.extend merges arrays, rather than replacing them.  When less\r\n            // colors are provided than the size of the default palette, we\r\n            // end up with those colors plus the remaining defaults, which is\r\n            // not expected behavior; avoid it by replacing them here.\r\n\r\n            if (opts && opts.colors) {\r\n            \toptions.colors = opts.colors;\r\n            }\r\n\r\n            if (options.xaxis.color == null)\r\n                options.xaxis.color = $.color.parse(options.grid.color).scale('a', 0.22).toString();\r\n            if (options.yaxis.color == null)\r\n                options.yaxis.color = $.color.parse(options.grid.color).scale('a', 0.22).toString();\r\n\r\n            if (options.xaxis.tickColor == null) // grid.tickColor for back-compatibility\r\n                options.xaxis.tickColor = options.grid.tickColor || options.xaxis.color;\r\n            if (options.yaxis.tickColor == null) // grid.tickColor for back-compatibility\r\n                options.yaxis.tickColor = options.grid.tickColor || options.yaxis.color;\r\n\r\n            if (options.grid.borderColor == null)\r\n                options.grid.borderColor = options.grid.color;\r\n            if (options.grid.tickColor == null)\r\n                options.grid.tickColor = $.color.parse(options.grid.color).scale('a', 0.22).toString();\r\n\r\n            // Fill in defaults for axis options, including any unspecified\r\n            // font-spec fields, if a font-spec was provided.\r\n\r\n            // If no x/y axis options were provided, create one of each anyway,\r\n            // since the rest of the code assumes that they exist.\r\n\r\n            var i, axisOptions, axisCount,\r\n                fontSize = placeholder.css(\"font-size\"),\r\n                fontSizeDefault = fontSize ? +fontSize.replace(\"px\", \"\") : 13,\r\n                fontDefaults = {\r\n                    style: placeholder.css(\"font-style\"),\r\n                    size: Math.round(0.8 * fontSizeDefault),\r\n                    variant: placeholder.css(\"font-variant\"),\r\n                    weight: placeholder.css(\"font-weight\"),\r\n                    family: placeholder.css(\"font-family\")\r\n                };\r\n\r\n            axisCount = options.xaxes.length || 1;\r\n            for (i = 0; i < axisCount; ++i) {\r\n\r\n                axisOptions = options.xaxes[i];\r\n                if (axisOptions && !axisOptions.tickColor) {\r\n                    axisOptions.tickColor = axisOptions.color;\r\n                }\r\n\r\n                axisOptions = $.extend(true, {}, options.xaxis, axisOptions);\r\n                options.xaxes[i] = axisOptions;\r\n\r\n                if (axisOptions.font) {\r\n                    axisOptions.font = $.extend({}, fontDefaults, axisOptions.font);\r\n                    if (!axisOptions.font.color) {\r\n                        axisOptions.font.color = axisOptions.color;\r\n                    }\r\n                    if (!axisOptions.font.lineHeight) {\r\n                        axisOptions.font.lineHeight = Math.round(axisOptions.font.size * 1.15);\r\n                    }\r\n                }\r\n            }\r\n\r\n            axisCount = options.yaxes.length || 1;\r\n            for (i = 0; i < axisCount; ++i) {\r\n\r\n                axisOptions = options.yaxes[i];\r\n                if (axisOptions && !axisOptions.tickColor) {\r\n                    axisOptions.tickColor = axisOptions.color;\r\n                }\r\n\r\n                axisOptions = $.extend(true, {}, options.yaxis, axisOptions);\r\n                options.yaxes[i] = axisOptions;\r\n\r\n                if (axisOptions.font) {\r\n                    axisOptions.font = $.extend({}, fontDefaults, axisOptions.font);\r\n                    if (!axisOptions.font.color) {\r\n                        axisOptions.font.color = axisOptions.color;\r\n                    }\r\n                    if (!axisOptions.font.lineHeight) {\r\n                        axisOptions.font.lineHeight = Math.round(axisOptions.font.size * 1.15);\r\n                    }\r\n                }\r\n            }\r\n\r\n            // backwards compatibility, to be removed in future\r\n            if (options.xaxis.noTicks && options.xaxis.ticks == null)\r\n                options.xaxis.ticks = options.xaxis.noTicks;\r\n            if (options.yaxis.noTicks && options.yaxis.ticks == null)\r\n                options.yaxis.ticks = options.yaxis.noTicks;\r\n            if (options.x2axis) {\r\n                options.xaxes[1] = $.extend(true, {}, options.xaxis, options.x2axis);\r\n                options.xaxes[1].position = \"top\";\r\n                // Override the inherit to allow the axis to auto-scale\r\n                if (options.x2axis.min == null) {\r\n                    options.xaxes[1].min = null;\r\n                }\r\n                if (options.x2axis.max == null) {\r\n                    options.xaxes[1].max = null;\r\n                }\r\n            }\r\n            if (options.y2axis) {\r\n                options.yaxes[1] = $.extend(true, {}, options.yaxis, options.y2axis);\r\n                options.yaxes[1].position = \"right\";\r\n                // Override the inherit to allow the axis to auto-scale\r\n                if (options.y2axis.min == null) {\r\n                    options.yaxes[1].min = null;\r\n                }\r\n                if (options.y2axis.max == null) {\r\n                    options.yaxes[1].max = null;\r\n                }\r\n            }\r\n            if (options.grid.coloredAreas)\r\n                options.grid.markings = options.grid.coloredAreas;\r\n            if (options.grid.coloredAreasColor)\r\n                options.grid.markingsColor = options.grid.coloredAreasColor;\r\n            if (options.lines)\r\n                $.extend(true, options.series.lines, options.lines);\r\n            if (options.points)\r\n                $.extend(true, options.series.points, options.points);\r\n            if (options.bars)\r\n                $.extend(true, options.series.bars, options.bars);\r\n            if (options.shadowSize != null)\r\n                options.series.shadowSize = options.shadowSize;\r\n            if (options.highlightColor != null)\r\n                options.series.highlightColor = options.highlightColor;\r\n\r\n            // save options on axes for future reference\r\n            for (i = 0; i < options.xaxes.length; ++i)\r\n                getOrCreateAxis(xaxes, i + 1).options = options.xaxes[i];\r\n            for (i = 0; i < options.yaxes.length; ++i)\r\n                getOrCreateAxis(yaxes, i + 1).options = options.yaxes[i];\r\n\r\n            // add hooks from options\r\n            for (var n in hooks)\r\n                if (options.hooks[n] && options.hooks[n].length)\r\n                    hooks[n] = hooks[n].concat(options.hooks[n]);\r\n\r\n            executeHooks(hooks.processOptions, [options]);\r\n        }\r\n\r\n        function setData(d) {\r\n            series = parseData(d);\r\n            fillInSeriesOptions();\r\n            processData();\r\n        }\r\n\r\n        function parseData(d) {\r\n            var res = [];\r\n            for (var i = 0; i < d.length; ++i) {\r\n                var s = $.extend(true, {}, options.series);\r\n\r\n                if (d[i].data != null) {\r\n                    s.data = d[i].data; // move the data instead of deep-copy\r\n                    delete d[i].data;\r\n\r\n                    $.extend(true, s, d[i]);\r\n\r\n                    d[i].data = s.data;\r\n                }\r\n                else\r\n                    s.data = d[i];\r\n                res.push(s);\r\n            }\r\n\r\n            return res;\r\n        }\r\n\r\n        function axisNumber(obj, coord) {\r\n            var a = obj[coord + \"axis\"];\r\n            if (typeof a == \"object\") // if we got a real axis, extract number\r\n                a = a.n;\r\n            if (typeof a != \"number\")\r\n                a = 1; // default to first axis\r\n            return a;\r\n        }\r\n\r\n        function allAxes() {\r\n            // return flat array without annoying null entries\r\n            return $.grep(xaxes.concat(yaxes), function (a) { return a; });\r\n        }\r\n\r\n        function canvasToAxisCoords(pos) {\r\n            // return an object with x/y corresponding to all used axes\r\n            var res = {}, i, axis;\r\n            for (i = 0; i < xaxes.length; ++i) {\r\n                axis = xaxes[i];\r\n                if (axis && axis.used)\r\n                    res[\"x\" + axis.n] = axis.c2p(pos.left);\r\n            }\r\n\r\n            for (i = 0; i < yaxes.length; ++i) {\r\n                axis = yaxes[i];\r\n                if (axis && axis.used)\r\n                    res[\"y\" + axis.n] = axis.c2p(pos.top);\r\n            }\r\n\r\n            if (res.x1 !== undefined)\r\n                res.x = res.x1;\r\n            if (res.y1 !== undefined)\r\n                res.y = res.y1;\r\n\r\n            return res;\r\n        }\r\n\r\n        function axisToCanvasCoords(pos) {\r\n            // get canvas coords from the first pair of x/y found in pos\r\n            var res = {}, i, axis, key;\r\n\r\n            for (i = 0; i < xaxes.length; ++i) {\r\n                axis = xaxes[i];\r\n                if (axis && axis.used) {\r\n                    key = \"x\" + axis.n;\r\n                    if (pos[key] == null && axis.n == 1)\r\n                        key = \"x\";\r\n\r\n                    if (pos[key] != null) {\r\n                        res.left = axis.p2c(pos[key]);\r\n                        break;\r\n                    }\r\n                }\r\n            }\r\n\r\n            for (i = 0; i < yaxes.length; ++i) {\r\n                axis = yaxes[i];\r\n                if (axis && axis.used) {\r\n                    key = \"y\" + axis.n;\r\n                    if (pos[key] == null && axis.n == 1)\r\n                        key = \"y\";\r\n\r\n                    if (pos[key] != null) {\r\n                        res.top = axis.p2c(pos[key]);\r\n                        break;\r\n                    }\r\n                }\r\n            }\r\n\r\n            return res;\r\n        }\r\n\r\n        function getOrCreateAxis(axes, number) {\r\n            if (!axes[number - 1])\r\n                axes[number - 1] = {\r\n                    n: number, // save the number for future reference\r\n                    direction: axes == xaxes ? \"x\" : \"y\",\r\n                    options: $.extend(true, {}, axes == xaxes ? options.xaxis : options.yaxis)\r\n                };\r\n\r\n            return axes[number - 1];\r\n        }\r\n\r\n        function fillInSeriesOptions() {\r\n\r\n            var neededColors = series.length, maxIndex = -1, i;\r\n\r\n            // Subtract the number of series that already have fixed colors or\r\n            // color indexes from the number that we still need to generate.\r\n\r\n            for (i = 0; i < series.length; ++i) {\r\n                var sc = series[i].color;\r\n                if (sc != null) {\r\n                    neededColors--;\r\n                    if (typeof sc == \"number\" && sc > maxIndex) {\r\n                        maxIndex = sc;\r\n                    }\r\n                }\r\n            }\r\n\r\n            // If any of the series have fixed color indexes, then we need to\r\n            // generate at least as many colors as the highest index.\r\n\r\n            if (neededColors <= maxIndex) {\r\n                neededColors = maxIndex + 1;\r\n            }\r\n\r\n            // Generate all the colors, using first the option colors and then\r\n            // variations on those colors once they're exhausted.\r\n\r\n            var c, colors = [], colorPool = options.colors,\r\n                colorPoolSize = colorPool.length, variation = 0;\r\n\r\n            for (i = 0; i < neededColors; i++) {\r\n\r\n                c = $.color.parse(colorPool[i % colorPoolSize] || \"#666\");\r\n\r\n                // Each time we exhaust the colors in the pool we adjust\r\n                // a scaling factor used to produce more variations on\r\n                // those colors. The factor alternates negative/positive\r\n                // to produce lighter/darker colors.\r\n\r\n                // Reset the variation after every few cycles, or else\r\n                // it will end up producing only white or black colors.\r\n\r\n                if (i % colorPoolSize == 0 && i) {\r\n                    if (variation >= 0) {\r\n                        if (variation < 0.5) {\r\n                            variation = -variation - 0.2;\r\n                        } else variation = 0;\r\n                    } else variation = -variation;\r\n                }\r\n\r\n                colors[i] = c.scale('rgb', 1 + variation);\r\n            }\r\n\r\n            // Finalize the series options, filling in their colors\r\n\r\n            var colori = 0, s;\r\n            for (i = 0; i < series.length; ++i) {\r\n                s = series[i];\r\n\r\n                // assign colors\r\n                if (s.color == null) {\r\n                    s.color = colors[colori].toString();\r\n                    ++colori;\r\n                }\r\n                else if (typeof s.color == \"number\")\r\n                    s.color = colors[s.color].toString();\r\n\r\n                // turn on lines automatically in case nothing is set\r\n                if (s.lines.show == null) {\r\n                    var v, show = true;\r\n                    for (v in s)\r\n                        if (s[v] && s[v].show) {\r\n                            show = false;\r\n                            break;\r\n                        }\r\n                    if (show)\r\n                        s.lines.show = true;\r\n                }\r\n\r\n                // If nothing was provided for lines.zero, default it to match\r\n                // lines.fill, since areas by default should extend to zero.\r\n\r\n                if (s.lines.zero == null) {\r\n                    s.lines.zero = !!s.lines.fill;\r\n                }\r\n\r\n                // setup axes\r\n                s.xaxis = getOrCreateAxis(xaxes, axisNumber(s, \"x\"));\r\n                s.yaxis = getOrCreateAxis(yaxes, axisNumber(s, \"y\"));\r\n            }\r\n        }\r\n\r\n        function processData() {\r\n            var topSentry = Number.POSITIVE_INFINITY,\r\n                bottomSentry = Number.NEGATIVE_INFINITY,\r\n                fakeInfinity = Number.MAX_VALUE,\r\n                i, j, k, m, length,\r\n                s, points, ps, x, y, axis, val, f, p,\r\n                data, format;\r\n\r\n            function updateAxis(axis, min, max) {\r\n                if (min < axis.datamin && min != -fakeInfinity)\r\n                    axis.datamin = min;\r\n                if (max > axis.datamax && max != fakeInfinity)\r\n                    axis.datamax = max;\r\n            }\r\n\r\n            $.each(allAxes(), function (_, axis) {\r\n                // init axis\r\n                axis.datamin = topSentry;\r\n                axis.datamax = bottomSentry;\r\n                axis.used = false;\r\n            });\r\n\r\n            for (i = 0; i < series.length; ++i) {\r\n                s = series[i];\r\n                s.datapoints = { points: [] };\r\n\r\n                executeHooks(hooks.processRawData, [ s, s.data, s.datapoints ]);\r\n            }\r\n\r\n            // first pass: clean and copy data\r\n            for (i = 0; i < series.length; ++i) {\r\n                s = series[i];\r\n\r\n                data = s.data;\r\n                format = s.datapoints.format;\r\n\r\n                if (!format) {\r\n                    format = [];\r\n                    // find out how to copy\r\n                    format.push({ x: true, number: true, required: true });\r\n                    format.push({ y: true, number: true, required: true });\r\n\r\n                    if (s.bars.show || (s.lines.show && s.lines.fill)) {\r\n                        var autoscale = !!((s.bars.show && s.bars.zero) || (s.lines.show && s.lines.zero));\r\n                        format.push({ y: true, number: true, required: false, defaultValue: 0, autoscale: autoscale });\r\n                        if (s.bars.horizontal) {\r\n                            delete format[format.length - 1].y;\r\n                            format[format.length - 1].x = true;\r\n                        }\r\n                    }\r\n\r\n                    s.datapoints.format = format;\r\n                }\r\n\r\n                if (s.datapoints.pointsize != null)\r\n                    continue; // already filled in\r\n\r\n                s.datapoints.pointsize = format.length;\r\n\r\n                ps = s.datapoints.pointsize;\r\n                points = s.datapoints.points;\r\n\r\n                var insertSteps = s.lines.show && s.lines.steps;\r\n                s.xaxis.used = s.yaxis.used = true;\r\n\r\n                for (j = k = 0; j < data.length; ++j, k += ps) {\r\n                    p = data[j];\r\n\r\n                    var nullify = p == null;\r\n                    if (!nullify) {\r\n                        for (m = 0; m < ps; ++m) {\r\n                            val = p[m];\r\n                            f = format[m];\r\n\r\n                            if (f) {\r\n                                if (f.number && val != null) {\r\n                                    val = +val; // convert to number\r\n                                    if (isNaN(val))\r\n                                        val = null;\r\n                                    else if (val == Infinity)\r\n                                        val = fakeInfinity;\r\n                                    else if (val == -Infinity)\r\n                                        val = -fakeInfinity;\r\n                                }\r\n\r\n                                if (val == null) {\r\n                                    if (f.required)\r\n                                        nullify = true;\r\n\r\n                                    if (f.defaultValue != null)\r\n                                        val = f.defaultValue;\r\n                                }\r\n                            }\r\n\r\n                            points[k + m] = val;\r\n                        }\r\n                    }\r\n\r\n                    if (nullify) {\r\n                        for (m = 0; m < ps; ++m) {\r\n                            val = points[k + m];\r\n                            if (val != null) {\r\n                                f = format[m];\r\n                                // extract min/max info\r\n                                if (f.autoscale !== false) {\r\n                                    if (f.x) {\r\n                                        updateAxis(s.xaxis, val, val);\r\n                                    }\r\n                                    if (f.y) {\r\n                                        updateAxis(s.yaxis, val, val);\r\n                                    }\r\n                                }\r\n                            }\r\n                            points[k + m] = null;\r\n                        }\r\n                    }\r\n\r\n                    if (insertSteps && k > 0 && (!nullify || points[k - ps] != null)) {\r\n                        // copy the point to make room for a middle point\r\n                        for (m = 0; m < ps; ++m)\r\n                            points[k + ps + m] = points[k + m];\r\n\r\n                        // middle point has same y\r\n                        points[k + 1] = points[k - ps + 1] || 0;\r\n\r\n                        // if series has null values, let's give the last !null value a nice step\r\n                        if(nullify)\r\n                        \tpoints[k] = p[0];\r\n\r\n                        // we've added a point, better reflect that\r\n                        k += ps;\r\n                    }\r\n                }\r\n            }\r\n\r\n            // give the hooks a chance to run\r\n            for (i = 0; i < series.length; ++i) {\r\n                s = series[i];\r\n                points = s.datapoints.points;\r\n                ps = s.datapoints.pointsize;\r\n\r\n                // grafana\r\n                if (s.transform === 'negative-Y') {\r\n                  for (j = 0; j < points.length; j += ps) {\r\n                    if (points[j] == null)\r\n                        continue;\r\n\r\n                      val = points[j + 1];\r\n                      points[j + 1] = -val;\r\n                  }\r\n                }\r\n\r\n                executeHooks(hooks.processDatapoints, [ s, s.datapoints]);\r\n            }\r\n\r\n            // second pass: find datamax/datamin for auto-scaling\r\n            for (i = 0; i < series.length; ++i) {\r\n                s = series[i];\r\n                points = s.datapoints.points;\r\n                ps = s.datapoints.pointsize;\r\n                format = s.datapoints.format;\r\n\r\n                var xmin = topSentry, ymin = topSentry,\r\n                    xmax = bottomSentry, ymax = bottomSentry;\r\n\r\n                for (j = 0; j < points.length; j += ps) {\r\n                    if (points[j] == null)\r\n                        continue;\r\n\r\n                    for (m = 0; m < ps; ++m) {\r\n                        val = points[j + m];\r\n                        f = format[m];\r\n                        if (!f || f.autoscale === false || val == fakeInfinity || val == -fakeInfinity)\r\n                            continue;\r\n\r\n                        if (f.x) {\r\n                            if (val < xmin)\r\n                                xmin = val;\r\n                            if (val > xmax)\r\n                                xmax = val;\r\n                        }\r\n                        if (f.y) {\r\n                            if (val < ymin)\r\n                                ymin = val;\r\n                            if (val > ymax)\r\n                                ymax = val;\r\n                        }\r\n                    }\r\n                }\r\n\r\n                if (s.bars.show) {\r\n                    // make sure we got room for the bar on the dancing floor\r\n                    var delta;\r\n\r\n                    switch (s.bars.align) {\r\n                        case \"left\":\r\n                            delta = 0;\r\n                            break;\r\n                        case \"right\":\r\n                            delta = -s.bars.barWidth;\r\n                            break;\r\n                        default:\r\n                            delta = -s.bars.barWidth / 2;\r\n                    }\r\n\r\n                    if (s.bars.horizontal) {\r\n                        ymin += delta;\r\n                        ymax += delta + s.bars.barWidth;\r\n                    }\r\n                    else {\r\n                        xmin += delta;\r\n                        xmax += delta + s.bars.barWidth;\r\n                    }\r\n                }\r\n\r\n                updateAxis(s.xaxis, xmin, xmax);\r\n                updateAxis(s.yaxis, ymin, ymax);\r\n            }\r\n\r\n            $.each(allAxes(), function (_, axis) {\r\n                if (axis.datamin == topSentry)\r\n                    axis.datamin = null;\r\n                if (axis.datamax == bottomSentry)\r\n                    axis.datamax = null;\r\n            });\r\n        }\r\n\r\n        function setupCanvases() {\r\n            // Make sure the placeholder is clear of everything except canvases\r\n            // from a previous plot in this container that we'll try to re-use.\r\n\r\n            placeholder.find(\".flot-temp-elem\").remove();\r\n\r\n            if (placeholder.css(\"position\") == 'static')\r\n                placeholder.css(\"position\", \"relative\"); // for positioning labels and overlay\r\n\r\n            surface = new Canvas(\"flot-base\", placeholder);\r\n            overlay = new Canvas(\"flot-overlay\", placeholder); // overlay canvas for interactive features\r\n\r\n            ctx = surface.context;\r\n            octx = overlay.context;\r\n\r\n            // define which element we're listening for events on\r\n            eventHolder = $(overlay.element).unbind();\r\n\r\n            // If we're re-using a plot object, shut down the old one\r\n\r\n            var existing = placeholder.data(\"plot\");\r\n\r\n            if (existing) {\r\n                existing.shutdown();\r\n                overlay.clear();\r\n            }\r\n\r\n            // save in case we get replotted\r\n            placeholder.data(\"plot\", plot);\r\n        }\r\n\r\n        function bindEvents() {\r\n            // bind events\r\n            if (options.grid.hoverable) {\r\n                eventHolder.mousemove(onMouseMove);\r\n\r\n                // Use bind, rather than .mouseleave, because we officially\r\n                // still support jQuery 1.2.6, which doesn't define a shortcut\r\n                // for mouseenter or mouseleave.  This was a bug/oversight that\r\n                // was fixed somewhere around 1.3.x.  We can return to using\r\n                // .mouseleave when we drop support for 1.2.6.\r\n\r\n                eventHolder.bind(\"mouseleave\", onMouseLeave);\r\n            }\r\n\r\n            if (options.grid.clickable)\r\n                eventHolder.click(onClick);\r\n\r\n            executeHooks(hooks.bindEvents, [eventHolder]);\r\n        }\r\n\r\n        function shutdown() {\r\n            if (redrawTimeout)\r\n                clearTimeout(redrawTimeout);\r\n\r\n            eventHolder.unbind(\"mousemove\", onMouseMove);\r\n            eventHolder.unbind(\"mouseleave\", onMouseLeave);\r\n            eventHolder.unbind(\"click\", onClick);\r\n\r\n            executeHooks(hooks.shutdown, [eventHolder]);\r\n        }\r\n\r\n        function setTransformationHelpers(axis) {\r\n            // set helper functions on the axis, assumes plot area\r\n            // has been computed already\r\n\r\n            function identity(x) { return x; }\r\n\r\n            var s, m, t = axis.options.transform || identity,\r\n                it = axis.options.inverseTransform;\r\n\r\n            // precompute how much the axis is scaling a point\r\n            // in canvas space\r\n            if (axis.direction == \"x\") {\r\n                s = axis.scale = plotWidth / Math.abs(t(axis.max) - t(axis.min));\r\n                m = Math.min(t(axis.max), t(axis.min));\r\n            }\r\n            else {\r\n                s = axis.scale = plotHeight / Math.abs(t(axis.max) - t(axis.min));\r\n                s = -s;\r\n                m = Math.max(t(axis.max), t(axis.min));\r\n            }\r\n\r\n            // data point to canvas coordinate\r\n            if (t == identity) // slight optimization\r\n                axis.p2c = function (p) { return (p - m) * s; };\r\n            else\r\n                axis.p2c = function (p) { return (t(p) - m) * s; };\r\n            // canvas coordinate to data point\r\n            if (!it)\r\n                axis.c2p = function (c) { return m + c / s; };\r\n            else\r\n                axis.c2p = function (c) { return it(m + c / s); };\r\n        }\r\n\r\n        function measureTickLabels(axis) {\r\n\r\n            var opts = axis.options,\r\n                ticks = axis.ticks || [],\r\n                labelWidth = opts.labelWidth || 0,\r\n                labelHeight = opts.labelHeight || 0,\r\n                maxWidth = labelWidth || (axis.direction == \"x\" ? Math.floor(surface.width / (ticks.length || 1)) : null),\r\n                legacyStyles = axis.direction + \"Axis \" + axis.direction + axis.n + \"Axis\",\r\n                layer = \"flot-\" + axis.direction + \"-axis flot-\" + axis.direction + axis.n + \"-axis \" + legacyStyles,\r\n                font = opts.font || \"flot-tick-label tickLabel\";\r\n\r\n            for (var i = 0; i < ticks.length; ++i) {\r\n\r\n                var t = ticks[i];\r\n\r\n                if (!t.label)\r\n                    continue;\r\n\r\n                var info = surface.getTextInfo(layer, t.label, font, null, maxWidth);\r\n\r\n                /// Grafana fix, add +1 to label width\r\n                labelWidth = Math.max(labelWidth, info.width + 1);\r\n                labelHeight = Math.max(labelHeight, info.height);\r\n            }\r\n\r\n            axis.labelWidth = opts.labelWidth || labelWidth;\r\n            axis.labelHeight = opts.labelHeight || labelHeight;\r\n        }\r\n\r\n        function allocateAxisBoxFirstPhase(axis) {\r\n            // find the bounding box of the axis by looking at label\r\n            // widths/heights and ticks, make room by diminishing the\r\n            // plotOffset; this first phase only looks at one\r\n            // dimension per axis, the other dimension depends on the\r\n            // other axes so will have to wait\r\n\r\n            var lw = axis.labelWidth,\r\n                lh = axis.labelHeight,\r\n                pos = axis.options.position,\r\n                isXAxis = axis.direction === \"x\",\r\n                tickLength = axis.options.tickLength,\r\n                axisMargin = options.grid.axisMargin,\r\n                padding = options.grid.labelMargin,\r\n                eventSectionPadding = options.grid.eventSectionHeight,\r\n                innermost = true,\r\n                outermost = true,\r\n                first = true,\r\n                found = false;\r\n\r\n            // Determine the axis's position in its direction and on its side\r\n\r\n            $.each(isXAxis ? xaxes : yaxes, function(i, a) {\r\n                if (a && (a.show || a.reserveSpace)) {\r\n                    if (a === axis) {\r\n                        found = true;\r\n                    } else if (a.options.position === pos) {\r\n                        if (found) {\r\n                            outermost = false;\r\n                        } else {\r\n                            innermost = false;\r\n                        }\r\n                    }\r\n                    if (!found) {\r\n                        first = false;\r\n                    }\r\n                }\r\n            });\r\n\r\n            // The outermost axis on each side has no margin\r\n\r\n            if (outermost) {\r\n                axisMargin = 0;\r\n            }\r\n\r\n            // The ticks for the first axis in each direction stretch across\r\n\r\n            if (tickLength == null) {\r\n                tickLength = first ? \"full\" : 5;\r\n            }\r\n\r\n            if (!isNaN(+tickLength))\r\n                padding += +tickLength;\r\n\r\n            if (isXAxis) {\r\n                // Add space for event section\r\n                lh += padding;\r\n                lh += eventSectionPadding;\r\n\r\n                if (pos == \"bottom\") {\r\n                    plotOffset.bottom += lh + axisMargin;\r\n                    axis.box = { top: surface.height - plotOffset.bottom, height: lh };\r\n                }\r\n                else {\r\n                    axis.box = { top: plotOffset.top + axisMargin, height: lh };\r\n                    plotOffset.top += lh + axisMargin;\r\n                }\r\n            }\r\n            else {\r\n                lw += padding;\r\n\r\n                if (pos == \"left\") {\r\n                    axis.box = { left: plotOffset.left + axisMargin, width: lw };\r\n                    plotOffset.left += lw + axisMargin;\r\n                }\r\n                else {\r\n                    plotOffset.right += lw + axisMargin;\r\n                    axis.box = { left: surface.width - plotOffset.right, width: lw };\r\n                }\r\n            }\r\n\r\n             // save for future reference\r\n            axis.position = pos;\r\n            axis.tickLength = tickLength;\r\n            axis.box.padding = padding;\r\n            axis.box.eventSectionPadding = eventSectionPadding;\r\n            axis.innermost = innermost;\r\n        }\r\n\r\n        function allocateAxisBoxSecondPhase(axis) {\r\n            // now that all axis boxes have been placed in one\r\n            // dimension, we can set the remaining dimension coordinates\r\n            if (axis.direction == \"x\") {\r\n                axis.box.left = plotOffset.left - axis.labelWidth / 2;\r\n                axis.box.width = surface.width - plotOffset.left - plotOffset.right + axis.labelWidth;\r\n            }\r\n            else {\r\n                axis.box.top = plotOffset.top - axis.labelHeight / 2;\r\n                axis.box.height = surface.height - plotOffset.bottom - plotOffset.top + axis.labelHeight;\r\n            }\r\n        }\r\n\r\n        function adjustLayoutForThingsStickingOut() {\r\n            // possibly adjust plot offset to ensure everything stays\r\n            // inside the canvas and isn't clipped off\r\n\r\n            var minMargin = options.grid.minBorderMargin,\r\n                axis, i;\r\n\r\n            // check stuff from the plot (FIXME: this should just read\r\n            // a value from the series, otherwise it's impossible to\r\n            // customize)\r\n            if (minMargin == null) {\r\n                minMargin = 0;\r\n                for (i = 0; i < series.length; ++i)\r\n                    minMargin = Math.max(minMargin, 2 * (series[i].points.radius + series[i].points.lineWidth/2));\r\n            }\r\n\r\n            var margins = {\r\n                left: minMargin,\r\n                right: minMargin,\r\n                top: minMargin,\r\n                bottom: minMargin\r\n            };\r\n\r\n            // check axis labels, note we don't check the actual\r\n            // labels but instead use the overall width/height to not\r\n            // jump as much around with replots\r\n            $.each(allAxes(), function (_, axis) {\r\n                if (axis.reserveSpace && axis.ticks && axis.ticks.length) {\r\n                    if (axis.direction === \"x\") {\r\n                        margins.left = Math.max(margins.left, axis.labelWidth / 2);\r\n                        margins.right = Math.max(margins.right, axis.labelWidth / 2);\r\n                    } else {\r\n                        margins.bottom = Math.max(margins.bottom, axis.labelHeight / 2);\r\n                        margins.top = Math.max(margins.top, axis.labelHeight / 2);\r\n                    }\r\n                }\r\n            });\r\n\r\n            plotOffset.left = Math.ceil(Math.max(margins.left, plotOffset.left));\r\n            plotOffset.right = Math.ceil(Math.max(margins.right, plotOffset.right));\r\n            plotOffset.top = Math.ceil(Math.max(margins.top, plotOffset.top));\r\n            plotOffset.bottom = Math.ceil(Math.max(margins.bottom, plotOffset.bottom));\r\n        }\r\n\r\n        function setupGrid() {\r\n            var i, axes = allAxes(), showGrid = options.grid.show;\r\n\r\n            // Initialize the plot's offset from the edge of the canvas\r\n\r\n            for (var a in plotOffset) {\r\n                var margin = options.grid.margin || 0;\r\n                plotOffset[a] = typeof margin == \"number\" ? margin : margin[a] || 0;\r\n            }\r\n\r\n            executeHooks(hooks.processOffset, [plotOffset]);\r\n\r\n            // If the grid is visible, add its border width to the offset\r\n\r\n            for (var a in plotOffset) {\r\n                if(typeof(options.grid.borderWidth) == \"object\") {\r\n                    plotOffset[a] += showGrid ? options.grid.borderWidth[a] : 0;\r\n                }\r\n                else {\r\n                    plotOffset[a] += showGrid ? options.grid.borderWidth : 0;\r\n                }\r\n            }\r\n\r\n            $.each(axes, function (_, axis) {\r\n                var axisOpts = axis.options;\r\n                axis.show = axisOpts.show == null ? axis.used : axisOpts.show;\r\n                axis.reserveSpace = axisOpts.reserveSpace == null ? axis.show : axisOpts.reserveSpace;\r\n                setRange(axis);\r\n            });\r\n\r\n            executeHooks(hooks.processRange, []);\r\n\r\n            if (showGrid) {\r\n\r\n                var allocatedAxes = $.grep(axes, function (axis) {\r\n                    return axis.show || axis.reserveSpace;\r\n                });\r\n\r\n                var snaped = false;\r\n                for (var i = 0; i < 2; i++) {\r\n                    $.each(allocatedAxes, function (_, axis) {\r\n                        // make the ticks\r\n                        setupTickGeneration(axis);\r\n                        setTicks(axis);\r\n                        snaped = snapRangeToTicks(axis, axis.ticks) || snaped;\r\n                        // find labelWidth/Height for axis\r\n                        measureTickLabels(axis);\r\n                    });\r\n\r\n                    if (snaped && hooks.processRange.length > 0) {\r\n                        executeHooks(hooks.processRange, []);\r\n                        snaped = false;\r\n                    } else {\r\n                        break;\r\n                    }\r\n                }\r\n\r\n                // with all dimensions calculated, we can compute the\r\n                // axis bounding boxes, start from the outside\r\n                // (reverse order)\r\n                for (i = allocatedAxes.length - 1; i >= 0; --i)\r\n                    allocateAxisBoxFirstPhase(allocatedAxes[i]);\r\n\r\n                // make sure we've got enough space for things that\r\n                // might stick out\r\n                adjustLayoutForThingsStickingOut();\r\n\r\n                $.each(allocatedAxes, function (_, axis) {\r\n                    allocateAxisBoxSecondPhase(axis);\r\n                });\r\n            }\r\n\r\n\r\n            plotWidth = surface.width - plotOffset.left - plotOffset.right;\r\n            plotHeight = surface.height - plotOffset.bottom - plotOffset.top;\r\n\r\n            // now we got the proper plot dimensions, we can compute the scaling\r\n            $.each(axes, function (_, axis) {\r\n                setTransformationHelpers(axis);\r\n            });\r\n\r\n            if (showGrid) {\r\n                drawAxisLabels();\r\n            }\r\n\r\n            insertLegend();\r\n        }\r\n\r\n        function setRange(axis) {\r\n            var opts = axis.options,\r\n                min = +(opts.min != null ? opts.min : axis.datamin),\r\n                max = +(opts.max != null ? opts.max : axis.datamax),\r\n                delta = max - min;\r\n\r\n            if (delta == 0.0) {\r\n                // Grafana fix: wide Y min and max using increased wideFactor\r\n                // when all series values are the same\r\n                var wideFactor = 0.25;\r\n                var widen = Math.abs(max == 0 ? 1 : max * wideFactor);\r\n\r\n                if (opts.min == null) {\r\n                  min -= widen;\r\n                }\r\n                // always widen max if we couldn't widen min to ensure we\r\n                // don't fall into min == max which doesn't work\r\n                if (opts.max == null || opts.min != null) {\r\n                  max += widen;\r\n                }\r\n            }\r\n            else {\r\n                // consider autoscaling\r\n                var margin = opts.autoscaleMargin;\r\n                if (margin != null) {\r\n                    if (opts.min == null) {\r\n                        min -= delta * margin;\r\n                        // make sure we don't go below zero if all values\r\n                        // are positive\r\n                        if (min < 0 && axis.datamin != null && axis.datamin >= 0)\r\n                            min = 0;\r\n                    }\r\n                    if (opts.max == null) {\r\n                        max += delta * margin;\r\n                        if (max > 0 && axis.datamax != null && axis.datamax <= 0)\r\n                            max = 0;\r\n                    }\r\n                }\r\n            }\r\n            axis.min = min;\r\n            axis.max = max;\r\n        }\r\n\r\n        function setupTickGeneration(axis) {\r\n            var opts = axis.options;\r\n\r\n            // estimate number of ticks\r\n            var noTicks;\r\n            if (typeof opts.ticks == \"number\" && opts.ticks > 0)\r\n                noTicks = opts.ticks;\r\n            else\r\n                // heuristic based on the model a*sqrt(x) fitted to\r\n                // some data points that seemed reasonable\r\n                noTicks = 0.3 * Math.sqrt(axis.direction == \"x\" ? surface.width : surface.height);\r\n\r\n            var delta = (axis.max - axis.min) / noTicks,\r\n                dec = -Math.floor(Math.log(delta) / Math.LN10),\r\n                maxDec = opts.tickDecimals;\r\n\r\n            if (maxDec != null && dec > maxDec) {\r\n                dec = maxDec;\r\n            }\r\n\r\n            var magn = Math.pow(10, -dec),\r\n                norm = delta / magn, // norm is between 1.0 and 10.0\r\n                size;\r\n\r\n            if (norm < 1.5) {\r\n                size = 1;\r\n            } else if (norm < 3) {\r\n                size = 2;\r\n                // special case for 2.5, requires an extra decimal\r\n                if (norm > 2.25 && (maxDec == null || dec + 1 <= maxDec)) {\r\n                    size = 2.5;\r\n                    ++dec;\r\n                }\r\n            } else if (norm < 7.5) {\r\n                size = 5;\r\n            } else {\r\n                size = 10;\r\n            }\r\n\r\n            size *= magn;\r\n\r\n            if (opts.minTickSize != null && size < opts.minTickSize) {\r\n                size = opts.minTickSize;\r\n            }\r\n\r\n            axis.delta = delta;\r\n            axis.tickDecimals = Math.max(0, maxDec != null ? maxDec : dec);\r\n            axis.tickSize = opts.tickSize || size;\r\n            // grafana addition\r\n            axis.scaledDecimals = axis.tickDecimals - Math.floor(Math.log(axis.tickSize) / Math.LN10);\r\n\r\n            // Time mode was moved to a plug-in in 0.8, and since so many people use it\r\n            // we'll add an especially friendly reminder to make sure they included it.\r\n\r\n            if (opts.mode == \"time\" && !axis.tickGenerator) {\r\n                throw new Error(\"Time mode requires the flot.time plugin.\");\r\n            }\r\n\r\n            // Flot supports base-10 axes; any other mode else is handled by a plug-in,\r\n            // like flot.time.js.\r\n\r\n            if (!axis.tickGenerator) {\r\n\r\n                axis.tickGenerator = function (axis) {\r\n\r\n                    var ticks = [],\r\n                        start = floorInBase(axis.min, axis.tickSize),\r\n                        i = 0,\r\n                        v = Number.NaN,\r\n                        prev;\r\n\r\n                    do {\r\n                        prev = v;\r\n                        v = start + i * axis.tickSize;\r\n                        ticks.push(v);\r\n                        ++i;\r\n                    } while (v < axis.max && v != prev);\r\n                    return ticks;\r\n                };\r\n\r\n\t\t\t\taxis.tickFormatter = function (value, axis) {\r\n\r\n\t\t\t\t\tvar factor = axis.tickDecimals ? Math.pow(10, axis.tickDecimals) : 1;\r\n\t\t\t\t\tvar formatted = \"\" + Math.round(value * factor) / factor;\r\n\r\n\t\t\t\t\t// If tickDecimals was specified, ensure that we have exactly that\r\n\t\t\t\t\t// much precision; otherwise default to the value's own precision.\r\n\r\n\t\t\t\t\tif (axis.tickDecimals != null) {\r\n\t\t\t\t\t\tvar decimal = formatted.indexOf(\".\");\r\n\t\t\t\t\t\tvar precision = decimal == -1 ? 0 : formatted.length - decimal - 1;\r\n\t\t\t\t\t\tif (precision < axis.tickDecimals) {\r\n\t\t\t\t\t\t\treturn (precision ? formatted : formatted + \".\") + (\"\" + factor).substr(1, axis.tickDecimals - precision);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n                    return formatted;\r\n                };\r\n            }\r\n\r\n            if ($.isFunction(opts.tickFormatter))\r\n                axis.tickFormatter = function (v, axis) { return \"\" + opts.tickFormatter(v, axis); };\r\n\r\n            if (opts.alignTicksWithAxis != null) {\r\n                var otherAxis = (axis.direction == \"x\" ? xaxes : yaxes)[opts.alignTicksWithAxis - 1];\r\n                if (otherAxis && otherAxis.used && otherAxis != axis) {\r\n                    // consider snapping min/max to outermost nice ticks\r\n                    var niceTicks = axis.tickGenerator(axis);\r\n                    if (niceTicks.length > 0) {\r\n                        if (opts.min == null)\r\n                            axis.min = Math.min(axis.min, niceTicks[0]);\r\n                        if (opts.max == null && niceTicks.length > 1)\r\n                            axis.max = Math.max(axis.max, niceTicks[niceTicks.length - 1]);\r\n                    }\r\n\r\n                    axis.tickGenerator = function (axis) {\r\n                        // copy ticks, scaled to this axis\r\n                        var ticks = [], v, i;\r\n                        for (i = 0; i < otherAxis.ticks.length; ++i) {\r\n                            v = (otherAxis.ticks[i].v - otherAxis.min) / (otherAxis.max - otherAxis.min);\r\n                            v = axis.min + v * (axis.max - axis.min);\r\n                            ticks.push(v);\r\n                        }\r\n                        return ticks;\r\n                    };\r\n\r\n                    // we might need an extra decimal since forced\r\n                    // ticks don't necessarily fit naturally\r\n                    if (!axis.mode && opts.tickDecimals == null) {\r\n                        var extraDec = Math.max(0, -Math.floor(Math.log(axis.delta) / Math.LN10) + 1),\r\n                            ts = axis.tickGenerator(axis);\r\n\r\n                        // only proceed if the tick interval rounded\r\n                        // with an extra decimal doesn't give us a\r\n                        // zero at end\r\n                        if (!(ts.length > 1 && /\\..*0$/.test((ts[1] - ts[0]).toFixed(extraDec))))\r\n                            axis.tickDecimals = extraDec;\r\n                    }\r\n                }\r\n            }\r\n        }\r\n\r\n        function setTicks(axis) {\r\n            var oticks = axis.options.ticks, ticks = [];\r\n            if (oticks == null || (typeof oticks == \"number\" && oticks > 0))\r\n                ticks = axis.tickGenerator(axis);\r\n            else if (oticks) {\r\n                if ($.isFunction(oticks))\r\n                    // generate the ticks\r\n                    ticks = oticks(axis);\r\n                else\r\n                    ticks = oticks;\r\n            }\r\n\r\n            // clean up/labelify the supplied ticks, copy them over\r\n            var i, v;\r\n            axis.ticks = [];\r\n            for (i = 0; i < ticks.length; ++i) {\r\n                var label = null;\r\n                var t = ticks[i];\r\n                if (typeof t == \"object\") {\r\n                    v = +t[0];\r\n                    if (t.length > 1)\r\n                        label = t[1];\r\n                }\r\n                else\r\n                    v = +t;\r\n                if (label == null)\r\n                    label = axis.tickFormatter(v, axis);\r\n                if (!isNaN(v))\r\n                    axis.ticks.push({ v: v, label: label });\r\n            }\r\n        }\r\n\r\n        function snapRangeToTicks(axis, ticks) {\r\n            var changed = false;\r\n            if (axis.options.autoscaleMargin && ticks.length > 0) {\r\n                // snap to ticks\r\n                if (axis.options.min == null) {\r\n                    axis.min = Math.min(axis.min, ticks[0].v);\r\n                    changed = true;\r\n                }\r\n                if (axis.options.max == null && ticks.length > 1) {\r\n                    axis.max = Math.max(axis.max, ticks[ticks.length - 1].v);\r\n                    changed = true;\r\n                }\r\n            }\r\n            return changed;\r\n        }\r\n\r\n        function draw() {\r\n\r\n            surface.clear();\r\n\r\n            executeHooks(hooks.drawBackground, [ctx]);\r\n\r\n            var grid = options.grid;\r\n\r\n            // draw background, if any\r\n            if (grid.show && grid.backgroundColor)\r\n                drawBackground();\r\n\r\n            if (grid.show && !grid.aboveData) {\r\n                drawGrid();\r\n            }\r\n\r\n            for (var i = 0; i < series.length; ++i) {\r\n                executeHooks(hooks.drawSeries, [ctx, series[i]]);\r\n                drawSeries(series[i]);\r\n            }\r\n\r\n            executeHooks(hooks.draw, [ctx]);\r\n\r\n            if (grid.show && grid.aboveData) {\r\n                drawGrid();\r\n            }\r\n\r\n            surface.render();\r\n\r\n            // A draw implies that either the axes or data have changed, so we\r\n            // should probably update the overlay highlights as well.\r\n\r\n            triggerRedrawOverlay();\r\n        }\r\n\r\n        function extractRange(ranges, coord) {\r\n            var axis, from, to, key, axes = allAxes();\r\n\r\n            for (var i = 0; i < axes.length; ++i) {\r\n                axis = axes[i];\r\n                if (axis.direction == coord) {\r\n                    key = coord + axis.n + \"axis\";\r\n                    if (!ranges[key] && axis.n == 1)\r\n                        key = coord + \"axis\"; // support x1axis as xaxis\r\n                    if (ranges[key]) {\r\n                        from = ranges[key].from;\r\n                        to = ranges[key].to;\r\n                        break;\r\n                    }\r\n                }\r\n            }\r\n\r\n            // backwards-compat stuff - to be removed in future\r\n            if (!ranges[key]) {\r\n                axis = coord == \"x\" ? xaxes[0] : yaxes[0];\r\n                from = ranges[coord + \"1\"];\r\n                to = ranges[coord + \"2\"];\r\n            }\r\n\r\n            // auto-reverse as an added bonus\r\n            if (from != null && to != null && from > to) {\r\n                var tmp = from;\r\n                from = to;\r\n                to = tmp;\r\n            }\r\n\r\n            return { from: from, to: to, axis: axis };\r\n        }\r\n\r\n        function drawBackground() {\r\n            ctx.save();\r\n            ctx.translate(plotOffset.left, plotOffset.top);\r\n\r\n            ctx.fillStyle = getColorOrGradient(options.grid.backgroundColor, plotHeight, 0, \"rgba(255, 255, 255, 0)\");\r\n            ctx.fillRect(0, 0, plotWidth, plotHeight);\r\n            ctx.restore();\r\n        }\r\n\r\n        function drawGrid() {\r\n            var i, axes, bw, bc;\r\n\r\n            ctx.save();\r\n            ctx.translate(plotOffset.left, plotOffset.top);\r\n\r\n            // draw markings\r\n            var markings = options.grid.markings;\r\n            if (markings) {\r\n                if ($.isFunction(markings)) {\r\n                    axes = plot.getAxes();\r\n                    // xmin etc. is backwards compatibility, to be\r\n                    // removed in the future\r\n                    axes.xmin = axes.xaxis.min;\r\n                    axes.xmax = axes.xaxis.max;\r\n                    axes.ymin = axes.yaxis.min;\r\n                    axes.ymax = axes.yaxis.max;\r\n\r\n                    markings = markings(axes);\r\n                }\r\n\r\n                for (i = 0; i < markings.length; ++i) {\r\n                    var m = markings[i],\r\n                        xrange = extractRange(m, \"x\"),\r\n                        yrange = extractRange(m, \"y\");\r\n\r\n                    // fill in missing\r\n                    if (xrange.from == null)\r\n                        xrange.from = xrange.axis.min;\r\n                    if (xrange.to == null)\r\n                        xrange.to = xrange.axis.max;\r\n                    if (yrange.from == null)\r\n                        yrange.from = yrange.axis.min;\r\n                    if (yrange.to == null)\r\n                        yrange.to = yrange.axis.max;\r\n\r\n                    // clip\r\n                    if (xrange.to < xrange.axis.min || xrange.from > xrange.axis.max ||\r\n                        yrange.to < yrange.axis.min || yrange.from > yrange.axis.max)\r\n                        continue;\r\n\r\n                    xrange.from = Math.max(xrange.from, xrange.axis.min);\r\n                    xrange.to = Math.min(xrange.to, xrange.axis.max);\r\n                    yrange.from = Math.max(yrange.from, yrange.axis.min);\r\n                    yrange.to = Math.min(yrange.to, yrange.axis.max);\r\n\r\n                    var xequal = xrange.from === xrange.to,\r\n                        yequal = yrange.from === yrange.to;\r\n\r\n                    if (xequal && yequal) {\r\n                        continue;\r\n                    }\r\n\r\n                    // then draw\r\n                    xrange.from = Math.floor(xrange.axis.p2c(xrange.from));\r\n                    xrange.to = Math.floor(xrange.axis.p2c(xrange.to));\r\n                    yrange.from = Math.floor(yrange.axis.p2c(yrange.from));\r\n                    yrange.to = Math.floor(yrange.axis.p2c(yrange.to));\r\n\r\n                    if (xequal || yequal) {\r\n                        var lineWidth = m.lineWidth || options.grid.markingsLineWidth,\r\n                            subPixel = lineWidth % 2 ? 0.5 : 0;\r\n                        ctx.beginPath();\r\n                        ctx.strokeStyle = m.color || options.grid.markingsColor;\r\n                        ctx.lineWidth = lineWidth;\r\n                        if (xequal) {\r\n                            ctx.moveTo(xrange.to + subPixel, yrange.from);\r\n                            ctx.lineTo(xrange.to + subPixel, yrange.to);\r\n                        } else {\r\n                            ctx.moveTo(xrange.from, yrange.to + subPixel);\r\n                            ctx.lineTo(xrange.to, yrange.to + subPixel);\r\n                        }\r\n                        ctx.stroke();\r\n                    } else {\r\n                        ctx.fillStyle = m.color || options.grid.markingsColor;\r\n                        ctx.fillRect(xrange.from, yrange.to,\r\n                                     xrange.to - xrange.from,\r\n                                     yrange.from - yrange.to);\r\n                    }\r\n                }\r\n            }\r\n\r\n            // draw the ticks\r\n            axes = allAxes();\r\n            bw = options.grid.borderWidth;\r\n\r\n            for (var j = 0; j < axes.length; ++j) {\r\n                var axis = axes[j], box = axis.box,\r\n                    t = axis.tickLength, x, y, xoff, yoff;\r\n                if (!axis.show || axis.ticks.length == 0)\r\n                    continue;\r\n\r\n                ctx.lineWidth = 1;\r\n\r\n                // find the edges\r\n                if (axis.direction == \"x\") {\r\n                    x = 0;\r\n                    if (t == \"full\")\r\n                        y = (axis.position == \"top\" ? 0 : plotHeight);\r\n                    else\r\n                        y = box.top - plotOffset.top + (axis.position == \"top\" ? box.height : 0);\r\n                }\r\n                else {\r\n                    y = 0;\r\n                    if (t == \"full\")\r\n                        x = (axis.position == \"left\" ? 0 : plotWidth);\r\n                    else\r\n                        x = box.left - plotOffset.left + (axis.position == \"left\" ? box.width : 0);\r\n                }\r\n\r\n                // draw tick bar\r\n                if (!axis.innermost) {\r\n                    ctx.strokeStyle = axis.options.color;\r\n                    ctx.beginPath();\r\n                    xoff = yoff = 0;\r\n                    if (axis.direction == \"x\")\r\n                        xoff = plotWidth + 1;\r\n                    else\r\n                        yoff = plotHeight + 1;\r\n\r\n                    if (ctx.lineWidth == 1) {\r\n                        if (axis.direction == \"x\") {\r\n                            y = Math.floor(y) + 0.5;\r\n                        } else {\r\n                            x = Math.floor(x) + 0.5;\r\n                        }\r\n                    }\r\n\r\n                    ctx.moveTo(x, y);\r\n                    ctx.lineTo(x + xoff, y + yoff);\r\n                    ctx.stroke();\r\n                }\r\n\r\n                // draw ticks\r\n\r\n                ctx.strokeStyle = axis.options.tickColor;\r\n\r\n                ctx.beginPath();\r\n                for (i = 0; i < axis.ticks.length; ++i) {\r\n                    var v = axis.ticks[i].v;\r\n\r\n                    xoff = yoff = 0;\r\n\r\n                    if (isNaN(v) || v < axis.min || v > axis.max\r\n                        // skip those lying on the axes if we got a border\r\n                        || (t == \"full\"\r\n                            && ((typeof bw == \"object\" && bw[axis.position] > 0) || bw > 0)\r\n                            && (v == axis.min || v == axis.max)))\r\n                        continue;\r\n\r\n                    if (axis.direction == \"x\") {\r\n                        x = axis.p2c(v);\r\n                        yoff = t == \"full\" ? -plotHeight : t;\r\n\r\n                        if (axis.position == \"top\")\r\n                            yoff = -yoff;\r\n                    }\r\n                    else {\r\n                        y = axis.p2c(v);\r\n                        xoff = t == \"full\" ? -plotWidth : t;\r\n\r\n                        if (axis.position == \"left\")\r\n                            xoff = -xoff;\r\n                    }\r\n\r\n                    if (ctx.lineWidth == 1) {\r\n                        if (axis.direction == \"x\")\r\n                            x = Math.floor(x) + 0.5;\r\n                        else\r\n                            y = Math.floor(y) + 0.5;\r\n                    }\r\n\r\n                    ctx.moveTo(x, y);\r\n                    ctx.lineTo(x + xoff, y + yoff);\r\n                }\r\n\r\n                ctx.stroke();\r\n            }\r\n\r\n\r\n            // draw border\r\n            if (bw) {\r\n                // If either borderWidth or borderColor is an object, then draw the border\r\n                // line by line instead of as one rectangle\r\n                bc = options.grid.borderColor;\r\n                if(typeof bw == \"object\" || typeof bc == \"object\") {\r\n                    if (typeof bw !== \"object\") {\r\n                        bw = {top: bw, right: bw, bottom: bw, left: bw};\r\n                    }\r\n                    if (typeof bc !== \"object\") {\r\n                        bc = {top: bc, right: bc, bottom: bc, left: bc};\r\n                    }\r\n\r\n                    if (bw.top > 0) {\r\n                        ctx.strokeStyle = bc.top;\r\n                        ctx.lineWidth = bw.top;\r\n                        ctx.beginPath();\r\n                        ctx.moveTo(0 - bw.left, 0 - bw.top/2);\r\n                        ctx.lineTo(plotWidth, 0 - bw.top/2);\r\n                        ctx.stroke();\r\n                    }\r\n\r\n                    if (bw.right > 0) {\r\n                        ctx.strokeStyle = bc.right;\r\n                        ctx.lineWidth = bw.right;\r\n                        ctx.beginPath();\r\n                        ctx.moveTo(plotWidth + bw.right / 2, 0 - bw.top);\r\n                        ctx.lineTo(plotWidth + bw.right / 2, plotHeight);\r\n                        ctx.stroke();\r\n                    }\r\n\r\n                    if (bw.bottom > 0) {\r\n                        ctx.strokeStyle = bc.bottom;\r\n                        ctx.lineWidth = bw.bottom;\r\n                        ctx.beginPath();\r\n                        ctx.moveTo(plotWidth + bw.right, plotHeight + bw.bottom / 2);\r\n                        ctx.lineTo(0, plotHeight + bw.bottom / 2);\r\n                        ctx.stroke();\r\n                    }\r\n\r\n                    if (bw.left > 0) {\r\n                        ctx.strokeStyle = bc.left;\r\n                        ctx.lineWidth = bw.left;\r\n                        ctx.beginPath();\r\n                        ctx.moveTo(0 - bw.left/2, plotHeight + bw.bottom);\r\n                        ctx.lineTo(0- bw.left/2, 0);\r\n                        ctx.stroke();\r\n                    }\r\n                }\r\n                else {\r\n                    ctx.lineWidth = bw;\r\n                    ctx.strokeStyle = options.grid.borderColor;\r\n                    ctx.strokeRect(-bw/2, -bw/2, plotWidth + bw, plotHeight + bw);\r\n                }\r\n            }\r\n\r\n            ctx.restore();\r\n        }\r\n\r\n        function drawAxisLabels() {\r\n\r\n            $.each(allAxes(), function (_, axis) {\r\n                var box = axis.box,\r\n                    legacyStyles = axis.direction + \"Axis \" + axis.direction + axis.n + \"Axis\",\r\n                    layer = \"flot-\" + axis.direction + \"-axis flot-\" + axis.direction + axis.n + \"-axis \" + legacyStyles,\r\n                    font = axis.options.font || \"flot-tick-label tickLabel\",\r\n                    tick, x, y, halign, valign;\r\n\r\n                // Remove text before checking for axis.show and ticks.length;\r\n                // otherwise plugins, like flot-tickrotor, that draw their own\r\n                // tick labels will end up with both theirs and the defaults.\r\n\r\n                surface.removeText(layer);\r\n\r\n                if (!axis.show || axis.ticks.length == 0)\r\n                    return;\r\n\r\n                for (var i = 0; i < axis.ticks.length; ++i) {\r\n\r\n                    tick = axis.ticks[i];\r\n                    if (!tick.label || tick.v < axis.min || tick.v > axis.max)\r\n                        continue;\r\n\r\n                    if (axis.direction == \"x\") {\r\n                        halign = \"center\";\r\n                        x = plotOffset.left + axis.p2c(tick.v);\r\n                        if (axis.position == \"bottom\") {\r\n                            y = box.top + box.padding + box.eventSectionPadding;\r\n                        } else {\r\n                            y = box.top + box.height - box.padding;\r\n                            valign = \"bottom\";\r\n                        }\r\n                    } else {\r\n                        valign = \"middle\";\r\n                        y = plotOffset.top + axis.p2c(tick.v);\r\n                        if (axis.position == \"left\") {\r\n                            x = box.left + box.width - box.padding;\r\n                            halign = \"right\";\r\n                        } else {\r\n                            x = box.left + box.padding;\r\n                        }\r\n                    }\r\n\r\n                    surface.addText(layer, x, y, tick.label, font, null, null, halign, valign);\r\n                }\r\n            });\r\n        }\r\n\r\n        function drawSeries(series) {\r\n            if (series.lines.show)\r\n                drawSeriesLines(series);\r\n            if (series.bars.show)\r\n                drawSeriesBars(series);\r\n            if (series.points.show)\r\n                drawSeriesPoints(series);\r\n        }\r\n\r\n        function drawSeriesLines(series) {\r\n            function plotLine(datapoints, xoffset, yoffset, axisx, axisy) {\r\n                var points = datapoints.points,\r\n                    ps = datapoints.pointsize,\r\n                    prevx = null, prevy = null;\r\n\r\n                ctx.beginPath();\r\n                for (var i = ps; i < points.length; i += ps) {\r\n                    var x1 = points[i - ps], y1 = points[i - ps + 1],\r\n                        x2 = points[i], y2 = points[i + 1];\r\n\r\n                    if (x1 == null || x2 == null)\r\n                        continue;\r\n\r\n                    // clip with ymin\r\n                    if (y1 <= y2 && y1 < axisy.min) {\r\n                        if (y2 < axisy.min)\r\n                            continue;   // line segment is outside\r\n                        // compute new intersection point\r\n                        x1 = (axisy.min - y1) / (y2 - y1) * (x2 - x1) + x1;\r\n                        y1 = axisy.min;\r\n                    }\r\n                    else if (y2 <= y1 && y2 < axisy.min) {\r\n                        if (y1 < axisy.min)\r\n                            continue;\r\n                        x2 = (axisy.min - y1) / (y2 - y1) * (x2 - x1) + x1;\r\n                        y2 = axisy.min;\r\n                    }\r\n\r\n                    // clip with ymax\r\n                    if (y1 >= y2 && y1 > axisy.max) {\r\n                        if (y2 > axisy.max)\r\n                            continue;\r\n                        x1 = (axisy.max - y1) / (y2 - y1) * (x2 - x1) + x1;\r\n                        y1 = axisy.max;\r\n                    }\r\n                    else if (y2 >= y1 && y2 > axisy.max) {\r\n                        if (y1 > axisy.max)\r\n                            continue;\r\n                        x2 = (axisy.max - y1) / (y2 - y1) * (x2 - x1) + x1;\r\n                        y2 = axisy.max;\r\n                    }\r\n\r\n                    // clip with xmin\r\n                    if (x1 <= x2 && x1 < axisx.min) {\r\n                        if (x2 < axisx.min)\r\n                            continue;\r\n                        y1 = (axisx.min - x1) / (x2 - x1) * (y2 - y1) + y1;\r\n                        x1 = axisx.min;\r\n                    }\r\n                    else if (x2 <= x1 && x2 < axisx.min) {\r\n                        if (x1 < axisx.min)\r\n                            continue;\r\n                        y2 = (axisx.min - x1) / (x2 - x1) * (y2 - y1) + y1;\r\n                        x2 = axisx.min;\r\n                    }\r\n\r\n                    // clip with xmax\r\n                    if (x1 >= x2 && x1 > axisx.max) {\r\n                        if (x2 > axisx.max)\r\n                            continue;\r\n                        y1 = (axisx.max - x1) / (x2 - x1) * (y2 - y1) + y1;\r\n                        x1 = axisx.max;\r\n                    }\r\n                    else if (x2 >= x1 && x2 > axisx.max) {\r\n                        if (x1 > axisx.max)\r\n                            continue;\r\n                        y2 = (axisx.max - x1) / (x2 - x1) * (y2 - y1) + y1;\r\n                        x2 = axisx.max;\r\n                    }\r\n\r\n                    if (x1 != prevx || y1 != prevy)\r\n                        ctx.moveTo(axisx.p2c(x1) + xoffset, axisy.p2c(y1) + yoffset);\r\n\r\n                    prevx = x2;\r\n                    prevy = y2;\r\n                    ctx.lineTo(axisx.p2c(x2) + xoffset, axisy.p2c(y2) + yoffset);\r\n                }\r\n                ctx.stroke();\r\n            }\r\n\r\n            function plotLineArea(datapoints, axisx, axisy) {\r\n                var points = datapoints.points,\r\n                    ps = datapoints.pointsize,\r\n                    bottom = Math.min(Math.max(0, axisy.min), axisy.max),\r\n                    i = 0, top, areaOpen = false,\r\n                    ypos = 1, segmentStart = 0, segmentEnd = 0;\r\n\r\n                // we process each segment in two turns, first forward\r\n                // direction to sketch out top, then once we hit the\r\n                // end we go backwards to sketch the bottom\r\n                while (true) {\r\n                    if (ps > 0 && i > points.length + ps)\r\n                        break;\r\n\r\n                    i += ps; // ps is negative if going backwards\r\n\r\n                    var x1 = points[i - ps],\r\n                        y1 = points[i - ps + ypos],\r\n                        x2 = points[i], y2 = points[i + ypos];\r\n\r\n                    if (areaOpen) {\r\n                        if (ps > 0 && x1 != null && x2 == null) {\r\n                            // at turning point\r\n                            segmentEnd = i;\r\n                            ps = -ps;\r\n                            ypos = 2;\r\n                            continue;\r\n                        }\r\n\r\n                        if (ps < 0 && i == segmentStart + ps) {\r\n                            // done with the reverse sweep\r\n                            ctx.fill();\r\n                            areaOpen = false;\r\n                            ps = -ps;\r\n                            ypos = 1;\r\n                            i = segmentStart = segmentEnd + ps;\r\n                            continue;\r\n                        }\r\n                    }\r\n\r\n                    if (x1 == null || x2 == null)\r\n                        continue;\r\n\r\n                    // clip x values\r\n\r\n                    // clip with xmin\r\n                    if (x1 <= x2 && x1 < axisx.min) {\r\n                        if (x2 < axisx.min)\r\n                            continue;\r\n                        y1 = (axisx.min - x1) / (x2 - x1) * (y2 - y1) + y1;\r\n                        x1 = axisx.min;\r\n                    }\r\n                    else if (x2 <= x1 && x2 < axisx.min) {\r\n                        if (x1 < axisx.min)\r\n                            continue;\r\n                        y2 = (axisx.min - x1) / (x2 - x1) * (y2 - y1) + y1;\r\n                        x2 = axisx.min;\r\n                    }\r\n\r\n                    // clip with xmax\r\n                    if (x1 >= x2 && x1 > axisx.max) {\r\n                        if (x2 > axisx.max)\r\n                            continue;\r\n                        y1 = (axisx.max - x1) / (x2 - x1) * (y2 - y1) + y1;\r\n                        x1 = axisx.max;\r\n                    }\r\n                    else if (x2 >= x1 && x2 > axisx.max) {\r\n                        if (x1 > axisx.max)\r\n                            continue;\r\n                        y2 = (axisx.max - x1) / (x2 - x1) * (y2 - y1) + y1;\r\n                        x2 = axisx.max;\r\n                    }\r\n\r\n                    if (!areaOpen) {\r\n                        // open area\r\n                        ctx.beginPath();\r\n                        ctx.moveTo(axisx.p2c(x1), axisy.p2c(bottom));\r\n                        areaOpen = true;\r\n                    }\r\n\r\n                    // now first check the case where both is outside\r\n                    if (y1 >= axisy.max && y2 >= axisy.max) {\r\n                        ctx.lineTo(axisx.p2c(x1), axisy.p2c(axisy.max));\r\n                        ctx.lineTo(axisx.p2c(x2), axisy.p2c(axisy.max));\r\n                        continue;\r\n                    }\r\n                    else if (y1 <= axisy.min && y2 <= axisy.min) {\r\n                        ctx.lineTo(axisx.p2c(x1), axisy.p2c(axisy.min));\r\n                        ctx.lineTo(axisx.p2c(x2), axisy.p2c(axisy.min));\r\n                        continue;\r\n                    }\r\n\r\n                    // else it's a bit more complicated, there might\r\n                    // be a flat maxed out rectangle first, then a\r\n                    // triangular cutout or reverse; to find these\r\n                    // keep track of the current x values\r\n                    var x1old = x1, x2old = x2;\r\n\r\n                    // clip the y values, without shortcutting, we\r\n                    // go through all cases in turn\r\n\r\n                    // clip with ymin\r\n                    if (y1 <= y2 && y1 < axisy.min && y2 >= axisy.min) {\r\n                        x1 = (axisy.min - y1) / (y2 - y1) * (x2 - x1) + x1;\r\n                        y1 = axisy.min;\r\n                    }\r\n                    else if (y2 <= y1 && y2 < axisy.min && y1 >= axisy.min) {\r\n                        x2 = (axisy.min - y1) / (y2 - y1) * (x2 - x1) + x1;\r\n                        y2 = axisy.min;\r\n                    }\r\n\r\n                    // clip with ymax\r\n                    if (y1 >= y2 && y1 > axisy.max && y2 <= axisy.max) {\r\n                        x1 = (axisy.max - y1) / (y2 - y1) * (x2 - x1) + x1;\r\n                        y1 = axisy.max;\r\n                    }\r\n                    else if (y2 >= y1 && y2 > axisy.max && y1 <= axisy.max) {\r\n                        x2 = (axisy.max - y1) / (y2 - y1) * (x2 - x1) + x1;\r\n                        y2 = axisy.max;\r\n                    }\r\n\r\n                    // if the x value was changed we got a rectangle\r\n                    // to fill\r\n                    if (x1 != x1old) {\r\n                        ctx.lineTo(axisx.p2c(x1old), axisy.p2c(y1));\r\n                        // it goes to (x1, y1), but we fill that below\r\n                    }\r\n\r\n                    // fill triangular section, this sometimes result\r\n                    // in redundant points if (x1, y1) hasn't changed\r\n                    // from previous line to, but we just ignore that\r\n                    ctx.lineTo(axisx.p2c(x1), axisy.p2c(y1));\r\n                    ctx.lineTo(axisx.p2c(x2), axisy.p2c(y2));\r\n\r\n                    // fill the other rectangle if it's there\r\n                    if (x2 != x2old) {\r\n                        ctx.lineTo(axisx.p2c(x2), axisy.p2c(y2));\r\n                        ctx.lineTo(axisx.p2c(x2old), axisy.p2c(y2));\r\n                    }\r\n                }\r\n            }\r\n\r\n            ctx.save();\r\n            ctx.translate(plotOffset.left, plotOffset.top);\r\n            ctx.lineJoin = \"round\";\r\n\r\n            var lw = series.lines.lineWidth,\r\n                sw = series.shadowSize;\r\n            // FIXME: consider another form of shadow when filling is turned on\r\n            if (lw > 0 && sw > 0) {\r\n                // draw shadow as a thick and thin line with transparency\r\n                ctx.lineWidth = sw;\r\n                ctx.strokeStyle = \"rgba(0,0,0,0.1)\";\r\n                // position shadow at angle from the mid of line\r\n                var angle = Math.PI/18;\r\n                plotLine(series.datapoints, Math.sin(angle) * (lw/2 + sw/2), Math.cos(angle) * (lw/2 + sw/2), series.xaxis, series.yaxis);\r\n                ctx.lineWidth = sw/2;\r\n                plotLine(series.datapoints, Math.sin(angle) * (lw/2 + sw/4), Math.cos(angle) * (lw/2 + sw/4), series.xaxis, series.yaxis);\r\n            }\r\n\r\n            ctx.lineWidth = lw;\r\n            ctx.strokeStyle = series.color;\r\n            var fillStyle = getFillStyle(series.lines, series.color, 0, plotHeight);\r\n            if (fillStyle) {\r\n                ctx.fillStyle = fillStyle;\r\n                plotLineArea(series.datapoints, series.xaxis, series.yaxis);\r\n            }\r\n\r\n            if (lw > 0)\r\n                plotLine(series.datapoints, 0, 0, series.xaxis, series.yaxis);\r\n            ctx.restore();\r\n        }\r\n\r\n        function drawSeriesPoints(series) {\r\n            function plotPoints(datapoints, radius, fillStyle, offset, shadow, axisx, axisy, symbol) {\r\n                var points = datapoints.points, ps = datapoints.pointsize;\r\n\r\n                for (var i = 0; i < points.length; i += ps) {\r\n                    var x = points[i], y = points[i + 1];\r\n                    if (x == null || x < axisx.min || x > axisx.max || y < axisy.min || y > axisy.max)\r\n                        continue;\r\n\r\n                    ctx.beginPath();\r\n                    x = axisx.p2c(x);\r\n                    y = axisy.p2c(y) + offset;\r\n                    if (symbol == \"circle\")\r\n                        ctx.arc(x, y, radius, 0, shadow ? Math.PI : Math.PI * 2, false);\r\n                    else\r\n                        symbol(ctx, x, y, radius, shadow);\r\n                    ctx.closePath();\r\n\r\n                    if (fillStyle) {\r\n                        ctx.fillStyle = fillStyle;\r\n                        ctx.fill();\r\n                    }\r\n                    ctx.stroke();\r\n                }\r\n            }\r\n\r\n            ctx.save();\r\n            ctx.translate(plotOffset.left, plotOffset.top);\r\n\r\n            var lw = series.points.lineWidth,\r\n                sw = series.shadowSize,\r\n                radius = series.points.radius,\r\n                symbol = series.points.symbol;\r\n\r\n            // If the user sets the line width to 0, we change it to a very\r\n            // small value. A line width of 0 seems to force the default of 1.\r\n            // Doing the conditional here allows the shadow setting to still be\r\n            // optional even with a lineWidth of 0.\r\n\r\n            if( lw == 0 )\r\n                lw = 0.0001;\r\n\r\n            if (lw > 0 && sw > 0) {\r\n                // draw shadow in two steps\r\n                var w = sw / 2;\r\n                ctx.lineWidth = w;\r\n                ctx.strokeStyle = \"rgba(0,0,0,0.1)\";\r\n                plotPoints(series.datapoints, radius, null, w + w/2, true,\r\n                           series.xaxis, series.yaxis, symbol);\r\n\r\n                ctx.strokeStyle = \"rgba(0,0,0,0.2)\";\r\n                plotPoints(series.datapoints, radius, null, w/2, true,\r\n                           series.xaxis, series.yaxis, symbol);\r\n            }\r\n\r\n            ctx.lineWidth = lw;\r\n            ctx.strokeStyle = series.color;\r\n            plotPoints(series.datapoints, radius,\r\n                       getFillStyle(series.points, series.color), 0, false,\r\n                       series.xaxis, series.yaxis, symbol);\r\n            ctx.restore();\r\n        }\r\n\r\n        function drawBar(x, y, b, barLeft, barRight, fillStyleCallback, axisx, axisy, c, horizontal, lineWidth) {\r\n            var left, right, bottom, top,\r\n                drawLeft, drawRight, drawTop, drawBottom,\r\n                tmp;\r\n\r\n            // in horizontal mode, we start the bar from the left\r\n            // instead of from the bottom so it appears to be\r\n            // horizontal rather than vertical\r\n            if (horizontal) {\r\n                drawBottom = drawRight = drawTop = true;\r\n                drawLeft = false;\r\n                left = b;\r\n                right = x;\r\n                top = y + barLeft;\r\n                bottom = y + barRight;\r\n\r\n                // account for negative bars\r\n                if (right < left) {\r\n                    tmp = right;\r\n                    right = left;\r\n                    left = tmp;\r\n                    drawLeft = true;\r\n                    drawRight = false;\r\n                }\r\n            }\r\n            else {\r\n                drawLeft = drawRight = drawTop = true;\r\n                drawBottom = false;\r\n                left = x + barLeft;\r\n                right = x + barRight;\r\n                bottom = b;\r\n                top = y;\r\n\r\n                // account for negative bars\r\n                if (top < bottom) {\r\n                    tmp = top;\r\n                    top = bottom;\r\n                    bottom = tmp;\r\n                    drawBottom = true;\r\n                    drawTop = false;\r\n                }\r\n            }\r\n\r\n            // clip\r\n            if (right < axisx.min || left > axisx.max ||\r\n                top < axisy.min || bottom > axisy.max)\r\n                return;\r\n\r\n            if (left < axisx.min) {\r\n                left = axisx.min;\r\n                drawLeft = false;\r\n            }\r\n\r\n            if (right > axisx.max) {\r\n                right = axisx.max;\r\n                drawRight = false;\r\n            }\r\n\r\n            if (bottom < axisy.min) {\r\n                bottom = axisy.min;\r\n                drawBottom = false;\r\n            }\r\n\r\n            if (top > axisy.max) {\r\n                top = axisy.max;\r\n                drawTop = false;\r\n            }\r\n\r\n            left = axisx.p2c(left);\r\n            bottom = axisy.p2c(bottom);\r\n            right = axisx.p2c(right);\r\n            top = axisy.p2c(top);\r\n\r\n            // fill the bar\r\n            if (fillStyleCallback) {\r\n                c.fillStyle = fillStyleCallback(bottom, top);\r\n                c.fillRect(left, top, right - left, bottom - top)\r\n            }\r\n\r\n            // draw outline\r\n            if (lineWidth > 0 && (drawLeft || drawRight || drawTop || drawBottom)) {\r\n                c.beginPath();\r\n\r\n                // FIXME: inline moveTo is buggy with excanvas\r\n                c.moveTo(left, bottom);\r\n                if (drawLeft)\r\n                    c.lineTo(left, top);\r\n                else\r\n                    c.moveTo(left, top);\r\n                if (drawTop)\r\n                    c.lineTo(right, top);\r\n                else\r\n                    c.moveTo(right, top);\r\n                if (drawRight)\r\n                    c.lineTo(right, bottom);\r\n                else\r\n                    c.moveTo(right, bottom);\r\n                if (drawBottom)\r\n                    c.lineTo(left, bottom);\r\n                else\r\n                    c.moveTo(left, bottom);\r\n                c.stroke();\r\n            }\r\n        }\r\n\r\n        function drawSeriesBars(series) {\r\n            function plotBars(datapoints, barLeft, barRight, fillStyleCallback, axisx, axisy) {\r\n                var points = datapoints.points, ps = datapoints.pointsize;\r\n\r\n                for (var i = 0; i < points.length; i += ps) {\r\n                    if (points[i] == null)\r\n                        continue;\r\n                    drawBar(points[i], points[i + 1], points[i + 2], barLeft, barRight, fillStyleCallback, axisx, axisy, ctx, series.bars.horizontal, series.bars.lineWidth);\r\n                }\r\n            }\r\n\r\n            ctx.save();\r\n            ctx.translate(plotOffset.left, plotOffset.top);\r\n\r\n            // FIXME: figure out a way to add shadows (for instance along the right edge)\r\n            ctx.lineWidth = series.bars.lineWidth;\r\n            ctx.strokeStyle = series.color;\r\n\r\n            var barLeft;\r\n\r\n            switch (series.bars.align) {\r\n                case \"left\":\r\n                    barLeft = 0;\r\n                    break;\r\n                case \"right\":\r\n                    barLeft = -series.bars.barWidth;\r\n                    break;\r\n                default:\r\n                    barLeft = -series.bars.barWidth / 2;\r\n            }\r\n\r\n            var fillStyleCallback = series.bars.fill ? function (bottom, top) { return getFillStyle(series.bars, series.color, bottom, top); } : null;\r\n            plotBars(series.datapoints, barLeft, barLeft + series.bars.barWidth, fillStyleCallback, series.xaxis, series.yaxis);\r\n            ctx.restore();\r\n        }\r\n\r\n        function getFillStyle(filloptions, seriesColor, bottom, top) {\r\n            var fill = filloptions.fill;\r\n            if (!fill)\r\n                return null;\r\n\r\n            if (filloptions.fillColor)\r\n                return getColorOrGradient(filloptions.fillColor, bottom, top, seriesColor);\r\n\r\n            var c = $.color.parse(seriesColor);\r\n            c.a = typeof fill == \"number\" ? fill : 0.4;\r\n            c.normalize();\r\n            return c.toString();\r\n        }\r\n\r\n        function insertLegend() {\r\n\r\n            if (options.legend.container != null) {\r\n                $(options.legend.container).html(\"\");\r\n            } else {\r\n                placeholder.find(\".legend\").remove();\r\n            }\r\n\r\n            if (!options.legend.show) {\r\n                return;\r\n            }\r\n\r\n            var fragments = [], entries = [], rowStarted = false,\r\n                lf = options.legend.labelFormatter, s, label;\r\n\r\n            // Build a list of legend entries, with each having a label and a color\r\n\r\n            for (var i = 0; i < series.length; ++i) {\r\n                s = series[i];\r\n                if (s.label) {\r\n                    label = lf ? lf(s.label, s) : s.label;\r\n                    if (label) {\r\n                        entries.push({\r\n                            label: label,\r\n                            color: s.color\r\n                        });\r\n                    }\r\n                }\r\n            }\r\n\r\n            // Sort the legend using either the default or a custom comparator\r\n\r\n            if (options.legend.sorted) {\r\n                if ($.isFunction(options.legend.sorted)) {\r\n                    entries.sort(options.legend.sorted);\r\n                } else if (options.legend.sorted == \"reverse\") {\r\n                \tentries.reverse();\r\n                } else {\r\n                    var ascending = options.legend.sorted != \"descending\";\r\n                    entries.sort(function(a, b) {\r\n                        return a.label == b.label ? 0 : (\r\n                            (a.label < b.label) != ascending ? 1 : -1   // Logical XOR\r\n                        );\r\n                    });\r\n                }\r\n            }\r\n\r\n            // Generate markup for the list of entries, in their final order\r\n\r\n            for (var i = 0; i < entries.length; ++i) {\r\n\r\n                var entry = entries[i];\r\n\r\n                if (i % options.legend.noColumns == 0) {\r\n                    if (rowStarted)\r\n                        fragments.push('</tr>');\r\n                    fragments.push('<tr>');\r\n                    rowStarted = true;\r\n                }\r\n\r\n                fragments.push(\r\n                    '<td class=\"legendColorBox\"><div style=\"border:1px solid ' + options.legend.labelBoxBorderColor + ';padding:1px\"><div style=\"width:4px;height:0;border:5px solid ' + entry.color + ';overflow:hidden\"></div></div></td>' +\r\n                    '<td class=\"legendLabel\">' + entry.label + '</td>'\r\n                );\r\n            }\r\n\r\n            if (rowStarted)\r\n                fragments.push('</tr>');\r\n\r\n            if (fragments.length == 0)\r\n                return;\r\n\r\n            var table = '<table style=\"font-size:smaller;color:' + options.grid.color + '\">' + fragments.join(\"\") + '</table>';\r\n            if (options.legend.container != null)\r\n                $(options.legend.container).html(table);\r\n            else {\r\n                var pos = \"\",\r\n                    p = options.legend.position,\r\n                    m = options.legend.margin;\r\n                if (m[0] == null)\r\n                    m = [m, m];\r\n                if (p.charAt(0) == \"n\")\r\n                    pos += 'top:' + (m[1] + plotOffset.top) + 'px;';\r\n                else if (p.charAt(0) == \"s\")\r\n                    pos += 'bottom:' + (m[1] + plotOffset.bottom) + 'px;';\r\n                if (p.charAt(1) == \"e\")\r\n                    pos += 'right:' + (m[0] + plotOffset.right) + 'px;';\r\n                else if (p.charAt(1) == \"w\")\r\n                    pos += 'left:' + (m[0] + plotOffset.left) + 'px;';\r\n                var legend = $('<div class=\"legend\">' + table.replace('style=\"', 'style=\"position:absolute;' + pos +';') + '</div>').appendTo(placeholder);\r\n                if (options.legend.backgroundOpacity != 0.0) {\r\n                    // put in the transparent background\r\n                    // separately to avoid blended labels and\r\n                    // label boxes\r\n                    var c = options.legend.backgroundColor;\r\n                    if (c == null) {\r\n                        c = options.grid.backgroundColor;\r\n                        if (c && typeof c == \"string\")\r\n                            c = $.color.parse(c);\r\n                        else\r\n                            c = $.color.extract(legend, 'background-color');\r\n                        c.a = 1;\r\n                        c = c.toString();\r\n                    }\r\n                    var div = legend.children();\r\n                    $('<div style=\"position:absolute;width:' + div.width() + 'px;height:' + div.height() + 'px;' + pos +'background-color:' + c + ';\"> </div>').prependTo(legend).css('opacity', options.legend.backgroundOpacity);\r\n                }\r\n            }\r\n        }\r\n\r\n\r\n        // interactive features\r\n\r\n        var highlights = [],\r\n            redrawTimeout = null;\r\n\r\n        // returns the data item the mouse is over, or null if none is found\r\n        function findNearbyItem(mouseX, mouseY, seriesFilter) {\r\n            var maxDistance = options.grid.mouseActiveRadius,\r\n                smallestDistance = maxDistance * maxDistance + 1,\r\n                item = null, foundPoint = false, i, j, ps;\r\n\r\n            for (i = series.length - 1; i >= 0; --i) {\r\n                if (!seriesFilter(series[i]))\r\n                    continue;\r\n\r\n                var s = series[i],\r\n                    axisx = s.xaxis,\r\n                    axisy = s.yaxis,\r\n                    points = s.datapoints.points,\r\n                    mx = axisx.c2p(mouseX), // precompute some stuff to make the loop faster\r\n                    my = axisy.c2p(mouseY),\r\n                    maxx = maxDistance / axisx.scale,\r\n                    maxy = maxDistance / axisy.scale;\r\n\r\n                ps = s.datapoints.pointsize;\r\n                // with inverse transforms, we can't use the maxx/maxy\r\n                // optimization, sadly\r\n                if (axisx.options.inverseTransform)\r\n                    maxx = Number.MAX_VALUE;\r\n                if (axisy.options.inverseTransform)\r\n                    maxy = Number.MAX_VALUE;\r\n\r\n                if (s.lines.show || s.points.show) {\r\n                    for (j = 0; j < points.length; j += ps) {\r\n                        var x = points[j], y = points[j + 1];\r\n                        if (x == null)\r\n                            continue;\r\n\r\n                        // For points and lines, the cursor must be within a\r\n                        // certain distance to the data point\r\n                        if (x - mx > maxx || x - mx < -maxx ||\r\n                            y - my > maxy || y - my < -maxy)\r\n                            continue;\r\n\r\n                        // We have to calculate distances in pixels, not in\r\n                        // data units, because the scales of the axes may be different\r\n                        var dx = Math.abs(axisx.p2c(x) - mouseX),\r\n                            dy = Math.abs(axisy.p2c(y) - mouseY),\r\n                            dist = dx * dx + dy * dy; // we save the sqrt\r\n\r\n                        // use <= to ensure last point takes precedence\r\n                        // (last generally means on top of)\r\n                        if (dist < smallestDistance) {\r\n                            smallestDistance = dist;\r\n                            item = [i, j / ps];\r\n                        }\r\n                    }\r\n                }\r\n\r\n                if (s.bars.show && !item) { // no other point can be nearby\r\n\r\n                    var barLeft, barRight;\r\n\r\n                    switch (s.bars.align) {\r\n                        case \"left\":\r\n                            barLeft = 0;\r\n                            break;\r\n                        case \"right\":\r\n                            barLeft = -s.bars.barWidth;\r\n                            break;\r\n                        default:\r\n                            barLeft = -s.bars.barWidth / 2;\r\n                    }\r\n\r\n                    barRight = barLeft + s.bars.barWidth;\r\n\r\n                    for (j = 0; j < points.length; j += ps) {\r\n                        var x = points[j], y = points[j + 1], b = points[j + 2];\r\n                        if (x == null)\r\n                            continue;\r\n\r\n                        // for a bar graph, the cursor must be inside the bar\r\n                        if (series[i].bars.horizontal ?\r\n                            (mx <= Math.max(b, x) && mx >= Math.min(b, x) &&\r\n                             my >= y + barLeft && my <= y + barRight) :\r\n                            (mx >= x + barLeft && mx <= x + barRight &&\r\n                             my >= Math.min(b, y) && my <= Math.max(b, y)))\r\n                                item = [i, j / ps];\r\n                    }\r\n                }\r\n            }\r\n\r\n            if (item) {\r\n                i = item[0];\r\n                j = item[1];\r\n                ps = series[i].datapoints.pointsize;\r\n\r\n                return { datapoint: series[i].datapoints.points.slice(j * ps, (j + 1) * ps),\r\n                         dataIndex: j,\r\n                         series: series[i],\r\n                         seriesIndex: i };\r\n            }\r\n\r\n            return null;\r\n        }\r\n\r\n        function onMouseMove(e) {\r\n            if (options.grid.hoverable)\r\n                triggerClickHoverEvent(\"plothover\", e,\r\n                                       function (s) { return s[\"hoverable\"] != false; });\r\n        }\r\n\r\n        function onMouseLeave(e) {\r\n            if (options.grid.hoverable)\r\n                triggerClickHoverEvent(\"plothover\", e,\r\n                                       function (s) { return false; });\r\n        }\r\n\r\n        function onClick(e) {\r\n          if (plot.isSelecting) {\r\n            return;\r\n          }\r\n\r\n          triggerClickHoverEvent(\"plotclick\", e, function (s) { return s[\"clickable\"] != false; });\r\n        }\r\n\r\n        // trigger click or hover event (they send the same parameters\r\n        // so we share their code)\r\n        function triggerClickHoverEvent(eventname, event, seriesFilter) {\r\n            var offset = eventHolder.offset(),\r\n                canvasX = event.pageX - offset.left - plotOffset.left,\r\n                canvasY = event.pageY - offset.top - plotOffset.top,\r\n            pos = canvasToAxisCoords({ left: canvasX, top: canvasY });\r\n\r\n            pos.pageX = event.pageX;\r\n            pos.pageY = event.pageY;\r\n\r\n            // Add ctrlKey and metaKey to event\r\n            pos.ctrlKey = event.ctrlKey;\r\n            pos.metaKey = event.metaKey;\r\n\r\n            var item = findNearbyItem(canvasX, canvasY, seriesFilter);\r\n\r\n            if (item) {\r\n                // fill in mouse pos for any listeners out there\r\n                item.pageX = parseInt(item.series.xaxis.p2c(item.datapoint[0]) + offset.left + plotOffset.left, 10);\r\n                item.pageY = parseInt(item.series.yaxis.p2c(item.datapoint[1]) + offset.top + plotOffset.top, 10);\r\n            }\r\n\r\n            if (options.grid.autoHighlight) {\r\n                // clear auto-highlights\r\n                for (var i = 0; i < highlights.length; ++i) {\r\n                    var h = highlights[i];\r\n                    if (h.auto == eventname &&\r\n                        !(item && h.series == item.series &&\r\n                          h.point[0] == item.datapoint[0] &&\r\n                          h.point[1] == item.datapoint[1]))\r\n                        unhighlight(h.series, h.point);\r\n                }\r\n\r\n                if (item)\r\n                    highlight(item.series, item.datapoint, eventname);\r\n            }\r\n\r\n            placeholder.trigger(eventname, [ pos, item ]);\r\n        }\r\n\r\n        function triggerRedrawOverlay() {\r\n            var t = options.interaction.redrawOverlayInterval;\r\n            if (t == -1) {      // skip event queue\r\n                drawOverlay();\r\n                return;\r\n            }\r\n\r\n            if (!redrawTimeout)\r\n                redrawTimeout = setTimeout(drawOverlay, t);\r\n        }\r\n\r\n        function drawOverlay() {\r\n            redrawTimeout = null;\r\n\r\n            // draw highlights\r\n            octx.save();\r\n            overlay.clear();\r\n            octx.translate(plotOffset.left, plotOffset.top);\r\n\r\n            var i, hi;\r\n            for (i = 0; i < highlights.length; ++i) {\r\n                hi = highlights[i];\r\n\r\n                if (hi.series.bars.show)\r\n                    drawBarHighlight(hi.series, hi.point);\r\n                else\r\n                    drawPointHighlight(hi.series, hi.point);\r\n            }\r\n            octx.restore();\r\n\r\n            executeHooks(hooks.drawOverlay, [octx]);\r\n        }\r\n\r\n        function highlight(s, point, auto) {\r\n            if (typeof s == \"number\")\r\n                s = series[s];\r\n\r\n            if (typeof point == \"number\") {\r\n                var ps = s.datapoints.pointsize;\r\n                point = s.datapoints.points.slice(ps * point, ps * (point + 1));\r\n            }\r\n\r\n            var i = indexOfHighlight(s, point);\r\n            if (i == -1) {\r\n                highlights.push({ series: s, point: point, auto: auto });\r\n\r\n                triggerRedrawOverlay();\r\n            }\r\n            else if (!auto)\r\n                highlights[i].auto = false;\r\n        }\r\n\r\n        function unhighlight(s, point) {\r\n            if (s == null && point == null) {\r\n                highlights = [];\r\n                triggerRedrawOverlay();\r\n                return;\r\n            }\r\n\r\n            if (typeof s == \"number\")\r\n                s = series[s];\r\n\r\n            if (typeof point == \"number\") {\r\n                var ps = s.datapoints.pointsize;\r\n                point = s.datapoints.points.slice(ps * point, ps * (point + 1));\r\n            }\r\n\r\n            var i = indexOfHighlight(s, point);\r\n            if (i != -1) {\r\n                highlights.splice(i, 1);\r\n\r\n                triggerRedrawOverlay();\r\n            }\r\n        }\r\n\r\n        function indexOfHighlight(s, p) {\r\n            for (var i = 0; i < highlights.length; ++i) {\r\n                var h = highlights[i];\r\n                if (h.series == s && h.point[0] == p[0]\r\n                    && h.point[1] == p[1])\r\n                    return i;\r\n            }\r\n            return -1;\r\n        }\r\n\r\n        function drawPointHighlight(series, point) {\r\n            var x = point[0], y = point[1],\r\n                axisx = series.xaxis, axisy = series.yaxis,\r\n                highlightColor = (typeof series.highlightColor === \"string\") ? series.highlightColor : $.color.parse(series.color).scale('a', 0.5).toString();\r\n\r\n            if (x < axisx.min || x > axisx.max || y < axisy.min || y > axisy.max)\r\n                return;\r\n\r\n            var pointRadius = series.points.radius + series.points.lineWidth / 2;\r\n            octx.lineWidth = pointRadius;\r\n            octx.strokeStyle = highlightColor;\r\n            var radius = 1.5 * pointRadius;\r\n            x = axisx.p2c(x);\r\n            y = axisy.p2c(y);\r\n\r\n            octx.beginPath();\r\n            if (series.points.symbol == \"circle\")\r\n                octx.arc(x, y, radius, 0, 2 * Math.PI, false);\r\n            else\r\n                series.points.symbol(octx, x, y, radius, false);\r\n            octx.closePath();\r\n            octx.stroke();\r\n        }\r\n\r\n        function drawBarHighlight(series, point) {\r\n            var highlightColor = (typeof series.highlightColor === \"string\") ? series.highlightColor : $.color.parse(series.color).scale('a', 0.5).toString(),\r\n                fillStyle = highlightColor,\r\n                barLeft;\r\n\r\n            switch (series.bars.align) {\r\n                case \"left\":\r\n                    barLeft = 0;\r\n                    break;\r\n                case \"right\":\r\n                    barLeft = -series.bars.barWidth;\r\n                    break;\r\n                default:\r\n                    barLeft = -series.bars.barWidth / 2;\r\n            }\r\n\r\n            octx.lineWidth = series.bars.lineWidth;\r\n            octx.strokeStyle = highlightColor;\r\n\r\n            drawBar(point[0], point[1], point[2] || 0, barLeft, barLeft + series.bars.barWidth,\r\n                    function () { return fillStyle; }, series.xaxis, series.yaxis, octx, series.bars.horizontal, series.bars.lineWidth);\r\n        }\r\n\r\n        function getColorOrGradient(spec, bottom, top, defaultColor) {\r\n            if (typeof spec == \"string\")\r\n                return spec;\r\n            else {\r\n                // assume this is a gradient spec; IE currently only\r\n                // supports a simple vertical gradient properly, so that's\r\n                // what we support too\r\n                var gradient = ctx.createLinearGradient(0, top, 0, bottom);\r\n\r\n                for (var i = 0, l = spec.colors.length; i < l; ++i) {\r\n                    var c = spec.colors[i];\r\n                    if (typeof c != \"string\") {\r\n                        var co = $.color.parse(defaultColor);\r\n                        if (c.brightness != null)\r\n                            co = co.scale('rgb', c.brightness);\r\n                        if (c.opacity != null)\r\n                            co.a *= c.opacity;\r\n                        c = co.toString();\r\n                    }\r\n                    gradient.addColorStop(i / (l - 1), c);\r\n                }\r\n\r\n                return gradient;\r\n            }\r\n        }\r\n    }\r\n\r\n    // Add the plot function to the top level of the jQuery object\r\n\r\n    $.plot = function(placeholder, data, options) {\r\n        //var t0 = new Date();\r\n        var plot = new Plot($(placeholder), data, options, $.plot.plugins);\r\n        //(window.console ? console.log : alert)(\"time used (msecs): \" + ((new Date()).getTime() - t0.getTime()));\r\n        return plot;\r\n    };\r\n\r\n    $.plot.version = \"0.8.3\";\r\n\r\n    $.plot.plugins = [];\r\n\r\n    // Also add the plot function as a chainable property\r\n\r\n    $.fn.plot = function(data, options) {\r\n        return this.each(function() {\r\n            $.plot(this, data, options);\r\n        });\r\n    };\r\n\r\n    // round to nearby lower multiple of base\r\n    function floorInBase(n, base) {\r\n        return base * Math.floor(n / base);\r\n    }\r\n\r\n})(jQuery);\r\n\n\n/***/ }),\n\n/***/ 1673:\n/***/ (function(module, exports) {\n\n/* Pretty handling of time axes.\r\n\r\nCopyright (c) 2007-2013 IOLA and Ole Laursen.\r\nLicensed under the MIT license.\r\n\r\nSet axis.mode to \"time\" to enable. See the section \"Time series data\" in\r\nAPI.txt for details.\r\n\r\n*/\r\n\r\n(function($) {\r\n\r\n\tvar options = {\r\n\t\txaxis: {\r\n\t\t\ttimezone: null,\t\t// \"browser\" for local to the client or timezone for timezone-js\r\n\t\t\ttimeformat: null,\t// format string to use\r\n\t\t\ttwelveHourClock: false,\t// 12 or 24 time in time mode\r\n\t\t\tmonthNames: null\t// list of names of months\r\n\t\t}\r\n\t};\r\n\r\n\t// round to nearby lower multiple of base\r\n\r\n\tfunction floorInBase(n, base) {\r\n\t\treturn base * Math.floor(n / base);\r\n\t}\r\n\r\n\t// Returns a string with the date d formatted according to fmt.\r\n\t// A subset of the Open Group's strftime format is supported.\r\n\r\n\tfunction formatDate(d, fmt, monthNames, dayNames) {\r\n\r\n\t\tif (typeof d.strftime == \"function\") {\r\n\t\t\treturn d.strftime(fmt);\r\n\t\t}\r\n\r\n\t\tvar leftPad = function(n, pad) {\r\n\t\t\tn = \"\" + n;\r\n\t\t\tpad = \"\" + (pad == null ? \"0\" : pad);\r\n\t\t\treturn n.length == 1 ? pad + n : n;\r\n\t\t};\r\n\r\n\t\tvar r = [];\r\n\t\tvar escape = false;\r\n\t\tvar hours = d.getHours();\r\n\t\tvar isAM = hours < 12;\r\n\r\n\t\tif (monthNames == null) {\r\n\t\t\tmonthNames = [\"Jan\", \"Feb\", \"Mar\", \"Apr\", \"May\", \"Jun\", \"Jul\", \"Aug\", \"Sep\", \"Oct\", \"Nov\", \"Dec\"];\r\n\t\t}\r\n\r\n\t\tif (dayNames == null) {\r\n\t\t\tdayNames = [\"Sun\", \"Mon\", \"Tue\", \"Wed\", \"Thu\", \"Fri\", \"Sat\"];\r\n\t\t}\r\n\r\n\t\tvar hours12;\r\n\r\n\t\tif (hours > 12) {\r\n\t\t\thours12 = hours - 12;\r\n\t\t} else if (hours == 0) {\r\n\t\t\thours12 = 12;\r\n\t\t} else {\r\n\t\t\thours12 = hours;\r\n\t\t}\r\n\r\n\t\tfor (var i = 0; i < fmt.length; ++i) {\r\n\r\n\t\t\tvar c = fmt.charAt(i);\r\n\r\n\t\t\tif (escape) {\r\n\t\t\t\tswitch (c) {\r\n\t\t\t\t\tcase 'a': c = \"\" + dayNames[d.getDay()]; break;\r\n\t\t\t\t\tcase 'b': c = \"\" + monthNames[d.getMonth()]; break;\r\n\t\t\t\t\tcase 'd': c = leftPad(d.getDate(), \"\"); break;\r\n\t\t\t\t\tcase 'e': c = leftPad(d.getDate(), \" \"); break;\r\n\t\t\t\t\tcase 'h':\t// For back-compat with 0.7; remove in 1.0\r\n\t\t\t\t\tcase 'H': c = leftPad(hours); break;\r\n\t\t\t\t\tcase 'I': c = leftPad(hours12); break;\r\n\t\t\t\t\tcase 'l': c = leftPad(hours12, \" \"); break;\r\n\t\t\t\t\tcase 'm': c = leftPad(d.getMonth() + 1, \"\"); break;\r\n\t\t\t\t\tcase 'M': c = leftPad(d.getMinutes()); break;\r\n\t\t\t\t\t// quarters not in Open Group's strftime specification\r\n\t\t\t\t\tcase 'q':\r\n\t\t\t\t\t\tc = \"\" + (Math.floor(d.getMonth() / 3) + 1); break;\r\n\t\t\t\t\tcase 'S': c = leftPad(d.getSeconds()); break;\r\n\t\t\t\t\tcase 'y': c = leftPad(d.getFullYear() % 100); break;\r\n\t\t\t\t\tcase 'Y': c = \"\" + d.getFullYear(); break;\r\n\t\t\t\t\tcase 'p': c = (isAM) ? (\"\" + \"am\") : (\"\" + \"pm\"); break;\r\n\t\t\t\t\tcase 'P': c = (isAM) ? (\"\" + \"AM\") : (\"\" + \"PM\"); break;\r\n\t\t\t\t\tcase 'w': c = \"\" + d.getDay(); break;\r\n\t\t\t\t}\r\n\t\t\t\tr.push(c);\r\n\t\t\t\tescape = false;\r\n\t\t\t} else {\r\n\t\t\t\tif (c == \"%\") {\r\n\t\t\t\t\tescape = true;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tr.push(c);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn r.join(\"\");\r\n\t}\r\n\r\n\t// To have a consistent view of time-based data independent of which time\r\n\t// zone the client happens to be in we need a date-like object independent\r\n\t// of time zones.  This is done through a wrapper that only calls the UTC\r\n\t// versions of the accessor methods.\r\n\r\n\tfunction makeUtcWrapper(d) {\r\n\r\n\t\tfunction addProxyMethod(sourceObj, sourceMethod, targetObj, targetMethod) {\r\n\t\t\tsourceObj[sourceMethod] = function() {\r\n\t\t\t\treturn targetObj[targetMethod].apply(targetObj, arguments);\r\n\t\t\t};\r\n\t\t};\r\n\r\n\t\tvar utc = {\r\n\t\t\tdate: d\r\n\t\t};\r\n\r\n\t\t// support strftime, if found\r\n\r\n\t\tif (d.strftime != undefined) {\r\n\t\t\taddProxyMethod(utc, \"strftime\", d, \"strftime\");\r\n\t\t}\r\n\r\n\t\taddProxyMethod(utc, \"getTime\", d, \"getTime\");\r\n\t\taddProxyMethod(utc, \"setTime\", d, \"setTime\");\r\n\r\n\t\tvar props = [\"Date\", \"Day\", \"FullYear\", \"Hours\", \"Milliseconds\", \"Minutes\", \"Month\", \"Seconds\"];\r\n\r\n\t\tfor (var p = 0; p < props.length; p++) {\r\n\t\t\taddProxyMethod(utc, \"get\" + props[p], d, \"getUTC\" + props[p]);\r\n\t\t\taddProxyMethod(utc, \"set\" + props[p], d, \"setUTC\" + props[p]);\r\n\t\t}\r\n\r\n\t\treturn utc;\r\n\t};\r\n\r\n\t// select time zone strategy.  This returns a date-like object tied to the\r\n\t// desired timezone\r\n\r\n\tfunction dateGenerator(ts, opts) {\r\n\t\tif (opts.timezone == \"browser\") {\r\n\t\t\treturn new Date(ts);\r\n\t\t} else if (!opts.timezone || opts.timezone == \"utc\") {\r\n\t\t\treturn makeUtcWrapper(new Date(ts));\r\n\t\t} else if (typeof timezoneJS != \"undefined\" && typeof timezoneJS.Date != \"undefined\") {\r\n\t\t\tvar d = new timezoneJS.Date();\r\n\t\t\t// timezone-js is fickle, so be sure to set the time zone before\r\n\t\t\t// setting the time.\r\n\t\t\td.setTimezone(opts.timezone);\r\n\t\t\td.setTime(ts);\r\n\t\t\treturn d;\r\n\t\t} else {\r\n\t\t\treturn makeUtcWrapper(new Date(ts));\r\n\t\t}\r\n\t}\r\n\r\n\t// map of app. size of time units in milliseconds\r\n\r\n\tvar timeUnitSize = {\r\n\t\t\"second\": 1000,\r\n\t\t\"minute\": 60 * 1000,\r\n\t\t\"hour\": 60 * 60 * 1000,\r\n\t\t\"day\": 24 * 60 * 60 * 1000,\r\n\t\t\"month\": 30 * 24 * 60 * 60 * 1000,\r\n\t\t\"quarter\": 3 * 30 * 24 * 60 * 60 * 1000,\r\n\t\t\"year\": 365.2425 * 24 * 60 * 60 * 1000\r\n\t};\r\n\r\n\t// the allowed tick sizes, after 1 year we use\r\n\t// an integer algorithm\r\n\r\n\tvar baseSpec = [\r\n\t\t[1, \"second\"], [2, \"second\"], [5, \"second\"], [10, \"second\"],\r\n\t\t[30, \"second\"],\r\n\t\t[1, \"minute\"], [2, \"minute\"], [5, \"minute\"], [10, \"minute\"],\r\n\t\t[30, \"minute\"],\r\n\t\t[1, \"hour\"], [2, \"hour\"], [4, \"hour\"],\r\n\t\t[8, \"hour\"], [12, \"hour\"],\r\n\t\t[1, \"day\"], [2, \"day\"], [3, \"day\"],\r\n\t\t[0.25, \"month\"], [0.5, \"month\"], [1, \"month\"],\r\n\t\t[2, \"month\"]\r\n\t];\r\n\r\n\t// we don't know which variant(s) we'll need yet, but generating both is\r\n\t// cheap\r\n\r\n\tvar specMonths = baseSpec.concat([[3, \"month\"], [6, \"month\"],\r\n\t\t[1, \"year\"]]);\r\n\tvar specQuarters = baseSpec.concat([[1, \"quarter\"], [2, \"quarter\"],\r\n\t\t[1, \"year\"]]);\r\n\r\n\tfunction init(plot) {\r\n\t\tplot.hooks.processOptions.push(function (plot, options) {\r\n\t\t\t$.each(plot.getAxes(), function(axisName, axis) {\r\n\r\n\t\t\t\tvar opts = axis.options;\r\n\r\n\t\t\t\tif (opts.mode == \"time\") {\r\n\t\t\t\t\taxis.tickGenerator = function(axis) {\r\n\r\n\t\t\t\t\t\tvar ticks = [];\r\n\t\t\t\t\t\tvar d = dateGenerator(axis.min, opts);\r\n\t\t\t\t\t\tvar minSize = 0;\r\n\r\n\t\t\t\t\t\t// make quarter use a possibility if quarters are\r\n\t\t\t\t\t\t// mentioned in either of these options\r\n\r\n\t\t\t\t\t\tvar spec = (opts.tickSize && opts.tickSize[1] ===\r\n\t\t\t\t\t\t\t\"quarter\") ||\r\n\t\t\t\t\t\t\t(opts.minTickSize && opts.minTickSize[1] ===\r\n\t\t\t\t\t\t\t\"quarter\") ? specQuarters : specMonths;\r\n\r\n\t\t\t\t\t\tif (opts.minTickSize != null) {\r\n\t\t\t\t\t\t\tif (typeof opts.tickSize == \"number\") {\r\n\t\t\t\t\t\t\t\tminSize = opts.tickSize;\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tminSize = opts.minTickSize[0] * timeUnitSize[opts.minTickSize[1]];\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tfor (var i = 0; i < spec.length - 1; ++i) {\r\n\t\t\t\t\t\t\tif (axis.delta < (spec[i][0] * timeUnitSize[spec[i][1]]\r\n\t\t\t\t\t\t\t\t\t\t\t  + spec[i + 1][0] * timeUnitSize[spec[i + 1][1]]) / 2\r\n\t\t\t\t\t\t\t\t&& spec[i][0] * timeUnitSize[spec[i][1]] >= minSize) {\r\n\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tvar size = spec[i][0];\r\n\t\t\t\t\t\tvar unit = spec[i][1];\r\n\r\n\t\t\t\t\t\t// special-case the possibility of several years\r\n\r\n\t\t\t\t\t\tif (unit == \"year\") {\r\n\r\n\t\t\t\t\t\t\t// if given a minTickSize in years, just use it,\r\n\t\t\t\t\t\t\t// ensuring that it's an integer\r\n\r\n\t\t\t\t\t\t\tif (opts.minTickSize != null && opts.minTickSize[1] == \"year\") {\r\n\t\t\t\t\t\t\t\tsize = Math.floor(opts.minTickSize[0]);\r\n\t\t\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\t\t\tvar magn = Math.pow(10, Math.floor(Math.log(axis.delta / timeUnitSize.year) / Math.LN10));\r\n\t\t\t\t\t\t\t\tvar norm = (axis.delta / timeUnitSize.year) / magn;\r\n\r\n\t\t\t\t\t\t\t\tif (norm < 1.5) {\r\n\t\t\t\t\t\t\t\t\tsize = 1;\r\n\t\t\t\t\t\t\t\t} else if (norm < 3) {\r\n\t\t\t\t\t\t\t\t\tsize = 2;\r\n\t\t\t\t\t\t\t\t} else if (norm < 7.5) {\r\n\t\t\t\t\t\t\t\t\tsize = 5;\r\n\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\tsize = 10;\r\n\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t\tsize *= magn;\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t// minimum size for years is 1\r\n\r\n\t\t\t\t\t\t\tif (size < 1) {\r\n\t\t\t\t\t\t\t\tsize = 1;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\taxis.tickSize = opts.tickSize || [size, unit];\r\n\t\t\t\t\t\tvar tickSize = axis.tickSize[0];\r\n\t\t\t\t\t\tunit = axis.tickSize[1];\r\n\r\n\t\t\t\t\t\tvar step = tickSize * timeUnitSize[unit];\r\n\r\n\t\t\t\t\t\tif (unit == \"second\") {\r\n\t\t\t\t\t\t\td.setSeconds(floorInBase(d.getSeconds(), tickSize));\r\n\t\t\t\t\t\t} else if (unit == \"minute\") {\r\n\t\t\t\t\t\t\td.setMinutes(floorInBase(d.getMinutes(), tickSize));\r\n\t\t\t\t\t\t} else if (unit == \"hour\") {\r\n\t\t\t\t\t\t\td.setHours(floorInBase(d.getHours(), tickSize));\r\n\t\t\t\t\t\t} else if (unit == \"month\") {\r\n\t\t\t\t\t\t\td.setMonth(floorInBase(d.getMonth(), tickSize));\r\n\t\t\t\t\t\t} else if (unit == \"quarter\") {\r\n\t\t\t\t\t\t\td.setMonth(3 * floorInBase(d.getMonth() / 3,\r\n\t\t\t\t\t\t\t\ttickSize));\r\n\t\t\t\t\t\t} else if (unit == \"year\") {\r\n\t\t\t\t\t\t\td.setFullYear(floorInBase(d.getFullYear(), tickSize));\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t// reset smaller components\r\n\r\n\t\t\t\t\t\td.setMilliseconds(0);\r\n\r\n\t\t\t\t\t\tif (step >= timeUnitSize.minute) {\r\n\t\t\t\t\t\t\td.setSeconds(0);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (step >= timeUnitSize.hour) {\r\n\t\t\t\t\t\t\td.setMinutes(0);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (step >= timeUnitSize.day) {\r\n\t\t\t\t\t\t\td.setHours(0);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (step >= timeUnitSize.day * 4) {\r\n\t\t\t\t\t\t\td.setDate(1);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (step >= timeUnitSize.month * 2) {\r\n\t\t\t\t\t\t\td.setMonth(floorInBase(d.getMonth(), 3));\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (step >= timeUnitSize.quarter * 2) {\r\n\t\t\t\t\t\t\td.setMonth(floorInBase(d.getMonth(), 6));\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (step >= timeUnitSize.year) {\r\n\t\t\t\t\t\t\td.setMonth(0);\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tvar carry = 0;\r\n\t\t\t\t\t\tvar v = Number.NaN;\r\n\t\t\t\t\t\tvar prev;\r\n\r\n\t\t\t\t\t\tdo {\r\n\r\n\t\t\t\t\t\t\tprev = v;\r\n\t\t\t\t\t\t\tv = d.getTime();\r\n\t\t\t\t\t\t\tticks.push(v);\r\n\r\n\t\t\t\t\t\t\tif (unit == \"month\" || unit == \"quarter\") {\r\n\t\t\t\t\t\t\t\tif (tickSize < 1) {\r\n\r\n\t\t\t\t\t\t\t\t\t// a bit complicated - we'll divide the\r\n\t\t\t\t\t\t\t\t\t// month/quarter up but we need to take\r\n\t\t\t\t\t\t\t\t\t// care of fractions so we don't end up in\r\n\t\t\t\t\t\t\t\t\t// the middle of a day\r\n\r\n\t\t\t\t\t\t\t\t\td.setDate(1);\r\n\t\t\t\t\t\t\t\t\tvar start = d.getTime();\r\n\t\t\t\t\t\t\t\t\td.setMonth(d.getMonth() +\r\n\t\t\t\t\t\t\t\t\t\t(unit == \"quarter\" ? 3 : 1));\r\n\t\t\t\t\t\t\t\t\tvar end = d.getTime();\r\n\t\t\t\t\t\t\t\t\td.setTime(v + carry * timeUnitSize.hour + (end - start) * tickSize);\r\n\t\t\t\t\t\t\t\t\tcarry = d.getHours();\r\n\t\t\t\t\t\t\t\t\td.setHours(0);\r\n\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\td.setMonth(d.getMonth() +\r\n\t\t\t\t\t\t\t\t\t\ttickSize * (unit == \"quarter\" ? 3 : 1));\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t} else if (unit == \"year\") {\r\n\t\t\t\t\t\t\t\td.setFullYear(d.getFullYear() + tickSize);\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\td.setTime(v + step);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t} while (v < axis.max && v != prev);\r\n\r\n\t\t\t\t\t\treturn ticks;\r\n\t\t\t\t\t};\r\n\r\n\t\t\t\t\taxis.tickFormatter = function (v, axis) {\r\n\r\n\t\t\t\t\t\tvar d = dateGenerator(v, axis.options);\r\n\r\n\t\t\t\t\t\t// first check global format\r\n\r\n\t\t\t\t\t\tif (opts.timeformat != null) {\r\n\t\t\t\t\t\t\treturn formatDate(d, opts.timeformat, opts.monthNames, opts.dayNames);\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t// possibly use quarters if quarters are mentioned in\r\n\t\t\t\t\t\t// any of these places\r\n\r\n\t\t\t\t\t\tvar useQuarters = (axis.options.tickSize &&\r\n\t\t\t\t\t\t\t\taxis.options.tickSize[1] == \"quarter\") ||\r\n\t\t\t\t\t\t\t(axis.options.minTickSize &&\r\n\t\t\t\t\t\t\t\taxis.options.minTickSize[1] == \"quarter\");\r\n\r\n\t\t\t\t\t\tvar t = axis.tickSize[0] * timeUnitSize[axis.tickSize[1]];\r\n\t\t\t\t\t\tvar span = axis.max - axis.min;\r\n\t\t\t\t\t\tvar suffix = (opts.twelveHourClock) ? \" %p\" : \"\";\r\n\t\t\t\t\t\tvar hourCode = (opts.twelveHourClock) ? \"%I\" : \"%H\";\r\n\t\t\t\t\t\tvar fmt;\r\n\r\n\t\t\t\t\t\tif (t < timeUnitSize.minute) {\r\n\t\t\t\t\t\t\tfmt = hourCode + \":%M:%S\" + suffix;\r\n\t\t\t\t\t\t} else if (t < timeUnitSize.day) {\r\n\t\t\t\t\t\t\tif (span < 2 * timeUnitSize.day) {\r\n\t\t\t\t\t\t\t\tfmt = hourCode + \":%M\" + suffix;\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tfmt = \"%b %d \" + hourCode + \":%M\" + suffix;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t} else if (t < timeUnitSize.month) {\r\n\t\t\t\t\t\t\tfmt = \"%b %d\";\r\n\t\t\t\t\t\t} else if ((useQuarters && t < timeUnitSize.quarter) ||\r\n\t\t\t\t\t\t\t(!useQuarters && t < timeUnitSize.year)) {\r\n\t\t\t\t\t\t\tif (span < timeUnitSize.year) {\r\n\t\t\t\t\t\t\t\tfmt = \"%b\";\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tfmt = \"%b %Y\";\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t} else if (useQuarters && t < timeUnitSize.year) {\r\n\t\t\t\t\t\t\tif (span < timeUnitSize.year) {\r\n\t\t\t\t\t\t\t\tfmt = \"Q%q\";\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tfmt = \"Q%q %Y\";\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tfmt = \"%Y\";\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tvar rt = formatDate(d, fmt, opts.monthNames, opts.dayNames);\r\n\r\n\t\t\t\t\t\treturn rt;\r\n\t\t\t\t\t};\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t});\r\n\t}\r\n\r\n\t$.plot.plugins.push({\r\n\t\tinit: init,\r\n\t\toptions: options,\r\n\t\tname: 'time',\r\n\t\tversion: '1.0'\r\n\t});\r\n\r\n\t// Time-axis support used to be in Flot core, which exposed the\r\n\t// formatDate function on the plot object.  Various plugins depend\r\n\t// on the function, so we need to re-expose it here.\r\n\r\n\t$.plot.formatDate = formatDate;\r\n\r\n})(jQuery);\r\n\n\n/***/ }),\n\n/***/ 1705:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* WEBPACK VAR INJECTION */(function(module) {/* unused harmony export Explore */\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_react__ = __webpack_require__(2);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_react___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_react__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_react_hot_loader__ = __webpack_require__(124);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_react_hot_loader___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1_react_hot_loader__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_app_core_utils_colors__ = __webpack_require__(121);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3_app_core_time_series2__ = __webpack_require__(266);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__ElapsedTime__ = __webpack_require__(1706);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__QueryRows__ = __webpack_require__(1707);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6__Graph__ = __webpack_require__(1719);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7__Table__ = __webpack_require__(1721);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_8__TimePicker__ = __webpack_require__(1722);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_9__utils_query__ = __webpack_require__(1723);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_10_app_core_utils_location_util__ = __webpack_require__(172);\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nvar __assign = (this && this.__assign) || Object.assign || function(t) {\r\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n        s = arguments[i];\r\n        for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\r\n            t[p] = s[p];\r\n    }\r\n    return t;\r\n};\r\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nvar __generator = (this && this.__generator) || function (thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n};\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\nfunction makeTimeSeriesList(dataList, options) {\r\n    return dataList.map(function (seriesData, index) {\r\n        var datapoints = seriesData.datapoints || [];\r\n        var alias = seriesData.target;\r\n        var colorIndex = index % __WEBPACK_IMPORTED_MODULE_2_app_core_utils_colors__[\"f\" /* default */].length;\r\n        var color = __WEBPACK_IMPORTED_MODULE_2_app_core_utils_colors__[\"f\" /* default */][colorIndex];\r\n        var series = new __WEBPACK_IMPORTED_MODULE_3_app_core_time_series2__[\"a\" /* default */]({\r\n            datapoints: datapoints,\r\n            alias: alias,\r\n            color: color,\r\n            unit: seriesData.unit,\r\n        });\r\n        return series;\r\n    });\r\n}\r\nfunction parseInitialState(initial) {\r\n    try {\r\n        var parsed = JSON.parse(Object(__WEBPACK_IMPORTED_MODULE_10_app_core_utils_location_util__[\"a\" /* decodePathComponent */])(initial));\r\n        return {\r\n            queries: parsed.queries.map(function (q) { return q.query; }),\r\n            range: parsed.range,\r\n        };\r\n    }\r\n    catch (e) {\r\n        console.error(e);\r\n        return { queries: [], range: __WEBPACK_IMPORTED_MODULE_8__TimePicker__[\"a\" /* DEFAULT_RANGE */] };\r\n    }\r\n}\r\n// @observer\r\nvar Explore = /** @class */ (function (_super) {\r\n    __extends(Explore, _super);\r\n    function Explore(props) {\r\n        var _this = _super.call(this, props) || this;\r\n        _this.handleAddQueryRow = function (index) {\r\n            var queries = _this.state.queries;\r\n            var nextQueries = queries.slice(0, index + 1).concat([\r\n                { query: '', key: Object(__WEBPACK_IMPORTED_MODULE_9__utils_query__[\"c\" /* generateQueryKey */])() }\r\n            ], queries.slice(index + 1));\r\n            _this.setState({ queries: nextQueries });\r\n        };\r\n        _this.handleChangeQuery = function (query, index) {\r\n            var queries = _this.state.queries;\r\n            var nextQuery = __assign({}, queries[index], { query: query });\r\n            var nextQueries = queries.slice();\r\n            nextQueries[index] = nextQuery;\r\n            _this.setState({ queries: nextQueries });\r\n        };\r\n        _this.handleChangeTime = function (nextRange) {\r\n            var range = {\r\n                from: nextRange.from,\r\n                to: nextRange.to,\r\n            };\r\n            _this.setState({ range: range }, function () { return _this.handleSubmit(); });\r\n        };\r\n        _this.handleClickCloseSplit = function () {\r\n            var onChangeSplit = _this.props.onChangeSplit;\r\n            if (onChangeSplit) {\r\n                onChangeSplit(false);\r\n            }\r\n        };\r\n        _this.handleClickGraphButton = function () {\r\n            _this.setState(function (state) { return ({ showingGraph: !state.showingGraph }); });\r\n        };\r\n        _this.handleClickSplit = function () {\r\n            var onChangeSplit = _this.props.onChangeSplit;\r\n            if (onChangeSplit) {\r\n                onChangeSplit(true, _this.state);\r\n            }\r\n        };\r\n        _this.handleClickTableButton = function () {\r\n            _this.setState(function (state) { return ({ showingTable: !state.showingTable }); });\r\n        };\r\n        _this.handleRemoveQueryRow = function (index) {\r\n            var queries = _this.state.queries;\r\n            if (queries.length <= 1) {\r\n                return;\r\n            }\r\n            var nextQueries = queries.slice(0, index).concat(queries.slice(index + 1));\r\n            _this.setState({ queries: nextQueries }, function () { return _this.handleSubmit(); });\r\n        };\r\n        _this.handleSubmit = function () {\r\n            var _a = _this.state, showingGraph = _a.showingGraph, showingTable = _a.showingTable;\r\n            if (showingTable) {\r\n                _this.runTableQuery();\r\n            }\r\n            if (showingGraph) {\r\n                _this.runGraphQuery();\r\n            }\r\n        };\r\n        _this.request = function (url) {\r\n            var datasource = _this.state.datasource;\r\n            return datasource.metadataRequest(url);\r\n        };\r\n        var _a = parseInitialState(props.routeParams.initial), range = _a.range, queries = _a.queries;\r\n        _this.state = __assign({ datasource: null, datasourceError: null, datasourceLoading: true, graphResult: null, latency: 0, loading: false, queries: Object(__WEBPACK_IMPORTED_MODULE_9__utils_query__[\"b\" /* ensureQueries */])(queries), queryError: null, range: range || __assign({}, __WEBPACK_IMPORTED_MODULE_8__TimePicker__[\"a\" /* DEFAULT_RANGE */]), requestOptions: null, showingGraph: true, showingTable: true, tableResult: null }, props.initialState);\r\n        return _this;\r\n    }\r\n    Explore.prototype.componentDidMount = function () {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var datasource, testResult;\r\n            var _this = this;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0: return [4 /*yield*/, this.props.datasourceSrv.get()];\r\n                    case 1:\r\n                        datasource = _a.sent();\r\n                        return [4 /*yield*/, datasource.testDatasource()];\r\n                    case 2:\r\n                        testResult = _a.sent();\r\n                        if (testResult.status === 'success') {\r\n                            this.setState({ datasource: datasource, datasourceError: null, datasourceLoading: false }, function () { return _this.handleSubmit(); });\r\n                        }\r\n                        else {\r\n                            this.setState({ datasource: null, datasourceError: testResult.message, datasourceLoading: false });\r\n                        }\r\n                        return [2 /*return*/];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    Explore.prototype.componentDidCatch = function (error) {\r\n        console.error(error);\r\n    };\r\n    Explore.prototype.runGraphQuery = function () {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var _a, datasource, queries, range, now, options, res, result, latency, response_1, queryError;\r\n            return __generator(this, function (_b) {\r\n                switch (_b.label) {\r\n                    case 0:\r\n                        _a = this.state, datasource = _a.datasource, queries = _a.queries, range = _a.range;\r\n                        if (!Object(__WEBPACK_IMPORTED_MODULE_9__utils_query__[\"d\" /* hasQuery */])(queries)) {\r\n                            return [2 /*return*/];\r\n                        }\r\n                        this.setState({ latency: 0, loading: true, graphResult: null, queryError: null });\r\n                        now = Date.now();\r\n                        options = Object(__WEBPACK_IMPORTED_MODULE_9__utils_query__[\"a\" /* buildQueryOptions */])({\r\n                            format: 'time_series',\r\n                            interval: datasource.interval,\r\n                            instant: false,\r\n                            range: range,\r\n                            queries: queries.map(function (q) { return q.query; }),\r\n                        });\r\n                        _b.label = 1;\r\n                    case 1:\r\n                        _b.trys.push([1, 3, , 4]);\r\n                        return [4 /*yield*/, datasource.query(options)];\r\n                    case 2:\r\n                        res = _b.sent();\r\n                        result = makeTimeSeriesList(res.data, options);\r\n                        latency = Date.now() - now;\r\n                        this.setState({ latency: latency, loading: false, graphResult: result, requestOptions: options });\r\n                        return [3 /*break*/, 4];\r\n                    case 3:\r\n                        response_1 = _b.sent();\r\n                        console.error(response_1);\r\n                        queryError = response_1.data ? response_1.data.error : response_1;\r\n                        this.setState({ loading: false, queryError: queryError });\r\n                        return [3 /*break*/, 4];\r\n                    case 4: return [2 /*return*/];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    Explore.prototype.runTableQuery = function () {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var _a, datasource, queries, range, now, options, res, tableModel, latency, response_2, queryError;\r\n            return __generator(this, function (_b) {\r\n                switch (_b.label) {\r\n                    case 0:\r\n                        _a = this.state, datasource = _a.datasource, queries = _a.queries, range = _a.range;\r\n                        if (!Object(__WEBPACK_IMPORTED_MODULE_9__utils_query__[\"d\" /* hasQuery */])(queries)) {\r\n                            return [2 /*return*/];\r\n                        }\r\n                        this.setState({ latency: 0, loading: true, queryError: null, tableResult: null });\r\n                        now = Date.now();\r\n                        options = Object(__WEBPACK_IMPORTED_MODULE_9__utils_query__[\"a\" /* buildQueryOptions */])({\r\n                            format: 'table',\r\n                            interval: datasource.interval,\r\n                            instant: true,\r\n                            range: range,\r\n                            queries: queries.map(function (q) { return q.query; }),\r\n                        });\r\n                        _b.label = 1;\r\n                    case 1:\r\n                        _b.trys.push([1, 3, , 4]);\r\n                        return [4 /*yield*/, datasource.query(options)];\r\n                    case 2:\r\n                        res = _b.sent();\r\n                        tableModel = res.data[0];\r\n                        latency = Date.now() - now;\r\n                        this.setState({ latency: latency, loading: false, tableResult: tableModel, requestOptions: options });\r\n                        return [3 /*break*/, 4];\r\n                    case 3:\r\n                        response_2 = _b.sent();\r\n                        console.error(response_2);\r\n                        queryError = response_2.data ? response_2.data.error : response_2;\r\n                        this.setState({ loading: false, queryError: queryError });\r\n                        return [3 /*break*/, 4];\r\n                    case 4: return [2 /*return*/];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    Explore.prototype.render = function () {\r\n        var _a = this.props, position = _a.position, split = _a.split;\r\n        var _b = this.state, datasource = _b.datasource, datasourceError = _b.datasourceError, datasourceLoading = _b.datasourceLoading, graphResult = _b.graphResult, latency = _b.latency, loading = _b.loading, queries = _b.queries, queryError = _b.queryError, range = _b.range, requestOptions = _b.requestOptions, showingGraph = _b.showingGraph, showingTable = _b.showingTable, tableResult = _b.tableResult;\r\n        var showingBoth = showingGraph && showingTable;\r\n        var graphHeight = showingBoth ? '200px' : '400px';\r\n        var graphButtonActive = showingBoth || showingGraph ? 'active' : '';\r\n        var tableButtonActive = showingBoth || showingTable ? 'active' : '';\r\n        var exploreClass = split ? 'explore explore-split' : 'explore';\r\n        return (__WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(\"div\", { className: exploreClass },\r\n            __WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(\"div\", { className: \"navbar\" },\r\n                position === 'left' ? (__WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(\"div\", null,\r\n                    __WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(\"a\", { className: \"navbar-page-btn\" },\r\n                        __WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(\"i\", { className: \"fa fa-rocket\" }),\r\n                        \"Explore\"))) : (__WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(\"div\", { className: \"navbar-buttons explore-first-button\" },\r\n                    __WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(\"button\", { className: \"btn navbar-button\", onClick: this.handleClickCloseSplit }, \"Close Split\"))),\r\n                __WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(\"div\", { className: \"navbar__spacer\" }),\r\n                position === 'left' && !split ? (__WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(\"div\", { className: \"navbar-buttons\" },\r\n                    __WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(\"button\", { className: \"btn navbar-button\", onClick: this.handleClickSplit }, \"Split\"))) : null,\r\n                __WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(\"div\", { className: \"navbar-buttons\" },\r\n                    __WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(\"button\", { className: \"btn navbar-button \" + graphButtonActive, onClick: this.handleClickGraphButton }, \"Graph\"),\r\n                    __WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(\"button\", { className: \"btn navbar-button \" + tableButtonActive, onClick: this.handleClickTableButton }, \"Table\")),\r\n                __WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_8__TimePicker__[\"b\" /* default */], { range: range, onChangeTime: this.handleChangeTime }),\r\n                __WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(\"div\", { className: \"navbar-buttons relative\" },\r\n                    __WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(\"button\", { className: \"btn navbar-button--primary\", onClick: this.handleSubmit },\r\n                        \"Run Query \",\r\n                        __WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(\"i\", { className: \"fa fa-level-down run-icon\" })),\r\n                    loading || latency ? __WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_4__ElapsedTime__[\"a\" /* default */], { time: latency, className: \"text-info\" }) : null)),\r\n            datasourceLoading ? __WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(\"div\", { className: \"explore-container\" }, \"Loading datasource...\") : null,\r\n            datasourceError ? (__WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(\"div\", { className: \"explore-container\", title: datasourceError }, \"Error connecting to datasource.\")) : null,\r\n            datasource ? (__WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(\"div\", { className: \"explore-container\" },\r\n                __WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_5__QueryRows__[\"a\" /* default */], { queries: queries, request: this.request, onAddQueryRow: this.handleAddQueryRow, onChangeQuery: this.handleChangeQuery, onExecuteQuery: this.handleSubmit, onRemoveQueryRow: this.handleRemoveQueryRow }),\r\n                queryError ? __WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(\"div\", { className: \"text-warning m-a-2\" }, queryError) : null,\r\n                __WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(\"main\", { className: \"m-t-2\" },\r\n                    showingGraph ? (__WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_6__Graph__[\"a\" /* default */], { data: graphResult, id: \"explore-graph-\" + position, options: requestOptions, height: graphHeight, split: split })) : null,\r\n                    showingTable ? __WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_7__Table__[\"a\" /* default */], { data: tableResult, className: \"m-t-3\" }) : null))) : null));\r\n    };\r\n    return Explore;\r\n}(__WEBPACK_IMPORTED_MODULE_0_react___default.a.Component));\r\n\r\n/* harmony default export */ __webpack_exports__[\"a\"] = (Object(__WEBPACK_IMPORTED_MODULE_1_react_hot_loader__[\"hot\"])(module)(Explore));\r\n\n/* WEBPACK VAR INJECTION */}.call(__webpack_exports__, __webpack_require__(123)(module)))\n\n/***/ }),\n\n/***/ 1706:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_react__ = __webpack_require__(2);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_react___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_react__);\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\n\r\nvar INTERVAL = 150;\r\nvar ElapsedTime = /** @class */ (function (_super) {\r\n    __extends(ElapsedTime, _super);\r\n    function ElapsedTime() {\r\n        var _this = _super !== null && _super.apply(this, arguments) || this;\r\n        _this.state = {\r\n            elapsed: 0,\r\n        };\r\n        _this.tick = function () {\r\n            var jetzt = Date.now();\r\n            var elapsed = jetzt - _this.offset;\r\n            _this.setState({ elapsed: elapsed });\r\n        };\r\n        return _this;\r\n    }\r\n    ElapsedTime.prototype.start = function () {\r\n        this.offset = Date.now();\r\n        this.timer = window.setInterval(this.tick, INTERVAL);\r\n    };\r\n    ElapsedTime.prototype.componentWillReceiveProps = function (nextProps) {\r\n        if (nextProps.time) {\r\n            clearInterval(this.timer);\r\n        }\r\n        else if (this.props.time) {\r\n            this.start();\r\n        }\r\n    };\r\n    ElapsedTime.prototype.componentDidMount = function () {\r\n        this.start();\r\n    };\r\n    ElapsedTime.prototype.componentWillUnmount = function () {\r\n        clearInterval(this.timer);\r\n    };\r\n    ElapsedTime.prototype.render = function () {\r\n        var elapsed = this.state.elapsed;\r\n        var _a = this.props, className = _a.className, time = _a.time;\r\n        var value = (time || elapsed) / 1000;\r\n        return __WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(\"span\", { className: \"elapsed-time \" + className },\r\n            value.toFixed(1),\r\n            \"s\");\r\n    };\r\n    return ElapsedTime;\r\n}(__WEBPACK_IMPORTED_MODULE_0_react__[\"PureComponent\"]));\r\n/* harmony default export */ __webpack_exports__[\"a\"] = (ElapsedTime);\r\n\n\n/***/ }),\n\n/***/ 1707:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_react__ = __webpack_require__(2);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_react___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_react__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__QueryField__ = __webpack_require__(1708);\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nvar __assign = (this && this.__assign) || Object.assign || function(t) {\r\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n        s = arguments[i];\r\n        for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\r\n            t[p] = s[p];\r\n    }\r\n    return t;\r\n};\r\nvar __rest = (this && this.__rest) || function (s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) if (e.indexOf(p[i]) < 0)\r\n            t[p[i]] = s[p[i]];\r\n    return t;\r\n};\r\n\r\n\r\nvar QueryRow = /** @class */ (function (_super) {\r\n    __extends(QueryRow, _super);\r\n    function QueryRow(props) {\r\n        var _this = _super.call(this, props) || this;\r\n        _this.handleChangeQuery = function (value) {\r\n            var _a = _this.props, index = _a.index, onChangeQuery = _a.onChangeQuery;\r\n            var query = _this.state.query;\r\n            var edited = query !== value;\r\n            _this.setState({ edited: edited, query: value });\r\n            if (onChangeQuery) {\r\n                onChangeQuery(value, index);\r\n            }\r\n        };\r\n        _this.handleClickAddButton = function () {\r\n            var _a = _this.props, index = _a.index, onAddQueryRow = _a.onAddQueryRow;\r\n            if (onAddQueryRow) {\r\n                onAddQueryRow(index);\r\n            }\r\n        };\r\n        _this.handleClickRemoveButton = function () {\r\n            var _a = _this.props, index = _a.index, onRemoveQueryRow = _a.onRemoveQueryRow;\r\n            if (onRemoveQueryRow) {\r\n                onRemoveQueryRow(index);\r\n            }\r\n        };\r\n        _this.handlePressEnter = function () {\r\n            var onExecuteQuery = _this.props.onExecuteQuery;\r\n            if (onExecuteQuery) {\r\n                onExecuteQuery();\r\n            }\r\n        };\r\n        _this.state = {\r\n            edited: false,\r\n            query: props.query || '',\r\n        };\r\n        return _this;\r\n    }\r\n    QueryRow.prototype.render = function () {\r\n        var request = this.props.request;\r\n        var _a = this.state, edited = _a.edited, query = _a.query;\r\n        return (__WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(\"div\", { className: \"query-row\" },\r\n            __WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(\"div\", { className: \"query-row-tools\" },\r\n                __WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(\"button\", { className: \"btn navbar-button navbar-button--tight\", onClick: this.handleClickAddButton },\r\n                    __WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(\"i\", { className: \"fa fa-plus\" })),\r\n                __WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(\"button\", { className: \"btn navbar-button navbar-button--tight\", onClick: this.handleClickRemoveButton },\r\n                    __WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(\"i\", { className: \"fa fa-minus\" }))),\r\n            __WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(\"div\", { className: \"query-field-wrapper\" },\r\n                __WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_1__QueryField__[\"a\" /* default */], { initialQuery: edited ? null : query, onPressEnter: this.handlePressEnter, onQueryChange: this.handleChangeQuery, placeholder: \"Enter a PromQL query\", request: request }))));\r\n    };\r\n    return QueryRow;\r\n}(__WEBPACK_IMPORTED_MODULE_0_react__[\"PureComponent\"]));\r\nvar QueryRows = /** @class */ (function (_super) {\r\n    __extends(QueryRows, _super);\r\n    function QueryRows() {\r\n        return _super !== null && _super.apply(this, arguments) || this;\r\n    }\r\n    QueryRows.prototype.render = function () {\r\n        var _a = this.props, _b = _a.className, className = _b === void 0 ? '' : _b, queries = _a.queries, handlers = __rest(_a, [\"className\", \"queries\"]);\r\n        return (__WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(\"div\", { className: className }, queries.map(function (q, index) { return __WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(QueryRow, __assign({ key: q.key, index: index, query: q.query }, handlers)); })));\r\n    };\r\n    return QueryRows;\r\n}(__WEBPACK_IMPORTED_MODULE_0_react__[\"PureComponent\"]));\r\n/* harmony default export */ __webpack_exports__[\"a\"] = (QueryRows);\r\n\n\n/***/ }),\n\n/***/ 1708:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_react__ = __webpack_require__(2);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_react___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_react__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_react_dom__ = __webpack_require__(27);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_react_dom___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1_react_dom__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_slate__ = __webpack_require__(99);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3_slate_react__ = __webpack_require__(602);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4_slate_plain_serializer__ = __webpack_require__(271);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__utils_dom__ = __webpack_require__(1709);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6__slate_plugins_braces__ = __webpack_require__(1710);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7__slate_plugins_clear__ = __webpack_require__(1711);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_8__slate_plugins_newline__ = __webpack_require__(1712);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_9__slate_plugins_prism_index__ = __webpack_require__(1713);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_10__slate_plugins_runner__ = __webpack_require__(1715);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_11__utils_debounce__ = __webpack_require__(1716);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_12__utils_prometheus__ = __webpack_require__(1717);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_13__Typeahead__ = __webpack_require__(1718);\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nvar __assign = (this && this.__assign) || Object.assign || function(t) {\r\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n        s = arguments[i];\r\n        for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\r\n            t[p] = s[p];\r\n    }\r\n    return t;\r\n};\r\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nvar __generator = (this && this.__generator) || function (thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n};\r\n\r\n\r\n\r\n\r\n\r\n// dom also includes Element polyfills\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\nvar EMPTY_METRIC = '';\r\nvar TYPEAHEAD_DEBOUNCE = 300;\r\nfunction flattenSuggestions(s) {\r\n    return s ? s.reduce(function (acc, g) { return acc.concat(g.items); }, []) : [];\r\n}\r\nvar getInitialValue = function (query) {\r\n    return __WEBPACK_IMPORTED_MODULE_2_slate__[\"Value\"].fromJSON({\r\n        document: {\r\n            nodes: [\r\n                {\r\n                    object: 'block',\r\n                    type: 'paragraph',\r\n                    nodes: [\r\n                        {\r\n                            object: 'text',\r\n                            leaves: [\r\n                                {\r\n                                    text: query,\r\n                                },\r\n                            ],\r\n                        },\r\n                    ],\r\n                },\r\n            ],\r\n        },\r\n    });\r\n};\r\nvar Portal = /** @class */ (function (_super) {\r\n    __extends(Portal, _super);\r\n    function Portal(props) {\r\n        var _this = _super.call(this, props) || this;\r\n        _this.node = document.createElement('div');\r\n        _this.node.classList.add('explore-typeahead', \"explore-typeahead-\" + props.index);\r\n        document.body.appendChild(_this.node);\r\n        return _this;\r\n    }\r\n    Portal.prototype.componentWillUnmount = function () {\r\n        document.body.removeChild(this.node);\r\n    };\r\n    Portal.prototype.render = function () {\r\n        return __WEBPACK_IMPORTED_MODULE_1_react_dom___default.a.createPortal(this.props.children, this.node);\r\n    };\r\n    return Portal;\r\n}(__WEBPACK_IMPORTED_MODULE_0_react___default.a.Component));\r\nvar QueryField = /** @class */ (function (_super) {\r\n    __extends(QueryField, _super);\r\n    function QueryField(props, context) {\r\n        var _this = _super.call(this, props, context) || this;\r\n        _this.onChange = function (_a) {\r\n            var value = _a.value;\r\n            var changed = value.document !== _this.state.value.document;\r\n            _this.setState({ value: value }, function () {\r\n                if (changed) {\r\n                    _this.handleChangeQuery();\r\n                }\r\n            });\r\n            window.requestAnimationFrame(_this.handleTypeahead);\r\n        };\r\n        _this.onMetricsReceived = function () {\r\n            if (!_this.state.metrics) {\r\n                return;\r\n            }\r\n            Object(__WEBPACK_IMPORTED_MODULE_9__slate_plugins_prism_index__[\"a\" /* configurePrismMetricsTokens */])(_this.state.metrics);\r\n            // Trigger re-render\r\n            window.requestAnimationFrame(function () {\r\n                // Bogus edit to trigger highlighting\r\n                var change = _this.state.value\r\n                    .change()\r\n                    .insertText(' ')\r\n                    .deleteBackward(1);\r\n                _this.onChange(change);\r\n            });\r\n        };\r\n        _this.request = function (url) {\r\n            if (_this.props.request) {\r\n                return _this.props.request(url);\r\n            }\r\n            return fetch(url);\r\n        };\r\n        _this.handleChangeQuery = function () {\r\n            // Send text change to parent\r\n            var onQueryChange = _this.props.onQueryChange;\r\n            if (onQueryChange) {\r\n                onQueryChange(__WEBPACK_IMPORTED_MODULE_4_slate_plain_serializer__[\"default\"].serialize(_this.state.value));\r\n            }\r\n        };\r\n        _this.handleTypeahead = Object(__WEBPACK_IMPORTED_MODULE_11__utils_debounce__[\"a\" /* default */])(function () {\r\n            var selection = window.getSelection();\r\n            if (selection.anchorNode) {\r\n                var wrapperNode = selection.anchorNode.parentElement;\r\n                var editorNode = wrapperNode.closest('.query-field');\r\n                if (!editorNode || _this.state.value.isBlurred) {\r\n                    // Not inside this editor\r\n                    return;\r\n                }\r\n                var range = selection.getRangeAt(0);\r\n                var text = selection.anchorNode.textContent;\r\n                var offset = range.startOffset;\r\n                var prefix_1 = Object(__WEBPACK_IMPORTED_MODULE_12__utils_prometheus__[\"b\" /* cleanText */])(text.substr(0, offset));\r\n                // Determine candidates by context\r\n                var suggestionGroups = [];\r\n                var wrapperClasses = wrapperNode.classList;\r\n                var typeaheadContext = null;\r\n                // Take first metric as lucky guess\r\n                var metricNode = editorNode.querySelector('.metric');\r\n                if (wrapperClasses.contains('context-range')) {\r\n                    // Rate ranges\r\n                    typeaheadContext = 'context-range';\r\n                    suggestionGroups.push({\r\n                        label: 'Range vector',\r\n                        items: __WEBPACK_IMPORTED_MODULE_12__utils_prometheus__[\"a\" /* RATE_RANGES */].slice(),\r\n                    });\r\n                }\r\n                else if (wrapperClasses.contains('context-labels') && metricNode) {\r\n                    var metric = metricNode.textContent;\r\n                    var labelKeys = _this.state.labelKeys[metric];\r\n                    if (labelKeys) {\r\n                        if ((text && text.startsWith('=')) || wrapperClasses.contains('attr-value')) {\r\n                            // Label values\r\n                            var labelKeyNode = Object(__WEBPACK_IMPORTED_MODULE_5__utils_dom__[\"b\" /* getPreviousCousin */])(wrapperNode, '.attr-name');\r\n                            if (labelKeyNode) {\r\n                                var labelKey = labelKeyNode.textContent;\r\n                                var labelValues = _this.state.labelValues[metric][labelKey];\r\n                                typeaheadContext = 'context-label-values';\r\n                                suggestionGroups.push({\r\n                                    label: 'Label values',\r\n                                    items: labelValues,\r\n                                });\r\n                            }\r\n                        }\r\n                        else {\r\n                            // Label keys\r\n                            typeaheadContext = 'context-labels';\r\n                            suggestionGroups.push({ label: 'Labels', items: labelKeys });\r\n                        }\r\n                    }\r\n                    else {\r\n                        _this.fetchMetricLabels(metric);\r\n                    }\r\n                }\r\n                else if (wrapperClasses.contains('context-labels') && !metricNode) {\r\n                    // Empty name queries\r\n                    var defaultKeys = ['job', 'instance'];\r\n                    // Munge all keys that we have seen together\r\n                    var labelKeys = Object.keys(_this.state.labelKeys).reduce(function (acc, metric) {\r\n                        return acc.concat(_this.state.labelKeys[metric].filter(function (key) { return acc.indexOf(key) === -1; }));\r\n                    }, defaultKeys);\r\n                    if ((text && text.startsWith('=')) || wrapperClasses.contains('attr-value')) {\r\n                        // Label values\r\n                        var labelKeyNode = Object(__WEBPACK_IMPORTED_MODULE_5__utils_dom__[\"b\" /* getPreviousCousin */])(wrapperNode, '.attr-name');\r\n                        if (labelKeyNode) {\r\n                            var labelKey = labelKeyNode.textContent;\r\n                            if (_this.state.labelValues[EMPTY_METRIC]) {\r\n                                var labelValues = _this.state.labelValues[EMPTY_METRIC][labelKey];\r\n                                typeaheadContext = 'context-label-values';\r\n                                suggestionGroups.push({\r\n                                    label: 'Label values',\r\n                                    items: labelValues,\r\n                                });\r\n                            }\r\n                            else {\r\n                                // Can only query label values for now (API to query keys is under development)\r\n                                _this.fetchLabelValues(labelKey);\r\n                            }\r\n                        }\r\n                    }\r\n                    else {\r\n                        // Label keys\r\n                        typeaheadContext = 'context-labels';\r\n                        suggestionGroups.push({ label: 'Labels', items: labelKeys });\r\n                    }\r\n                }\r\n                else if (metricNode && wrapperClasses.contains('context-aggregation')) {\r\n                    typeaheadContext = 'context-aggregation';\r\n                    var metric = metricNode.textContent;\r\n                    var labelKeys = _this.state.labelKeys[metric];\r\n                    if (labelKeys) {\r\n                        suggestionGroups.push({ label: 'Labels', items: labelKeys });\r\n                    }\r\n                    else {\r\n                        _this.fetchMetricLabels(metric);\r\n                    }\r\n                }\r\n                else if ((_this.state.metrics && ((prefix_1 && !wrapperClasses.contains('token')) || text.match(/[+\\-*/^%]/))) ||\r\n                    wrapperClasses.contains('context-function')) {\r\n                    // Need prefix for metrics\r\n                    typeaheadContext = 'context-metrics';\r\n                    suggestionGroups.push({\r\n                        label: 'Metrics',\r\n                        items: _this.state.metrics,\r\n                    });\r\n                }\r\n                var results_1 = 0;\r\n                var filteredSuggestions = suggestionGroups.map(function (group) {\r\n                    if (group.items) {\r\n                        group.items = group.items.filter(function (c) { return c.length !== prefix_1.length && c.indexOf(prefix_1) > -1; });\r\n                        results_1 += group.items.length;\r\n                    }\r\n                    return group;\r\n                });\r\n                console.log('handleTypeahead', selection.anchorNode, wrapperClasses, text, offset, prefix_1, typeaheadContext);\r\n                _this.setState({\r\n                    typeaheadPrefix: prefix_1,\r\n                    typeaheadContext: typeaheadContext,\r\n                    typeaheadText: text,\r\n                    suggestions: results_1 > 0 ? filteredSuggestions : [],\r\n                });\r\n            }\r\n        }, TYPEAHEAD_DEBOUNCE);\r\n        _this.onKeyDown = function (event, change) {\r\n            if (_this.menuEl) {\r\n                var _a = _this.state, typeaheadIndex = _a.typeaheadIndex, suggestions = _a.suggestions;\r\n                switch (event.key) {\r\n                    case 'Escape': {\r\n                        if (_this.menuEl) {\r\n                            event.preventDefault();\r\n                            _this.resetTypeahead();\r\n                            return true;\r\n                        }\r\n                        break;\r\n                    }\r\n                    case 'Tab': {\r\n                        // Dont blur input\r\n                        event.preventDefault();\r\n                        if (!suggestions || suggestions.length === 0) {\r\n                            return undefined;\r\n                        }\r\n                        // Get the currently selected suggestion\r\n                        var flattenedSuggestions = flattenSuggestions(suggestions);\r\n                        var selected = Math.abs(typeaheadIndex);\r\n                        var selectedIndex = selected % flattenedSuggestions.length || 0;\r\n                        var suggestion = flattenedSuggestions[selectedIndex];\r\n                        _this.applyTypeahead(change, suggestion);\r\n                        return true;\r\n                    }\r\n                    case 'ArrowDown': {\r\n                        // Select next suggestion\r\n                        event.preventDefault();\r\n                        _this.setState({ typeaheadIndex: typeaheadIndex + 1 });\r\n                        break;\r\n                    }\r\n                    case 'ArrowUp': {\r\n                        // Select previous suggestion\r\n                        event.preventDefault();\r\n                        _this.setState({ typeaheadIndex: Math.max(0, typeaheadIndex - 1) });\r\n                        break;\r\n                    }\r\n                    default: {\r\n                        // console.log('default key', event.key, event.which, event.charCode, event.locale, data.key);\r\n                        break;\r\n                    }\r\n                }\r\n            }\r\n            return undefined;\r\n        };\r\n        _this.resetTypeahead = function () {\r\n            _this.setState({\r\n                suggestions: [],\r\n                typeaheadIndex: 0,\r\n                typeaheadPrefix: '',\r\n                typeaheadContext: null,\r\n            });\r\n        };\r\n        _this.handleBlur = function () {\r\n            var onBlur = _this.props.onBlur;\r\n            // If we dont wait here, menu clicks wont work because the menu\r\n            // will be gone.\r\n            _this.resetTimer = setTimeout(_this.resetTypeahead, 100);\r\n            if (onBlur) {\r\n                onBlur();\r\n            }\r\n        };\r\n        _this.handleFocus = function () {\r\n            var onFocus = _this.props.onFocus;\r\n            if (onFocus) {\r\n                onFocus();\r\n            }\r\n        };\r\n        _this.handleClickMenu = function (item) {\r\n            // Manually triggering change\r\n            var change = _this.applyTypeahead(_this.state.value.change(), item);\r\n            _this.onChange(change);\r\n        };\r\n        _this.updateMenu = function () {\r\n            var suggestions = _this.state.suggestions;\r\n            var menu = _this.menuEl;\r\n            var selection = window.getSelection();\r\n            var node = selection.anchorNode;\r\n            // No menu, nothing to do\r\n            if (!menu) {\r\n                return;\r\n            }\r\n            // No suggestions or blur, remove menu\r\n            var hasSuggesstions = suggestions && suggestions.length > 0;\r\n            if (!hasSuggesstions) {\r\n                menu.removeAttribute('style');\r\n                return;\r\n            }\r\n            // Align menu overlay to editor node\r\n            if (node) {\r\n                var rect = node.parentElement.getBoundingClientRect();\r\n                menu.style.opacity = 1;\r\n                menu.style.top = rect.top + window.scrollY + rect.height + 4 + \"px\";\r\n                menu.style.left = rect.left + window.scrollX - 2 + \"px\";\r\n            }\r\n        };\r\n        _this.menuRef = function (el) {\r\n            _this.menuEl = el;\r\n        };\r\n        _this.renderMenu = function () {\r\n            var suggestions = _this.state.suggestions;\r\n            var hasSuggesstions = suggestions && suggestions.length > 0;\r\n            if (!hasSuggesstions) {\r\n                return null;\r\n            }\r\n            // Guard selectedIndex to be within the length of the suggestions\r\n            var selectedIndex = Math.max(_this.state.typeaheadIndex, 0);\r\n            var flattenedSuggestions = flattenSuggestions(suggestions);\r\n            selectedIndex = selectedIndex % flattenedSuggestions.length || 0;\r\n            var selectedKeys = flattenedSuggestions.length > 0 ? [flattenedSuggestions[selectedIndex]] : [];\r\n            // Create typeahead in DOM root so we can later position it absolutely\r\n            return (__WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(Portal, null,\r\n                __WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_13__Typeahead__[\"a\" /* default */], { menuRef: _this.menuRef, selectedItems: selectedKeys, onClickItem: _this.handleClickMenu, groupedItems: suggestions })));\r\n        };\r\n        _this.plugins = [\r\n            Object(__WEBPACK_IMPORTED_MODULE_6__slate_plugins_braces__[\"a\" /* default */])(),\r\n            Object(__WEBPACK_IMPORTED_MODULE_7__slate_plugins_clear__[\"a\" /* default */])(),\r\n            Object(__WEBPACK_IMPORTED_MODULE_10__slate_plugins_runner__[\"a\" /* default */])({ handler: props.onPressEnter }),\r\n            Object(__WEBPACK_IMPORTED_MODULE_8__slate_plugins_newline__[\"a\" /* default */])(),\r\n            Object(__WEBPACK_IMPORTED_MODULE_9__slate_plugins_prism_index__[\"b\" /* default */])(),\r\n        ];\r\n        _this.state = {\r\n            labelKeys: {},\r\n            labelValues: {},\r\n            metrics: props.metrics || [],\r\n            suggestions: [],\r\n            typeaheadIndex: 0,\r\n            typeaheadPrefix: '',\r\n            value: getInitialValue(props.initialQuery || ''),\r\n        };\r\n        return _this;\r\n    }\r\n    QueryField.prototype.componentDidMount = function () {\r\n        this.updateMenu();\r\n        if (this.props.metrics === undefined) {\r\n            this.fetchMetricNames();\r\n        }\r\n    };\r\n    QueryField.prototype.componentWillUnmount = function () {\r\n        clearTimeout(this.resetTimer);\r\n    };\r\n    QueryField.prototype.componentDidUpdate = function () {\r\n        this.updateMenu();\r\n    };\r\n    QueryField.prototype.componentWillReceiveProps = function (nextProps) {\r\n        if (nextProps.metrics && nextProps.metrics !== this.props.metrics) {\r\n            this.setState({ metrics: nextProps.metrics }, this.onMetricsReceived);\r\n        }\r\n        // initialQuery is null in case the user typed\r\n        if (nextProps.initialQuery !== null && nextProps.initialQuery !== this.props.initialQuery) {\r\n            this.setState({ value: getInitialValue(nextProps.initialQuery) });\r\n        }\r\n    };\r\n    QueryField.prototype.applyTypeahead = function (change, suggestion) {\r\n        var _a = this.state, typeaheadPrefix = _a.typeaheadPrefix, typeaheadContext = _a.typeaheadContext, typeaheadText = _a.typeaheadText;\r\n        // Modify suggestion based on context\r\n        switch (typeaheadContext) {\r\n            case 'context-labels': {\r\n                var nextChar = Object(__WEBPACK_IMPORTED_MODULE_5__utils_dom__[\"a\" /* getNextCharacter */])();\r\n                if (!nextChar || nextChar === '}' || nextChar === ',') {\r\n                    suggestion += '=';\r\n                }\r\n                break;\r\n            }\r\n            case 'context-label-values': {\r\n                // Always add quotes and remove existing ones instead\r\n                if (!(typeaheadText.startsWith('=\"') || typeaheadText.startsWith('\"'))) {\r\n                    suggestion = \"\\\"\" + suggestion;\r\n                }\r\n                if (Object(__WEBPACK_IMPORTED_MODULE_5__utils_dom__[\"a\" /* getNextCharacter */])() !== '\"') {\r\n                    suggestion = suggestion + \"\\\"\";\r\n                }\r\n                break;\r\n            }\r\n            default:\r\n        }\r\n        this.resetTypeahead();\r\n        // Remove the current, incomplete text and replace it with the selected suggestion\r\n        var backward = typeaheadPrefix.length;\r\n        var text = Object(__WEBPACK_IMPORTED_MODULE_12__utils_prometheus__[\"b\" /* cleanText */])(typeaheadText);\r\n        var suffixLength = text.length - typeaheadPrefix.length;\r\n        var offset = typeaheadText.indexOf(typeaheadPrefix);\r\n        var midWord = typeaheadPrefix && ((suffixLength > 0 && offset > -1) || suggestion === typeaheadText);\r\n        var forward = midWord ? suffixLength + offset : 0;\r\n        return (change\r\n            // TODO this line breaks if cursor was moved left and length is longer than whole prefix\r\n            .deleteBackward(backward)\r\n            .deleteForward(forward)\r\n            .insertText(suggestion)\r\n            .focus());\r\n    };\r\n    QueryField.prototype.fetchLabelValues = function (key) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var _a, _b, url, res, body, pairs, values, labelValues, e_1;\r\n            return __generator(this, function (_c) {\r\n                switch (_c.label) {\r\n                    case 0:\r\n                        url = \"/api/v1/label/\" + key + \"/values\";\r\n                        _c.label = 1;\r\n                    case 1:\r\n                        _c.trys.push([1, 4, , 5]);\r\n                        return [4 /*yield*/, this.request(url)];\r\n                    case 2:\r\n                        res = _c.sent();\r\n                        return [4 /*yield*/, (res.data || res.json())];\r\n                    case 3:\r\n                        body = _c.sent();\r\n                        pairs = this.state.labelValues[EMPTY_METRIC];\r\n                        values = __assign({}, pairs, (_a = {}, _a[key] = body.data, _a));\r\n                        labelValues = __assign({}, this.state.labelValues, (_b = {}, _b[EMPTY_METRIC] = values, _b));\r\n                        this.setState({ labelValues: labelValues }, this.handleTypeahead);\r\n                        return [3 /*break*/, 5];\r\n                    case 4:\r\n                        e_1 = _c.sent();\r\n                        if (this.props.onRequestError) {\r\n                            this.props.onRequestError(e_1);\r\n                        }\r\n                        else {\r\n                            console.error(e_1);\r\n                        }\r\n                        return [3 /*break*/, 5];\r\n                    case 5: return [2 /*return*/];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    QueryField.prototype.fetchMetricLabels = function (name) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var _a, _b, url, res, body, _c, keys, values, labelKeys, labelValues, e_2;\r\n            return __generator(this, function (_d) {\r\n                switch (_d.label) {\r\n                    case 0:\r\n                        url = \"/api/v1/series?match[]=\" + name;\r\n                        _d.label = 1;\r\n                    case 1:\r\n                        _d.trys.push([1, 4, , 5]);\r\n                        return [4 /*yield*/, this.request(url)];\r\n                    case 2:\r\n                        res = _d.sent();\r\n                        return [4 /*yield*/, (res.data || res.json())];\r\n                    case 3:\r\n                        body = _d.sent();\r\n                        _c = Object(__WEBPACK_IMPORTED_MODULE_12__utils_prometheus__[\"c\" /* processLabels */])(body.data), keys = _c.keys, values = _c.values;\r\n                        labelKeys = __assign({}, this.state.labelKeys, (_a = {}, _a[name] = keys, _a));\r\n                        labelValues = __assign({}, this.state.labelValues, (_b = {}, _b[name] = values, _b));\r\n                        this.setState({ labelKeys: labelKeys, labelValues: labelValues }, this.handleTypeahead);\r\n                        return [3 /*break*/, 5];\r\n                    case 4:\r\n                        e_2 = _d.sent();\r\n                        if (this.props.onRequestError) {\r\n                            this.props.onRequestError(e_2);\r\n                        }\r\n                        else {\r\n                            console.error(e_2);\r\n                        }\r\n                        return [3 /*break*/, 5];\r\n                    case 5: return [2 /*return*/];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    QueryField.prototype.fetchMetricNames = function () {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var url, res, body, error_1;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0:\r\n                        url = '/api/v1/label/__name__/values';\r\n                        _a.label = 1;\r\n                    case 1:\r\n                        _a.trys.push([1, 4, , 5]);\r\n                        return [4 /*yield*/, this.request(url)];\r\n                    case 2:\r\n                        res = _a.sent();\r\n                        return [4 /*yield*/, (res.data || res.json())];\r\n                    case 3:\r\n                        body = _a.sent();\r\n                        this.setState({ metrics: body.data }, this.onMetricsReceived);\r\n                        return [3 /*break*/, 5];\r\n                    case 4:\r\n                        error_1 = _a.sent();\r\n                        if (this.props.onRequestError) {\r\n                            this.props.onRequestError(error_1);\r\n                        }\r\n                        else {\r\n                            console.error(error_1);\r\n                        }\r\n                        return [3 /*break*/, 5];\r\n                    case 5: return [2 /*return*/];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    QueryField.prototype.render = function () {\r\n        return (__WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(\"div\", { className: \"query-field\" },\r\n            this.renderMenu(),\r\n            __WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_3_slate_react__[\"Editor\"], { autoCorrect: false, onBlur: this.handleBlur, onKeyDown: this.onKeyDown, onChange: this.onChange, onFocus: this.handleFocus, placeholder: this.props.placeholder, plugins: this.plugins, spellCheck: false, value: this.state.value })));\r\n    };\r\n    return QueryField;\r\n}(__WEBPACK_IMPORTED_MODULE_0_react___default.a.Component));\r\n/* harmony default export */ __webpack_exports__[\"a\"] = (QueryField);\r\n\n\n/***/ }),\n\n/***/ 1709:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony export (immutable) */ __webpack_exports__[\"b\"] = getPreviousCousin;\n/* harmony export (immutable) */ __webpack_exports__[\"a\"] = getNextCharacter;\n// Node.closest() polyfill\r\nif ('Element' in window && !Element.prototype.closest) {\r\n    Element.prototype.closest = function (s) {\r\n        var matches = (this.document || this.ownerDocument).querySelectorAll(s);\r\n        var el = this;\r\n        var i;\r\n        // eslint-disable-next-line\r\n        do {\r\n            i = matches.length;\r\n            // eslint-disable-next-line\r\n            while (--i >= 0 && matches.item(i) !== el) { }\r\n        } while (i < 0 && (el = el.parentElement));\r\n        return el;\r\n    };\r\n}\r\nfunction getPreviousCousin(node, selector) {\r\n    var sibling = node.parentElement.previousSibling;\r\n    var el;\r\n    while (sibling) {\r\n        el = sibling.querySelector(selector);\r\n        if (el) {\r\n            return el;\r\n        }\r\n        sibling = sibling.previousSibling;\r\n    }\r\n    return undefined;\r\n}\r\nfunction getNextCharacter(global) {\r\n    if (global === void 0) { global = window; }\r\n    var selection = global.getSelection();\r\n    if (!selection.anchorNode) {\r\n        return null;\r\n    }\r\n    var range = selection.getRangeAt(0);\r\n    var text = selection.anchorNode.textContent;\r\n    var offset = range.startOffset;\r\n    return text.substr(offset, 1);\r\n}\r\n\n\n/***/ }),\n\n/***/ 1710:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony export (immutable) */ __webpack_exports__[\"a\"] = BracesPlugin;\nvar BRACES = {\r\n    '[': ']',\r\n    '{': '}',\r\n    '(': ')',\r\n};\r\nfunction BracesPlugin() {\r\n    return {\r\n        onKeyDown: function (event, change) {\r\n            var value = change.value;\r\n            if (!value.isCollapsed) {\r\n                return undefined;\r\n            }\r\n            switch (event.key) {\r\n                case '{':\r\n                case '[': {\r\n                    event.preventDefault();\r\n                    // Insert matching braces\r\n                    change\r\n                        .insertText(\"\" + event.key + BRACES[event.key])\r\n                        .move(-1)\r\n                        .focus();\r\n                    return true;\r\n                }\r\n                case '(': {\r\n                    event.preventDefault();\r\n                    var text = value.anchorText.text;\r\n                    var offset = value.anchorOffset;\r\n                    var space = text.indexOf(' ', offset);\r\n                    var length_1 = space > 0 ? space : text.length;\r\n                    var forward = length_1 - offset;\r\n                    // Insert matching braces\r\n                    change\r\n                        .insertText(event.key)\r\n                        .move(forward)\r\n                        .insertText(BRACES[event.key])\r\n                        .move(-1 - forward)\r\n                        .focus();\r\n                    return true;\r\n                }\r\n                default: {\r\n                    break;\r\n                }\r\n            }\r\n            return undefined;\r\n        },\r\n    };\r\n}\r\n\n\n/***/ }),\n\n/***/ 1711:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony export (immutable) */ __webpack_exports__[\"a\"] = ClearPlugin;\n// Clears the rest of the line after the caret\r\nfunction ClearPlugin() {\r\n    return {\r\n        onKeyDown: function (event, change) {\r\n            var value = change.value;\r\n            if (!value.isCollapsed) {\r\n                return undefined;\r\n            }\r\n            if (event.key === 'k' && event.ctrlKey) {\r\n                event.preventDefault();\r\n                var text = value.anchorText.text;\r\n                var offset = value.anchorOffset;\r\n                var length_1 = text.length;\r\n                var forward = length_1 - offset;\r\n                change.deleteForward(forward);\r\n                return true;\r\n            }\r\n            return undefined;\r\n        },\r\n    };\r\n}\r\n\n\n/***/ }),\n\n/***/ 1712:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony export (immutable) */ __webpack_exports__[\"a\"] = NewlinePlugin;\nfunction getIndent(text) {\r\n    var offset = text.length - text.trimLeft().length;\r\n    if (offset) {\r\n        var indent = text[0];\r\n        while (--offset) {\r\n            indent += text[0];\r\n        }\r\n        return indent;\r\n    }\r\n    return '';\r\n}\r\nfunction NewlinePlugin() {\r\n    return {\r\n        onKeyDown: function (event, change) {\r\n            var value = change.value;\r\n            if (!value.isCollapsed) {\r\n                return undefined;\r\n            }\r\n            if (event.key === 'Enter' && event.shiftKey) {\r\n                event.preventDefault();\r\n                var startBlock = value.startBlock;\r\n                var currentLineText = startBlock.text;\r\n                var indent = getIndent(currentLineText);\r\n                return change\r\n                    .splitBlock()\r\n                    .insertText(indent)\r\n                    .focus();\r\n            }\r\n        },\r\n    };\r\n}\r\n\n\n/***/ }),\n\n/***/ 1713:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony export (immutable) */ __webpack_exports__[\"a\"] = configurePrismMetricsTokens;\n/* harmony export (immutable) */ __webpack_exports__[\"b\"] = PrismPlugin;\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_react__ = __webpack_require__(2);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_react___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_react__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_prismjs__ = __webpack_require__(603);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_prismjs___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1_prismjs__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__promql__ = __webpack_require__(1714);\n\r\n\r\n\r\n__WEBPACK_IMPORTED_MODULE_1_prismjs___default.a.languages.promql = __WEBPACK_IMPORTED_MODULE_2__promql__[\"a\" /* default */];\r\nvar TOKEN_MARK = 'prism-token';\r\nfunction configurePrismMetricsTokens(metrics) {\r\n    __WEBPACK_IMPORTED_MODULE_1_prismjs___default.a.languages.promql.metric = {\r\n        alias: 'variable',\r\n        pattern: new RegExp(\"(?:^|\\\\s)(\" + metrics.join('|') + \")(?:$|\\\\s)\"),\r\n    };\r\n}\r\n/**\r\n * Code-highlighting plugin based on Prism and\r\n * https://github.com/ianstormtaylor/slate/blob/master/examples/code-highlighting/index.js\r\n *\r\n * (Adapted to handle nested grammar definitions.)\r\n */\r\nfunction PrismPlugin() {\r\n    return {\r\n        /**\r\n         * Render a Slate mark with appropiate CSS class names\r\n         *\r\n         * @param {Object} props\r\n         * @return {Element}\r\n         */\r\n        renderMark: function (props) {\r\n            var children = props.children, mark = props.mark;\r\n            // Only apply spans to marks identified by this plugin\r\n            if (mark.type !== TOKEN_MARK) {\r\n                return undefined;\r\n            }\r\n            var className = \"token \" + mark.data.get('types');\r\n            return __WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(\"span\", { className: className }, children);\r\n        },\r\n        /**\r\n         * Decorate code blocks with Prism.js highlighting.\r\n         *\r\n         * @param {Node} node\r\n         * @return {Array}\r\n         */\r\n        decorateNode: function (node) {\r\n            if (node.type !== 'paragraph') {\r\n                return [];\r\n            }\r\n            var texts = node.getTexts().toArray();\r\n            var tstring = texts.map(function (t) { return t.text; }).join('\\n');\r\n            var grammar = __WEBPACK_IMPORTED_MODULE_1_prismjs___default.a.languages.promql;\r\n            var tokens = __WEBPACK_IMPORTED_MODULE_1_prismjs___default.a.tokenize(tstring, grammar);\r\n            var decorations = [];\r\n            var startText = texts.shift();\r\n            var endText = startText;\r\n            var startOffset = 0;\r\n            var endOffset = 0;\r\n            var start = 0;\r\n            function processToken(token, acc) {\r\n                // Accumulate token types down the tree\r\n                var types = (acc || '') + \" \" + (token.type || '') + \" \" + (token.alias || '');\r\n                // Add mark for token node\r\n                if (typeof token === 'string' || typeof token.content === 'string') {\r\n                    startText = endText;\r\n                    startOffset = endOffset;\r\n                    var content = typeof token === 'string' ? token : token.content;\r\n                    var newlines = content.split('\\n').length - 1;\r\n                    var length_1 = content.length - newlines;\r\n                    var end = start + length_1;\r\n                    var available = startText.text.length - startOffset;\r\n                    var remaining = length_1;\r\n                    endOffset = startOffset + remaining;\r\n                    while (available < remaining) {\r\n                        endText = texts.shift();\r\n                        remaining = length_1 - available;\r\n                        available = endText.text.length;\r\n                        endOffset = remaining;\r\n                    }\r\n                    // Inject marks from up the tree (acc) as well\r\n                    if (typeof token !== 'string' || acc) {\r\n                        var range = {\r\n                            anchorKey: startText.key,\r\n                            anchorOffset: startOffset,\r\n                            focusKey: endText.key,\r\n                            focusOffset: endOffset,\r\n                            marks: [{ type: TOKEN_MARK, data: { types: types } }],\r\n                        };\r\n                        decorations.push(range);\r\n                    }\r\n                    start = end;\r\n                }\r\n                else if (token.content && token.content.length) {\r\n                    // Tokens can be nested\r\n                    for (var _i = 0, _a = token.content; _i < _a.length; _i++) {\r\n                        var subToken = _a[_i];\r\n                        processToken(subToken, types);\r\n                    }\r\n                }\r\n            }\r\n            // Process top-level tokens\r\n            for (var _i = 0, tokens_1 = tokens; _i < tokens_1.length; _i++) {\r\n                var token = tokens_1[_i];\r\n                processToken(token);\r\n            }\r\n            return decorations;\r\n        },\r\n    };\r\n}\r\n\n\n/***/ }),\n\n/***/ 1714:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* unused harmony export OPERATORS */\n/* unused harmony export FUNCTIONS */\nvar OPERATORS = ['by', 'group_left', 'group_right', 'ignoring', 'on', 'offset', 'without'];\r\nvar AGGREGATION_OPERATORS = [\r\n    'sum',\r\n    'min',\r\n    'max',\r\n    'avg',\r\n    'stddev',\r\n    'stdvar',\r\n    'count',\r\n    'count_values',\r\n    'bottomk',\r\n    'topk',\r\n    'quantile',\r\n];\r\nvar FUNCTIONS = AGGREGATION_OPERATORS.concat([\r\n    'abs',\r\n    'absent',\r\n    'ceil',\r\n    'changes',\r\n    'clamp_max',\r\n    'clamp_min',\r\n    'count_scalar',\r\n    'day_of_month',\r\n    'day_of_week',\r\n    'days_in_month',\r\n    'delta',\r\n    'deriv',\r\n    'drop_common_labels',\r\n    'exp',\r\n    'floor',\r\n    'histogram_quantile',\r\n    'holt_winters',\r\n    'hour',\r\n    'idelta',\r\n    'increase',\r\n    'irate',\r\n    'label_replace',\r\n    'ln',\r\n    'log2',\r\n    'log10',\r\n    'minute',\r\n    'month',\r\n    'predict_linear',\r\n    'rate',\r\n    'resets',\r\n    'round',\r\n    'scalar',\r\n    'sort',\r\n    'sort_desc',\r\n    'sqrt',\r\n    'time',\r\n    'vector',\r\n    'year',\r\n    'avg_over_time',\r\n    'min_over_time',\r\n    'max_over_time',\r\n    'sum_over_time',\r\n    'count_over_time',\r\n    'quantile_over_time',\r\n    'stddev_over_time',\r\n    'stdvar_over_time',\r\n]);\r\nvar tokenizer = {\r\n    comment: {\r\n        pattern: /(^|[^\\n])#.*/,\r\n        lookbehind: true,\r\n    },\r\n    'context-aggregation': {\r\n        pattern: /((by|without)\\s*)\\([^)]*\\)/,\r\n        lookbehind: true,\r\n        inside: {\r\n            'label-key': {\r\n                pattern: /[^,\\s][^,]*[^,\\s]*/,\r\n                alias: 'attr-name',\r\n            },\r\n        },\r\n    },\r\n    'context-labels': {\r\n        pattern: /\\{[^}]*(?=})/,\r\n        inside: {\r\n            'label-key': {\r\n                pattern: /[a-z_]\\w*(?=\\s*(=|!=|=~|!~))/,\r\n                alias: 'attr-name',\r\n            },\r\n            'label-value': {\r\n                pattern: /\"(?:\\\\.|[^\\\\\"])*\"/,\r\n                greedy: true,\r\n                alias: 'attr-value',\r\n            },\r\n        },\r\n    },\r\n    function: new RegExp(\"\\\\b(?:\" + FUNCTIONS.join('|') + \")(?=\\\\s*\\\\()\", 'i'),\r\n    'context-range': [\r\n        {\r\n            pattern: /\\[[^\\]]*(?=])/,\r\n            inside: {\r\n                'range-duration': {\r\n                    pattern: /\\b\\d+[smhdwy]\\b/i,\r\n                    alias: 'number',\r\n                },\r\n            },\r\n        },\r\n        {\r\n            pattern: /(offset\\s+)\\w+/,\r\n            lookbehind: true,\r\n            inside: {\r\n                'range-duration': {\r\n                    pattern: /\\b\\d+[smhdwy]\\b/i,\r\n                    alias: 'number',\r\n                },\r\n            },\r\n        },\r\n    ],\r\n    number: /\\b-?\\d+((\\.\\d*)?([eE][+-]?\\d+)?)?\\b/,\r\n    operator: new RegExp(\"/[-+*/=%^~]|&&?|\\\\|?\\\\||!=?|<(?:=>?|<|>)?|>[>=]?|\\\\b(?:\" + OPERATORS.join('|') + \")\\\\b\", 'i'),\r\n    punctuation: /[{};()`,.]/,\r\n};\r\n/* harmony default export */ __webpack_exports__[\"a\"] = (tokenizer);\r\n\n\n/***/ }),\n\n/***/ 1715:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony export (immutable) */ __webpack_exports__[\"a\"] = RunnerPlugin;\nfunction RunnerPlugin(_a) {\r\n    var handler = _a.handler;\r\n    return {\r\n        onKeyDown: function (event) {\r\n            // Handle enter\r\n            if (handler && event.key === 'Enter' && !event.shiftKey) {\r\n                // Submit on Enter\r\n                event.preventDefault();\r\n                handler(event);\r\n                return true;\r\n            }\r\n            return undefined;\r\n        },\r\n    };\r\n}\r\n\n\n/***/ }),\n\n/***/ 1716:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony export (immutable) */ __webpack_exports__[\"a\"] = debounce;\n// Based on underscore.js debounce()\r\nfunction debounce(func, wait) {\r\n    var timeout;\r\n    return function () {\r\n        var context = this;\r\n        var args = arguments;\r\n        var later = function () {\r\n            timeout = null;\r\n            func.apply(context, args);\r\n        };\r\n        clearTimeout(timeout);\r\n        timeout = setTimeout(later, wait);\r\n    };\r\n}\r\n\n\n/***/ }),\n\n/***/ 1717:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"a\", function() { return RATE_RANGES; });\n/* harmony export (immutable) */ __webpack_exports__[\"c\"] = processLabels;\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"b\", function() { return cleanText; });\nvar __rest = (this && this.__rest) || function (s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) if (e.indexOf(p[i]) < 0)\r\n            t[p[i]] = s[p[i]];\r\n    return t;\r\n};\r\nvar RATE_RANGES = ['1m', '5m', '10m', '30m', '1h'];\r\nfunction processLabels(labels) {\r\n    var values = {};\r\n    labels.forEach(function (l) {\r\n        var __name__ = l.__name__, rest = __rest(l, [\"__name__\"]);\r\n        Object.keys(rest).forEach(function (key) {\r\n            if (!values[key]) {\r\n                values[key] = [];\r\n            }\r\n            if (values[key].indexOf(rest[key]) === -1) {\r\n                values[key].push(rest[key]);\r\n            }\r\n        });\r\n    });\r\n    return { values: values, keys: Object.keys(values) };\r\n}\r\n// Strip syntax chars\r\nvar cleanText = function (s) { return s.replace(/[{}[\\]=\"(),!~+\\-*/^%]/g, '').trim(); };\r\n\n\n/***/ }),\n\n/***/ 1718:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_react__ = __webpack_require__(2);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_react___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_react__);\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nvar __assign = (this && this.__assign) || Object.assign || function(t) {\r\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n        s = arguments[i];\r\n        for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\r\n            t[p] = s[p];\r\n    }\r\n    return t;\r\n};\r\n\r\nfunction scrollIntoView(el) {\r\n    if (!el || !el.offsetParent) {\r\n        return;\r\n    }\r\n    var container = el.offsetParent;\r\n    if (el.offsetTop > container.scrollTop + container.offsetHeight || el.offsetTop < container.scrollTop) {\r\n        container.scrollTop = el.offsetTop - container.offsetTop;\r\n    }\r\n}\r\nvar TypeaheadItem = /** @class */ (function (_super) {\r\n    __extends(TypeaheadItem, _super);\r\n    function TypeaheadItem() {\r\n        var _this = _super !== null && _super.apply(this, arguments) || this;\r\n        _this.getRef = function (el) {\r\n            _this.el = el;\r\n        };\r\n        return _this;\r\n    }\r\n    TypeaheadItem.prototype.componentDidUpdate = function (prevProps) {\r\n        if (this.props.isSelected && !prevProps.isSelected) {\r\n            scrollIntoView(this.el);\r\n        }\r\n    };\r\n    TypeaheadItem.prototype.render = function () {\r\n        var _a = this.props, isSelected = _a.isSelected, label = _a.label, onClickItem = _a.onClickItem;\r\n        var className = isSelected ? 'typeahead-item typeahead-item__selected' : 'typeahead-item';\r\n        var onClick = function () { return onClickItem(label); };\r\n        return (__WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(\"li\", { ref: this.getRef, className: className, onClick: onClick }, label));\r\n    };\r\n    return TypeaheadItem;\r\n}(__WEBPACK_IMPORTED_MODULE_0_react___default.a.PureComponent));\r\nvar TypeaheadGroup = /** @class */ (function (_super) {\r\n    __extends(TypeaheadGroup, _super);\r\n    function TypeaheadGroup() {\r\n        return _super !== null && _super.apply(this, arguments) || this;\r\n    }\r\n    TypeaheadGroup.prototype.render = function () {\r\n        var _a = this.props, items = _a.items, label = _a.label, selected = _a.selected, onClickItem = _a.onClickItem;\r\n        return (__WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(\"li\", { className: \"typeahead-group\" },\r\n            __WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(\"div\", { className: \"typeahead-group__title\" }, label),\r\n            __WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(\"ul\", { className: \"typeahead-group__list\" }, items.map(function (item) { return (__WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(TypeaheadItem, { key: item, onClickItem: onClickItem, isSelected: selected.indexOf(item) > -1, label: item })); }))));\r\n    };\r\n    return TypeaheadGroup;\r\n}(__WEBPACK_IMPORTED_MODULE_0_react___default.a.PureComponent));\r\nvar Typeahead = /** @class */ (function (_super) {\r\n    __extends(Typeahead, _super);\r\n    function Typeahead() {\r\n        return _super !== null && _super.apply(this, arguments) || this;\r\n    }\r\n    Typeahead.prototype.render = function () {\r\n        var _a = this.props, groupedItems = _a.groupedItems, menuRef = _a.menuRef, selectedItems = _a.selectedItems, onClickItem = _a.onClickItem;\r\n        return (__WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(\"ul\", { className: \"typeahead\", ref: menuRef }, groupedItems.map(function (g) { return (__WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(TypeaheadGroup, __assign({ key: g.label, onClickItem: onClickItem, selected: selectedItems }, g))); })));\r\n    };\r\n    return Typeahead;\r\n}(__WEBPACK_IMPORTED_MODULE_0_react___default.a.PureComponent));\r\n/* harmony default export */ __webpack_exports__[\"a\"] = (Typeahead);\r\n\n\n/***/ }),\n\n/***/ 1719:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_jquery__ = __webpack_require__(17);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_jquery___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_jquery__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_react__ = __webpack_require__(2);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_react___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1_react__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_moment__ = __webpack_require__(0);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_moment___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_2_moment__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3_vendor_flot_jquery_flot__ = __webpack_require__(1670);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3_vendor_flot_jquery_flot___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_3_vendor_flot_jquery_flot__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4_vendor_flot_jquery_flot_time__ = __webpack_require__(1673);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4_vendor_flot_jquery_flot_time___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_4_vendor_flot_jquery_flot_time__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5_app_core_utils_datemath__ = __webpack_require__(589);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6__Legend__ = __webpack_require__(1720);\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nvar __assign = (this && this.__assign) || Object.assign || function(t) {\r\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n        s = arguments[i];\r\n        for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\r\n            t[p] = s[p];\r\n    }\r\n    return t;\r\n};\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n// Copied from graph.ts\r\nfunction time_format(ticks, min, max) {\r\n    if (min && max && ticks) {\r\n        var range = max - min;\r\n        var secPerTick = range / ticks / 1000;\r\n        var oneDay = 86400000;\r\n        var oneYear = 31536000000;\r\n        if (secPerTick <= 45) {\r\n            return '%H:%M:%S';\r\n        }\r\n        if (secPerTick <= 7200 || range <= oneDay) {\r\n            return '%H:%M';\r\n        }\r\n        if (secPerTick <= 80000) {\r\n            return '%m/%d %H:%M';\r\n        }\r\n        if (secPerTick <= 2419200 || range <= oneYear) {\r\n            return '%m/%d';\r\n        }\r\n        return '%Y-%m';\r\n    }\r\n    return '%H:%M';\r\n}\r\nvar FLOT_OPTIONS = {\r\n    legend: {\r\n        show: false,\r\n    },\r\n    series: {\r\n        lines: {\r\n            linewidth: 1,\r\n            zero: false,\r\n        },\r\n        shadowSize: 0,\r\n    },\r\n    grid: {\r\n        minBorderMargin: 0,\r\n        markings: [],\r\n        backgroundColor: null,\r\n        borderWidth: 0,\r\n        // hoverable: true,\r\n        clickable: true,\r\n        color: '#a1a1a1',\r\n        margin: { left: 0, right: 0 },\r\n        labelMarginX: 0,\r\n    },\r\n};\r\nvar Graph = /** @class */ (function (_super) {\r\n    __extends(Graph, _super);\r\n    function Graph() {\r\n        return _super !== null && _super.apply(this, arguments) || this;\r\n    }\r\n    Graph.prototype.componentDidMount = function () {\r\n        this.draw();\r\n    };\r\n    Graph.prototype.componentDidUpdate = function (prevProps) {\r\n        if (prevProps.data !== this.props.data ||\r\n            prevProps.options !== this.props.options ||\r\n            prevProps.split !== this.props.split ||\r\n            prevProps.height !== this.props.height) {\r\n            this.draw();\r\n        }\r\n    };\r\n    Graph.prototype.draw = function () {\r\n        var _a = this.props, data = _a.data, userOptions = _a.options;\r\n        if (!data) {\r\n            return;\r\n        }\r\n        var series = data.map(function (ts) { return ({\r\n            color: ts.color,\r\n            label: ts.label,\r\n            data: ts.getFlotPairs('null'),\r\n        }); });\r\n        var $el = __WEBPACK_IMPORTED_MODULE_0_jquery___default()(\"#\" + this.props.id);\r\n        var ticks = $el.width() / 100;\r\n        var _b = userOptions.range, from = _b.from, to = _b.to;\r\n        if (!__WEBPACK_IMPORTED_MODULE_2_moment___default.a.isMoment(from)) {\r\n            from = __WEBPACK_IMPORTED_MODULE_5_app_core_utils_datemath__[\"parse\"](from, false);\r\n        }\r\n        if (!__WEBPACK_IMPORTED_MODULE_2_moment___default.a.isMoment(to)) {\r\n            to = __WEBPACK_IMPORTED_MODULE_5_app_core_utils_datemath__[\"parse\"](to, true);\r\n        }\r\n        var min = from.valueOf();\r\n        var max = to.valueOf();\r\n        var dynamicOptions = {\r\n            xaxis: {\r\n                mode: 'time',\r\n                min: min,\r\n                max: max,\r\n                label: 'Datetime',\r\n                ticks: ticks,\r\n                timeformat: time_format(ticks, min, max),\r\n            },\r\n        };\r\n        var options = __assign({}, FLOT_OPTIONS, dynamicOptions, userOptions);\r\n        __WEBPACK_IMPORTED_MODULE_0_jquery___default.a.plot($el, series, options);\r\n    };\r\n    Graph.prototype.render = function () {\r\n        var _a = this.props, data = _a.data, height = _a.height;\r\n        return (__WEBPACK_IMPORTED_MODULE_1_react___default.a.createElement(\"div\", { className: \"panel-container\" },\r\n            __WEBPACK_IMPORTED_MODULE_1_react___default.a.createElement(\"div\", { id: this.props.id, className: \"explore-graph\", style: { height: height } }),\r\n            __WEBPACK_IMPORTED_MODULE_1_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_6__Legend__[\"a\" /* default */], { data: data })));\r\n    };\r\n    return Graph;\r\n}(__WEBPACK_IMPORTED_MODULE_1_react__[\"Component\"]));\r\n/* harmony default export */ __webpack_exports__[\"a\"] = (Graph);\r\n\n\n/***/ }),\n\n/***/ 1720:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_react__ = __webpack_require__(2);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_react___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_react__);\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\n\r\nvar LegendItem = function (_a) {\r\n    var series = _a.series;\r\n    return (__WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(\"div\", { className: \"graph-legend-series\" },\r\n        __WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(\"div\", { className: \"graph-legend-icon\" },\r\n            __WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(\"i\", { className: \"fa fa-minus pointer\", style: { color: series.color } })),\r\n        __WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(\"a\", { className: \"graph-legend-alias pointer\" }, series.alias)));\r\n};\r\nvar Legend = /** @class */ (function (_super) {\r\n    __extends(Legend, _super);\r\n    function Legend() {\r\n        return _super !== null && _super.apply(this, arguments) || this;\r\n    }\r\n    Legend.prototype.render = function () {\r\n        var _a = this.props, _b = _a.className, className = _b === void 0 ? '' : _b, data = _a.data;\r\n        var items = data || [];\r\n        return (__WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(\"div\", { className: className + \" graph-legend ps\" }, items.map(function (series) { return __WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(LegendItem, { key: series.id, series: series }); })));\r\n    };\r\n    return Legend;\r\n}(__WEBPACK_IMPORTED_MODULE_0_react__[\"PureComponent\"]));\r\n/* harmony default export */ __webpack_exports__[\"a\"] = (Legend);\r\n\n\n/***/ }),\n\n/***/ 1721:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_react__ = __webpack_require__(2);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_react___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_react__);\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\n\r\n// import TableModel from 'app/core/table_model';\r\nvar EMPTY_TABLE = {\r\n    columns: [],\r\n    rows: [],\r\n};\r\nvar Table = /** @class */ (function (_super) {\r\n    __extends(Table, _super);\r\n    function Table() {\r\n        return _super !== null && _super.apply(this, arguments) || this;\r\n    }\r\n    Table.prototype.render = function () {\r\n        var _a = this.props, _b = _a.className, className = _b === void 0 ? '' : _b, data = _a.data;\r\n        var tableModel = data || EMPTY_TABLE;\r\n        return (__WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(\"table\", { className: className + \" filter-table\" },\r\n            __WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(\"thead\", null,\r\n                __WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(\"tr\", null, tableModel.columns.map(function (col) { return __WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(\"th\", { key: col.text }, col.text); }))),\r\n            __WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(\"tbody\", null, tableModel.rows.map(function (row, i) { return __WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(\"tr\", { key: i }, row.map(function (content, j) { return __WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(\"td\", { key: j }, content); })); }))));\r\n    };\r\n    return Table;\r\n}(__WEBPACK_IMPORTED_MODULE_0_react__[\"PureComponent\"]));\r\n/* harmony default export */ __webpack_exports__[\"a\"] = (Table);\r\n\n\n/***/ }),\n\n/***/ 1722:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"a\", function() { return DEFAULT_RANGE; });\n/* unused harmony export parseTime */\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_react__ = __webpack_require__(2);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_react___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_react__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_moment__ = __webpack_require__(0);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_moment___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1_moment__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_app_core_utils_datemath__ = __webpack_require__(589);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3_app_core_utils_rangeutil__ = __webpack_require__(594);\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\n\r\n\r\n\r\n\r\nvar DATE_FORMAT = 'YYYY-MM-DD HH:mm:ss';\r\nvar DEFAULT_RANGE = {\r\n    from: 'now-6h',\r\n    to: 'now',\r\n};\r\nfunction parseTime(value, isUtc, asString) {\r\n    if (isUtc === void 0) { isUtc = false; }\r\n    if (asString === void 0) { asString = false; }\r\n    if (value.indexOf('now') !== -1) {\r\n        return value;\r\n    }\r\n    if (!isNaN(value)) {\r\n        var epoch = parseInt(value);\r\n        var m = isUtc ? __WEBPACK_IMPORTED_MODULE_1_moment___default.a.utc(epoch) : __WEBPACK_IMPORTED_MODULE_1_moment___default()(epoch);\r\n        return asString ? m.format(DATE_FORMAT) : m;\r\n    }\r\n    return undefined;\r\n}\r\nvar TimePicker = /** @class */ (function (_super) {\r\n    __extends(TimePicker, _super);\r\n    function TimePicker(props) {\r\n        var _this = _super.call(this, props) || this;\r\n        _this.handleChangeFrom = function (e) {\r\n            _this.setState({\r\n                fromRaw: e.target.value,\r\n            });\r\n        };\r\n        _this.handleChangeTo = function (e) {\r\n            _this.setState({\r\n                toRaw: e.target.value,\r\n            });\r\n        };\r\n        _this.handleClickApply = function () {\r\n            var onChangeTime = _this.props.onChangeTime;\r\n            var _a = _this.state, toRaw = _a.toRaw, fromRaw = _a.fromRaw;\r\n            var range = {\r\n                from: __WEBPACK_IMPORTED_MODULE_2_app_core_utils_datemath__[\"parse\"](fromRaw, false),\r\n                to: __WEBPACK_IMPORTED_MODULE_2_app_core_utils_datemath__[\"parse\"](toRaw, true),\r\n            };\r\n            var rangeString = __WEBPACK_IMPORTED_MODULE_3_app_core_utils_rangeutil__[\"b\" /* describeTimeRange */](range);\r\n            _this.setState({\r\n                isOpen: false,\r\n                rangeString: rangeString,\r\n            }, function () {\r\n                if (onChangeTime) {\r\n                    onChangeTime(range);\r\n                }\r\n            });\r\n        };\r\n        _this.handleClickLeft = function () { return _this.move(-1); };\r\n        _this.handleClickPicker = function () {\r\n            _this.setState(function (state) { return ({\r\n                isOpen: !state.isOpen,\r\n            }); });\r\n        };\r\n        _this.handleClickRight = function () { return _this.move(1); };\r\n        _this.handleClickRefresh = function () { };\r\n        _this.handleClickRelativeOption = function (range) {\r\n            var onChangeTime = _this.props.onChangeTime;\r\n            var rangeString = __WEBPACK_IMPORTED_MODULE_3_app_core_utils_rangeutil__[\"b\" /* describeTimeRange */](range);\r\n            _this.setState({\r\n                toRaw: range.to,\r\n                fromRaw: range.from,\r\n                isOpen: false,\r\n                rangeString: rangeString,\r\n            }, function () {\r\n                if (onChangeTime) {\r\n                    onChangeTime(range);\r\n                }\r\n            });\r\n        };\r\n        _this.dropdownRef = function (el) {\r\n            _this.dropdownEl = el;\r\n        };\r\n        var fromRaw = props.range ? props.range.from : DEFAULT_RANGE.from;\r\n        var toRaw = props.range ? props.range.to : DEFAULT_RANGE.to;\r\n        var range = {\r\n            from: parseTime(fromRaw),\r\n            to: parseTime(toRaw),\r\n        };\r\n        _this.state = {\r\n            fromRaw: parseTime(fromRaw, props.isUtc, true),\r\n            isOpen: props.isOpen,\r\n            isUtc: props.isUtc,\r\n            rangeString: __WEBPACK_IMPORTED_MODULE_3_app_core_utils_rangeutil__[\"b\" /* describeTimeRange */](range),\r\n            refreshInterval: '',\r\n            toRaw: parseTime(toRaw, props.isUtc, true),\r\n        };\r\n        return _this;\r\n    }\r\n    TimePicker.prototype.move = function (direction) {\r\n        var onChangeTime = this.props.onChangeTime;\r\n        var _a = this.state, fromRaw = _a.fromRaw, toRaw = _a.toRaw;\r\n        var range = {\r\n            from: __WEBPACK_IMPORTED_MODULE_2_app_core_utils_datemath__[\"parse\"](fromRaw, false),\r\n            to: __WEBPACK_IMPORTED_MODULE_2_app_core_utils_datemath__[\"parse\"](toRaw, true),\r\n        };\r\n        var timespan = (range.to.valueOf() - range.from.valueOf()) / 2;\r\n        var to, from;\r\n        if (direction === -1) {\r\n            to = range.to.valueOf() - timespan;\r\n            from = range.from.valueOf() - timespan;\r\n        }\r\n        else if (direction === 1) {\r\n            to = range.to.valueOf() + timespan;\r\n            from = range.from.valueOf() + timespan;\r\n            if (to > Date.now() && range.to < Date.now()) {\r\n                to = Date.now();\r\n                from = range.from.valueOf();\r\n            }\r\n        }\r\n        else {\r\n            to = range.to.valueOf();\r\n            from = range.from.valueOf();\r\n        }\r\n        var rangeString = __WEBPACK_IMPORTED_MODULE_3_app_core_utils_rangeutil__[\"b\" /* describeTimeRange */](range);\r\n        // No need to convert to UTC again\r\n        to = __WEBPACK_IMPORTED_MODULE_1_moment___default()(to);\r\n        from = __WEBPACK_IMPORTED_MODULE_1_moment___default()(from);\r\n        this.setState({\r\n            rangeString: rangeString,\r\n            fromRaw: from.format(DATE_FORMAT),\r\n            toRaw: to.format(DATE_FORMAT),\r\n        }, function () {\r\n            onChangeTime({ to: to, from: from });\r\n        });\r\n    };\r\n    TimePicker.prototype.getTimeOptions = function () {\r\n        return __WEBPACK_IMPORTED_MODULE_3_app_core_utils_rangeutil__[\"c\" /* getRelativeTimesList */]({}, this.state.rangeString);\r\n    };\r\n    TimePicker.prototype.renderDropdown = function () {\r\n        var _this = this;\r\n        var _a = this.state, fromRaw = _a.fromRaw, isOpen = _a.isOpen, toRaw = _a.toRaw;\r\n        if (!isOpen) {\r\n            return null;\r\n        }\r\n        var timeOptions = this.getTimeOptions();\r\n        return (__WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(\"div\", { ref: this.dropdownRef, className: \"gf-timepicker-dropdown\" },\r\n            __WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(\"div\", { className: \"gf-timepicker-absolute-section\" },\r\n                __WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(\"h3\", { className: \"section-heading\" }, \"Custom range\"),\r\n                __WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(\"label\", { className: \"small\" }, \"From:\"),\r\n                __WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(\"div\", { className: \"gf-form-inline\" },\r\n                    __WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(\"div\", { className: \"gf-form max-width-28\" },\r\n                        __WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(\"input\", { type: \"text\", className: \"gf-form-input input-large timepicker-from\", value: fromRaw, onChange: this.handleChangeFrom }))),\r\n                __WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(\"label\", { className: \"small\" }, \"To:\"),\r\n                __WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(\"div\", { className: \"gf-form-inline\" },\r\n                    __WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(\"div\", { className: \"gf-form max-width-28\" },\r\n                        __WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(\"input\", { type: \"text\", className: \"gf-form-input input-large timepicker-to\", value: toRaw, onChange: this.handleChangeTo }))),\r\n                __WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(\"div\", { className: \"gf-form\" },\r\n                    __WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(\"button\", { className: \"btn gf-form-btn btn-secondary\", onClick: this.handleClickApply }, \"Apply\"))),\r\n            __WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(\"div\", { className: \"gf-timepicker-relative-section\" },\r\n                __WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(\"h3\", { className: \"section-heading\" }, \"Quick ranges\"),\r\n                Object.keys(timeOptions).map(function (section) {\r\n                    var group = timeOptions[section];\r\n                    return (__WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(\"ul\", { key: section }, group.map(function (option) { return (__WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(\"li\", { className: option.active ? 'active' : '', key: option.display },\r\n                        __WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(\"a\", { onClick: function () { return _this.handleClickRelativeOption(option); } }, option.display))); })));\r\n                }))));\r\n    };\r\n    TimePicker.prototype.render = function () {\r\n        var _a = this.state, isUtc = _a.isUtc, rangeString = _a.rangeString, refreshInterval = _a.refreshInterval;\r\n        return (__WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(\"div\", { className: \"timepicker\" },\r\n            __WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(\"div\", { className: \"navbar-buttons\" },\r\n                __WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(\"button\", { className: \"btn navbar-button navbar-button--tight timepicker-left\", onClick: this.handleClickLeft },\r\n                    __WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(\"i\", { className: \"fa fa-chevron-left\" })),\r\n                __WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(\"button\", { className: \"btn navbar-button gf-timepicker-nav-btn\", onClick: this.handleClickPicker },\r\n                    __WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(\"i\", { className: \"fa fa-clock-o\" }),\r\n                    __WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(\"span\", { className: \"timepicker-rangestring\" }, rangeString),\r\n                    isUtc ? __WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(\"span\", { className: \"gf-timepicker-utc\" }, \"UTC\") : null,\r\n                    refreshInterval ? __WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(\"span\", { className: \"text-warning\" },\r\n                        \"\\u00A0 Refresh every \",\r\n                        refreshInterval) : null),\r\n                __WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(\"button\", { className: \"btn navbar-button navbar-button--tight timepicker-right\", onClick: this.handleClickRight },\r\n                    __WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(\"i\", { className: \"fa fa-chevron-right\" }))),\r\n            this.renderDropdown()));\r\n    };\r\n    return TimePicker;\r\n}(__WEBPACK_IMPORTED_MODULE_0_react__[\"PureComponent\"]));\r\n/* harmony default export */ __webpack_exports__[\"b\"] = (TimePicker);\r\n\n\n/***/ }),\n\n/***/ 1723:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony export (immutable) */ __webpack_exports__[\"a\"] = buildQueryOptions;\n/* harmony export (immutable) */ __webpack_exports__[\"c\"] = generateQueryKey;\n/* harmony export (immutable) */ __webpack_exports__[\"b\"] = ensureQueries;\n/* harmony export (immutable) */ __webpack_exports__[\"d\"] = hasQuery;\nfunction buildQueryOptions(_a) {\r\n    var format = _a.format, interval = _a.interval, instant = _a.instant, range = _a.range, queries = _a.queries;\r\n    return {\r\n        interval: interval,\r\n        range: range,\r\n        targets: queries.map(function (expr) { return ({\r\n            expr: expr,\r\n            format: format,\r\n            instant: instant,\r\n        }); }),\r\n    };\r\n}\r\nfunction generateQueryKey(index) {\r\n    if (index === void 0) { index = 0; }\r\n    return \"Q-\" + Date.now() + \"-\" + Math.random() + \"-\" + index;\r\n}\r\nfunction ensureQueries(queries) {\r\n    if (queries && typeof queries === 'object' && queries.length > 0 && typeof queries[0] === 'string') {\r\n        return queries.map(function (query, i) { return ({ key: generateQueryKey(i), query: query }); });\r\n    }\r\n    return [{ key: generateQueryKey(), query: '' }];\r\n}\r\nfunction hasQuery(queries) {\r\n    return queries.some(function (q) { return q.query; });\r\n}\r\n\n\n/***/ })\n\n});\n\n\n// WEBPACK FOOTER //\n// 1.b62b685e12bd20d76c90.js","import React, { PureComponent } from 'react';\r\n\r\nimport Explore from './Explore';\r\n\r\nexport default class Wrapper extends PureComponent<any, any> {\r\n  state = {\r\n    initialState: null,\r\n    split: false,\r\n  };\r\n\r\n  handleChangeSplit = (split, initialState) => {\r\n    this.setState({ split, initialState });\r\n  };\r\n\r\n  render() {\r\n    // State overrides for props from first Explore\r\n    const { initialState, split } = this.state;\r\n    return (\r\n      <div className=\"explore-wrapper\">\r\n        <Explore {...this.props} position=\"left\" onChangeSplit={this.handleChangeSplit} split={split} />\r\n        {split ? (\r\n          <Explore\r\n            {...this.props}\r\n            initialState={initialState}\r\n            onChangeSplit={this.handleChangeSplit}\r\n            position=\"right\"\r\n            split={split}\r\n          />\r\n        ) : null}\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./node_modules/tslint-loader??ref--2!./public/app/containers/Explore/Wrapper.tsx","/* Javascript plotting library for jQuery, version 0.8.3.\r\n\r\nCopyright (c) 2007-2014 IOLA and Ole Laursen.\r\nLicensed under the MIT license.\r\n\r\n*/\r\n\r\n// first an inline dependency, jquery.colorhelpers.js, we inline it here\r\n// for convenience\r\n\r\n/* Plugin for jQuery for working with colors.\r\n *\r\n * Version 1.1.\r\n *\r\n * Inspiration from jQuery color animation plugin by John Resig.\r\n *\r\n * Released under the MIT license by Ole Laursen, October 2009.\r\n *\r\n * Examples:\r\n *\r\n *   $.color.parse(\"#fff\").scale('rgb', 0.25).add('a', -0.5).toString()\r\n *   var c = $.color.extract($(\"#mydiv\"), 'background-color');\r\n *   console.log(c.r, c.g, c.b, c.a);\r\n *   $.color.make(100, 50, 25, 0.4).toString() // returns \"rgba(100,50,25,0.4)\"\r\n *\r\n * Note that .scale() and .add() return the same modified object\r\n * instead of making a new one.\r\n *\r\n * V. 1.1: Fix error handling so e.g. parsing an empty string does\r\n * produce a color rather than just crashing.\r\n */\r\n(function($){$.color={};$.color.make=function(r,g,b,a){var o={};o.r=r||0;o.g=g||0;o.b=b||0;o.a=a!=null?a:1;o.add=function(c,d){for(var i=0;i<c.length;++i)o[c.charAt(i)]+=d;return o.normalize()};o.scale=function(c,f){for(var i=0;i<c.length;++i)o[c.charAt(i)]*=f;return o.normalize()};o.toString=function(){if(o.a>=1){return\"rgb(\"+[o.r,o.g,o.b].join(\",\")+\")\"}else{return\"rgba(\"+[o.r,o.g,o.b,o.a].join(\",\")+\")\"}};o.normalize=function(){function clamp(min,value,max){return value<min?min:value>max?max:value}o.r=clamp(0,parseInt(o.r),255);o.g=clamp(0,parseInt(o.g),255);o.b=clamp(0,parseInt(o.b),255);o.a=clamp(0,o.a,1);return o};o.clone=function(){return $.color.make(o.r,o.b,o.g,o.a)};return o.normalize()};$.color.extract=function(elem,css){var c;do{c=elem.css(css).toLowerCase();if(c!=\"\"&&c!=\"transparent\")break;elem=elem.parent()}while(elem.length&&!$.nodeName(elem.get(0),\"body\"));if(c==\"rgba(0, 0, 0, 0)\")c=\"transparent\";return $.color.parse(c)};$.color.parse=function(str){var res,m=$.color.make;if(res=/rgb\\(\\s*([0-9]{1,3})\\s*,\\s*([0-9]{1,3})\\s*,\\s*([0-9]{1,3})\\s*\\)/.exec(str))return m(parseInt(res[1],10),parseInt(res[2],10),parseInt(res[3],10));if(res=/rgba\\(\\s*([0-9]{1,3})\\s*,\\s*([0-9]{1,3})\\s*,\\s*([0-9]{1,3})\\s*,\\s*([0-9]+(?:\\.[0-9]+)?)\\s*\\)/.exec(str))return m(parseInt(res[1],10),parseInt(res[2],10),parseInt(res[3],10),parseFloat(res[4]));if(res=/rgb\\(\\s*([0-9]+(?:\\.[0-9]+)?)\\%\\s*,\\s*([0-9]+(?:\\.[0-9]+)?)\\%\\s*,\\s*([0-9]+(?:\\.[0-9]+)?)\\%\\s*\\)/.exec(str))return m(parseFloat(res[1])*2.55,parseFloat(res[2])*2.55,parseFloat(res[3])*2.55);if(res=/rgba\\(\\s*([0-9]+(?:\\.[0-9]+)?)\\%\\s*,\\s*([0-9]+(?:\\.[0-9]+)?)\\%\\s*,\\s*([0-9]+(?:\\.[0-9]+)?)\\%\\s*,\\s*([0-9]+(?:\\.[0-9]+)?)\\s*\\)/.exec(str))return m(parseFloat(res[1])*2.55,parseFloat(res[2])*2.55,parseFloat(res[3])*2.55,parseFloat(res[4]));if(res=/#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})/.exec(str))return m(parseInt(res[1],16),parseInt(res[2],16),parseInt(res[3],16));if(res=/#([a-fA-F0-9])([a-fA-F0-9])([a-fA-F0-9])/.exec(str))return m(parseInt(res[1]+res[1],16),parseInt(res[2]+res[2],16),parseInt(res[3]+res[3],16));var name=$.trim(str).toLowerCase();if(name==\"transparent\")return m(255,255,255,0);else{res=lookupColors[name]||[0,0,0];return m(res[0],res[1],res[2])}};var lookupColors={aqua:[0,255,255],azure:[240,255,255],beige:[245,245,220],black:[0,0,0],blue:[0,0,255],brown:[165,42,42],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgrey:[169,169,169],darkgreen:[0,100,0],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkviolet:[148,0,211],fuchsia:[255,0,255],gold:[255,215,0],green:[0,128,0],indigo:[75,0,130],khaki:[240,230,140],lightblue:[173,216,230],lightcyan:[224,255,255],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightyellow:[255,255,224],lime:[0,255,0],magenta:[255,0,255],maroon:[128,0,0],navy:[0,0,128],olive:[128,128,0],orange:[255,165,0],pink:[255,192,203],purple:[128,0,128],violet:[128,0,128],red:[255,0,0],silver:[192,192,192],white:[255,255,255],yellow:[255,255,0]}})(jQuery);\r\n\r\n// the actual Flot code\r\n(function($) {\r\n\r\n\t// Cache the prototype hasOwnProperty for faster access\r\n\r\n\tvar hasOwnProperty = Object.prototype.hasOwnProperty;\r\n\r\n    // A shim to provide 'detach' to jQuery versions prior to 1.4.  Using a DOM\r\n    // operation produces the same effect as detach, i.e. removing the element\r\n    // without touching its jQuery data.\r\n\r\n    // Do not merge this into Flot 0.9, since it requires jQuery 1.4.4+.\r\n\r\n    if (!$.fn.detach) {\r\n        $.fn.detach = function() {\r\n            return this.each(function() {\r\n                if (this.parentNode) {\r\n                    this.parentNode.removeChild( this );\r\n                }\r\n            });\r\n        };\r\n    }\r\n\r\n\t///////////////////////////////////////////////////////////////////////////\r\n\t// The Canvas object is a wrapper around an HTML5 <canvas> tag.\r\n\t//\r\n\t// @constructor\r\n\t// @param {string} cls List of classes to apply to the canvas.\r\n\t// @param {element} container Element onto which to append the canvas.\r\n\t//\r\n\t// Requiring a container is a little iffy, but unfortunately canvas\r\n\t// operations don't work unless the canvas is attached to the DOM.\r\n\r\n\tfunction Canvas(cls, container) {\r\n\r\n\t\tvar element = container.children(\".\" + cls)[0];\r\n\r\n\t\tif (element == null) {\r\n\r\n\t\t\telement = document.createElement(\"canvas\");\r\n\t\t\telement.className = cls;\r\n\r\n\t\t\t$(element).css({ direction: \"ltr\", position: \"absolute\", left: 0, top: 0 })\r\n\t\t\t\t.appendTo(container);\r\n\r\n\t\t\t// If HTML5 Canvas isn't available, fall back to [Ex|Flash]canvas\r\n\r\n\t\t\tif (!element.getContext) {\r\n\t\t\t\tif (window.G_vmlCanvasManager) {\r\n\t\t\t\t\telement = window.G_vmlCanvasManager.initElement(element);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthrow new Error(\"Canvas is not available. If you're using IE with a fall-back such as Excanvas, then there's either a mistake in your conditional include, or the page has no DOCTYPE and is rendering in Quirks Mode.\");\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tthis.element = element;\r\n\r\n\t\tvar context = this.context = element.getContext(\"2d\");\r\n\r\n\t\t// Determine the screen's ratio of physical to device-independent\r\n\t\t// pixels.  This is the ratio between the canvas width that the browser\r\n\t\t// advertises and the number of pixels actually present in that space.\r\n\r\n\t\t// The iPhone 4, for example, has a device-independent width of 320px,\r\n\t\t// but its screen is actually 640px wide.  It therefore has a pixel\r\n\t\t// ratio of 2, while most normal devices have a ratio of 1.\r\n\r\n\t\tvar devicePixelRatio = window.devicePixelRatio || 1,\r\n\t\t\tbackingStoreRatio =\r\n\t\t\t\tcontext.webkitBackingStorePixelRatio ||\r\n\t\t\t\tcontext.mozBackingStorePixelRatio ||\r\n\t\t\t\tcontext.msBackingStorePixelRatio ||\r\n\t\t\t\tcontext.oBackingStorePixelRatio ||\r\n\t\t\t\tcontext.backingStorePixelRatio || 1;\r\n\r\n\t\tthis.pixelRatio = devicePixelRatio / backingStoreRatio;\r\n\r\n\t\t// Size the canvas to match the internal dimensions of its container\r\n\r\n\t\tthis.resize(container.width(), container.height());\r\n\r\n\t\t// Collection of HTML div layers for text overlaid onto the canvas\r\n\r\n\t\tthis.textContainer = null;\r\n\t\tthis.text = {};\r\n\r\n\t\t// Cache of text fragments and metrics, so we can avoid expensively\r\n\t\t// re-calculating them when the plot is re-rendered in a loop.\r\n\r\n\t\tthis._textCache = {};\r\n\t\tthis._textSizeCache = window.flotTextSizeCache = window.flotTextSizeCache || {};\r\n\t}\r\n\r\n\t// Resizes the canvas to the given dimensions.\r\n\t//\r\n\t// @param {number} width New width of the canvas, in pixels.\r\n\t// @param {number} width New height of the canvas, in pixels.\r\n\r\n\tCanvas.prototype.resize = function(width, height) {\r\n\r\n\t\tif (width <= 0 || height <= 0) {\r\n\t\t\tthrow new Error(\"Invalid dimensions for plot, width = \" + width + \", height = \" + height);\r\n\t\t}\r\n\r\n\t\tvar element = this.element,\r\n\t\t\tcontext = this.context,\r\n\t\t\tpixelRatio = this.pixelRatio;\r\n\r\n\t\t// Resize the canvas, increasing its density based on the display's\r\n\t\t// pixel ratio; basically giving it more pixels without increasing the\r\n\t\t// size of its element, to take advantage of the fact that retina\r\n\t\t// displays have that many more pixels in the same advertised space.\r\n\r\n\t\t// Resizing should reset the state (excanvas seems to be buggy though)\r\n\r\n\t\tif (this.width != width) {\r\n\t\t\telement.width = width * pixelRatio;\r\n\t\t\telement.style.width = width + \"px\";\r\n\t\t\tthis.width = width;\r\n\t\t}\r\n\r\n\t\tif (this.height != height) {\r\n\t\t\telement.height = height * pixelRatio;\r\n\t\t\telement.style.height = height + \"px\";\r\n\t\t\tthis.height = height;\r\n\t\t}\r\n\r\n\t\t// Save the context, so we can reset in case we get replotted.  The\r\n\t\t// restore ensure that we're really back at the initial state, and\r\n\t\t// should be safe even if we haven't saved the initial state yet.\r\n\r\n\t\tcontext.restore();\r\n\t\tcontext.save();\r\n\r\n\t\t// Scale the coordinate space to match the display density; so even though we\r\n\t\t// may have twice as many pixels, we still want lines and other drawing to\r\n\t\t// appear at the same size; the extra pixels will just make them crisper.\r\n\r\n\t\tcontext.scale(pixelRatio, pixelRatio);\r\n\t};\r\n\r\n\t// Clears the entire canvas area, not including any overlaid HTML text\r\n\r\n\tCanvas.prototype.clear = function() {\r\n\t\tthis.context.clearRect(0, 0, this.width, this.height);\r\n\t};\r\n\r\n\t// Finishes rendering the canvas, including managing the text overlay.\r\n\r\n\tCanvas.prototype.render = function() {\r\n\r\n\t\tvar cache = this._textCache;\r\n\r\n\t\t// For each text layer, add elements marked as active that haven't\r\n\t\t// already been rendered, and remove those that are no longer active.\r\n\r\n\t\tfor (var layerKey in cache) {\r\n\t\t\tif (hasOwnProperty.call(cache, layerKey)) {\r\n\r\n\t\t\t\tvar layer = this.getTextLayer(layerKey),\r\n\t\t\t\t\tlayerCache = cache[layerKey];\r\n\r\n\t\t\t\tlayer.hide();\r\n\r\n\t\t\t\tfor (var styleKey in layerCache) {\r\n\t\t\t\t\tif (hasOwnProperty.call(layerCache, styleKey)) {\r\n\t\t\t\t\t\tvar styleCache = layerCache[styleKey];\r\n\t\t\t\t\t\tfor (var key in styleCache) {\r\n\t\t\t\t\t\t\tif (hasOwnProperty.call(styleCache, key)) {\r\n\r\n\t\t\t\t\t\t\t\tvar positions = styleCache[key].positions;\r\n\r\n\t\t\t\t\t\t\t\tfor (var i = 0, position; position = positions[i]; i++) {\r\n\t\t\t\t\t\t\t\t\tif (position.active) {\r\n\t\t\t\t\t\t\t\t\t\tif (!position.rendered) {\r\n\t\t\t\t\t\t\t\t\t\t\tlayer.append(position.element);\r\n\t\t\t\t\t\t\t\t\t\t\tposition.rendered = true;\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\t\tpositions.splice(i--, 1);\r\n\t\t\t\t\t\t\t\t\t\tif (position.rendered) {\r\n\t\t\t\t\t\t\t\t\t\t\tposition.element.detach();\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t\tif (positions.length == 0) {\r\n\t\t\t\t\t\t\t\t\tdelete styleCache[key];\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tlayer.show();\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\r\n\t// Creates (if necessary) and returns the text overlay container.\r\n\t//\r\n\t// @param {string} classes String of space-separated CSS classes used to\r\n\t//     uniquely identify the text layer.\r\n\t// @return {object} The jQuery-wrapped text-layer div.\r\n\r\n\tCanvas.prototype.getTextLayer = function(classes) {\r\n\r\n\t\tvar layer = this.text[classes];\r\n\r\n\t\t// Create the text layer if it doesn't exist\r\n\r\n\t\tif (layer == null) {\r\n\r\n\t\t\t// Create the text layer container, if it doesn't exist\r\n\r\n\t\t\tif (this.textContainer == null) {\r\n\t\t\t\tthis.textContainer = $(\"<div class='flot-text flot-temp-elem'></div>\")\r\n\t\t\t\t\t.css({\r\n\t\t\t\t\t\tposition: \"absolute\",\r\n\t\t\t\t\t\ttop: 0,\r\n\t\t\t\t\t\tleft: 0,\r\n\t\t\t\t\t\tbottom: 0,\r\n\t\t\t\t\t\tright: 0,\r\n\t\t\t\t\t\t'font-size': \"smaller\",\r\n\t\t\t\t\t\tcolor: \"#545454\"\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.insertAfter(this.element);\r\n\t\t\t}\r\n\r\n\t\t\tlayer = this.text[classes] = $(\"<div></div>\")\r\n\t\t\t\t.addClass(classes)\r\n\t\t\t\t.css({\r\n\t\t\t\t\tposition: \"absolute\",\r\n\t\t\t\t\ttop: 0,\r\n\t\t\t\t\tleft: 0,\r\n\t\t\t\t\tbottom: 0,\r\n\t\t\t\t\tright: 0\r\n\t\t\t\t})\r\n\t\t\t\t.appendTo(this.textContainer);\r\n\t\t}\r\n\r\n\t\treturn layer;\r\n\t};\r\n\r\n\t// Creates (if necessary) and returns a text info object.\r\n\t//\r\n\t// The object looks like this:\r\n\t//\r\n\t// {\r\n\t//     width: Width of the text's wrapper div.\r\n\t//     height: Height of the text's wrapper div.\r\n\t//     element: The jQuery-wrapped HTML div containing the text.\r\n\t//     positions: Array of positions at which this text is drawn.\r\n\t// }\r\n\t//\r\n\t// The positions array contains objects that look like this:\r\n\t//\r\n\t// {\r\n\t//     active: Flag indicating whether the text should be visible.\r\n\t//     rendered: Flag indicating whether the text is currently visible.\r\n\t//     element: The jQuery-wrapped HTML div containing the text.\r\n\t//     x: X coordinate at which to draw the text.\r\n\t//     y: Y coordinate at which to draw the text.\r\n\t// }\r\n\t//\r\n\t// Each position after the first receives a clone of the original element.\r\n\t//\r\n\t// The idea is that that the width, height, and general 'identity' of the\r\n\t// text is constant no matter where it is placed; the placements are a\r\n\t// secondary property.\r\n\t//\r\n\t// Canvas maintains a cache of recently-used text info objects; getTextInfo\r\n\t// either returns the cached element or creates a new entry.\r\n\t//\r\n\t// @param {string} layer A string of space-separated CSS classes uniquely\r\n\t//     identifying the layer containing this text.\r\n\t// @param {string} text Text string to retrieve info for.\r\n\t// @param {(string|object)=} font Either a string of space-separated CSS\r\n\t//     classes or a font-spec object, defining the text's font and style.\r\n\t// @param {number=} angle Angle at which to rotate the text, in degrees.\r\n\t//     Angle is currently unused, it will be implemented in the future.\r\n\t// @param {number=} width Maximum width of the text before it wraps.\r\n\t// @return {object} a text info object.\r\n\r\n\tCanvas.prototype.getTextInfo = function(layer, text, font, angle, width) {\r\n\r\n\t\tvar textStyle, layerCache, styleCache, info;\r\n\r\n\t\t// Cast the value to a string, in case we were given a number or such\r\n\r\n\t\ttext = \"\" + text;\r\n\r\n\t\t// If the font is a font-spec object, generate a CSS font definition\r\n\r\n\t\tif (typeof font === \"object\") {\r\n\t\t\ttextStyle = font.style + \" \" + font.variant + \" \" + font.weight + \" \" + font.size + \"px/\" + font.lineHeight + \"px \" + font.family;\r\n\t\t} else {\r\n\t\t\ttextStyle = font;\r\n\t\t}\r\n\r\n\t\t// Retrieve (or create) the cache for the text's layer and styles\r\n\r\n\t\tlayerCache = this._textCache[layer];\r\n\r\n\t\tif (layerCache == null) {\r\n\t\t\tlayerCache = this._textCache[layer] = {};\r\n\t\t}\r\n\r\n\t\tstyleCache = layerCache[textStyle];\r\n\r\n\t\tif (styleCache == null) {\r\n\t\t\tstyleCache = layerCache[textStyle] = {};\r\n\t\t}\r\n\r\n\t\tinfo = styleCache[text];\r\n\r\n\t\t// If we can't find a matching element in our cache, create a new one\r\n\r\n\t\tif (info == null) {\r\n\r\n\t\t\tvar element = $(\"<div></div>\").html(text)\r\n\t\t\t\t.css({\r\n\t\t\t\t\tposition: \"absolute\",\r\n\t\t\t\t\t'max-width': width,\r\n\t\t\t\t\ttop: -9999\r\n\t\t\t\t})\r\n\t\t\t\t.appendTo(this.getTextLayer(layer));\r\n\r\n\t\t\tif (typeof font === \"object\") {\r\n\t\t\t\telement.css({\r\n\t\t\t\t\tfont: textStyle,\r\n\t\t\t\t\tcolor: font.color\r\n\t\t\t\t});\r\n\t\t\t} else if (typeof font === \"string\") {\r\n\t\t\t\telement.addClass(font);\r\n\t\t\t}\r\n\r\n      info = styleCache[text] = { element: element, positions: [] };\r\n\r\n      var size = this._textSizeCache[text];\r\n\t\t\tif (size) {\r\n        info.width = size.width;\r\n        info.height = size.height;\r\n\t\t\t} else {\r\n        info.width = element.outerWidth(true);\r\n        info.height = element.outerHeight(true);\r\n        this._textSizeCache[text] = { width: info.width, height: info.height };\r\n\t\t\t}\r\n\t\t\telement.detach();\r\n\t\t}\r\n\r\n\t\treturn info;\r\n\t};\r\n\r\n\t// Adds a text string to the canvas text overlay.\r\n\t//\r\n\t// The text isn't drawn immediately; it is marked as rendering, which will\r\n\t// result in its addition to the canvas on the next render pass.\r\n\t//\r\n\t// @param {string} layer A string of space-separated CSS classes uniquely\r\n\t//     identifying the layer containing this text.\r\n\t// @param {number} x X coordinate at which to draw the text.\r\n\t// @param {number} y Y coordinate at which to draw the text.\r\n\t// @param {string} text Text string to draw.\r\n\t// @param {(string|object)=} font Either a string of space-separated CSS\r\n\t//     classes or a font-spec object, defining the text's font and style.\r\n\t// @param {number=} angle Angle at which to rotate the text, in degrees.\r\n\t//     Angle is currently unused, it will be implemented in the future.\r\n\t// @param {number=} width Maximum width of the text before it wraps.\r\n\t// @param {string=} halign Horizontal alignment of the text; either \"left\",\r\n\t//     \"center\" or \"right\".\r\n\t// @param {string=} valign Vertical alignment of the text; either \"top\",\r\n\t//     \"middle\" or \"bottom\".\r\n\r\n\tCanvas.prototype.addText = function(layer, x, y, text, font, angle, width, halign, valign) {\r\n\r\n\t\tvar info = this.getTextInfo(layer, text, font, angle, width),\r\n\t\t\tpositions = info.positions;\r\n\r\n\t\t// Tweak the div's position to match the text's alignment\r\n\r\n\t\tif (halign == \"center\") {\r\n\t\t\tx -= info.width / 2;\r\n\t\t} else if (halign == \"right\") {\r\n\t\t\tx -= info.width;\r\n\t\t}\r\n\r\n\t\tif (valign == \"middle\") {\r\n\t\t\ty -= info.height / 2;\r\n\t\t} else if (valign == \"bottom\") {\r\n\t\t\ty -= info.height;\r\n\t\t}\r\n\r\n\t\t// Determine whether this text already exists at this position.\r\n\t\t// If so, mark it for inclusion in the next render pass.\r\n\r\n\t\tfor (var i = 0, position; position = positions[i]; i++) {\r\n\t\t\tif (position.x == x && position.y == y) {\r\n\t\t\t\tposition.active = true;\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t// If the text doesn't exist at this position, create a new entry\r\n\r\n\t\t// For the very first position we'll re-use the original element,\r\n\t\t// while for subsequent ones we'll clone it.\r\n\r\n\t\tposition = {\r\n\t\t\tactive: true,\r\n\t\t\trendered: false,\r\n\t\t\telement: positions.length ? info.element.clone() : info.element,\r\n\t\t\tx: x,\r\n\t\t\ty: y\r\n\t\t};\r\n\r\n\t\tpositions.push(position);\r\n\r\n\t\t// Move the element to its final position within the container\r\n\r\n\t\tposition.element.css({\r\n\t\t\ttop: Math.round(y),\r\n\t\t\tleft: Math.round(x),\r\n\t\t\t'text-align': halign\t// In case the text wraps\r\n\t\t});\r\n\t};\r\n\r\n\t// Removes one or more text strings from the canvas text overlay.\r\n\t//\r\n\t// If no parameters are given, all text within the layer is removed.\r\n\t//\r\n\t// Note that the text is not immediately removed; it is simply marked as\r\n\t// inactive, which will result in its removal on the next render pass.\r\n\t// This avoids the performance penalty for 'clear and redraw' behavior,\r\n\t// where we potentially get rid of all text on a layer, but will likely\r\n\t// add back most or all of it later, as when redrawing axes, for example.\r\n\t//\r\n\t// @param {string} layer A string of space-separated CSS classes uniquely\r\n\t//     identifying the layer containing this text.\r\n\t// @param {number=} x X coordinate of the text.\r\n\t// @param {number=} y Y coordinate of the text.\r\n\t// @param {string=} text Text string to remove.\r\n\t// @param {(string|object)=} font Either a string of space-separated CSS\r\n\t//     classes or a font-spec object, defining the text's font and style.\r\n\t// @param {number=} angle Angle at which the text is rotated, in degrees.\r\n\t//     Angle is currently unused, it will be implemented in the future.\r\n\r\n\tCanvas.prototype.removeText = function(layer, x, y, text, font, angle) {\r\n\t\tif (text == null) {\r\n\t\t\tvar layerCache = this._textCache[layer];\r\n\t\t\tif (layerCache != null) {\r\n\t\t\t\tfor (var styleKey in layerCache) {\r\n\t\t\t\t\tif (hasOwnProperty.call(layerCache, styleKey)) {\r\n\t\t\t\t\t\tvar styleCache = layerCache[styleKey];\r\n\t\t\t\t\t\tfor (var key in styleCache) {\r\n\t\t\t\t\t\t\tif (hasOwnProperty.call(styleCache, key)) {\r\n\t\t\t\t\t\t\t\tvar positions = styleCache[key].positions;\r\n\t\t\t\t\t\t\t\tfor (var i = 0, position; position = positions[i]; i++) {\r\n\t\t\t\t\t\t\t\t\tposition.active = false;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tvar positions = this.getTextInfo(layer, text, font, angle).positions;\r\n\t\t\tfor (var i = 0, position; position = positions[i]; i++) {\r\n\t\t\t\tif (position.x == x && position.y == y) {\r\n\t\t\t\t\tposition.active = false;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\r\n\t///////////////////////////////////////////////////////////////////////////\r\n\t// The top-level container for the entire plot.\r\n\r\n    function Plot(placeholder, data_, options_, plugins) {\r\n        // data is on the form:\r\n        //   [ series1, series2 ... ]\r\n        // where series is either just the data as [ [x1, y1], [x2, y2], ... ]\r\n        // or { data: [ [x1, y1], [x2, y2], ... ], label: \"some label\", ... }\r\n\r\n        var series = [],\r\n            options = {\r\n                // the color theme used for graphs\r\n                colors: [\"#edc240\", \"#afd8f8\", \"#cb4b4b\", \"#4da74d\", \"#9440ed\"],\r\n                legend: {\r\n                    show: true,\r\n                    noColumns: 1, // number of colums in legend table\r\n                    labelFormatter: null, // fn: string -> string\r\n                    labelBoxBorderColor: \"#ccc\", // border color for the little label boxes\r\n                    container: null, // container (as jQuery object) to put legend in, null means default on top of graph\r\n                    position: \"ne\", // position of default legend container within plot\r\n                    margin: 5, // distance from grid edge to default legend container within plot\r\n                    backgroundColor: null, // null means auto-detect\r\n                    backgroundOpacity: 0.85, // set to 0 to avoid background\r\n                    sorted: null    // default to no legend sorting\r\n                },\r\n                xaxis: {\r\n                    show: null, // null = auto-detect, true = always, false = never\r\n                    position: \"bottom\", // or \"top\"\r\n                    mode: null, // null or \"time\"\r\n                    font: null, // null (derived from CSS in placeholder) or object like { size: 11, lineHeight: 13, style: \"italic\", weight: \"bold\", family: \"sans-serif\", variant: \"small-caps\" }\r\n                    color: null, // base color, labels, ticks\r\n                    tickColor: null, // possibly different color of ticks, e.g. \"rgba(0,0,0,0.15)\"\r\n                    transform: null, // null or f: number -> number to transform axis\r\n                    inverseTransform: null, // if transform is set, this should be the inverse function\r\n                    min: null, // min. value to show, null means set automatically\r\n                    max: null, // max. value to show, null means set automatically\r\n                    autoscaleMargin: null, // margin in % to add if auto-setting min/max\r\n                    ticks: null, // either [1, 3] or [[1, \"a\"], 3] or (fn: axis info -> ticks) or app. number of ticks for auto-ticks\r\n                    tickFormatter: null, // fn: number -> string\r\n                    labelWidth: null, // size of tick labels in pixels\r\n                    labelHeight: null,\r\n                    reserveSpace: null, // whether to reserve space even if axis isn't shown\r\n                    tickLength: null, // size in pixels of ticks, or \"full\" for whole line\r\n                    alignTicksWithAxis: null, // axis number or null for no sync\r\n                    tickDecimals: null, // no. of decimals, null means auto\r\n                    tickSize: null, // number or [number, \"unit\"]\r\n                    minTickSize: null // number or [number, \"unit\"]\r\n                },\r\n                yaxis: {\r\n                    autoscaleMargin: 0.02,\r\n                    position: \"left\" // or \"right\"\r\n                },\r\n                xaxes: [],\r\n                yaxes: [],\r\n                series: {\r\n                    points: {\r\n                        show: false,\r\n                        radius: 3,\r\n                        lineWidth: 2, // in pixels\r\n                        fill: true,\r\n                        fillColor: \"#ffffff\",\r\n                        symbol: \"circle\" // or callback\r\n                    },\r\n                    lines: {\r\n                        // we don't put in show: false so we can see\r\n                        // whether lines were actively disabled\r\n                        lineWidth: 2, // in pixels\r\n                        fill: false,\r\n                        fillColor: null,\r\n                        steps: false\r\n                        // Omit 'zero', so we can later default its value to\r\n                        // match that of the 'fill' option.\r\n                    },\r\n                    bars: {\r\n                        show: false,\r\n                        lineWidth: 2, // in pixels\r\n                        barWidth: 1, // in units of the x axis\r\n                        fill: true,\r\n                        fillColor: null,\r\n                        align: \"left\", // \"left\", \"right\", or \"center\"\r\n                        horizontal: false,\r\n                        zero: true\r\n                    },\r\n                    shadowSize: 3,\r\n                    highlightColor: null\r\n                },\r\n                grid: {\r\n                    show: true,\r\n                    aboveData: false,\r\n                    color: \"#545454\", // primary color used for outline and labels\r\n                    backgroundColor: null, // null for transparent, else color\r\n                    borderColor: null, // set if different from the grid color\r\n                    tickColor: null, // color for the ticks, e.g. \"rgba(0,0,0,0.15)\"\r\n                    margin: 0, // distance from the canvas edge to the grid\r\n                    labelMargin: 5, // in pixels\r\n                    eventSectionHeight: 0, // space for event section\r\n                    axisMargin: 8, // in pixels\r\n                    borderWidth: 2, // in pixels\r\n                    minBorderMargin: null, // in pixels, null means taken from points radius\r\n                    markings: null, // array of ranges or fn: axes -> array of ranges\r\n                    markingsColor: \"#f4f4f4\",\r\n                    markingsLineWidth: 2,\r\n                    // interactive stuff\r\n                    clickable: false,\r\n                    hoverable: false,\r\n                    autoHighlight: true, // highlight in case mouse is near\r\n                    mouseActiveRadius: 10 // how far the mouse can be away to activate an item\r\n                },\r\n                interaction: {\r\n                    redrawOverlayInterval: 1000/60 // time between updates, -1 means in same flow\r\n                },\r\n                hooks: {}\r\n            },\r\n        surface = null,     // the canvas for the plot itself\r\n        overlay = null,     // canvas for interactive stuff on top of plot\r\n        eventHolder = null, // jQuery object that events should be bound to\r\n        ctx = null, octx = null,\r\n        xaxes = [], yaxes = [],\r\n        plotOffset = { left: 0, right: 0, top: 0, bottom: 0},\r\n        plotWidth = 0, plotHeight = 0,\r\n        hooks = {\r\n            processOptions: [],\r\n            processRawData: [],\r\n            processDatapoints: [],\r\n            processOffset: [],\r\n            processRange: [],\r\n            drawBackground: [],\r\n            drawSeries: [],\r\n            draw: [],\r\n            bindEvents: [],\r\n            drawOverlay: [],\r\n            shutdown: []\r\n        },\r\n        plot = this;\r\n\r\n        // public functions\r\n        plot.setData = setData;\r\n        plot.setupGrid = setupGrid;\r\n        plot.draw = draw;\r\n        plot.getPlaceholder = function() { return placeholder; };\r\n        plot.getCanvas = function() { return surface.element; };\r\n        plot.getPlotOffset = function() { return plotOffset; };\r\n        plot.width = function () { return plotWidth; };\r\n        plot.height = function () { return plotHeight; };\r\n        plot.offset = function () {\r\n            var o = eventHolder.offset();\r\n            o.left += plotOffset.left;\r\n            o.top += plotOffset.top;\r\n            return o;\r\n        };\r\n        plot.getData = function () { return series; };\r\n        plot.getAxes = function () {\r\n            var res = {}, i;\r\n            $.each(xaxes.concat(yaxes), function (_, axis) {\r\n                if (axis)\r\n                    res[axis.direction + (axis.n != 1 ? axis.n : \"\") + \"axis\"] = axis;\r\n            });\r\n            return res;\r\n        };\r\n        plot.getXAxes = function () { return xaxes; };\r\n        plot.getYAxes = function () { return yaxes; };\r\n        plot.c2p = canvasToAxisCoords;\r\n        plot.p2c = axisToCanvasCoords;\r\n        plot.getOptions = function () { return options; };\r\n        plot.highlight = highlight;\r\n        plot.unhighlight = unhighlight;\r\n        plot.triggerRedrawOverlay = triggerRedrawOverlay;\r\n        plot.pointOffset = function(point) {\r\n            return {\r\n                left: parseInt(xaxes[axisNumber(point, \"x\") - 1].p2c(+point.x) + plotOffset.left, 10),\r\n                top: parseInt(yaxes[axisNumber(point, \"y\") - 1].p2c(+point.y) + plotOffset.top, 10)\r\n            };\r\n        };\r\n        plot.shutdown = shutdown;\r\n        plot.destroy = function () {\r\n            shutdown();\r\n            placeholder.removeData(\"plot\").empty();\r\n\r\n            series = [];\r\n            options = null;\r\n            surface = null;\r\n            overlay = null;\r\n            eventHolder = null;\r\n            ctx = null;\r\n            octx = null;\r\n            xaxes = [];\r\n            yaxes = [];\r\n            hooks = null;\r\n            highlights = [];\r\n            plot = null;\r\n        };\r\n        plot.resize = function () {\r\n        \tvar width = placeholder.width(),\r\n        \t\theight = placeholder.height();\r\n            surface.resize(width, height);\r\n            overlay.resize(width, height);\r\n        };\r\n\r\n        // public attributes\r\n        plot.hooks = hooks;\r\n\r\n        // initialize\r\n        initPlugins(plot);\r\n        parseOptions(options_);\r\n        setupCanvases();\r\n        setData(data_);\r\n        setupGrid();\r\n        draw();\r\n        bindEvents();\r\n\r\n\r\n        function executeHooks(hook, args) {\r\n            args = [plot].concat(args);\r\n            for (var i = 0; i < hook.length; ++i)\r\n                hook[i].apply(this, args);\r\n        }\r\n\r\n        function initPlugins() {\r\n\r\n            // References to key classes, allowing plugins to modify them\r\n\r\n            var classes = {\r\n                Canvas: Canvas\r\n            };\r\n\r\n            for (var i = 0; i < plugins.length; ++i) {\r\n                var p = plugins[i];\r\n                p.init(plot, classes);\r\n                if (p.options)\r\n                    $.extend(true, options, p.options);\r\n            }\r\n        }\r\n\r\n        function parseOptions(opts) {\r\n\r\n            $.extend(true, options, opts);\r\n\r\n            // $.extend merges arrays, rather than replacing them.  When less\r\n            // colors are provided than the size of the default palette, we\r\n            // end up with those colors plus the remaining defaults, which is\r\n            // not expected behavior; avoid it by replacing them here.\r\n\r\n            if (opts && opts.colors) {\r\n            \toptions.colors = opts.colors;\r\n            }\r\n\r\n            if (options.xaxis.color == null)\r\n                options.xaxis.color = $.color.parse(options.grid.color).scale('a', 0.22).toString();\r\n            if (options.yaxis.color == null)\r\n                options.yaxis.color = $.color.parse(options.grid.color).scale('a', 0.22).toString();\r\n\r\n            if (options.xaxis.tickColor == null) // grid.tickColor for back-compatibility\r\n                options.xaxis.tickColor = options.grid.tickColor || options.xaxis.color;\r\n            if (options.yaxis.tickColor == null) // grid.tickColor for back-compatibility\r\n                options.yaxis.tickColor = options.grid.tickColor || options.yaxis.color;\r\n\r\n            if (options.grid.borderColor == null)\r\n                options.grid.borderColor = options.grid.color;\r\n            if (options.grid.tickColor == null)\r\n                options.grid.tickColor = $.color.parse(options.grid.color).scale('a', 0.22).toString();\r\n\r\n            // Fill in defaults for axis options, including any unspecified\r\n            // font-spec fields, if a font-spec was provided.\r\n\r\n            // If no x/y axis options were provided, create one of each anyway,\r\n            // since the rest of the code assumes that they exist.\r\n\r\n            var i, axisOptions, axisCount,\r\n                fontSize = placeholder.css(\"font-size\"),\r\n                fontSizeDefault = fontSize ? +fontSize.replace(\"px\", \"\") : 13,\r\n                fontDefaults = {\r\n                    style: placeholder.css(\"font-style\"),\r\n                    size: Math.round(0.8 * fontSizeDefault),\r\n                    variant: placeholder.css(\"font-variant\"),\r\n                    weight: placeholder.css(\"font-weight\"),\r\n                    family: placeholder.css(\"font-family\")\r\n                };\r\n\r\n            axisCount = options.xaxes.length || 1;\r\n            for (i = 0; i < axisCount; ++i) {\r\n\r\n                axisOptions = options.xaxes[i];\r\n                if (axisOptions && !axisOptions.tickColor) {\r\n                    axisOptions.tickColor = axisOptions.color;\r\n                }\r\n\r\n                axisOptions = $.extend(true, {}, options.xaxis, axisOptions);\r\n                options.xaxes[i] = axisOptions;\r\n\r\n                if (axisOptions.font) {\r\n                    axisOptions.font = $.extend({}, fontDefaults, axisOptions.font);\r\n                    if (!axisOptions.font.color) {\r\n                        axisOptions.font.color = axisOptions.color;\r\n                    }\r\n                    if (!axisOptions.font.lineHeight) {\r\n                        axisOptions.font.lineHeight = Math.round(axisOptions.font.size * 1.15);\r\n                    }\r\n                }\r\n            }\r\n\r\n            axisCount = options.yaxes.length || 1;\r\n            for (i = 0; i < axisCount; ++i) {\r\n\r\n                axisOptions = options.yaxes[i];\r\n                if (axisOptions && !axisOptions.tickColor) {\r\n                    axisOptions.tickColor = axisOptions.color;\r\n                }\r\n\r\n                axisOptions = $.extend(true, {}, options.yaxis, axisOptions);\r\n                options.yaxes[i] = axisOptions;\r\n\r\n                if (axisOptions.font) {\r\n                    axisOptions.font = $.extend({}, fontDefaults, axisOptions.font);\r\n                    if (!axisOptions.font.color) {\r\n                        axisOptions.font.color = axisOptions.color;\r\n                    }\r\n                    if (!axisOptions.font.lineHeight) {\r\n                        axisOptions.font.lineHeight = Math.round(axisOptions.font.size * 1.15);\r\n                    }\r\n                }\r\n            }\r\n\r\n            // backwards compatibility, to be removed in future\r\n            if (options.xaxis.noTicks && options.xaxis.ticks == null)\r\n                options.xaxis.ticks = options.xaxis.noTicks;\r\n            if (options.yaxis.noTicks && options.yaxis.ticks == null)\r\n                options.yaxis.ticks = options.yaxis.noTicks;\r\n            if (options.x2axis) {\r\n                options.xaxes[1] = $.extend(true, {}, options.xaxis, options.x2axis);\r\n                options.xaxes[1].position = \"top\";\r\n                // Override the inherit to allow the axis to auto-scale\r\n                if (options.x2axis.min == null) {\r\n                    options.xaxes[1].min = null;\r\n                }\r\n                if (options.x2axis.max == null) {\r\n                    options.xaxes[1].max = null;\r\n                }\r\n            }\r\n            if (options.y2axis) {\r\n                options.yaxes[1] = $.extend(true, {}, options.yaxis, options.y2axis);\r\n                options.yaxes[1].position = \"right\";\r\n                // Override the inherit to allow the axis to auto-scale\r\n                if (options.y2axis.min == null) {\r\n                    options.yaxes[1].min = null;\r\n                }\r\n                if (options.y2axis.max == null) {\r\n                    options.yaxes[1].max = null;\r\n                }\r\n            }\r\n            if (options.grid.coloredAreas)\r\n                options.grid.markings = options.grid.coloredAreas;\r\n            if (options.grid.coloredAreasColor)\r\n                options.grid.markingsColor = options.grid.coloredAreasColor;\r\n            if (options.lines)\r\n                $.extend(true, options.series.lines, options.lines);\r\n            if (options.points)\r\n                $.extend(true, options.series.points, options.points);\r\n            if (options.bars)\r\n                $.extend(true, options.series.bars, options.bars);\r\n            if (options.shadowSize != null)\r\n                options.series.shadowSize = options.shadowSize;\r\n            if (options.highlightColor != null)\r\n                options.series.highlightColor = options.highlightColor;\r\n\r\n            // save options on axes for future reference\r\n            for (i = 0; i < options.xaxes.length; ++i)\r\n                getOrCreateAxis(xaxes, i + 1).options = options.xaxes[i];\r\n            for (i = 0; i < options.yaxes.length; ++i)\r\n                getOrCreateAxis(yaxes, i + 1).options = options.yaxes[i];\r\n\r\n            // add hooks from options\r\n            for (var n in hooks)\r\n                if (options.hooks[n] && options.hooks[n].length)\r\n                    hooks[n] = hooks[n].concat(options.hooks[n]);\r\n\r\n            executeHooks(hooks.processOptions, [options]);\r\n        }\r\n\r\n        function setData(d) {\r\n            series = parseData(d);\r\n            fillInSeriesOptions();\r\n            processData();\r\n        }\r\n\r\n        function parseData(d) {\r\n            var res = [];\r\n            for (var i = 0; i < d.length; ++i) {\r\n                var s = $.extend(true, {}, options.series);\r\n\r\n                if (d[i].data != null) {\r\n                    s.data = d[i].data; // move the data instead of deep-copy\r\n                    delete d[i].data;\r\n\r\n                    $.extend(true, s, d[i]);\r\n\r\n                    d[i].data = s.data;\r\n                }\r\n                else\r\n                    s.data = d[i];\r\n                res.push(s);\r\n            }\r\n\r\n            return res;\r\n        }\r\n\r\n        function axisNumber(obj, coord) {\r\n            var a = obj[coord + \"axis\"];\r\n            if (typeof a == \"object\") // if we got a real axis, extract number\r\n                a = a.n;\r\n            if (typeof a != \"number\")\r\n                a = 1; // default to first axis\r\n            return a;\r\n        }\r\n\r\n        function allAxes() {\r\n            // return flat array without annoying null entries\r\n            return $.grep(xaxes.concat(yaxes), function (a) { return a; });\r\n        }\r\n\r\n        function canvasToAxisCoords(pos) {\r\n            // return an object with x/y corresponding to all used axes\r\n            var res = {}, i, axis;\r\n            for (i = 0; i < xaxes.length; ++i) {\r\n                axis = xaxes[i];\r\n                if (axis && axis.used)\r\n                    res[\"x\" + axis.n] = axis.c2p(pos.left);\r\n            }\r\n\r\n            for (i = 0; i < yaxes.length; ++i) {\r\n                axis = yaxes[i];\r\n                if (axis && axis.used)\r\n                    res[\"y\" + axis.n] = axis.c2p(pos.top);\r\n            }\r\n\r\n            if (res.x1 !== undefined)\r\n                res.x = res.x1;\r\n            if (res.y1 !== undefined)\r\n                res.y = res.y1;\r\n\r\n            return res;\r\n        }\r\n\r\n        function axisToCanvasCoords(pos) {\r\n            // get canvas coords from the first pair of x/y found in pos\r\n            var res = {}, i, axis, key;\r\n\r\n            for (i = 0; i < xaxes.length; ++i) {\r\n                axis = xaxes[i];\r\n                if (axis && axis.used) {\r\n                    key = \"x\" + axis.n;\r\n                    if (pos[key] == null && axis.n == 1)\r\n                        key = \"x\";\r\n\r\n                    if (pos[key] != null) {\r\n                        res.left = axis.p2c(pos[key]);\r\n                        break;\r\n                    }\r\n                }\r\n            }\r\n\r\n            for (i = 0; i < yaxes.length; ++i) {\r\n                axis = yaxes[i];\r\n                if (axis && axis.used) {\r\n                    key = \"y\" + axis.n;\r\n                    if (pos[key] == null && axis.n == 1)\r\n                        key = \"y\";\r\n\r\n                    if (pos[key] != null) {\r\n                        res.top = axis.p2c(pos[key]);\r\n                        break;\r\n                    }\r\n                }\r\n            }\r\n\r\n            return res;\r\n        }\r\n\r\n        function getOrCreateAxis(axes, number) {\r\n            if (!axes[number - 1])\r\n                axes[number - 1] = {\r\n                    n: number, // save the number for future reference\r\n                    direction: axes == xaxes ? \"x\" : \"y\",\r\n                    options: $.extend(true, {}, axes == xaxes ? options.xaxis : options.yaxis)\r\n                };\r\n\r\n            return axes[number - 1];\r\n        }\r\n\r\n        function fillInSeriesOptions() {\r\n\r\n            var neededColors = series.length, maxIndex = -1, i;\r\n\r\n            // Subtract the number of series that already have fixed colors or\r\n            // color indexes from the number that we still need to generate.\r\n\r\n            for (i = 0; i < series.length; ++i) {\r\n                var sc = series[i].color;\r\n                if (sc != null) {\r\n                    neededColors--;\r\n                    if (typeof sc == \"number\" && sc > maxIndex) {\r\n                        maxIndex = sc;\r\n                    }\r\n                }\r\n            }\r\n\r\n            // If any of the series have fixed color indexes, then we need to\r\n            // generate at least as many colors as the highest index.\r\n\r\n            if (neededColors <= maxIndex) {\r\n                neededColors = maxIndex + 1;\r\n            }\r\n\r\n            // Generate all the colors, using first the option colors and then\r\n            // variations on those colors once they're exhausted.\r\n\r\n            var c, colors = [], colorPool = options.colors,\r\n                colorPoolSize = colorPool.length, variation = 0;\r\n\r\n            for (i = 0; i < neededColors; i++) {\r\n\r\n                c = $.color.parse(colorPool[i % colorPoolSize] || \"#666\");\r\n\r\n                // Each time we exhaust the colors in the pool we adjust\r\n                // a scaling factor used to produce more variations on\r\n                // those colors. The factor alternates negative/positive\r\n                // to produce lighter/darker colors.\r\n\r\n                // Reset the variation after every few cycles, or else\r\n                // it will end up producing only white or black colors.\r\n\r\n                if (i % colorPoolSize == 0 && i) {\r\n                    if (variation >= 0) {\r\n                        if (variation < 0.5) {\r\n                            variation = -variation - 0.2;\r\n                        } else variation = 0;\r\n                    } else variation = -variation;\r\n                }\r\n\r\n                colors[i] = c.scale('rgb', 1 + variation);\r\n            }\r\n\r\n            // Finalize the series options, filling in their colors\r\n\r\n            var colori = 0, s;\r\n            for (i = 0; i < series.length; ++i) {\r\n                s = series[i];\r\n\r\n                // assign colors\r\n                if (s.color == null) {\r\n                    s.color = colors[colori].toString();\r\n                    ++colori;\r\n                }\r\n                else if (typeof s.color == \"number\")\r\n                    s.color = colors[s.color].toString();\r\n\r\n                // turn on lines automatically in case nothing is set\r\n                if (s.lines.show == null) {\r\n                    var v, show = true;\r\n                    for (v in s)\r\n                        if (s[v] && s[v].show) {\r\n                            show = false;\r\n                            break;\r\n                        }\r\n                    if (show)\r\n                        s.lines.show = true;\r\n                }\r\n\r\n                // If nothing was provided for lines.zero, default it to match\r\n                // lines.fill, since areas by default should extend to zero.\r\n\r\n                if (s.lines.zero == null) {\r\n                    s.lines.zero = !!s.lines.fill;\r\n                }\r\n\r\n                // setup axes\r\n                s.xaxis = getOrCreateAxis(xaxes, axisNumber(s, \"x\"));\r\n                s.yaxis = getOrCreateAxis(yaxes, axisNumber(s, \"y\"));\r\n            }\r\n        }\r\n\r\n        function processData() {\r\n            var topSentry = Number.POSITIVE_INFINITY,\r\n                bottomSentry = Number.NEGATIVE_INFINITY,\r\n                fakeInfinity = Number.MAX_VALUE,\r\n                i, j, k, m, length,\r\n                s, points, ps, x, y, axis, val, f, p,\r\n                data, format;\r\n\r\n            function updateAxis(axis, min, max) {\r\n                if (min < axis.datamin && min != -fakeInfinity)\r\n                    axis.datamin = min;\r\n                if (max > axis.datamax && max != fakeInfinity)\r\n                    axis.datamax = max;\r\n            }\r\n\r\n            $.each(allAxes(), function (_, axis) {\r\n                // init axis\r\n                axis.datamin = topSentry;\r\n                axis.datamax = bottomSentry;\r\n                axis.used = false;\r\n            });\r\n\r\n            for (i = 0; i < series.length; ++i) {\r\n                s = series[i];\r\n                s.datapoints = { points: [] };\r\n\r\n                executeHooks(hooks.processRawData, [ s, s.data, s.datapoints ]);\r\n            }\r\n\r\n            // first pass: clean and copy data\r\n            for (i = 0; i < series.length; ++i) {\r\n                s = series[i];\r\n\r\n                data = s.data;\r\n                format = s.datapoints.format;\r\n\r\n                if (!format) {\r\n                    format = [];\r\n                    // find out how to copy\r\n                    format.push({ x: true, number: true, required: true });\r\n                    format.push({ y: true, number: true, required: true });\r\n\r\n                    if (s.bars.show || (s.lines.show && s.lines.fill)) {\r\n                        var autoscale = !!((s.bars.show && s.bars.zero) || (s.lines.show && s.lines.zero));\r\n                        format.push({ y: true, number: true, required: false, defaultValue: 0, autoscale: autoscale });\r\n                        if (s.bars.horizontal) {\r\n                            delete format[format.length - 1].y;\r\n                            format[format.length - 1].x = true;\r\n                        }\r\n                    }\r\n\r\n                    s.datapoints.format = format;\r\n                }\r\n\r\n                if (s.datapoints.pointsize != null)\r\n                    continue; // already filled in\r\n\r\n                s.datapoints.pointsize = format.length;\r\n\r\n                ps = s.datapoints.pointsize;\r\n                points = s.datapoints.points;\r\n\r\n                var insertSteps = s.lines.show && s.lines.steps;\r\n                s.xaxis.used = s.yaxis.used = true;\r\n\r\n                for (j = k = 0; j < data.length; ++j, k += ps) {\r\n                    p = data[j];\r\n\r\n                    var nullify = p == null;\r\n                    if (!nullify) {\r\n                        for (m = 0; m < ps; ++m) {\r\n                            val = p[m];\r\n                            f = format[m];\r\n\r\n                            if (f) {\r\n                                if (f.number && val != null) {\r\n                                    val = +val; // convert to number\r\n                                    if (isNaN(val))\r\n                                        val = null;\r\n                                    else if (val == Infinity)\r\n                                        val = fakeInfinity;\r\n                                    else if (val == -Infinity)\r\n                                        val = -fakeInfinity;\r\n                                }\r\n\r\n                                if (val == null) {\r\n                                    if (f.required)\r\n                                        nullify = true;\r\n\r\n                                    if (f.defaultValue != null)\r\n                                        val = f.defaultValue;\r\n                                }\r\n                            }\r\n\r\n                            points[k + m] = val;\r\n                        }\r\n                    }\r\n\r\n                    if (nullify) {\r\n                        for (m = 0; m < ps; ++m) {\r\n                            val = points[k + m];\r\n                            if (val != null) {\r\n                                f = format[m];\r\n                                // extract min/max info\r\n                                if (f.autoscale !== false) {\r\n                                    if (f.x) {\r\n                                        updateAxis(s.xaxis, val, val);\r\n                                    }\r\n                                    if (f.y) {\r\n                                        updateAxis(s.yaxis, val, val);\r\n                                    }\r\n                                }\r\n                            }\r\n                            points[k + m] = null;\r\n                        }\r\n                    }\r\n\r\n                    if (insertSteps && k > 0 && (!nullify || points[k - ps] != null)) {\r\n                        // copy the point to make room for a middle point\r\n                        for (m = 0; m < ps; ++m)\r\n                            points[k + ps + m] = points[k + m];\r\n\r\n                        // middle point has same y\r\n                        points[k + 1] = points[k - ps + 1] || 0;\r\n\r\n                        // if series has null values, let's give the last !null value a nice step\r\n                        if(nullify)\r\n                        \tpoints[k] = p[0];\r\n\r\n                        // we've added a point, better reflect that\r\n                        k += ps;\r\n                    }\r\n                }\r\n            }\r\n\r\n            // give the hooks a chance to run\r\n            for (i = 0; i < series.length; ++i) {\r\n                s = series[i];\r\n                points = s.datapoints.points;\r\n                ps = s.datapoints.pointsize;\r\n\r\n                // grafana\r\n                if (s.transform === 'negative-Y') {\r\n                  for (j = 0; j < points.length; j += ps) {\r\n                    if (points[j] == null)\r\n                        continue;\r\n\r\n                      val = points[j + 1];\r\n                      points[j + 1] = -val;\r\n                  }\r\n                }\r\n\r\n                executeHooks(hooks.processDatapoints, [ s, s.datapoints]);\r\n            }\r\n\r\n            // second pass: find datamax/datamin for auto-scaling\r\n            for (i = 0; i < series.length; ++i) {\r\n                s = series[i];\r\n                points = s.datapoints.points;\r\n                ps = s.datapoints.pointsize;\r\n                format = s.datapoints.format;\r\n\r\n                var xmin = topSentry, ymin = topSentry,\r\n                    xmax = bottomSentry, ymax = bottomSentry;\r\n\r\n                for (j = 0; j < points.length; j += ps) {\r\n                    if (points[j] == null)\r\n                        continue;\r\n\r\n                    for (m = 0; m < ps; ++m) {\r\n                        val = points[j + m];\r\n                        f = format[m];\r\n                        if (!f || f.autoscale === false || val == fakeInfinity || val == -fakeInfinity)\r\n                            continue;\r\n\r\n                        if (f.x) {\r\n                            if (val < xmin)\r\n                                xmin = val;\r\n                            if (val > xmax)\r\n                                xmax = val;\r\n                        }\r\n                        if (f.y) {\r\n                            if (val < ymin)\r\n                                ymin = val;\r\n                            if (val > ymax)\r\n                                ymax = val;\r\n                        }\r\n                    }\r\n                }\r\n\r\n                if (s.bars.show) {\r\n                    // make sure we got room for the bar on the dancing floor\r\n                    var delta;\r\n\r\n                    switch (s.bars.align) {\r\n                        case \"left\":\r\n                            delta = 0;\r\n                            break;\r\n                        case \"right\":\r\n                            delta = -s.bars.barWidth;\r\n                            break;\r\n                        default:\r\n                            delta = -s.bars.barWidth / 2;\r\n                    }\r\n\r\n                    if (s.bars.horizontal) {\r\n                        ymin += delta;\r\n                        ymax += delta + s.bars.barWidth;\r\n                    }\r\n                    else {\r\n                        xmin += delta;\r\n                        xmax += delta + s.bars.barWidth;\r\n                    }\r\n                }\r\n\r\n                updateAxis(s.xaxis, xmin, xmax);\r\n                updateAxis(s.yaxis, ymin, ymax);\r\n            }\r\n\r\n            $.each(allAxes(), function (_, axis) {\r\n                if (axis.datamin == topSentry)\r\n                    axis.datamin = null;\r\n                if (axis.datamax == bottomSentry)\r\n                    axis.datamax = null;\r\n            });\r\n        }\r\n\r\n        function setupCanvases() {\r\n            // Make sure the placeholder is clear of everything except canvases\r\n            // from a previous plot in this container that we'll try to re-use.\r\n\r\n            placeholder.find(\".flot-temp-elem\").remove();\r\n\r\n            if (placeholder.css(\"position\") == 'static')\r\n                placeholder.css(\"position\", \"relative\"); // for positioning labels and overlay\r\n\r\n            surface = new Canvas(\"flot-base\", placeholder);\r\n            overlay = new Canvas(\"flot-overlay\", placeholder); // overlay canvas for interactive features\r\n\r\n            ctx = surface.context;\r\n            octx = overlay.context;\r\n\r\n            // define which element we're listening for events on\r\n            eventHolder = $(overlay.element).unbind();\r\n\r\n            // If we're re-using a plot object, shut down the old one\r\n\r\n            var existing = placeholder.data(\"plot\");\r\n\r\n            if (existing) {\r\n                existing.shutdown();\r\n                overlay.clear();\r\n            }\r\n\r\n            // save in case we get replotted\r\n            placeholder.data(\"plot\", plot);\r\n        }\r\n\r\n        function bindEvents() {\r\n            // bind events\r\n            if (options.grid.hoverable) {\r\n                eventHolder.mousemove(onMouseMove);\r\n\r\n                // Use bind, rather than .mouseleave, because we officially\r\n                // still support jQuery 1.2.6, which doesn't define a shortcut\r\n                // for mouseenter or mouseleave.  This was a bug/oversight that\r\n                // was fixed somewhere around 1.3.x.  We can return to using\r\n                // .mouseleave when we drop support for 1.2.6.\r\n\r\n                eventHolder.bind(\"mouseleave\", onMouseLeave);\r\n            }\r\n\r\n            if (options.grid.clickable)\r\n                eventHolder.click(onClick);\r\n\r\n            executeHooks(hooks.bindEvents, [eventHolder]);\r\n        }\r\n\r\n        function shutdown() {\r\n            if (redrawTimeout)\r\n                clearTimeout(redrawTimeout);\r\n\r\n            eventHolder.unbind(\"mousemove\", onMouseMove);\r\n            eventHolder.unbind(\"mouseleave\", onMouseLeave);\r\n            eventHolder.unbind(\"click\", onClick);\r\n\r\n            executeHooks(hooks.shutdown, [eventHolder]);\r\n        }\r\n\r\n        function setTransformationHelpers(axis) {\r\n            // set helper functions on the axis, assumes plot area\r\n            // has been computed already\r\n\r\n            function identity(x) { return x; }\r\n\r\n            var s, m, t = axis.options.transform || identity,\r\n                it = axis.options.inverseTransform;\r\n\r\n            // precompute how much the axis is scaling a point\r\n            // in canvas space\r\n            if (axis.direction == \"x\") {\r\n                s = axis.scale = plotWidth / Math.abs(t(axis.max) - t(axis.min));\r\n                m = Math.min(t(axis.max), t(axis.min));\r\n            }\r\n            else {\r\n                s = axis.scale = plotHeight / Math.abs(t(axis.max) - t(axis.min));\r\n                s = -s;\r\n                m = Math.max(t(axis.max), t(axis.min));\r\n            }\r\n\r\n            // data point to canvas coordinate\r\n            if (t == identity) // slight optimization\r\n                axis.p2c = function (p) { return (p - m) * s; };\r\n            else\r\n                axis.p2c = function (p) { return (t(p) - m) * s; };\r\n            // canvas coordinate to data point\r\n            if (!it)\r\n                axis.c2p = function (c) { return m + c / s; };\r\n            else\r\n                axis.c2p = function (c) { return it(m + c / s); };\r\n        }\r\n\r\n        function measureTickLabels(axis) {\r\n\r\n            var opts = axis.options,\r\n                ticks = axis.ticks || [],\r\n                labelWidth = opts.labelWidth || 0,\r\n                labelHeight = opts.labelHeight || 0,\r\n                maxWidth = labelWidth || (axis.direction == \"x\" ? Math.floor(surface.width / (ticks.length || 1)) : null),\r\n                legacyStyles = axis.direction + \"Axis \" + axis.direction + axis.n + \"Axis\",\r\n                layer = \"flot-\" + axis.direction + \"-axis flot-\" + axis.direction + axis.n + \"-axis \" + legacyStyles,\r\n                font = opts.font || \"flot-tick-label tickLabel\";\r\n\r\n            for (var i = 0; i < ticks.length; ++i) {\r\n\r\n                var t = ticks[i];\r\n\r\n                if (!t.label)\r\n                    continue;\r\n\r\n                var info = surface.getTextInfo(layer, t.label, font, null, maxWidth);\r\n\r\n                /// Grafana fix, add +1 to label width\r\n                labelWidth = Math.max(labelWidth, info.width + 1);\r\n                labelHeight = Math.max(labelHeight, info.height);\r\n            }\r\n\r\n            axis.labelWidth = opts.labelWidth || labelWidth;\r\n            axis.labelHeight = opts.labelHeight || labelHeight;\r\n        }\r\n\r\n        function allocateAxisBoxFirstPhase(axis) {\r\n            // find the bounding box of the axis by looking at label\r\n            // widths/heights and ticks, make room by diminishing the\r\n            // plotOffset; this first phase only looks at one\r\n            // dimension per axis, the other dimension depends on the\r\n            // other axes so will have to wait\r\n\r\n            var lw = axis.labelWidth,\r\n                lh = axis.labelHeight,\r\n                pos = axis.options.position,\r\n                isXAxis = axis.direction === \"x\",\r\n                tickLength = axis.options.tickLength,\r\n                axisMargin = options.grid.axisMargin,\r\n                padding = options.grid.labelMargin,\r\n                eventSectionPadding = options.grid.eventSectionHeight,\r\n                innermost = true,\r\n                outermost = true,\r\n                first = true,\r\n                found = false;\r\n\r\n            // Determine the axis's position in its direction and on its side\r\n\r\n            $.each(isXAxis ? xaxes : yaxes, function(i, a) {\r\n                if (a && (a.show || a.reserveSpace)) {\r\n                    if (a === axis) {\r\n                        found = true;\r\n                    } else if (a.options.position === pos) {\r\n                        if (found) {\r\n                            outermost = false;\r\n                        } else {\r\n                            innermost = false;\r\n                        }\r\n                    }\r\n                    if (!found) {\r\n                        first = false;\r\n                    }\r\n                }\r\n            });\r\n\r\n            // The outermost axis on each side has no margin\r\n\r\n            if (outermost) {\r\n                axisMargin = 0;\r\n            }\r\n\r\n            // The ticks for the first axis in each direction stretch across\r\n\r\n            if (tickLength == null) {\r\n                tickLength = first ? \"full\" : 5;\r\n            }\r\n\r\n            if (!isNaN(+tickLength))\r\n                padding += +tickLength;\r\n\r\n            if (isXAxis) {\r\n                // Add space for event section\r\n                lh += padding;\r\n                lh += eventSectionPadding;\r\n\r\n                if (pos == \"bottom\") {\r\n                    plotOffset.bottom += lh + axisMargin;\r\n                    axis.box = { top: surface.height - plotOffset.bottom, height: lh };\r\n                }\r\n                else {\r\n                    axis.box = { top: plotOffset.top + axisMargin, height: lh };\r\n                    plotOffset.top += lh + axisMargin;\r\n                }\r\n            }\r\n            else {\r\n                lw += padding;\r\n\r\n                if (pos == \"left\") {\r\n                    axis.box = { left: plotOffset.left + axisMargin, width: lw };\r\n                    plotOffset.left += lw + axisMargin;\r\n                }\r\n                else {\r\n                    plotOffset.right += lw + axisMargin;\r\n                    axis.box = { left: surface.width - plotOffset.right, width: lw };\r\n                }\r\n            }\r\n\r\n             // save for future reference\r\n            axis.position = pos;\r\n            axis.tickLength = tickLength;\r\n            axis.box.padding = padding;\r\n            axis.box.eventSectionPadding = eventSectionPadding;\r\n            axis.innermost = innermost;\r\n        }\r\n\r\n        function allocateAxisBoxSecondPhase(axis) {\r\n            // now that all axis boxes have been placed in one\r\n            // dimension, we can set the remaining dimension coordinates\r\n            if (axis.direction == \"x\") {\r\n                axis.box.left = plotOffset.left - axis.labelWidth / 2;\r\n                axis.box.width = surface.width - plotOffset.left - plotOffset.right + axis.labelWidth;\r\n            }\r\n            else {\r\n                axis.box.top = plotOffset.top - axis.labelHeight / 2;\r\n                axis.box.height = surface.height - plotOffset.bottom - plotOffset.top + axis.labelHeight;\r\n            }\r\n        }\r\n\r\n        function adjustLayoutForThingsStickingOut() {\r\n            // possibly adjust plot offset to ensure everything stays\r\n            // inside the canvas and isn't clipped off\r\n\r\n            var minMargin = options.grid.minBorderMargin,\r\n                axis, i;\r\n\r\n            // check stuff from the plot (FIXME: this should just read\r\n            // a value from the series, otherwise it's impossible to\r\n            // customize)\r\n            if (minMargin == null) {\r\n                minMargin = 0;\r\n                for (i = 0; i < series.length; ++i)\r\n                    minMargin = Math.max(minMargin, 2 * (series[i].points.radius + series[i].points.lineWidth/2));\r\n            }\r\n\r\n            var margins = {\r\n                left: minMargin,\r\n                right: minMargin,\r\n                top: minMargin,\r\n                bottom: minMargin\r\n            };\r\n\r\n            // check axis labels, note we don't check the actual\r\n            // labels but instead use the overall width/height to not\r\n            // jump as much around with replots\r\n            $.each(allAxes(), function (_, axis) {\r\n                if (axis.reserveSpace && axis.ticks && axis.ticks.length) {\r\n                    if (axis.direction === \"x\") {\r\n                        margins.left = Math.max(margins.left, axis.labelWidth / 2);\r\n                        margins.right = Math.max(margins.right, axis.labelWidth / 2);\r\n                    } else {\r\n                        margins.bottom = Math.max(margins.bottom, axis.labelHeight / 2);\r\n                        margins.top = Math.max(margins.top, axis.labelHeight / 2);\r\n                    }\r\n                }\r\n            });\r\n\r\n            plotOffset.left = Math.ceil(Math.max(margins.left, plotOffset.left));\r\n            plotOffset.right = Math.ceil(Math.max(margins.right, plotOffset.right));\r\n            plotOffset.top = Math.ceil(Math.max(margins.top, plotOffset.top));\r\n            plotOffset.bottom = Math.ceil(Math.max(margins.bottom, plotOffset.bottom));\r\n        }\r\n\r\n        function setupGrid() {\r\n            var i, axes = allAxes(), showGrid = options.grid.show;\r\n\r\n            // Initialize the plot's offset from the edge of the canvas\r\n\r\n            for (var a in plotOffset) {\r\n                var margin = options.grid.margin || 0;\r\n                plotOffset[a] = typeof margin == \"number\" ? margin : margin[a] || 0;\r\n            }\r\n\r\n            executeHooks(hooks.processOffset, [plotOffset]);\r\n\r\n            // If the grid is visible, add its border width to the offset\r\n\r\n            for (var a in plotOffset) {\r\n                if(typeof(options.grid.borderWidth) == \"object\") {\r\n                    plotOffset[a] += showGrid ? options.grid.borderWidth[a] : 0;\r\n                }\r\n                else {\r\n                    plotOffset[a] += showGrid ? options.grid.borderWidth : 0;\r\n                }\r\n            }\r\n\r\n            $.each(axes, function (_, axis) {\r\n                var axisOpts = axis.options;\r\n                axis.show = axisOpts.show == null ? axis.used : axisOpts.show;\r\n                axis.reserveSpace = axisOpts.reserveSpace == null ? axis.show : axisOpts.reserveSpace;\r\n                setRange(axis);\r\n            });\r\n\r\n            executeHooks(hooks.processRange, []);\r\n\r\n            if (showGrid) {\r\n\r\n                var allocatedAxes = $.grep(axes, function (axis) {\r\n                    return axis.show || axis.reserveSpace;\r\n                });\r\n\r\n                var snaped = false;\r\n                for (var i = 0; i < 2; i++) {\r\n                    $.each(allocatedAxes, function (_, axis) {\r\n                        // make the ticks\r\n                        setupTickGeneration(axis);\r\n                        setTicks(axis);\r\n                        snaped = snapRangeToTicks(axis, axis.ticks) || snaped;\r\n                        // find labelWidth/Height for axis\r\n                        measureTickLabels(axis);\r\n                    });\r\n\r\n                    if (snaped && hooks.processRange.length > 0) {\r\n                        executeHooks(hooks.processRange, []);\r\n                        snaped = false;\r\n                    } else {\r\n                        break;\r\n                    }\r\n                }\r\n\r\n                // with all dimensions calculated, we can compute the\r\n                // axis bounding boxes, start from the outside\r\n                // (reverse order)\r\n                for (i = allocatedAxes.length - 1; i >= 0; --i)\r\n                    allocateAxisBoxFirstPhase(allocatedAxes[i]);\r\n\r\n                // make sure we've got enough space for things that\r\n                // might stick out\r\n                adjustLayoutForThingsStickingOut();\r\n\r\n                $.each(allocatedAxes, function (_, axis) {\r\n                    allocateAxisBoxSecondPhase(axis);\r\n                });\r\n            }\r\n\r\n\r\n            plotWidth = surface.width - plotOffset.left - plotOffset.right;\r\n            plotHeight = surface.height - plotOffset.bottom - plotOffset.top;\r\n\r\n            // now we got the proper plot dimensions, we can compute the scaling\r\n            $.each(axes, function (_, axis) {\r\n                setTransformationHelpers(axis);\r\n            });\r\n\r\n            if (showGrid) {\r\n                drawAxisLabels();\r\n            }\r\n\r\n            insertLegend();\r\n        }\r\n\r\n        function setRange(axis) {\r\n            var opts = axis.options,\r\n                min = +(opts.min != null ? opts.min : axis.datamin),\r\n                max = +(opts.max != null ? opts.max : axis.datamax),\r\n                delta = max - min;\r\n\r\n            if (delta == 0.0) {\r\n                // Grafana fix: wide Y min and max using increased wideFactor\r\n                // when all series values are the same\r\n                var wideFactor = 0.25;\r\n                var widen = Math.abs(max == 0 ? 1 : max * wideFactor);\r\n\r\n                if (opts.min == null) {\r\n                  min -= widen;\r\n                }\r\n                // always widen max if we couldn't widen min to ensure we\r\n                // don't fall into min == max which doesn't work\r\n                if (opts.max == null || opts.min != null) {\r\n                  max += widen;\r\n                }\r\n            }\r\n            else {\r\n                // consider autoscaling\r\n                var margin = opts.autoscaleMargin;\r\n                if (margin != null) {\r\n                    if (opts.min == null) {\r\n                        min -= delta * margin;\r\n                        // make sure we don't go below zero if all values\r\n                        // are positive\r\n                        if (min < 0 && axis.datamin != null && axis.datamin >= 0)\r\n                            min = 0;\r\n                    }\r\n                    if (opts.max == null) {\r\n                        max += delta * margin;\r\n                        if (max > 0 && axis.datamax != null && axis.datamax <= 0)\r\n                            max = 0;\r\n                    }\r\n                }\r\n            }\r\n            axis.min = min;\r\n            axis.max = max;\r\n        }\r\n\r\n        function setupTickGeneration(axis) {\r\n            var opts = axis.options;\r\n\r\n            // estimate number of ticks\r\n            var noTicks;\r\n            if (typeof opts.ticks == \"number\" && opts.ticks > 0)\r\n                noTicks = opts.ticks;\r\n            else\r\n                // heuristic based on the model a*sqrt(x) fitted to\r\n                // some data points that seemed reasonable\r\n                noTicks = 0.3 * Math.sqrt(axis.direction == \"x\" ? surface.width : surface.height);\r\n\r\n            var delta = (axis.max - axis.min) / noTicks,\r\n                dec = -Math.floor(Math.log(delta) / Math.LN10),\r\n                maxDec = opts.tickDecimals;\r\n\r\n            if (maxDec != null && dec > maxDec) {\r\n                dec = maxDec;\r\n            }\r\n\r\n            var magn = Math.pow(10, -dec),\r\n                norm = delta / magn, // norm is between 1.0 and 10.0\r\n                size;\r\n\r\n            if (norm < 1.5) {\r\n                size = 1;\r\n            } else if (norm < 3) {\r\n                size = 2;\r\n                // special case for 2.5, requires an extra decimal\r\n                if (norm > 2.25 && (maxDec == null || dec + 1 <= maxDec)) {\r\n                    size = 2.5;\r\n                    ++dec;\r\n                }\r\n            } else if (norm < 7.5) {\r\n                size = 5;\r\n            } else {\r\n                size = 10;\r\n            }\r\n\r\n            size *= magn;\r\n\r\n            if (opts.minTickSize != null && size < opts.minTickSize) {\r\n                size = opts.minTickSize;\r\n            }\r\n\r\n            axis.delta = delta;\r\n            axis.tickDecimals = Math.max(0, maxDec != null ? maxDec : dec);\r\n            axis.tickSize = opts.tickSize || size;\r\n            // grafana addition\r\n            axis.scaledDecimals = axis.tickDecimals - Math.floor(Math.log(axis.tickSize) / Math.LN10);\r\n\r\n            // Time mode was moved to a plug-in in 0.8, and since so many people use it\r\n            // we'll add an especially friendly reminder to make sure they included it.\r\n\r\n            if (opts.mode == \"time\" && !axis.tickGenerator) {\r\n                throw new Error(\"Time mode requires the flot.time plugin.\");\r\n            }\r\n\r\n            // Flot supports base-10 axes; any other mode else is handled by a plug-in,\r\n            // like flot.time.js.\r\n\r\n            if (!axis.tickGenerator) {\r\n\r\n                axis.tickGenerator = function (axis) {\r\n\r\n                    var ticks = [],\r\n                        start = floorInBase(axis.min, axis.tickSize),\r\n                        i = 0,\r\n                        v = Number.NaN,\r\n                        prev;\r\n\r\n                    do {\r\n                        prev = v;\r\n                        v = start + i * axis.tickSize;\r\n                        ticks.push(v);\r\n                        ++i;\r\n                    } while (v < axis.max && v != prev);\r\n                    return ticks;\r\n                };\r\n\r\n\t\t\t\taxis.tickFormatter = function (value, axis) {\r\n\r\n\t\t\t\t\tvar factor = axis.tickDecimals ? Math.pow(10, axis.tickDecimals) : 1;\r\n\t\t\t\t\tvar formatted = \"\" + Math.round(value * factor) / factor;\r\n\r\n\t\t\t\t\t// If tickDecimals was specified, ensure that we have exactly that\r\n\t\t\t\t\t// much precision; otherwise default to the value's own precision.\r\n\r\n\t\t\t\t\tif (axis.tickDecimals != null) {\r\n\t\t\t\t\t\tvar decimal = formatted.indexOf(\".\");\r\n\t\t\t\t\t\tvar precision = decimal == -1 ? 0 : formatted.length - decimal - 1;\r\n\t\t\t\t\t\tif (precision < axis.tickDecimals) {\r\n\t\t\t\t\t\t\treturn (precision ? formatted : formatted + \".\") + (\"\" + factor).substr(1, axis.tickDecimals - precision);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n                    return formatted;\r\n                };\r\n            }\r\n\r\n            if ($.isFunction(opts.tickFormatter))\r\n                axis.tickFormatter = function (v, axis) { return \"\" + opts.tickFormatter(v, axis); };\r\n\r\n            if (opts.alignTicksWithAxis != null) {\r\n                var otherAxis = (axis.direction == \"x\" ? xaxes : yaxes)[opts.alignTicksWithAxis - 1];\r\n                if (otherAxis && otherAxis.used && otherAxis != axis) {\r\n                    // consider snapping min/max to outermost nice ticks\r\n                    var niceTicks = axis.tickGenerator(axis);\r\n                    if (niceTicks.length > 0) {\r\n                        if (opts.min == null)\r\n                            axis.min = Math.min(axis.min, niceTicks[0]);\r\n                        if (opts.max == null && niceTicks.length > 1)\r\n                            axis.max = Math.max(axis.max, niceTicks[niceTicks.length - 1]);\r\n                    }\r\n\r\n                    axis.tickGenerator = function (axis) {\r\n                        // copy ticks, scaled to this axis\r\n                        var ticks = [], v, i;\r\n                        for (i = 0; i < otherAxis.ticks.length; ++i) {\r\n                            v = (otherAxis.ticks[i].v - otherAxis.min) / (otherAxis.max - otherAxis.min);\r\n                            v = axis.min + v * (axis.max - axis.min);\r\n                            ticks.push(v);\r\n                        }\r\n                        return ticks;\r\n                    };\r\n\r\n                    // we might need an extra decimal since forced\r\n                    // ticks don't necessarily fit naturally\r\n                    if (!axis.mode && opts.tickDecimals == null) {\r\n                        var extraDec = Math.max(0, -Math.floor(Math.log(axis.delta) / Math.LN10) + 1),\r\n                            ts = axis.tickGenerator(axis);\r\n\r\n                        // only proceed if the tick interval rounded\r\n                        // with an extra decimal doesn't give us a\r\n                        // zero at end\r\n                        if (!(ts.length > 1 && /\\..*0$/.test((ts[1] - ts[0]).toFixed(extraDec))))\r\n                            axis.tickDecimals = extraDec;\r\n                    }\r\n                }\r\n            }\r\n        }\r\n\r\n        function setTicks(axis) {\r\n            var oticks = axis.options.ticks, ticks = [];\r\n            if (oticks == null || (typeof oticks == \"number\" && oticks > 0))\r\n                ticks = axis.tickGenerator(axis);\r\n            else if (oticks) {\r\n                if ($.isFunction(oticks))\r\n                    // generate the ticks\r\n                    ticks = oticks(axis);\r\n                else\r\n                    ticks = oticks;\r\n            }\r\n\r\n            // clean up/labelify the supplied ticks, copy them over\r\n            var i, v;\r\n            axis.ticks = [];\r\n            for (i = 0; i < ticks.length; ++i) {\r\n                var label = null;\r\n                var t = ticks[i];\r\n                if (typeof t == \"object\") {\r\n                    v = +t[0];\r\n                    if (t.length > 1)\r\n                        label = t[1];\r\n                }\r\n                else\r\n                    v = +t;\r\n                if (label == null)\r\n                    label = axis.tickFormatter(v, axis);\r\n                if (!isNaN(v))\r\n                    axis.ticks.push({ v: v, label: label });\r\n            }\r\n        }\r\n\r\n        function snapRangeToTicks(axis, ticks) {\r\n            var changed = false;\r\n            if (axis.options.autoscaleMargin && ticks.length > 0) {\r\n                // snap to ticks\r\n                if (axis.options.min == null) {\r\n                    axis.min = Math.min(axis.min, ticks[0].v);\r\n                    changed = true;\r\n                }\r\n                if (axis.options.max == null && ticks.length > 1) {\r\n                    axis.max = Math.max(axis.max, ticks[ticks.length - 1].v);\r\n                    changed = true;\r\n                }\r\n            }\r\n            return changed;\r\n        }\r\n\r\n        function draw() {\r\n\r\n            surface.clear();\r\n\r\n            executeHooks(hooks.drawBackground, [ctx]);\r\n\r\n            var grid = options.grid;\r\n\r\n            // draw background, if any\r\n            if (grid.show && grid.backgroundColor)\r\n                drawBackground();\r\n\r\n            if (grid.show && !grid.aboveData) {\r\n                drawGrid();\r\n            }\r\n\r\n            for (var i = 0; i < series.length; ++i) {\r\n                executeHooks(hooks.drawSeries, [ctx, series[i]]);\r\n                drawSeries(series[i]);\r\n            }\r\n\r\n            executeHooks(hooks.draw, [ctx]);\r\n\r\n            if (grid.show && grid.aboveData) {\r\n                drawGrid();\r\n            }\r\n\r\n            surface.render();\r\n\r\n            // A draw implies that either the axes or data have changed, so we\r\n            // should probably update the overlay highlights as well.\r\n\r\n            triggerRedrawOverlay();\r\n        }\r\n\r\n        function extractRange(ranges, coord) {\r\n            var axis, from, to, key, axes = allAxes();\r\n\r\n            for (var i = 0; i < axes.length; ++i) {\r\n                axis = axes[i];\r\n                if (axis.direction == coord) {\r\n                    key = coord + axis.n + \"axis\";\r\n                    if (!ranges[key] && axis.n == 1)\r\n                        key = coord + \"axis\"; // support x1axis as xaxis\r\n                    if (ranges[key]) {\r\n                        from = ranges[key].from;\r\n                        to = ranges[key].to;\r\n                        break;\r\n                    }\r\n                }\r\n            }\r\n\r\n            // backwards-compat stuff - to be removed in future\r\n            if (!ranges[key]) {\r\n                axis = coord == \"x\" ? xaxes[0] : yaxes[0];\r\n                from = ranges[coord + \"1\"];\r\n                to = ranges[coord + \"2\"];\r\n            }\r\n\r\n            // auto-reverse as an added bonus\r\n            if (from != null && to != null && from > to) {\r\n                var tmp = from;\r\n                from = to;\r\n                to = tmp;\r\n            }\r\n\r\n            return { from: from, to: to, axis: axis };\r\n        }\r\n\r\n        function drawBackground() {\r\n            ctx.save();\r\n            ctx.translate(plotOffset.left, plotOffset.top);\r\n\r\n            ctx.fillStyle = getColorOrGradient(options.grid.backgroundColor, plotHeight, 0, \"rgba(255, 255, 255, 0)\");\r\n            ctx.fillRect(0, 0, plotWidth, plotHeight);\r\n            ctx.restore();\r\n        }\r\n\r\n        function drawGrid() {\r\n            var i, axes, bw, bc;\r\n\r\n            ctx.save();\r\n            ctx.translate(plotOffset.left, plotOffset.top);\r\n\r\n            // draw markings\r\n            var markings = options.grid.markings;\r\n            if (markings) {\r\n                if ($.isFunction(markings)) {\r\n                    axes = plot.getAxes();\r\n                    // xmin etc. is backwards compatibility, to be\r\n                    // removed in the future\r\n                    axes.xmin = axes.xaxis.min;\r\n                    axes.xmax = axes.xaxis.max;\r\n                    axes.ymin = axes.yaxis.min;\r\n                    axes.ymax = axes.yaxis.max;\r\n\r\n                    markings = markings(axes);\r\n                }\r\n\r\n                for (i = 0; i < markings.length; ++i) {\r\n                    var m = markings[i],\r\n                        xrange = extractRange(m, \"x\"),\r\n                        yrange = extractRange(m, \"y\");\r\n\r\n                    // fill in missing\r\n                    if (xrange.from == null)\r\n                        xrange.from = xrange.axis.min;\r\n                    if (xrange.to == null)\r\n                        xrange.to = xrange.axis.max;\r\n                    if (yrange.from == null)\r\n                        yrange.from = yrange.axis.min;\r\n                    if (yrange.to == null)\r\n                        yrange.to = yrange.axis.max;\r\n\r\n                    // clip\r\n                    if (xrange.to < xrange.axis.min || xrange.from > xrange.axis.max ||\r\n                        yrange.to < yrange.axis.min || yrange.from > yrange.axis.max)\r\n                        continue;\r\n\r\n                    xrange.from = Math.max(xrange.from, xrange.axis.min);\r\n                    xrange.to = Math.min(xrange.to, xrange.axis.max);\r\n                    yrange.from = Math.max(yrange.from, yrange.axis.min);\r\n                    yrange.to = Math.min(yrange.to, yrange.axis.max);\r\n\r\n                    var xequal = xrange.from === xrange.to,\r\n                        yequal = yrange.from === yrange.to;\r\n\r\n                    if (xequal && yequal) {\r\n                        continue;\r\n                    }\r\n\r\n                    // then draw\r\n                    xrange.from = Math.floor(xrange.axis.p2c(xrange.from));\r\n                    xrange.to = Math.floor(xrange.axis.p2c(xrange.to));\r\n                    yrange.from = Math.floor(yrange.axis.p2c(yrange.from));\r\n                    yrange.to = Math.floor(yrange.axis.p2c(yrange.to));\r\n\r\n                    if (xequal || yequal) {\r\n                        var lineWidth = m.lineWidth || options.grid.markingsLineWidth,\r\n                            subPixel = lineWidth % 2 ? 0.5 : 0;\r\n                        ctx.beginPath();\r\n                        ctx.strokeStyle = m.color || options.grid.markingsColor;\r\n                        ctx.lineWidth = lineWidth;\r\n                        if (xequal) {\r\n                            ctx.moveTo(xrange.to + subPixel, yrange.from);\r\n                            ctx.lineTo(xrange.to + subPixel, yrange.to);\r\n                        } else {\r\n                            ctx.moveTo(xrange.from, yrange.to + subPixel);\r\n                            ctx.lineTo(xrange.to, yrange.to + subPixel);\r\n                        }\r\n                        ctx.stroke();\r\n                    } else {\r\n                        ctx.fillStyle = m.color || options.grid.markingsColor;\r\n                        ctx.fillRect(xrange.from, yrange.to,\r\n                                     xrange.to - xrange.from,\r\n                                     yrange.from - yrange.to);\r\n                    }\r\n                }\r\n            }\r\n\r\n            // draw the ticks\r\n            axes = allAxes();\r\n            bw = options.grid.borderWidth;\r\n\r\n            for (var j = 0; j < axes.length; ++j) {\r\n                var axis = axes[j], box = axis.box,\r\n                    t = axis.tickLength, x, y, xoff, yoff;\r\n                if (!axis.show || axis.ticks.length == 0)\r\n                    continue;\r\n\r\n                ctx.lineWidth = 1;\r\n\r\n                // find the edges\r\n                if (axis.direction == \"x\") {\r\n                    x = 0;\r\n                    if (t == \"full\")\r\n                        y = (axis.position == \"top\" ? 0 : plotHeight);\r\n                    else\r\n                        y = box.top - plotOffset.top + (axis.position == \"top\" ? box.height : 0);\r\n                }\r\n                else {\r\n                    y = 0;\r\n                    if (t == \"full\")\r\n                        x = (axis.position == \"left\" ? 0 : plotWidth);\r\n                    else\r\n                        x = box.left - plotOffset.left + (axis.position == \"left\" ? box.width : 0);\r\n                }\r\n\r\n                // draw tick bar\r\n                if (!axis.innermost) {\r\n                    ctx.strokeStyle = axis.options.color;\r\n                    ctx.beginPath();\r\n                    xoff = yoff = 0;\r\n                    if (axis.direction == \"x\")\r\n                        xoff = plotWidth + 1;\r\n                    else\r\n                        yoff = plotHeight + 1;\r\n\r\n                    if (ctx.lineWidth == 1) {\r\n                        if (axis.direction == \"x\") {\r\n                            y = Math.floor(y) + 0.5;\r\n                        } else {\r\n                            x = Math.floor(x) + 0.5;\r\n                        }\r\n                    }\r\n\r\n                    ctx.moveTo(x, y);\r\n                    ctx.lineTo(x + xoff, y + yoff);\r\n                    ctx.stroke();\r\n                }\r\n\r\n                // draw ticks\r\n\r\n                ctx.strokeStyle = axis.options.tickColor;\r\n\r\n                ctx.beginPath();\r\n                for (i = 0; i < axis.ticks.length; ++i) {\r\n                    var v = axis.ticks[i].v;\r\n\r\n                    xoff = yoff = 0;\r\n\r\n                    if (isNaN(v) || v < axis.min || v > axis.max\r\n                        // skip those lying on the axes if we got a border\r\n                        || (t == \"full\"\r\n                            && ((typeof bw == \"object\" && bw[axis.position] > 0) || bw > 0)\r\n                            && (v == axis.min || v == axis.max)))\r\n                        continue;\r\n\r\n                    if (axis.direction == \"x\") {\r\n                        x = axis.p2c(v);\r\n                        yoff = t == \"full\" ? -plotHeight : t;\r\n\r\n                        if (axis.position == \"top\")\r\n                            yoff = -yoff;\r\n                    }\r\n                    else {\r\n                        y = axis.p2c(v);\r\n                        xoff = t == \"full\" ? -plotWidth : t;\r\n\r\n                        if (axis.position == \"left\")\r\n                            xoff = -xoff;\r\n                    }\r\n\r\n                    if (ctx.lineWidth == 1) {\r\n                        if (axis.direction == \"x\")\r\n                            x = Math.floor(x) + 0.5;\r\n                        else\r\n                            y = Math.floor(y) + 0.5;\r\n                    }\r\n\r\n                    ctx.moveTo(x, y);\r\n                    ctx.lineTo(x + xoff, y + yoff);\r\n                }\r\n\r\n                ctx.stroke();\r\n            }\r\n\r\n\r\n            // draw border\r\n            if (bw) {\r\n                // If either borderWidth or borderColor is an object, then draw the border\r\n                // line by line instead of as one rectangle\r\n                bc = options.grid.borderColor;\r\n                if(typeof bw == \"object\" || typeof bc == \"object\") {\r\n                    if (typeof bw !== \"object\") {\r\n                        bw = {top: bw, right: bw, bottom: bw, left: bw};\r\n                    }\r\n                    if (typeof bc !== \"object\") {\r\n                        bc = {top: bc, right: bc, bottom: bc, left: bc};\r\n                    }\r\n\r\n                    if (bw.top > 0) {\r\n                        ctx.strokeStyle = bc.top;\r\n                        ctx.lineWidth = bw.top;\r\n                        ctx.beginPath();\r\n                        ctx.moveTo(0 - bw.left, 0 - bw.top/2);\r\n                        ctx.lineTo(plotWidth, 0 - bw.top/2);\r\n                        ctx.stroke();\r\n                    }\r\n\r\n                    if (bw.right > 0) {\r\n                        ctx.strokeStyle = bc.right;\r\n                        ctx.lineWidth = bw.right;\r\n                        ctx.beginPath();\r\n                        ctx.moveTo(plotWidth + bw.right / 2, 0 - bw.top);\r\n                        ctx.lineTo(plotWidth + bw.right / 2, plotHeight);\r\n                        ctx.stroke();\r\n                    }\r\n\r\n                    if (bw.bottom > 0) {\r\n                        ctx.strokeStyle = bc.bottom;\r\n                        ctx.lineWidth = bw.bottom;\r\n                        ctx.beginPath();\r\n                        ctx.moveTo(plotWidth + bw.right, plotHeight + bw.bottom / 2);\r\n                        ctx.lineTo(0, plotHeight + bw.bottom / 2);\r\n                        ctx.stroke();\r\n                    }\r\n\r\n                    if (bw.left > 0) {\r\n                        ctx.strokeStyle = bc.left;\r\n                        ctx.lineWidth = bw.left;\r\n                        ctx.beginPath();\r\n                        ctx.moveTo(0 - bw.left/2, plotHeight + bw.bottom);\r\n                        ctx.lineTo(0- bw.left/2, 0);\r\n                        ctx.stroke();\r\n                    }\r\n                }\r\n                else {\r\n                    ctx.lineWidth = bw;\r\n                    ctx.strokeStyle = options.grid.borderColor;\r\n                    ctx.strokeRect(-bw/2, -bw/2, plotWidth + bw, plotHeight + bw);\r\n                }\r\n            }\r\n\r\n            ctx.restore();\r\n        }\r\n\r\n        function drawAxisLabels() {\r\n\r\n            $.each(allAxes(), function (_, axis) {\r\n                var box = axis.box,\r\n                    legacyStyles = axis.direction + \"Axis \" + axis.direction + axis.n + \"Axis\",\r\n                    layer = \"flot-\" + axis.direction + \"-axis flot-\" + axis.direction + axis.n + \"-axis \" + legacyStyles,\r\n                    font = axis.options.font || \"flot-tick-label tickLabel\",\r\n                    tick, x, y, halign, valign;\r\n\r\n                // Remove text before checking for axis.show and ticks.length;\r\n                // otherwise plugins, like flot-tickrotor, that draw their own\r\n                // tick labels will end up with both theirs and the defaults.\r\n\r\n                surface.removeText(layer);\r\n\r\n                if (!axis.show || axis.ticks.length == 0)\r\n                    return;\r\n\r\n                for (var i = 0; i < axis.ticks.length; ++i) {\r\n\r\n                    tick = axis.ticks[i];\r\n                    if (!tick.label || tick.v < axis.min || tick.v > axis.max)\r\n                        continue;\r\n\r\n                    if (axis.direction == \"x\") {\r\n                        halign = \"center\";\r\n                        x = plotOffset.left + axis.p2c(tick.v);\r\n                        if (axis.position == \"bottom\") {\r\n                            y = box.top + box.padding + box.eventSectionPadding;\r\n                        } else {\r\n                            y = box.top + box.height - box.padding;\r\n                            valign = \"bottom\";\r\n                        }\r\n                    } else {\r\n                        valign = \"middle\";\r\n                        y = plotOffset.top + axis.p2c(tick.v);\r\n                        if (axis.position == \"left\") {\r\n                            x = box.left + box.width - box.padding;\r\n                            halign = \"right\";\r\n                        } else {\r\n                            x = box.left + box.padding;\r\n                        }\r\n                    }\r\n\r\n                    surface.addText(layer, x, y, tick.label, font, null, null, halign, valign);\r\n                }\r\n            });\r\n        }\r\n\r\n        function drawSeries(series) {\r\n            if (series.lines.show)\r\n                drawSeriesLines(series);\r\n            if (series.bars.show)\r\n                drawSeriesBars(series);\r\n            if (series.points.show)\r\n                drawSeriesPoints(series);\r\n        }\r\n\r\n        function drawSeriesLines(series) {\r\n            function plotLine(datapoints, xoffset, yoffset, axisx, axisy) {\r\n                var points = datapoints.points,\r\n                    ps = datapoints.pointsize,\r\n                    prevx = null, prevy = null;\r\n\r\n                ctx.beginPath();\r\n                for (var i = ps; i < points.length; i += ps) {\r\n                    var x1 = points[i - ps], y1 = points[i - ps + 1],\r\n                        x2 = points[i], y2 = points[i + 1];\r\n\r\n                    if (x1 == null || x2 == null)\r\n                        continue;\r\n\r\n                    // clip with ymin\r\n                    if (y1 <= y2 && y1 < axisy.min) {\r\n                        if (y2 < axisy.min)\r\n                            continue;   // line segment is outside\r\n                        // compute new intersection point\r\n                        x1 = (axisy.min - y1) / (y2 - y1) * (x2 - x1) + x1;\r\n                        y1 = axisy.min;\r\n                    }\r\n                    else if (y2 <= y1 && y2 < axisy.min) {\r\n                        if (y1 < axisy.min)\r\n                            continue;\r\n                        x2 = (axisy.min - y1) / (y2 - y1) * (x2 - x1) + x1;\r\n                        y2 = axisy.min;\r\n                    }\r\n\r\n                    // clip with ymax\r\n                    if (y1 >= y2 && y1 > axisy.max) {\r\n                        if (y2 > axisy.max)\r\n                            continue;\r\n                        x1 = (axisy.max - y1) / (y2 - y1) * (x2 - x1) + x1;\r\n                        y1 = axisy.max;\r\n                    }\r\n                    else if (y2 >= y1 && y2 > axisy.max) {\r\n                        if (y1 > axisy.max)\r\n                            continue;\r\n                        x2 = (axisy.max - y1) / (y2 - y1) * (x2 - x1) + x1;\r\n                        y2 = axisy.max;\r\n                    }\r\n\r\n                    // clip with xmin\r\n                    if (x1 <= x2 && x1 < axisx.min) {\r\n                        if (x2 < axisx.min)\r\n                            continue;\r\n                        y1 = (axisx.min - x1) / (x2 - x1) * (y2 - y1) + y1;\r\n                        x1 = axisx.min;\r\n                    }\r\n                    else if (x2 <= x1 && x2 < axisx.min) {\r\n                        if (x1 < axisx.min)\r\n                            continue;\r\n                        y2 = (axisx.min - x1) / (x2 - x1) * (y2 - y1) + y1;\r\n                        x2 = axisx.min;\r\n                    }\r\n\r\n                    // clip with xmax\r\n                    if (x1 >= x2 && x1 > axisx.max) {\r\n                        if (x2 > axisx.max)\r\n                            continue;\r\n                        y1 = (axisx.max - x1) / (x2 - x1) * (y2 - y1) + y1;\r\n                        x1 = axisx.max;\r\n                    }\r\n                    else if (x2 >= x1 && x2 > axisx.max) {\r\n                        if (x1 > axisx.max)\r\n                            continue;\r\n                        y2 = (axisx.max - x1) / (x2 - x1) * (y2 - y1) + y1;\r\n                        x2 = axisx.max;\r\n                    }\r\n\r\n                    if (x1 != prevx || y1 != prevy)\r\n                        ctx.moveTo(axisx.p2c(x1) + xoffset, axisy.p2c(y1) + yoffset);\r\n\r\n                    prevx = x2;\r\n                    prevy = y2;\r\n                    ctx.lineTo(axisx.p2c(x2) + xoffset, axisy.p2c(y2) + yoffset);\r\n                }\r\n                ctx.stroke();\r\n            }\r\n\r\n            function plotLineArea(datapoints, axisx, axisy) {\r\n                var points = datapoints.points,\r\n                    ps = datapoints.pointsize,\r\n                    bottom = Math.min(Math.max(0, axisy.min), axisy.max),\r\n                    i = 0, top, areaOpen = false,\r\n                    ypos = 1, segmentStart = 0, segmentEnd = 0;\r\n\r\n                // we process each segment in two turns, first forward\r\n                // direction to sketch out top, then once we hit the\r\n                // end we go backwards to sketch the bottom\r\n                while (true) {\r\n                    if (ps > 0 && i > points.length + ps)\r\n                        break;\r\n\r\n                    i += ps; // ps is negative if going backwards\r\n\r\n                    var x1 = points[i - ps],\r\n                        y1 = points[i - ps + ypos],\r\n                        x2 = points[i], y2 = points[i + ypos];\r\n\r\n                    if (areaOpen) {\r\n                        if (ps > 0 && x1 != null && x2 == null) {\r\n                            // at turning point\r\n                            segmentEnd = i;\r\n                            ps = -ps;\r\n                            ypos = 2;\r\n                            continue;\r\n                        }\r\n\r\n                        if (ps < 0 && i == segmentStart + ps) {\r\n                            // done with the reverse sweep\r\n                            ctx.fill();\r\n                            areaOpen = false;\r\n                            ps = -ps;\r\n                            ypos = 1;\r\n                            i = segmentStart = segmentEnd + ps;\r\n                            continue;\r\n                        }\r\n                    }\r\n\r\n                    if (x1 == null || x2 == null)\r\n                        continue;\r\n\r\n                    // clip x values\r\n\r\n                    // clip with xmin\r\n                    if (x1 <= x2 && x1 < axisx.min) {\r\n                        if (x2 < axisx.min)\r\n                            continue;\r\n                        y1 = (axisx.min - x1) / (x2 - x1) * (y2 - y1) + y1;\r\n                        x1 = axisx.min;\r\n                    }\r\n                    else if (x2 <= x1 && x2 < axisx.min) {\r\n                        if (x1 < axisx.min)\r\n                            continue;\r\n                        y2 = (axisx.min - x1) / (x2 - x1) * (y2 - y1) + y1;\r\n                        x2 = axisx.min;\r\n                    }\r\n\r\n                    // clip with xmax\r\n                    if (x1 >= x2 && x1 > axisx.max) {\r\n                        if (x2 > axisx.max)\r\n                            continue;\r\n                        y1 = (axisx.max - x1) / (x2 - x1) * (y2 - y1) + y1;\r\n                        x1 = axisx.max;\r\n                    }\r\n                    else if (x2 >= x1 && x2 > axisx.max) {\r\n                        if (x1 > axisx.max)\r\n                            continue;\r\n                        y2 = (axisx.max - x1) / (x2 - x1) * (y2 - y1) + y1;\r\n                        x2 = axisx.max;\r\n                    }\r\n\r\n                    if (!areaOpen) {\r\n                        // open area\r\n                        ctx.beginPath();\r\n                        ctx.moveTo(axisx.p2c(x1), axisy.p2c(bottom));\r\n                        areaOpen = true;\r\n                    }\r\n\r\n                    // now first check the case where both is outside\r\n                    if (y1 >= axisy.max && y2 >= axisy.max) {\r\n                        ctx.lineTo(axisx.p2c(x1), axisy.p2c(axisy.max));\r\n                        ctx.lineTo(axisx.p2c(x2), axisy.p2c(axisy.max));\r\n                        continue;\r\n                    }\r\n                    else if (y1 <= axisy.min && y2 <= axisy.min) {\r\n                        ctx.lineTo(axisx.p2c(x1), axisy.p2c(axisy.min));\r\n                        ctx.lineTo(axisx.p2c(x2), axisy.p2c(axisy.min));\r\n                        continue;\r\n                    }\r\n\r\n                    // else it's a bit more complicated, there might\r\n                    // be a flat maxed out rectangle first, then a\r\n                    // triangular cutout or reverse; to find these\r\n                    // keep track of the current x values\r\n                    var x1old = x1, x2old = x2;\r\n\r\n                    // clip the y values, without shortcutting, we\r\n                    // go through all cases in turn\r\n\r\n                    // clip with ymin\r\n                    if (y1 <= y2 && y1 < axisy.min && y2 >= axisy.min) {\r\n                        x1 = (axisy.min - y1) / (y2 - y1) * (x2 - x1) + x1;\r\n                        y1 = axisy.min;\r\n                    }\r\n                    else if (y2 <= y1 && y2 < axisy.min && y1 >= axisy.min) {\r\n                        x2 = (axisy.min - y1) / (y2 - y1) * (x2 - x1) + x1;\r\n                        y2 = axisy.min;\r\n                    }\r\n\r\n                    // clip with ymax\r\n                    if (y1 >= y2 && y1 > axisy.max && y2 <= axisy.max) {\r\n                        x1 = (axisy.max - y1) / (y2 - y1) * (x2 - x1) + x1;\r\n                        y1 = axisy.max;\r\n                    }\r\n                    else if (y2 >= y1 && y2 > axisy.max && y1 <= axisy.max) {\r\n                        x2 = (axisy.max - y1) / (y2 - y1) * (x2 - x1) + x1;\r\n                        y2 = axisy.max;\r\n                    }\r\n\r\n                    // if the x value was changed we got a rectangle\r\n                    // to fill\r\n                    if (x1 != x1old) {\r\n                        ctx.lineTo(axisx.p2c(x1old), axisy.p2c(y1));\r\n                        // it goes to (x1, y1), but we fill that below\r\n                    }\r\n\r\n                    // fill triangular section, this sometimes result\r\n                    // in redundant points if (x1, y1) hasn't changed\r\n                    // from previous line to, but we just ignore that\r\n                    ctx.lineTo(axisx.p2c(x1), axisy.p2c(y1));\r\n                    ctx.lineTo(axisx.p2c(x2), axisy.p2c(y2));\r\n\r\n                    // fill the other rectangle if it's there\r\n                    if (x2 != x2old) {\r\n                        ctx.lineTo(axisx.p2c(x2), axisy.p2c(y2));\r\n                        ctx.lineTo(axisx.p2c(x2old), axisy.p2c(y2));\r\n                    }\r\n                }\r\n            }\r\n\r\n            ctx.save();\r\n            ctx.translate(plotOffset.left, plotOffset.top);\r\n            ctx.lineJoin = \"round\";\r\n\r\n            var lw = series.lines.lineWidth,\r\n                sw = series.shadowSize;\r\n            // FIXME: consider another form of shadow when filling is turned on\r\n            if (lw > 0 && sw > 0) {\r\n                // draw shadow as a thick and thin line with transparency\r\n                ctx.lineWidth = sw;\r\n                ctx.strokeStyle = \"rgba(0,0,0,0.1)\";\r\n                // position shadow at angle from the mid of line\r\n                var angle = Math.PI/18;\r\n                plotLine(series.datapoints, Math.sin(angle) * (lw/2 + sw/2), Math.cos(angle) * (lw/2 + sw/2), series.xaxis, series.yaxis);\r\n                ctx.lineWidth = sw/2;\r\n                plotLine(series.datapoints, Math.sin(angle) * (lw/2 + sw/4), Math.cos(angle) * (lw/2 + sw/4), series.xaxis, series.yaxis);\r\n            }\r\n\r\n            ctx.lineWidth = lw;\r\n            ctx.strokeStyle = series.color;\r\n            var fillStyle = getFillStyle(series.lines, series.color, 0, plotHeight);\r\n            if (fillStyle) {\r\n                ctx.fillStyle = fillStyle;\r\n                plotLineArea(series.datapoints, series.xaxis, series.yaxis);\r\n            }\r\n\r\n            if (lw > 0)\r\n                plotLine(series.datapoints, 0, 0, series.xaxis, series.yaxis);\r\n            ctx.restore();\r\n        }\r\n\r\n        function drawSeriesPoints(series) {\r\n            function plotPoints(datapoints, radius, fillStyle, offset, shadow, axisx, axisy, symbol) {\r\n                var points = datapoints.points, ps = datapoints.pointsize;\r\n\r\n                for (var i = 0; i < points.length; i += ps) {\r\n                    var x = points[i], y = points[i + 1];\r\n                    if (x == null || x < axisx.min || x > axisx.max || y < axisy.min || y > axisy.max)\r\n                        continue;\r\n\r\n                    ctx.beginPath();\r\n                    x = axisx.p2c(x);\r\n                    y = axisy.p2c(y) + offset;\r\n                    if (symbol == \"circle\")\r\n                        ctx.arc(x, y, radius, 0, shadow ? Math.PI : Math.PI * 2, false);\r\n                    else\r\n                        symbol(ctx, x, y, radius, shadow);\r\n                    ctx.closePath();\r\n\r\n                    if (fillStyle) {\r\n                        ctx.fillStyle = fillStyle;\r\n                        ctx.fill();\r\n                    }\r\n                    ctx.stroke();\r\n                }\r\n            }\r\n\r\n            ctx.save();\r\n            ctx.translate(plotOffset.left, plotOffset.top);\r\n\r\n            var lw = series.points.lineWidth,\r\n                sw = series.shadowSize,\r\n                radius = series.points.radius,\r\n                symbol = series.points.symbol;\r\n\r\n            // If the user sets the line width to 0, we change it to a very\r\n            // small value. A line width of 0 seems to force the default of 1.\r\n            // Doing the conditional here allows the shadow setting to still be\r\n            // optional even with a lineWidth of 0.\r\n\r\n            if( lw == 0 )\r\n                lw = 0.0001;\r\n\r\n            if (lw > 0 && sw > 0) {\r\n                // draw shadow in two steps\r\n                var w = sw / 2;\r\n                ctx.lineWidth = w;\r\n                ctx.strokeStyle = \"rgba(0,0,0,0.1)\";\r\n                plotPoints(series.datapoints, radius, null, w + w/2, true,\r\n                           series.xaxis, series.yaxis, symbol);\r\n\r\n                ctx.strokeStyle = \"rgba(0,0,0,0.2)\";\r\n                plotPoints(series.datapoints, radius, null, w/2, true,\r\n                           series.xaxis, series.yaxis, symbol);\r\n            }\r\n\r\n            ctx.lineWidth = lw;\r\n            ctx.strokeStyle = series.color;\r\n            plotPoints(series.datapoints, radius,\r\n                       getFillStyle(series.points, series.color), 0, false,\r\n                       series.xaxis, series.yaxis, symbol);\r\n            ctx.restore();\r\n        }\r\n\r\n        function drawBar(x, y, b, barLeft, barRight, fillStyleCallback, axisx, axisy, c, horizontal, lineWidth) {\r\n            var left, right, bottom, top,\r\n                drawLeft, drawRight, drawTop, drawBottom,\r\n                tmp;\r\n\r\n            // in horizontal mode, we start the bar from the left\r\n            // instead of from the bottom so it appears to be\r\n            // horizontal rather than vertical\r\n            if (horizontal) {\r\n                drawBottom = drawRight = drawTop = true;\r\n                drawLeft = false;\r\n                left = b;\r\n                right = x;\r\n                top = y + barLeft;\r\n                bottom = y + barRight;\r\n\r\n                // account for negative bars\r\n                if (right < left) {\r\n                    tmp = right;\r\n                    right = left;\r\n                    left = tmp;\r\n                    drawLeft = true;\r\n                    drawRight = false;\r\n                }\r\n            }\r\n            else {\r\n                drawLeft = drawRight = drawTop = true;\r\n                drawBottom = false;\r\n                left = x + barLeft;\r\n                right = x + barRight;\r\n                bottom = b;\r\n                top = y;\r\n\r\n                // account for negative bars\r\n                if (top < bottom) {\r\n                    tmp = top;\r\n                    top = bottom;\r\n                    bottom = tmp;\r\n                    drawBottom = true;\r\n                    drawTop = false;\r\n                }\r\n            }\r\n\r\n            // clip\r\n            if (right < axisx.min || left > axisx.max ||\r\n                top < axisy.min || bottom > axisy.max)\r\n                return;\r\n\r\n            if (left < axisx.min) {\r\n                left = axisx.min;\r\n                drawLeft = false;\r\n            }\r\n\r\n            if (right > axisx.max) {\r\n                right = axisx.max;\r\n                drawRight = false;\r\n            }\r\n\r\n            if (bottom < axisy.min) {\r\n                bottom = axisy.min;\r\n                drawBottom = false;\r\n            }\r\n\r\n            if (top > axisy.max) {\r\n                top = axisy.max;\r\n                drawTop = false;\r\n            }\r\n\r\n            left = axisx.p2c(left);\r\n            bottom = axisy.p2c(bottom);\r\n            right = axisx.p2c(right);\r\n            top = axisy.p2c(top);\r\n\r\n            // fill the bar\r\n            if (fillStyleCallback) {\r\n                c.fillStyle = fillStyleCallback(bottom, top);\r\n                c.fillRect(left, top, right - left, bottom - top)\r\n            }\r\n\r\n            // draw outline\r\n            if (lineWidth > 0 && (drawLeft || drawRight || drawTop || drawBottom)) {\r\n                c.beginPath();\r\n\r\n                // FIXME: inline moveTo is buggy with excanvas\r\n                c.moveTo(left, bottom);\r\n                if (drawLeft)\r\n                    c.lineTo(left, top);\r\n                else\r\n                    c.moveTo(left, top);\r\n                if (drawTop)\r\n                    c.lineTo(right, top);\r\n                else\r\n                    c.moveTo(right, top);\r\n                if (drawRight)\r\n                    c.lineTo(right, bottom);\r\n                else\r\n                    c.moveTo(right, bottom);\r\n                if (drawBottom)\r\n                    c.lineTo(left, bottom);\r\n                else\r\n                    c.moveTo(left, bottom);\r\n                c.stroke();\r\n            }\r\n        }\r\n\r\n        function drawSeriesBars(series) {\r\n            function plotBars(datapoints, barLeft, barRight, fillStyleCallback, axisx, axisy) {\r\n                var points = datapoints.points, ps = datapoints.pointsize;\r\n\r\n                for (var i = 0; i < points.length; i += ps) {\r\n                    if (points[i] == null)\r\n                        continue;\r\n                    drawBar(points[i], points[i + 1], points[i + 2], barLeft, barRight, fillStyleCallback, axisx, axisy, ctx, series.bars.horizontal, series.bars.lineWidth);\r\n                }\r\n            }\r\n\r\n            ctx.save();\r\n            ctx.translate(plotOffset.left, plotOffset.top);\r\n\r\n            // FIXME: figure out a way to add shadows (for instance along the right edge)\r\n            ctx.lineWidth = series.bars.lineWidth;\r\n            ctx.strokeStyle = series.color;\r\n\r\n            var barLeft;\r\n\r\n            switch (series.bars.align) {\r\n                case \"left\":\r\n                    barLeft = 0;\r\n                    break;\r\n                case \"right\":\r\n                    barLeft = -series.bars.barWidth;\r\n                    break;\r\n                default:\r\n                    barLeft = -series.bars.barWidth / 2;\r\n            }\r\n\r\n            var fillStyleCallback = series.bars.fill ? function (bottom, top) { return getFillStyle(series.bars, series.color, bottom, top); } : null;\r\n            plotBars(series.datapoints, barLeft, barLeft + series.bars.barWidth, fillStyleCallback, series.xaxis, series.yaxis);\r\n            ctx.restore();\r\n        }\r\n\r\n        function getFillStyle(filloptions, seriesColor, bottom, top) {\r\n            var fill = filloptions.fill;\r\n            if (!fill)\r\n                return null;\r\n\r\n            if (filloptions.fillColor)\r\n                return getColorOrGradient(filloptions.fillColor, bottom, top, seriesColor);\r\n\r\n            var c = $.color.parse(seriesColor);\r\n            c.a = typeof fill == \"number\" ? fill : 0.4;\r\n            c.normalize();\r\n            return c.toString();\r\n        }\r\n\r\n        function insertLegend() {\r\n\r\n            if (options.legend.container != null) {\r\n                $(options.legend.container).html(\"\");\r\n            } else {\r\n                placeholder.find(\".legend\").remove();\r\n            }\r\n\r\n            if (!options.legend.show) {\r\n                return;\r\n            }\r\n\r\n            var fragments = [], entries = [], rowStarted = false,\r\n                lf = options.legend.labelFormatter, s, label;\r\n\r\n            // Build a list of legend entries, with each having a label and a color\r\n\r\n            for (var i = 0; i < series.length; ++i) {\r\n                s = series[i];\r\n                if (s.label) {\r\n                    label = lf ? lf(s.label, s) : s.label;\r\n                    if (label) {\r\n                        entries.push({\r\n                            label: label,\r\n                            color: s.color\r\n                        });\r\n                    }\r\n                }\r\n            }\r\n\r\n            // Sort the legend using either the default or a custom comparator\r\n\r\n            if (options.legend.sorted) {\r\n                if ($.isFunction(options.legend.sorted)) {\r\n                    entries.sort(options.legend.sorted);\r\n                } else if (options.legend.sorted == \"reverse\") {\r\n                \tentries.reverse();\r\n                } else {\r\n                    var ascending = options.legend.sorted != \"descending\";\r\n                    entries.sort(function(a, b) {\r\n                        return a.label == b.label ? 0 : (\r\n                            (a.label < b.label) != ascending ? 1 : -1   // Logical XOR\r\n                        );\r\n                    });\r\n                }\r\n            }\r\n\r\n            // Generate markup for the list of entries, in their final order\r\n\r\n            for (var i = 0; i < entries.length; ++i) {\r\n\r\n                var entry = entries[i];\r\n\r\n                if (i % options.legend.noColumns == 0) {\r\n                    if (rowStarted)\r\n                        fragments.push('</tr>');\r\n                    fragments.push('<tr>');\r\n                    rowStarted = true;\r\n                }\r\n\r\n                fragments.push(\r\n                    '<td class=\"legendColorBox\"><div style=\"border:1px solid ' + options.legend.labelBoxBorderColor + ';padding:1px\"><div style=\"width:4px;height:0;border:5px solid ' + entry.color + ';overflow:hidden\"></div></div></td>' +\r\n                    '<td class=\"legendLabel\">' + entry.label + '</td>'\r\n                );\r\n            }\r\n\r\n            if (rowStarted)\r\n                fragments.push('</tr>');\r\n\r\n            if (fragments.length == 0)\r\n                return;\r\n\r\n            var table = '<table style=\"font-size:smaller;color:' + options.grid.color + '\">' + fragments.join(\"\") + '</table>';\r\n            if (options.legend.container != null)\r\n                $(options.legend.container).html(table);\r\n            else {\r\n                var pos = \"\",\r\n                    p = options.legend.position,\r\n                    m = options.legend.margin;\r\n                if (m[0] == null)\r\n                    m = [m, m];\r\n                if (p.charAt(0) == \"n\")\r\n                    pos += 'top:' + (m[1] + plotOffset.top) + 'px;';\r\n                else if (p.charAt(0) == \"s\")\r\n                    pos += 'bottom:' + (m[1] + plotOffset.bottom) + 'px;';\r\n                if (p.charAt(1) == \"e\")\r\n                    pos += 'right:' + (m[0] + plotOffset.right) + 'px;';\r\n                else if (p.charAt(1) == \"w\")\r\n                    pos += 'left:' + (m[0] + plotOffset.left) + 'px;';\r\n                var legend = $('<div class=\"legend\">' + table.replace('style=\"', 'style=\"position:absolute;' + pos +';') + '</div>').appendTo(placeholder);\r\n                if (options.legend.backgroundOpacity != 0.0) {\r\n                    // put in the transparent background\r\n                    // separately to avoid blended labels and\r\n                    // label boxes\r\n                    var c = options.legend.backgroundColor;\r\n                    if (c == null) {\r\n                        c = options.grid.backgroundColor;\r\n                        if (c && typeof c == \"string\")\r\n                            c = $.color.parse(c);\r\n                        else\r\n                            c = $.color.extract(legend, 'background-color');\r\n                        c.a = 1;\r\n                        c = c.toString();\r\n                    }\r\n                    var div = legend.children();\r\n                    $('<div style=\"position:absolute;width:' + div.width() + 'px;height:' + div.height() + 'px;' + pos +'background-color:' + c + ';\"> </div>').prependTo(legend).css('opacity', options.legend.backgroundOpacity);\r\n                }\r\n            }\r\n        }\r\n\r\n\r\n        // interactive features\r\n\r\n        var highlights = [],\r\n            redrawTimeout = null;\r\n\r\n        // returns the data item the mouse is over, or null if none is found\r\n        function findNearbyItem(mouseX, mouseY, seriesFilter) {\r\n            var maxDistance = options.grid.mouseActiveRadius,\r\n                smallestDistance = maxDistance * maxDistance + 1,\r\n                item = null, foundPoint = false, i, j, ps;\r\n\r\n            for (i = series.length - 1; i >= 0; --i) {\r\n                if (!seriesFilter(series[i]))\r\n                    continue;\r\n\r\n                var s = series[i],\r\n                    axisx = s.xaxis,\r\n                    axisy = s.yaxis,\r\n                    points = s.datapoints.points,\r\n                    mx = axisx.c2p(mouseX), // precompute some stuff to make the loop faster\r\n                    my = axisy.c2p(mouseY),\r\n                    maxx = maxDistance / axisx.scale,\r\n                    maxy = maxDistance / axisy.scale;\r\n\r\n                ps = s.datapoints.pointsize;\r\n                // with inverse transforms, we can't use the maxx/maxy\r\n                // optimization, sadly\r\n                if (axisx.options.inverseTransform)\r\n                    maxx = Number.MAX_VALUE;\r\n                if (axisy.options.inverseTransform)\r\n                    maxy = Number.MAX_VALUE;\r\n\r\n                if (s.lines.show || s.points.show) {\r\n                    for (j = 0; j < points.length; j += ps) {\r\n                        var x = points[j], y = points[j + 1];\r\n                        if (x == null)\r\n                            continue;\r\n\r\n                        // For points and lines, the cursor must be within a\r\n                        // certain distance to the data point\r\n                        if (x - mx > maxx || x - mx < -maxx ||\r\n                            y - my > maxy || y - my < -maxy)\r\n                            continue;\r\n\r\n                        // We have to calculate distances in pixels, not in\r\n                        // data units, because the scales of the axes may be different\r\n                        var dx = Math.abs(axisx.p2c(x) - mouseX),\r\n                            dy = Math.abs(axisy.p2c(y) - mouseY),\r\n                            dist = dx * dx + dy * dy; // we save the sqrt\r\n\r\n                        // use <= to ensure last point takes precedence\r\n                        // (last generally means on top of)\r\n                        if (dist < smallestDistance) {\r\n                            smallestDistance = dist;\r\n                            item = [i, j / ps];\r\n                        }\r\n                    }\r\n                }\r\n\r\n                if (s.bars.show && !item) { // no other point can be nearby\r\n\r\n                    var barLeft, barRight;\r\n\r\n                    switch (s.bars.align) {\r\n                        case \"left\":\r\n                            barLeft = 0;\r\n                            break;\r\n                        case \"right\":\r\n                            barLeft = -s.bars.barWidth;\r\n                            break;\r\n                        default:\r\n                            barLeft = -s.bars.barWidth / 2;\r\n                    }\r\n\r\n                    barRight = barLeft + s.bars.barWidth;\r\n\r\n                    for (j = 0; j < points.length; j += ps) {\r\n                        var x = points[j], y = points[j + 1], b = points[j + 2];\r\n                        if (x == null)\r\n                            continue;\r\n\r\n                        // for a bar graph, the cursor must be inside the bar\r\n                        if (series[i].bars.horizontal ?\r\n                            (mx <= Math.max(b, x) && mx >= Math.min(b, x) &&\r\n                             my >= y + barLeft && my <= y + barRight) :\r\n                            (mx >= x + barLeft && mx <= x + barRight &&\r\n                             my >= Math.min(b, y) && my <= Math.max(b, y)))\r\n                                item = [i, j / ps];\r\n                    }\r\n                }\r\n            }\r\n\r\n            if (item) {\r\n                i = item[0];\r\n                j = item[1];\r\n                ps = series[i].datapoints.pointsize;\r\n\r\n                return { datapoint: series[i].datapoints.points.slice(j * ps, (j + 1) * ps),\r\n                         dataIndex: j,\r\n                         series: series[i],\r\n                         seriesIndex: i };\r\n            }\r\n\r\n            return null;\r\n        }\r\n\r\n        function onMouseMove(e) {\r\n            if (options.grid.hoverable)\r\n                triggerClickHoverEvent(\"plothover\", e,\r\n                                       function (s) { return s[\"hoverable\"] != false; });\r\n        }\r\n\r\n        function onMouseLeave(e) {\r\n            if (options.grid.hoverable)\r\n                triggerClickHoverEvent(\"plothover\", e,\r\n                                       function (s) { return false; });\r\n        }\r\n\r\n        function onClick(e) {\r\n          if (plot.isSelecting) {\r\n            return;\r\n          }\r\n\r\n          triggerClickHoverEvent(\"plotclick\", e, function (s) { return s[\"clickable\"] != false; });\r\n        }\r\n\r\n        // trigger click or hover event (they send the same parameters\r\n        // so we share their code)\r\n        function triggerClickHoverEvent(eventname, event, seriesFilter) {\r\n            var offset = eventHolder.offset(),\r\n                canvasX = event.pageX - offset.left - plotOffset.left,\r\n                canvasY = event.pageY - offset.top - plotOffset.top,\r\n            pos = canvasToAxisCoords({ left: canvasX, top: canvasY });\r\n\r\n            pos.pageX = event.pageX;\r\n            pos.pageY = event.pageY;\r\n\r\n            // Add ctrlKey and metaKey to event\r\n            pos.ctrlKey = event.ctrlKey;\r\n            pos.metaKey = event.metaKey;\r\n\r\n            var item = findNearbyItem(canvasX, canvasY, seriesFilter);\r\n\r\n            if (item) {\r\n                // fill in mouse pos for any listeners out there\r\n                item.pageX = parseInt(item.series.xaxis.p2c(item.datapoint[0]) + offset.left + plotOffset.left, 10);\r\n                item.pageY = parseInt(item.series.yaxis.p2c(item.datapoint[1]) + offset.top + plotOffset.top, 10);\r\n            }\r\n\r\n            if (options.grid.autoHighlight) {\r\n                // clear auto-highlights\r\n                for (var i = 0; i < highlights.length; ++i) {\r\n                    var h = highlights[i];\r\n                    if (h.auto == eventname &&\r\n                        !(item && h.series == item.series &&\r\n                          h.point[0] == item.datapoint[0] &&\r\n                          h.point[1] == item.datapoint[1]))\r\n                        unhighlight(h.series, h.point);\r\n                }\r\n\r\n                if (item)\r\n                    highlight(item.series, item.datapoint, eventname);\r\n            }\r\n\r\n            placeholder.trigger(eventname, [ pos, item ]);\r\n        }\r\n\r\n        function triggerRedrawOverlay() {\r\n            var t = options.interaction.redrawOverlayInterval;\r\n            if (t == -1) {      // skip event queue\r\n                drawOverlay();\r\n                return;\r\n            }\r\n\r\n            if (!redrawTimeout)\r\n                redrawTimeout = setTimeout(drawOverlay, t);\r\n        }\r\n\r\n        function drawOverlay() {\r\n            redrawTimeout = null;\r\n\r\n            // draw highlights\r\n            octx.save();\r\n            overlay.clear();\r\n            octx.translate(plotOffset.left, plotOffset.top);\r\n\r\n            var i, hi;\r\n            for (i = 0; i < highlights.length; ++i) {\r\n                hi = highlights[i];\r\n\r\n                if (hi.series.bars.show)\r\n                    drawBarHighlight(hi.series, hi.point);\r\n                else\r\n                    drawPointHighlight(hi.series, hi.point);\r\n            }\r\n            octx.restore();\r\n\r\n            executeHooks(hooks.drawOverlay, [octx]);\r\n        }\r\n\r\n        function highlight(s, point, auto) {\r\n            if (typeof s == \"number\")\r\n                s = series[s];\r\n\r\n            if (typeof point == \"number\") {\r\n                var ps = s.datapoints.pointsize;\r\n                point = s.datapoints.points.slice(ps * point, ps * (point + 1));\r\n            }\r\n\r\n            var i = indexOfHighlight(s, point);\r\n            if (i == -1) {\r\n                highlights.push({ series: s, point: point, auto: auto });\r\n\r\n                triggerRedrawOverlay();\r\n            }\r\n            else if (!auto)\r\n                highlights[i].auto = false;\r\n        }\r\n\r\n        function unhighlight(s, point) {\r\n            if (s == null && point == null) {\r\n                highlights = [];\r\n                triggerRedrawOverlay();\r\n                return;\r\n            }\r\n\r\n            if (typeof s == \"number\")\r\n                s = series[s];\r\n\r\n            if (typeof point == \"number\") {\r\n                var ps = s.datapoints.pointsize;\r\n                point = s.datapoints.points.slice(ps * point, ps * (point + 1));\r\n            }\r\n\r\n            var i = indexOfHighlight(s, point);\r\n            if (i != -1) {\r\n                highlights.splice(i, 1);\r\n\r\n                triggerRedrawOverlay();\r\n            }\r\n        }\r\n\r\n        function indexOfHighlight(s, p) {\r\n            for (var i = 0; i < highlights.length; ++i) {\r\n                var h = highlights[i];\r\n                if (h.series == s && h.point[0] == p[0]\r\n                    && h.point[1] == p[1])\r\n                    return i;\r\n            }\r\n            return -1;\r\n        }\r\n\r\n        function drawPointHighlight(series, point) {\r\n            var x = point[0], y = point[1],\r\n                axisx = series.xaxis, axisy = series.yaxis,\r\n                highlightColor = (typeof series.highlightColor === \"string\") ? series.highlightColor : $.color.parse(series.color).scale('a', 0.5).toString();\r\n\r\n            if (x < axisx.min || x > axisx.max || y < axisy.min || y > axisy.max)\r\n                return;\r\n\r\n            var pointRadius = series.points.radius + series.points.lineWidth / 2;\r\n            octx.lineWidth = pointRadius;\r\n            octx.strokeStyle = highlightColor;\r\n            var radius = 1.5 * pointRadius;\r\n            x = axisx.p2c(x);\r\n            y = axisy.p2c(y);\r\n\r\n            octx.beginPath();\r\n            if (series.points.symbol == \"circle\")\r\n                octx.arc(x, y, radius, 0, 2 * Math.PI, false);\r\n            else\r\n                series.points.symbol(octx, x, y, radius, false);\r\n            octx.closePath();\r\n            octx.stroke();\r\n        }\r\n\r\n        function drawBarHighlight(series, point) {\r\n            var highlightColor = (typeof series.highlightColor === \"string\") ? series.highlightColor : $.color.parse(series.color).scale('a', 0.5).toString(),\r\n                fillStyle = highlightColor,\r\n                barLeft;\r\n\r\n            switch (series.bars.align) {\r\n                case \"left\":\r\n                    barLeft = 0;\r\n                    break;\r\n                case \"right\":\r\n                    barLeft = -series.bars.barWidth;\r\n                    break;\r\n                default:\r\n                    barLeft = -series.bars.barWidth / 2;\r\n            }\r\n\r\n            octx.lineWidth = series.bars.lineWidth;\r\n            octx.strokeStyle = highlightColor;\r\n\r\n            drawBar(point[0], point[1], point[2] || 0, barLeft, barLeft + series.bars.barWidth,\r\n                    function () { return fillStyle; }, series.xaxis, series.yaxis, octx, series.bars.horizontal, series.bars.lineWidth);\r\n        }\r\n\r\n        function getColorOrGradient(spec, bottom, top, defaultColor) {\r\n            if (typeof spec == \"string\")\r\n                return spec;\r\n            else {\r\n                // assume this is a gradient spec; IE currently only\r\n                // supports a simple vertical gradient properly, so that's\r\n                // what we support too\r\n                var gradient = ctx.createLinearGradient(0, top, 0, bottom);\r\n\r\n                for (var i = 0, l = spec.colors.length; i < l; ++i) {\r\n                    var c = spec.colors[i];\r\n                    if (typeof c != \"string\") {\r\n                        var co = $.color.parse(defaultColor);\r\n                        if (c.brightness != null)\r\n                            co = co.scale('rgb', c.brightness);\r\n                        if (c.opacity != null)\r\n                            co.a *= c.opacity;\r\n                        c = co.toString();\r\n                    }\r\n                    gradient.addColorStop(i / (l - 1), c);\r\n                }\r\n\r\n                return gradient;\r\n            }\r\n        }\r\n    }\r\n\r\n    // Add the plot function to the top level of the jQuery object\r\n\r\n    $.plot = function(placeholder, data, options) {\r\n        //var t0 = new Date();\r\n        var plot = new Plot($(placeholder), data, options, $.plot.plugins);\r\n        //(window.console ? console.log : alert)(\"time used (msecs): \" + ((new Date()).getTime() - t0.getTime()));\r\n        return plot;\r\n    };\r\n\r\n    $.plot.version = \"0.8.3\";\r\n\r\n    $.plot.plugins = [];\r\n\r\n    // Also add the plot function as a chainable property\r\n\r\n    $.fn.plot = function(data, options) {\r\n        return this.each(function() {\r\n            $.plot(this, data, options);\r\n        });\r\n    };\r\n\r\n    // round to nearby lower multiple of base\r\n    function floorInBase(n, base) {\r\n        return base * Math.floor(n / base);\r\n    }\r\n\r\n})(jQuery);\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./public/vendor/flot/jquery.flot.js\n// module id = 1670\n// module chunks = 0 1","/* Pretty handling of time axes.\r\n\r\nCopyright (c) 2007-2013 IOLA and Ole Laursen.\r\nLicensed under the MIT license.\r\n\r\nSet axis.mode to \"time\" to enable. See the section \"Time series data\" in\r\nAPI.txt for details.\r\n\r\n*/\r\n\r\n(function($) {\r\n\r\n\tvar options = {\r\n\t\txaxis: {\r\n\t\t\ttimezone: null,\t\t// \"browser\" for local to the client or timezone for timezone-js\r\n\t\t\ttimeformat: null,\t// format string to use\r\n\t\t\ttwelveHourClock: false,\t// 12 or 24 time in time mode\r\n\t\t\tmonthNames: null\t// list of names of months\r\n\t\t}\r\n\t};\r\n\r\n\t// round to nearby lower multiple of base\r\n\r\n\tfunction floorInBase(n, base) {\r\n\t\treturn base * Math.floor(n / base);\r\n\t}\r\n\r\n\t// Returns a string with the date d formatted according to fmt.\r\n\t// A subset of the Open Group's strftime format is supported.\r\n\r\n\tfunction formatDate(d, fmt, monthNames, dayNames) {\r\n\r\n\t\tif (typeof d.strftime == \"function\") {\r\n\t\t\treturn d.strftime(fmt);\r\n\t\t}\r\n\r\n\t\tvar leftPad = function(n, pad) {\r\n\t\t\tn = \"\" + n;\r\n\t\t\tpad = \"\" + (pad == null ? \"0\" : pad);\r\n\t\t\treturn n.length == 1 ? pad + n : n;\r\n\t\t};\r\n\r\n\t\tvar r = [];\r\n\t\tvar escape = false;\r\n\t\tvar hours = d.getHours();\r\n\t\tvar isAM = hours < 12;\r\n\r\n\t\tif (monthNames == null) {\r\n\t\t\tmonthNames = [\"Jan\", \"Feb\", \"Mar\", \"Apr\", \"May\", \"Jun\", \"Jul\", \"Aug\", \"Sep\", \"Oct\", \"Nov\", \"Dec\"];\r\n\t\t}\r\n\r\n\t\tif (dayNames == null) {\r\n\t\t\tdayNames = [\"Sun\", \"Mon\", \"Tue\", \"Wed\", \"Thu\", \"Fri\", \"Sat\"];\r\n\t\t}\r\n\r\n\t\tvar hours12;\r\n\r\n\t\tif (hours > 12) {\r\n\t\t\thours12 = hours - 12;\r\n\t\t} else if (hours == 0) {\r\n\t\t\thours12 = 12;\r\n\t\t} else {\r\n\t\t\thours12 = hours;\r\n\t\t}\r\n\r\n\t\tfor (var i = 0; i < fmt.length; ++i) {\r\n\r\n\t\t\tvar c = fmt.charAt(i);\r\n\r\n\t\t\tif (escape) {\r\n\t\t\t\tswitch (c) {\r\n\t\t\t\t\tcase 'a': c = \"\" + dayNames[d.getDay()]; break;\r\n\t\t\t\t\tcase 'b': c = \"\" + monthNames[d.getMonth()]; break;\r\n\t\t\t\t\tcase 'd': c = leftPad(d.getDate(), \"\"); break;\r\n\t\t\t\t\tcase 'e': c = leftPad(d.getDate(), \" \"); break;\r\n\t\t\t\t\tcase 'h':\t// For back-compat with 0.7; remove in 1.0\r\n\t\t\t\t\tcase 'H': c = leftPad(hours); break;\r\n\t\t\t\t\tcase 'I': c = leftPad(hours12); break;\r\n\t\t\t\t\tcase 'l': c = leftPad(hours12, \" \"); break;\r\n\t\t\t\t\tcase 'm': c = leftPad(d.getMonth() + 1, \"\"); break;\r\n\t\t\t\t\tcase 'M': c = leftPad(d.getMinutes()); break;\r\n\t\t\t\t\t// quarters not in Open Group's strftime specification\r\n\t\t\t\t\tcase 'q':\r\n\t\t\t\t\t\tc = \"\" + (Math.floor(d.getMonth() / 3) + 1); break;\r\n\t\t\t\t\tcase 'S': c = leftPad(d.getSeconds()); break;\r\n\t\t\t\t\tcase 'y': c = leftPad(d.getFullYear() % 100); break;\r\n\t\t\t\t\tcase 'Y': c = \"\" + d.getFullYear(); break;\r\n\t\t\t\t\tcase 'p': c = (isAM) ? (\"\" + \"am\") : (\"\" + \"pm\"); break;\r\n\t\t\t\t\tcase 'P': c = (isAM) ? (\"\" + \"AM\") : (\"\" + \"PM\"); break;\r\n\t\t\t\t\tcase 'w': c = \"\" + d.getDay(); break;\r\n\t\t\t\t}\r\n\t\t\t\tr.push(c);\r\n\t\t\t\tescape = false;\r\n\t\t\t} else {\r\n\t\t\t\tif (c == \"%\") {\r\n\t\t\t\t\tescape = true;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tr.push(c);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn r.join(\"\");\r\n\t}\r\n\r\n\t// To have a consistent view of time-based data independent of which time\r\n\t// zone the client happens to be in we need a date-like object independent\r\n\t// of time zones.  This is done through a wrapper that only calls the UTC\r\n\t// versions of the accessor methods.\r\n\r\n\tfunction makeUtcWrapper(d) {\r\n\r\n\t\tfunction addProxyMethod(sourceObj, sourceMethod, targetObj, targetMethod) {\r\n\t\t\tsourceObj[sourceMethod] = function() {\r\n\t\t\t\treturn targetObj[targetMethod].apply(targetObj, arguments);\r\n\t\t\t};\r\n\t\t};\r\n\r\n\t\tvar utc = {\r\n\t\t\tdate: d\r\n\t\t};\r\n\r\n\t\t// support strftime, if found\r\n\r\n\t\tif (d.strftime != undefined) {\r\n\t\t\taddProxyMethod(utc, \"strftime\", d, \"strftime\");\r\n\t\t}\r\n\r\n\t\taddProxyMethod(utc, \"getTime\", d, \"getTime\");\r\n\t\taddProxyMethod(utc, \"setTime\", d, \"setTime\");\r\n\r\n\t\tvar props = [\"Date\", \"Day\", \"FullYear\", \"Hours\", \"Milliseconds\", \"Minutes\", \"Month\", \"Seconds\"];\r\n\r\n\t\tfor (var p = 0; p < props.length; p++) {\r\n\t\t\taddProxyMethod(utc, \"get\" + props[p], d, \"getUTC\" + props[p]);\r\n\t\t\taddProxyMethod(utc, \"set\" + props[p], d, \"setUTC\" + props[p]);\r\n\t\t}\r\n\r\n\t\treturn utc;\r\n\t};\r\n\r\n\t// select time zone strategy.  This returns a date-like object tied to the\r\n\t// desired timezone\r\n\r\n\tfunction dateGenerator(ts, opts) {\r\n\t\tif (opts.timezone == \"browser\") {\r\n\t\t\treturn new Date(ts);\r\n\t\t} else if (!opts.timezone || opts.timezone == \"utc\") {\r\n\t\t\treturn makeUtcWrapper(new Date(ts));\r\n\t\t} else if (typeof timezoneJS != \"undefined\" && typeof timezoneJS.Date != \"undefined\") {\r\n\t\t\tvar d = new timezoneJS.Date();\r\n\t\t\t// timezone-js is fickle, so be sure to set the time zone before\r\n\t\t\t// setting the time.\r\n\t\t\td.setTimezone(opts.timezone);\r\n\t\t\td.setTime(ts);\r\n\t\t\treturn d;\r\n\t\t} else {\r\n\t\t\treturn makeUtcWrapper(new Date(ts));\r\n\t\t}\r\n\t}\r\n\r\n\t// map of app. size of time units in milliseconds\r\n\r\n\tvar timeUnitSize = {\r\n\t\t\"second\": 1000,\r\n\t\t\"minute\": 60 * 1000,\r\n\t\t\"hour\": 60 * 60 * 1000,\r\n\t\t\"day\": 24 * 60 * 60 * 1000,\r\n\t\t\"month\": 30 * 24 * 60 * 60 * 1000,\r\n\t\t\"quarter\": 3 * 30 * 24 * 60 * 60 * 1000,\r\n\t\t\"year\": 365.2425 * 24 * 60 * 60 * 1000\r\n\t};\r\n\r\n\t// the allowed tick sizes, after 1 year we use\r\n\t// an integer algorithm\r\n\r\n\tvar baseSpec = [\r\n\t\t[1, \"second\"], [2, \"second\"], [5, \"second\"], [10, \"second\"],\r\n\t\t[30, \"second\"],\r\n\t\t[1, \"minute\"], [2, \"minute\"], [5, \"minute\"], [10, \"minute\"],\r\n\t\t[30, \"minute\"],\r\n\t\t[1, \"hour\"], [2, \"hour\"], [4, \"hour\"],\r\n\t\t[8, \"hour\"], [12, \"hour\"],\r\n\t\t[1, \"day\"], [2, \"day\"], [3, \"day\"],\r\n\t\t[0.25, \"month\"], [0.5, \"month\"], [1, \"month\"],\r\n\t\t[2, \"month\"]\r\n\t];\r\n\r\n\t// we don't know which variant(s) we'll need yet, but generating both is\r\n\t// cheap\r\n\r\n\tvar specMonths = baseSpec.concat([[3, \"month\"], [6, \"month\"],\r\n\t\t[1, \"year\"]]);\r\n\tvar specQuarters = baseSpec.concat([[1, \"quarter\"], [2, \"quarter\"],\r\n\t\t[1, \"year\"]]);\r\n\r\n\tfunction init(plot) {\r\n\t\tplot.hooks.processOptions.push(function (plot, options) {\r\n\t\t\t$.each(plot.getAxes(), function(axisName, axis) {\r\n\r\n\t\t\t\tvar opts = axis.options;\r\n\r\n\t\t\t\tif (opts.mode == \"time\") {\r\n\t\t\t\t\taxis.tickGenerator = function(axis) {\r\n\r\n\t\t\t\t\t\tvar ticks = [];\r\n\t\t\t\t\t\tvar d = dateGenerator(axis.min, opts);\r\n\t\t\t\t\t\tvar minSize = 0;\r\n\r\n\t\t\t\t\t\t// make quarter use a possibility if quarters are\r\n\t\t\t\t\t\t// mentioned in either of these options\r\n\r\n\t\t\t\t\t\tvar spec = (opts.tickSize && opts.tickSize[1] ===\r\n\t\t\t\t\t\t\t\"quarter\") ||\r\n\t\t\t\t\t\t\t(opts.minTickSize && opts.minTickSize[1] ===\r\n\t\t\t\t\t\t\t\"quarter\") ? specQuarters : specMonths;\r\n\r\n\t\t\t\t\t\tif (opts.minTickSize != null) {\r\n\t\t\t\t\t\t\tif (typeof opts.tickSize == \"number\") {\r\n\t\t\t\t\t\t\t\tminSize = opts.tickSize;\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tminSize = opts.minTickSize[0] * timeUnitSize[opts.minTickSize[1]];\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tfor (var i = 0; i < spec.length - 1; ++i) {\r\n\t\t\t\t\t\t\tif (axis.delta < (spec[i][0] * timeUnitSize[spec[i][1]]\r\n\t\t\t\t\t\t\t\t\t\t\t  + spec[i + 1][0] * timeUnitSize[spec[i + 1][1]]) / 2\r\n\t\t\t\t\t\t\t\t&& spec[i][0] * timeUnitSize[spec[i][1]] >= minSize) {\r\n\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tvar size = spec[i][0];\r\n\t\t\t\t\t\tvar unit = spec[i][1];\r\n\r\n\t\t\t\t\t\t// special-case the possibility of several years\r\n\r\n\t\t\t\t\t\tif (unit == \"year\") {\r\n\r\n\t\t\t\t\t\t\t// if given a minTickSize in years, just use it,\r\n\t\t\t\t\t\t\t// ensuring that it's an integer\r\n\r\n\t\t\t\t\t\t\tif (opts.minTickSize != null && opts.minTickSize[1] == \"year\") {\r\n\t\t\t\t\t\t\t\tsize = Math.floor(opts.minTickSize[0]);\r\n\t\t\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\t\t\tvar magn = Math.pow(10, Math.floor(Math.log(axis.delta / timeUnitSize.year) / Math.LN10));\r\n\t\t\t\t\t\t\t\tvar norm = (axis.delta / timeUnitSize.year) / magn;\r\n\r\n\t\t\t\t\t\t\t\tif (norm < 1.5) {\r\n\t\t\t\t\t\t\t\t\tsize = 1;\r\n\t\t\t\t\t\t\t\t} else if (norm < 3) {\r\n\t\t\t\t\t\t\t\t\tsize = 2;\r\n\t\t\t\t\t\t\t\t} else if (norm < 7.5) {\r\n\t\t\t\t\t\t\t\t\tsize = 5;\r\n\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\tsize = 10;\r\n\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t\tsize *= magn;\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t// minimum size for years is 1\r\n\r\n\t\t\t\t\t\t\tif (size < 1) {\r\n\t\t\t\t\t\t\t\tsize = 1;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\taxis.tickSize = opts.tickSize || [size, unit];\r\n\t\t\t\t\t\tvar tickSize = axis.tickSize[0];\r\n\t\t\t\t\t\tunit = axis.tickSize[1];\r\n\r\n\t\t\t\t\t\tvar step = tickSize * timeUnitSize[unit];\r\n\r\n\t\t\t\t\t\tif (unit == \"second\") {\r\n\t\t\t\t\t\t\td.setSeconds(floorInBase(d.getSeconds(), tickSize));\r\n\t\t\t\t\t\t} else if (unit == \"minute\") {\r\n\t\t\t\t\t\t\td.setMinutes(floorInBase(d.getMinutes(), tickSize));\r\n\t\t\t\t\t\t} else if (unit == \"hour\") {\r\n\t\t\t\t\t\t\td.setHours(floorInBase(d.getHours(), tickSize));\r\n\t\t\t\t\t\t} else if (unit == \"month\") {\r\n\t\t\t\t\t\t\td.setMonth(floorInBase(d.getMonth(), tickSize));\r\n\t\t\t\t\t\t} else if (unit == \"quarter\") {\r\n\t\t\t\t\t\t\td.setMonth(3 * floorInBase(d.getMonth() / 3,\r\n\t\t\t\t\t\t\t\ttickSize));\r\n\t\t\t\t\t\t} else if (unit == \"year\") {\r\n\t\t\t\t\t\t\td.setFullYear(floorInBase(d.getFullYear(), tickSize));\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t// reset smaller components\r\n\r\n\t\t\t\t\t\td.setMilliseconds(0);\r\n\r\n\t\t\t\t\t\tif (step >= timeUnitSize.minute) {\r\n\t\t\t\t\t\t\td.setSeconds(0);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (step >= timeUnitSize.hour) {\r\n\t\t\t\t\t\t\td.setMinutes(0);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (step >= timeUnitSize.day) {\r\n\t\t\t\t\t\t\td.setHours(0);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (step >= timeUnitSize.day * 4) {\r\n\t\t\t\t\t\t\td.setDate(1);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (step >= timeUnitSize.month * 2) {\r\n\t\t\t\t\t\t\td.setMonth(floorInBase(d.getMonth(), 3));\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (step >= timeUnitSize.quarter * 2) {\r\n\t\t\t\t\t\t\td.setMonth(floorInBase(d.getMonth(), 6));\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (step >= timeUnitSize.year) {\r\n\t\t\t\t\t\t\td.setMonth(0);\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tvar carry = 0;\r\n\t\t\t\t\t\tvar v = Number.NaN;\r\n\t\t\t\t\t\tvar prev;\r\n\r\n\t\t\t\t\t\tdo {\r\n\r\n\t\t\t\t\t\t\tprev = v;\r\n\t\t\t\t\t\t\tv = d.getTime();\r\n\t\t\t\t\t\t\tticks.push(v);\r\n\r\n\t\t\t\t\t\t\tif (unit == \"month\" || unit == \"quarter\") {\r\n\t\t\t\t\t\t\t\tif (tickSize < 1) {\r\n\r\n\t\t\t\t\t\t\t\t\t// a bit complicated - we'll divide the\r\n\t\t\t\t\t\t\t\t\t// month/quarter up but we need to take\r\n\t\t\t\t\t\t\t\t\t// care of fractions so we don't end up in\r\n\t\t\t\t\t\t\t\t\t// the middle of a day\r\n\r\n\t\t\t\t\t\t\t\t\td.setDate(1);\r\n\t\t\t\t\t\t\t\t\tvar start = d.getTime();\r\n\t\t\t\t\t\t\t\t\td.setMonth(d.getMonth() +\r\n\t\t\t\t\t\t\t\t\t\t(unit == \"quarter\" ? 3 : 1));\r\n\t\t\t\t\t\t\t\t\tvar end = d.getTime();\r\n\t\t\t\t\t\t\t\t\td.setTime(v + carry * timeUnitSize.hour + (end - start) * tickSize);\r\n\t\t\t\t\t\t\t\t\tcarry = d.getHours();\r\n\t\t\t\t\t\t\t\t\td.setHours(0);\r\n\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\td.setMonth(d.getMonth() +\r\n\t\t\t\t\t\t\t\t\t\ttickSize * (unit == \"quarter\" ? 3 : 1));\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t} else if (unit == \"year\") {\r\n\t\t\t\t\t\t\t\td.setFullYear(d.getFullYear() + tickSize);\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\td.setTime(v + step);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t} while (v < axis.max && v != prev);\r\n\r\n\t\t\t\t\t\treturn ticks;\r\n\t\t\t\t\t};\r\n\r\n\t\t\t\t\taxis.tickFormatter = function (v, axis) {\r\n\r\n\t\t\t\t\t\tvar d = dateGenerator(v, axis.options);\r\n\r\n\t\t\t\t\t\t// first check global format\r\n\r\n\t\t\t\t\t\tif (opts.timeformat != null) {\r\n\t\t\t\t\t\t\treturn formatDate(d, opts.timeformat, opts.monthNames, opts.dayNames);\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t// possibly use quarters if quarters are mentioned in\r\n\t\t\t\t\t\t// any of these places\r\n\r\n\t\t\t\t\t\tvar useQuarters = (axis.options.tickSize &&\r\n\t\t\t\t\t\t\t\taxis.options.tickSize[1] == \"quarter\") ||\r\n\t\t\t\t\t\t\t(axis.options.minTickSize &&\r\n\t\t\t\t\t\t\t\taxis.options.minTickSize[1] == \"quarter\");\r\n\r\n\t\t\t\t\t\tvar t = axis.tickSize[0] * timeUnitSize[axis.tickSize[1]];\r\n\t\t\t\t\t\tvar span = axis.max - axis.min;\r\n\t\t\t\t\t\tvar suffix = (opts.twelveHourClock) ? \" %p\" : \"\";\r\n\t\t\t\t\t\tvar hourCode = (opts.twelveHourClock) ? \"%I\" : \"%H\";\r\n\t\t\t\t\t\tvar fmt;\r\n\r\n\t\t\t\t\t\tif (t < timeUnitSize.minute) {\r\n\t\t\t\t\t\t\tfmt = hourCode + \":%M:%S\" + suffix;\r\n\t\t\t\t\t\t} else if (t < timeUnitSize.day) {\r\n\t\t\t\t\t\t\tif (span < 2 * timeUnitSize.day) {\r\n\t\t\t\t\t\t\t\tfmt = hourCode + \":%M\" + suffix;\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tfmt = \"%b %d \" + hourCode + \":%M\" + suffix;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t} else if (t < timeUnitSize.month) {\r\n\t\t\t\t\t\t\tfmt = \"%b %d\";\r\n\t\t\t\t\t\t} else if ((useQuarters && t < timeUnitSize.quarter) ||\r\n\t\t\t\t\t\t\t(!useQuarters && t < timeUnitSize.year)) {\r\n\t\t\t\t\t\t\tif (span < timeUnitSize.year) {\r\n\t\t\t\t\t\t\t\tfmt = \"%b\";\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tfmt = \"%b %Y\";\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t} else if (useQuarters && t < timeUnitSize.year) {\r\n\t\t\t\t\t\t\tif (span < timeUnitSize.year) {\r\n\t\t\t\t\t\t\t\tfmt = \"Q%q\";\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tfmt = \"Q%q %Y\";\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tfmt = \"%Y\";\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tvar rt = formatDate(d, fmt, opts.monthNames, opts.dayNames);\r\n\r\n\t\t\t\t\t\treturn rt;\r\n\t\t\t\t\t};\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t});\r\n\t}\r\n\r\n\t$.plot.plugins.push({\r\n\t\tinit: init,\r\n\t\toptions: options,\r\n\t\tname: 'time',\r\n\t\tversion: '1.0'\r\n\t});\r\n\r\n\t// Time-axis support used to be in Flot core, which exposed the\r\n\t// formatDate function on the plot object.  Various plugins depend\r\n\t// on the function, so we need to re-expose it here.\r\n\r\n\t$.plot.formatDate = formatDate;\r\n\r\n})(jQuery);\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./public/vendor/flot/jquery.flot.time.js\n// module id = 1673\n// module chunks = 0 1","import React from 'react';\r\nimport { hot } from 'react-hot-loader';\r\nimport colors from 'app/core/utils/colors';\r\nimport TimeSeries from 'app/core/time_series2';\r\n\r\nimport ElapsedTime from './ElapsedTime';\r\nimport QueryRows from './QueryRows';\r\nimport Graph from './Graph';\r\nimport Table from './Table';\r\nimport TimePicker, { DEFAULT_RANGE } from './TimePicker';\r\nimport { DatasourceSrv } from 'app/features/plugins/datasource_srv';\r\nimport { buildQueryOptions, ensureQueries, generateQueryKey, hasQuery } from './utils/query';\r\nimport { decodePathComponent } from 'app/core/utils/location_util';\r\n\r\nfunction makeTimeSeriesList(dataList, options) {\r\n  return dataList.map((seriesData, index) => {\r\n    const datapoints = seriesData.datapoints || [];\r\n    const alias = seriesData.target;\r\n    const colorIndex = index % colors.length;\r\n    const color = colors[colorIndex];\r\n\r\n    const series = new TimeSeries({\r\n      datapoints,\r\n      alias,\r\n      color,\r\n      unit: seriesData.unit,\r\n    });\r\n\r\n    return series;\r\n  });\r\n}\r\n\r\nfunction parseInitialState(initial) {\r\n  try {\r\n    const parsed = JSON.parse(decodePathComponent(initial));\r\n    return {\r\n      queries: parsed.queries.map(q => q.query),\r\n      range: parsed.range,\r\n    };\r\n  } catch (e) {\r\n    console.error(e);\r\n    return { queries: [], range: DEFAULT_RANGE };\r\n  }\r\n}\r\n\r\ninterface IExploreState {\r\n  datasource: any;\r\n  datasourceError: any;\r\n  datasourceLoading: any;\r\n  graphResult: any;\r\n  latency: number;\r\n  loading: any;\r\n  queries: any;\r\n  queryError: any;\r\n  range: any;\r\n  requestOptions: any;\r\n  showingGraph: boolean;\r\n  showingTable: boolean;\r\n  tableResult: any;\r\n}\r\n\r\n// @observer\r\nexport class Explore extends React.Component<any, IExploreState> {\r\n  datasourceSrv: DatasourceSrv;\r\n\r\n  constructor(props) {\r\n    super(props);\r\n    const { range, queries } = parseInitialState(props.routeParams.initial);\r\n    this.state = {\r\n      datasource: null,\r\n      datasourceError: null,\r\n      datasourceLoading: true,\r\n      graphResult: null,\r\n      latency: 0,\r\n      loading: false,\r\n      queries: ensureQueries(queries),\r\n      queryError: null,\r\n      range: range || { ...DEFAULT_RANGE },\r\n      requestOptions: null,\r\n      showingGraph: true,\r\n      showingTable: true,\r\n      tableResult: null,\r\n      ...props.initialState,\r\n    };\r\n  }\r\n\r\n  async componentDidMount() {\r\n    const datasource = await this.props.datasourceSrv.get();\r\n    const testResult = await datasource.testDatasource();\r\n    if (testResult.status === 'success') {\r\n      this.setState({ datasource, datasourceError: null, datasourceLoading: false }, () => this.handleSubmit());\r\n    } else {\r\n      this.setState({ datasource: null, datasourceError: testResult.message, datasourceLoading: false });\r\n    }\r\n  }\r\n\r\n  componentDidCatch(error) {\r\n    console.error(error);\r\n  }\r\n\r\n  handleAddQueryRow = index => {\r\n    const { queries } = this.state;\r\n    const nextQueries = [\r\n      ...queries.slice(0, index + 1),\r\n      { query: '', key: generateQueryKey() },\r\n      ...queries.slice(index + 1),\r\n    ];\r\n    this.setState({ queries: nextQueries });\r\n  };\r\n\r\n  handleChangeQuery = (query, index) => {\r\n    const { queries } = this.state;\r\n    const nextQuery = {\r\n      ...queries[index],\r\n      query,\r\n    };\r\n    const nextQueries = [...queries];\r\n    nextQueries[index] = nextQuery;\r\n    this.setState({ queries: nextQueries });\r\n  };\r\n\r\n  handleChangeTime = nextRange => {\r\n    const range = {\r\n      from: nextRange.from,\r\n      to: nextRange.to,\r\n    };\r\n    this.setState({ range }, () => this.handleSubmit());\r\n  };\r\n\r\n  handleClickCloseSplit = () => {\r\n    const { onChangeSplit } = this.props;\r\n    if (onChangeSplit) {\r\n      onChangeSplit(false);\r\n    }\r\n  };\r\n\r\n  handleClickGraphButton = () => {\r\n    this.setState(state => ({ showingGraph: !state.showingGraph }));\r\n  };\r\n\r\n  handleClickSplit = () => {\r\n    const { onChangeSplit } = this.props;\r\n    if (onChangeSplit) {\r\n      onChangeSplit(true, this.state);\r\n    }\r\n  };\r\n\r\n  handleClickTableButton = () => {\r\n    this.setState(state => ({ showingTable: !state.showingTable }));\r\n  };\r\n\r\n  handleRemoveQueryRow = index => {\r\n    const { queries } = this.state;\r\n    if (queries.length <= 1) {\r\n      return;\r\n    }\r\n    const nextQueries = [...queries.slice(0, index), ...queries.slice(index + 1)];\r\n    this.setState({ queries: nextQueries }, () => this.handleSubmit());\r\n  };\r\n\r\n  handleSubmit = () => {\r\n    const { showingGraph, showingTable } = this.state;\r\n    if (showingTable) {\r\n      this.runTableQuery();\r\n    }\r\n    if (showingGraph) {\r\n      this.runGraphQuery();\r\n    }\r\n  };\r\n\r\n  async runGraphQuery() {\r\n    const { datasource, queries, range } = this.state;\r\n    if (!hasQuery(queries)) {\r\n      return;\r\n    }\r\n    this.setState({ latency: 0, loading: true, graphResult: null, queryError: null });\r\n    const now = Date.now();\r\n    const options = buildQueryOptions({\r\n      format: 'time_series',\r\n      interval: datasource.interval,\r\n      instant: false,\r\n      range,\r\n      queries: queries.map(q => q.query),\r\n    });\r\n    try {\r\n      const res = await datasource.query(options);\r\n      const result = makeTimeSeriesList(res.data, options);\r\n      const latency = Date.now() - now;\r\n      this.setState({ latency, loading: false, graphResult: result, requestOptions: options });\r\n    } catch (response) {\r\n      console.error(response);\r\n      const queryError = response.data ? response.data.error : response;\r\n      this.setState({ loading: false, queryError });\r\n    }\r\n  }\r\n\r\n  async runTableQuery() {\r\n    const { datasource, queries, range } = this.state;\r\n    if (!hasQuery(queries)) {\r\n      return;\r\n    }\r\n    this.setState({ latency: 0, loading: true, queryError: null, tableResult: null });\r\n    const now = Date.now();\r\n    const options = buildQueryOptions({\r\n      format: 'table',\r\n      interval: datasource.interval,\r\n      instant: true,\r\n      range,\r\n      queries: queries.map(q => q.query),\r\n    });\r\n    try {\r\n      const res = await datasource.query(options);\r\n      const tableModel = res.data[0];\r\n      const latency = Date.now() - now;\r\n      this.setState({ latency, loading: false, tableResult: tableModel, requestOptions: options });\r\n    } catch (response) {\r\n      console.error(response);\r\n      const queryError = response.data ? response.data.error : response;\r\n      this.setState({ loading: false, queryError });\r\n    }\r\n  }\r\n\r\n  request = url => {\r\n    const { datasource } = this.state;\r\n    return datasource.metadataRequest(url);\r\n  };\r\n\r\n  render() {\r\n    const { position, split } = this.props;\r\n    const {\r\n      datasource,\r\n      datasourceError,\r\n      datasourceLoading,\r\n      graphResult,\r\n      latency,\r\n      loading,\r\n      queries,\r\n      queryError,\r\n      range,\r\n      requestOptions,\r\n      showingGraph,\r\n      showingTable,\r\n      tableResult,\r\n    } = this.state;\r\n    const showingBoth = showingGraph && showingTable;\r\n    const graphHeight = showingBoth ? '200px' : '400px';\r\n    const graphButtonActive = showingBoth || showingGraph ? 'active' : '';\r\n    const tableButtonActive = showingBoth || showingTable ? 'active' : '';\r\n    const exploreClass = split ? 'explore explore-split' : 'explore';\r\n    return (\r\n      <div className={exploreClass}>\r\n        <div className=\"navbar\">\r\n          {position === 'left' ? (\r\n            <div>\r\n              <a className=\"navbar-page-btn\">\r\n                <i className=\"fa fa-rocket\" />\r\n                Explore\r\n              </a>\r\n            </div>\r\n          ) : (\r\n            <div className=\"navbar-buttons explore-first-button\">\r\n              <button className=\"btn navbar-button\" onClick={this.handleClickCloseSplit}>\r\n                Close Split\r\n              </button>\r\n            </div>\r\n          )}\r\n          <div className=\"navbar__spacer\" />\r\n          {position === 'left' && !split ? (\r\n            <div className=\"navbar-buttons\">\r\n              <button className=\"btn navbar-button\" onClick={this.handleClickSplit}>\r\n                Split\r\n              </button>\r\n            </div>\r\n          ) : null}\r\n          <div className=\"navbar-buttons\">\r\n            <button className={`btn navbar-button ${graphButtonActive}`} onClick={this.handleClickGraphButton}>\r\n              Graph\r\n            </button>\r\n            <button className={`btn navbar-button ${tableButtonActive}`} onClick={this.handleClickTableButton}>\r\n              Table\r\n            </button>\r\n          </div>\r\n          <TimePicker range={range} onChangeTime={this.handleChangeTime} />\r\n          <div className=\"navbar-buttons relative\">\r\n            <button className=\"btn navbar-button--primary\" onClick={this.handleSubmit}>\r\n              Run Query <i className=\"fa fa-level-down run-icon\" />\r\n            </button>\r\n            {loading || latency ? <ElapsedTime time={latency} className=\"text-info\" /> : null}\r\n          </div>\r\n        </div>\r\n\r\n        {datasourceLoading ? <div className=\"explore-container\">Loading datasource...</div> : null}\r\n\r\n        {datasourceError ? (\r\n          <div className=\"explore-container\" title={datasourceError}>\r\n            Error connecting to datasource.\r\n          </div>\r\n        ) : null}\r\n\r\n        {datasource ? (\r\n          <div className=\"explore-container\">\r\n            <QueryRows\r\n              queries={queries}\r\n              request={this.request}\r\n              onAddQueryRow={this.handleAddQueryRow}\r\n              onChangeQuery={this.handleChangeQuery}\r\n              onExecuteQuery={this.handleSubmit}\r\n              onRemoveQueryRow={this.handleRemoveQueryRow}\r\n            />\r\n            {queryError ? <div className=\"text-warning m-a-2\">{queryError}</div> : null}\r\n            <main className=\"m-t-2\">\r\n              {showingGraph ? (\r\n                <Graph\r\n                  data={graphResult}\r\n                  id={`explore-graph-${position}`}\r\n                  options={requestOptions}\r\n                  height={graphHeight}\r\n                  split={split}\r\n                />\r\n              ) : null}\r\n              {showingTable ? <Table data={tableResult} className=\"m-t-3\" /> : null}\r\n            </main>\r\n          </div>\r\n        ) : null}\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default hot(module)(Explore);\r\n\n\n\n// WEBPACK FOOTER //\n// ./node_modules/tslint-loader??ref--2!./public/app/containers/Explore/Explore.tsx","import React, { PureComponent } from 'react';\r\n\r\nconst INTERVAL = 150;\r\n\r\nexport default class ElapsedTime extends PureComponent<any, any> {\r\n  offset: number;\r\n  timer: number;\r\n\r\n  state = {\r\n    elapsed: 0,\r\n  };\r\n\r\n  start() {\r\n    this.offset = Date.now();\r\n    this.timer = window.setInterval(this.tick, INTERVAL);\r\n  }\r\n\r\n  tick = () => {\r\n    const jetzt = Date.now();\r\n    const elapsed = jetzt - this.offset;\r\n    this.setState({ elapsed });\r\n  };\r\n\r\n  componentWillReceiveProps(nextProps) {\r\n    if (nextProps.time) {\r\n      clearInterval(this.timer);\r\n    } else if (this.props.time) {\r\n      this.start();\r\n    }\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.start();\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    clearInterval(this.timer);\r\n  }\r\n\r\n  render() {\r\n    const { elapsed } = this.state;\r\n    const { className, time } = this.props;\r\n    const value = (time || elapsed) / 1000;\r\n    return <span className={`elapsed-time ${className}`}>{value.toFixed(1)}s</span>;\r\n  }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./node_modules/tslint-loader??ref--2!./public/app/containers/Explore/ElapsedTime.tsx","import React, { PureComponent } from 'react';\r\n\r\nimport QueryField from './QueryField';\r\n\r\nclass QueryRow extends PureComponent<any, any> {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      edited: false,\r\n      query: props.query || '',\r\n    };\r\n  }\r\n\r\n  handleChangeQuery = value => {\r\n    const { index, onChangeQuery } = this.props;\r\n    const { query } = this.state;\r\n    const edited = query !== value;\r\n    this.setState({ edited, query: value });\r\n    if (onChangeQuery) {\r\n      onChangeQuery(value, index);\r\n    }\r\n  };\r\n\r\n  handleClickAddButton = () => {\r\n    const { index, onAddQueryRow } = this.props;\r\n    if (onAddQueryRow) {\r\n      onAddQueryRow(index);\r\n    }\r\n  };\r\n\r\n  handleClickRemoveButton = () => {\r\n    const { index, onRemoveQueryRow } = this.props;\r\n    if (onRemoveQueryRow) {\r\n      onRemoveQueryRow(index);\r\n    }\r\n  };\r\n\r\n  handlePressEnter = () => {\r\n    const { onExecuteQuery } = this.props;\r\n    if (onExecuteQuery) {\r\n      onExecuteQuery();\r\n    }\r\n  };\r\n\r\n  render() {\r\n    const { request } = this.props;\r\n    const { edited, query } = this.state;\r\n    return (\r\n      <div className=\"query-row\">\r\n        <div className=\"query-row-tools\">\r\n          <button className=\"btn navbar-button navbar-button--tight\" onClick={this.handleClickAddButton}>\r\n            <i className=\"fa fa-plus\" />\r\n          </button>\r\n          <button className=\"btn navbar-button navbar-button--tight\" onClick={this.handleClickRemoveButton}>\r\n            <i className=\"fa fa-minus\" />\r\n          </button>\r\n        </div>\r\n        <div className=\"query-field-wrapper\">\r\n          <QueryField\r\n            initialQuery={edited ? null : query}\r\n            onPressEnter={this.handlePressEnter}\r\n            onQueryChange={this.handleChangeQuery}\r\n            placeholder=\"Enter a PromQL query\"\r\n            request={request}\r\n          />\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default class QueryRows extends PureComponent<any, any> {\r\n  render() {\r\n    const { className = '', queries, ...handlers } = this.props;\r\n    return (\r\n      <div className={className}>\r\n        {queries.map((q, index) => <QueryRow key={q.key} index={index} query={q.query} {...handlers} />)}\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./node_modules/tslint-loader??ref--2!./public/app/containers/Explore/QueryRows.tsx","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport { Value } from 'slate';\r\nimport { Editor } from 'slate-react';\r\nimport Plain from 'slate-plain-serializer';\r\n\r\n// dom also includes Element polyfills\r\nimport { getNextCharacter, getPreviousCousin } from './utils/dom';\r\nimport BracesPlugin from './slate-plugins/braces';\r\nimport ClearPlugin from './slate-plugins/clear';\r\nimport NewlinePlugin from './slate-plugins/newline';\r\nimport PluginPrism, { configurePrismMetricsTokens } from './slate-plugins/prism/index';\r\nimport RunnerPlugin from './slate-plugins/runner';\r\nimport debounce from './utils/debounce';\r\nimport { processLabels, RATE_RANGES, cleanText } from './utils/prometheus';\r\n\r\nimport Typeahead from './Typeahead';\r\n\r\nconst EMPTY_METRIC = '';\r\nconst TYPEAHEAD_DEBOUNCE = 300;\r\n\r\nfunction flattenSuggestions(s) {\r\n  return s ? s.reduce((acc, g) => acc.concat(g.items), []) : [];\r\n}\r\n\r\nconst getInitialValue = query =>\r\n  Value.fromJSON({\r\n    document: {\r\n      nodes: [\r\n        {\r\n          object: 'block',\r\n          type: 'paragraph',\r\n          nodes: [\r\n            {\r\n              object: 'text',\r\n              leaves: [\r\n                {\r\n                  text: query,\r\n                },\r\n              ],\r\n            },\r\n          ],\r\n        },\r\n      ],\r\n    },\r\n  });\r\n\r\nclass Portal extends React.Component {\r\n  node: any;\r\n  constructor(props) {\r\n    super(props);\r\n    this.node = document.createElement('div');\r\n    this.node.classList.add('explore-typeahead', `explore-typeahead-${props.index}`);\r\n    document.body.appendChild(this.node);\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    document.body.removeChild(this.node);\r\n  }\r\n\r\n  render() {\r\n    return ReactDOM.createPortal(this.props.children, this.node);\r\n  }\r\n}\r\n\r\nclass QueryField extends React.Component<any, any> {\r\n  menuEl: any;\r\n  plugins: any;\r\n  resetTimer: any;\r\n\r\n  constructor(props, context) {\r\n    super(props, context);\r\n\r\n    this.plugins = [\r\n      BracesPlugin(),\r\n      ClearPlugin(),\r\n      RunnerPlugin({ handler: props.onPressEnter }),\r\n      NewlinePlugin(),\r\n      PluginPrism(),\r\n    ];\r\n\r\n    this.state = {\r\n      labelKeys: {},\r\n      labelValues: {},\r\n      metrics: props.metrics || [],\r\n      suggestions: [],\r\n      typeaheadIndex: 0,\r\n      typeaheadPrefix: '',\r\n      value: getInitialValue(props.initialQuery || ''),\r\n    };\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.updateMenu();\r\n\r\n    if (this.props.metrics === undefined) {\r\n      this.fetchMetricNames();\r\n    }\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    clearTimeout(this.resetTimer);\r\n  }\r\n\r\n  componentDidUpdate() {\r\n    this.updateMenu();\r\n  }\r\n\r\n  componentWillReceiveProps(nextProps) {\r\n    if (nextProps.metrics && nextProps.metrics !== this.props.metrics) {\r\n      this.setState({ metrics: nextProps.metrics }, this.onMetricsReceived);\r\n    }\r\n    // initialQuery is null in case the user typed\r\n    if (nextProps.initialQuery !== null && nextProps.initialQuery !== this.props.initialQuery) {\r\n      this.setState({ value: getInitialValue(nextProps.initialQuery) });\r\n    }\r\n  }\r\n\r\n  onChange = ({ value }) => {\r\n    const changed = value.document !== this.state.value.document;\r\n    this.setState({ value }, () => {\r\n      if (changed) {\r\n        this.handleChangeQuery();\r\n      }\r\n    });\r\n\r\n    window.requestAnimationFrame(this.handleTypeahead);\r\n  };\r\n\r\n  onMetricsReceived = () => {\r\n    if (!this.state.metrics) {\r\n      return;\r\n    }\r\n    configurePrismMetricsTokens(this.state.metrics);\r\n    // Trigger re-render\r\n    window.requestAnimationFrame(() => {\r\n      // Bogus edit to trigger highlighting\r\n      const change = this.state.value\r\n        .change()\r\n        .insertText(' ')\r\n        .deleteBackward(1);\r\n      this.onChange(change);\r\n    });\r\n  };\r\n\r\n  request = url => {\r\n    if (this.props.request) {\r\n      return this.props.request(url);\r\n    }\r\n    return fetch(url);\r\n  };\r\n\r\n  handleChangeQuery = () => {\r\n    // Send text change to parent\r\n    const { onQueryChange } = this.props;\r\n    if (onQueryChange) {\r\n      onQueryChange(Plain.serialize(this.state.value));\r\n    }\r\n  };\r\n\r\n  handleTypeahead = debounce(() => {\r\n    const selection = window.getSelection();\r\n    if (selection.anchorNode) {\r\n      const wrapperNode = selection.anchorNode.parentElement;\r\n      const editorNode = wrapperNode.closest('.query-field');\r\n      if (!editorNode || this.state.value.isBlurred) {\r\n        // Not inside this editor\r\n        return;\r\n      }\r\n\r\n      const range = selection.getRangeAt(0);\r\n      const text = selection.anchorNode.textContent;\r\n      const offset = range.startOffset;\r\n      const prefix = cleanText(text.substr(0, offset));\r\n\r\n      // Determine candidates by context\r\n      const suggestionGroups = [];\r\n      const wrapperClasses = wrapperNode.classList;\r\n      let typeaheadContext = null;\r\n\r\n      // Take first metric as lucky guess\r\n      const metricNode = editorNode.querySelector('.metric');\r\n\r\n      if (wrapperClasses.contains('context-range')) {\r\n        // Rate ranges\r\n        typeaheadContext = 'context-range';\r\n        suggestionGroups.push({\r\n          label: 'Range vector',\r\n          items: [...RATE_RANGES],\r\n        });\r\n      } else if (wrapperClasses.contains('context-labels') && metricNode) {\r\n        const metric = metricNode.textContent;\r\n        const labelKeys = this.state.labelKeys[metric];\r\n        if (labelKeys) {\r\n          if ((text && text.startsWith('=')) || wrapperClasses.contains('attr-value')) {\r\n            // Label values\r\n            const labelKeyNode = getPreviousCousin(wrapperNode, '.attr-name');\r\n            if (labelKeyNode) {\r\n              const labelKey = labelKeyNode.textContent;\r\n              const labelValues = this.state.labelValues[metric][labelKey];\r\n              typeaheadContext = 'context-label-values';\r\n              suggestionGroups.push({\r\n                label: 'Label values',\r\n                items: labelValues,\r\n              });\r\n            }\r\n          } else {\r\n            // Label keys\r\n            typeaheadContext = 'context-labels';\r\n            suggestionGroups.push({ label: 'Labels', items: labelKeys });\r\n          }\r\n        } else {\r\n          this.fetchMetricLabels(metric);\r\n        }\r\n      } else if (wrapperClasses.contains('context-labels') && !metricNode) {\r\n        // Empty name queries\r\n        const defaultKeys = ['job', 'instance'];\r\n        // Munge all keys that we have seen together\r\n        const labelKeys = Object.keys(this.state.labelKeys).reduce((acc, metric) => {\r\n          return acc.concat(this.state.labelKeys[metric].filter(key => acc.indexOf(key) === -1));\r\n        }, defaultKeys);\r\n        if ((text && text.startsWith('=')) || wrapperClasses.contains('attr-value')) {\r\n          // Label values\r\n          const labelKeyNode = getPreviousCousin(wrapperNode, '.attr-name');\r\n          if (labelKeyNode) {\r\n            const labelKey = labelKeyNode.textContent;\r\n            if (this.state.labelValues[EMPTY_METRIC]) {\r\n              const labelValues = this.state.labelValues[EMPTY_METRIC][labelKey];\r\n              typeaheadContext = 'context-label-values';\r\n              suggestionGroups.push({\r\n                label: 'Label values',\r\n                items: labelValues,\r\n              });\r\n            } else {\r\n              // Can only query label values for now (API to query keys is under development)\r\n              this.fetchLabelValues(labelKey);\r\n            }\r\n          }\r\n        } else {\r\n          // Label keys\r\n          typeaheadContext = 'context-labels';\r\n          suggestionGroups.push({ label: 'Labels', items: labelKeys });\r\n        }\r\n      } else if (metricNode && wrapperClasses.contains('context-aggregation')) {\r\n        typeaheadContext = 'context-aggregation';\r\n        const metric = metricNode.textContent;\r\n        const labelKeys = this.state.labelKeys[metric];\r\n        if (labelKeys) {\r\n          suggestionGroups.push({ label: 'Labels', items: labelKeys });\r\n        } else {\r\n          this.fetchMetricLabels(metric);\r\n        }\r\n      } else if (\r\n        (this.state.metrics && ((prefix && !wrapperClasses.contains('token')) || text.match(/[+\\-*/^%]/))) ||\r\n        wrapperClasses.contains('context-function')\r\n      ) {\r\n        // Need prefix for metrics\r\n        typeaheadContext = 'context-metrics';\r\n        suggestionGroups.push({\r\n          label: 'Metrics',\r\n          items: this.state.metrics,\r\n        });\r\n      }\r\n\r\n      let results = 0;\r\n      const filteredSuggestions = suggestionGroups.map(group => {\r\n        if (group.items) {\r\n          group.items = group.items.filter(c => c.length !== prefix.length && c.indexOf(prefix) > -1);\r\n          results += group.items.length;\r\n        }\r\n        return group;\r\n      });\r\n\r\n      console.log('handleTypeahead', selection.anchorNode, wrapperClasses, text, offset, prefix, typeaheadContext);\r\n\r\n      this.setState({\r\n        typeaheadPrefix: prefix,\r\n        typeaheadContext,\r\n        typeaheadText: text,\r\n        suggestions: results > 0 ? filteredSuggestions : [],\r\n      });\r\n    }\r\n  }, TYPEAHEAD_DEBOUNCE);\r\n\r\n  applyTypeahead(change, suggestion) {\r\n    const { typeaheadPrefix, typeaheadContext, typeaheadText } = this.state;\r\n\r\n    // Modify suggestion based on context\r\n    switch (typeaheadContext) {\r\n      case 'context-labels': {\r\n        const nextChar = getNextCharacter();\r\n        if (!nextChar || nextChar === '}' || nextChar === ',') {\r\n          suggestion += '=';\r\n        }\r\n        break;\r\n      }\r\n\r\n      case 'context-label-values': {\r\n        // Always add quotes and remove existing ones instead\r\n        if (!(typeaheadText.startsWith('=\"') || typeaheadText.startsWith('\"'))) {\r\n          suggestion = `\"${suggestion}`;\r\n        }\r\n        if (getNextCharacter() !== '\"') {\r\n          suggestion = `${suggestion}\"`;\r\n        }\r\n        break;\r\n      }\r\n\r\n      default:\r\n    }\r\n\r\n    this.resetTypeahead();\r\n\r\n    // Remove the current, incomplete text and replace it with the selected suggestion\r\n    let backward = typeaheadPrefix.length;\r\n    const text = cleanText(typeaheadText);\r\n    const suffixLength = text.length - typeaheadPrefix.length;\r\n    const offset = typeaheadText.indexOf(typeaheadPrefix);\r\n    const midWord = typeaheadPrefix && ((suffixLength > 0 && offset > -1) || suggestion === typeaheadText);\r\n    const forward = midWord ? suffixLength + offset : 0;\r\n\r\n    return (\r\n      change\r\n        // TODO this line breaks if cursor was moved left and length is longer than whole prefix\r\n        .deleteBackward(backward)\r\n        .deleteForward(forward)\r\n        .insertText(suggestion)\r\n        .focus()\r\n    );\r\n  }\r\n\r\n  onKeyDown = (event, change) => {\r\n    if (this.menuEl) {\r\n      const { typeaheadIndex, suggestions } = this.state;\r\n\r\n      switch (event.key) {\r\n        case 'Escape': {\r\n          if (this.menuEl) {\r\n            event.preventDefault();\r\n            this.resetTypeahead();\r\n            return true;\r\n          }\r\n          break;\r\n        }\r\n\r\n        case 'Tab': {\r\n          // Dont blur input\r\n          event.preventDefault();\r\n          if (!suggestions || suggestions.length === 0) {\r\n            return undefined;\r\n          }\r\n\r\n          // Get the currently selected suggestion\r\n          const flattenedSuggestions = flattenSuggestions(suggestions);\r\n          const selected = Math.abs(typeaheadIndex);\r\n          const selectedIndex = selected % flattenedSuggestions.length || 0;\r\n          const suggestion = flattenedSuggestions[selectedIndex];\r\n\r\n          this.applyTypeahead(change, suggestion);\r\n          return true;\r\n        }\r\n\r\n        case 'ArrowDown': {\r\n          // Select next suggestion\r\n          event.preventDefault();\r\n          this.setState({ typeaheadIndex: typeaheadIndex + 1 });\r\n          break;\r\n        }\r\n\r\n        case 'ArrowUp': {\r\n          // Select previous suggestion\r\n          event.preventDefault();\r\n          this.setState({ typeaheadIndex: Math.max(0, typeaheadIndex - 1) });\r\n          break;\r\n        }\r\n\r\n        default: {\r\n          // console.log('default key', event.key, event.which, event.charCode, event.locale, data.key);\r\n          break;\r\n        }\r\n      }\r\n    }\r\n    return undefined;\r\n  };\r\n\r\n  resetTypeahead = () => {\r\n    this.setState({\r\n      suggestions: [],\r\n      typeaheadIndex: 0,\r\n      typeaheadPrefix: '',\r\n      typeaheadContext: null,\r\n    });\r\n  };\r\n\r\n  async fetchLabelValues(key) {\r\n    const url = `/api/v1/label/${key}/values`;\r\n    try {\r\n      const res = await this.request(url);\r\n      const body = await (res.data || res.json());\r\n      const pairs = this.state.labelValues[EMPTY_METRIC];\r\n      const values = {\r\n        ...pairs,\r\n        [key]: body.data,\r\n      };\r\n      // const labelKeys = {\r\n      //   ...this.state.labelKeys,\r\n      //   [EMPTY_METRIC]: keys,\r\n      // };\r\n      const labelValues = {\r\n        ...this.state.labelValues,\r\n        [EMPTY_METRIC]: values,\r\n      };\r\n      this.setState({ labelValues }, this.handleTypeahead);\r\n    } catch (e) {\r\n      if (this.props.onRequestError) {\r\n        this.props.onRequestError(e);\r\n      } else {\r\n        console.error(e);\r\n      }\r\n    }\r\n  }\r\n\r\n  async fetchMetricLabels(name) {\r\n    const url = `/api/v1/series?match[]=${name}`;\r\n    try {\r\n      const res = await this.request(url);\r\n      const body = await (res.data || res.json());\r\n      const { keys, values } = processLabels(body.data);\r\n      const labelKeys = {\r\n        ...this.state.labelKeys,\r\n        [name]: keys,\r\n      };\r\n      const labelValues = {\r\n        ...this.state.labelValues,\r\n        [name]: values,\r\n      };\r\n      this.setState({ labelKeys, labelValues }, this.handleTypeahead);\r\n    } catch (e) {\r\n      if (this.props.onRequestError) {\r\n        this.props.onRequestError(e);\r\n      } else {\r\n        console.error(e);\r\n      }\r\n    }\r\n  }\r\n\r\n  async fetchMetricNames() {\r\n    const url = '/api/v1/label/__name__/values';\r\n    try {\r\n      const res = await this.request(url);\r\n      const body = await (res.data || res.json());\r\n      this.setState({ metrics: body.data }, this.onMetricsReceived);\r\n    } catch (error) {\r\n      if (this.props.onRequestError) {\r\n        this.props.onRequestError(error);\r\n      } else {\r\n        console.error(error);\r\n      }\r\n    }\r\n  }\r\n\r\n  handleBlur = () => {\r\n    const { onBlur } = this.props;\r\n    // If we dont wait here, menu clicks wont work because the menu\r\n    // will be gone.\r\n    this.resetTimer = setTimeout(this.resetTypeahead, 100);\r\n    if (onBlur) {\r\n      onBlur();\r\n    }\r\n  };\r\n\r\n  handleFocus = () => {\r\n    const { onFocus } = this.props;\r\n    if (onFocus) {\r\n      onFocus();\r\n    }\r\n  };\r\n\r\n  handleClickMenu = item => {\r\n    // Manually triggering change\r\n    const change = this.applyTypeahead(this.state.value.change(), item);\r\n    this.onChange(change);\r\n  };\r\n\r\n  updateMenu = () => {\r\n    const { suggestions } = this.state;\r\n    const menu = this.menuEl;\r\n    const selection = window.getSelection();\r\n    const node = selection.anchorNode;\r\n\r\n    // No menu, nothing to do\r\n    if (!menu) {\r\n      return;\r\n    }\r\n\r\n    // No suggestions or blur, remove menu\r\n    const hasSuggesstions = suggestions && suggestions.length > 0;\r\n    if (!hasSuggesstions) {\r\n      menu.removeAttribute('style');\r\n      return;\r\n    }\r\n\r\n    // Align menu overlay to editor node\r\n    if (node) {\r\n      const rect = node.parentElement.getBoundingClientRect();\r\n      menu.style.opacity = 1;\r\n      menu.style.top = `${rect.top + window.scrollY + rect.height + 4}px`;\r\n      menu.style.left = `${rect.left + window.scrollX - 2}px`;\r\n    }\r\n  };\r\n\r\n  menuRef = el => {\r\n    this.menuEl = el;\r\n  };\r\n\r\n  renderMenu = () => {\r\n    const { suggestions } = this.state;\r\n    const hasSuggesstions = suggestions && suggestions.length > 0;\r\n    if (!hasSuggesstions) {\r\n      return null;\r\n    }\r\n\r\n    // Guard selectedIndex to be within the length of the suggestions\r\n    let selectedIndex = Math.max(this.state.typeaheadIndex, 0);\r\n    const flattenedSuggestions = flattenSuggestions(suggestions);\r\n    selectedIndex = selectedIndex % flattenedSuggestions.length || 0;\r\n    const selectedKeys = flattenedSuggestions.length > 0 ? [flattenedSuggestions[selectedIndex]] : [];\r\n\r\n    // Create typeahead in DOM root so we can later position it absolutely\r\n    return (\r\n      <Portal>\r\n        <Typeahead\r\n          menuRef={this.menuRef}\r\n          selectedItems={selectedKeys}\r\n          onClickItem={this.handleClickMenu}\r\n          groupedItems={suggestions}\r\n        />\r\n      </Portal>\r\n    );\r\n  };\r\n\r\n  render() {\r\n    return (\r\n      <div className=\"query-field\">\r\n        {this.renderMenu()}\r\n        <Editor\r\n          autoCorrect={false}\r\n          onBlur={this.handleBlur}\r\n          onKeyDown={this.onKeyDown}\r\n          onChange={this.onChange}\r\n          onFocus={this.handleFocus}\r\n          placeholder={this.props.placeholder}\r\n          plugins={this.plugins}\r\n          spellCheck={false}\r\n          value={this.state.value}\r\n        />\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default QueryField;\r\n\n\n\n// WEBPACK FOOTER //\n// ./node_modules/tslint-loader??ref--2!./public/app/containers/Explore/QueryField.tsx","// Node.closest() polyfill\r\nif ('Element' in window && !Element.prototype.closest) {\r\n  Element.prototype.closest = function(s) {\r\n    const matches = (this.document || this.ownerDocument).querySelectorAll(s);\r\n    let el = this;\r\n    let i;\r\n    // eslint-disable-next-line\r\n    do {\r\n      i = matches.length;\r\n      // eslint-disable-next-line\r\n      while (--i >= 0 && matches.item(i) !== el) {}\r\n    } while (i < 0 && (el = el.parentElement));\r\n    return el;\r\n  };\r\n}\r\n\r\nexport function getPreviousCousin(node, selector) {\r\n  let sibling = node.parentElement.previousSibling;\r\n  let el;\r\n  while (sibling) {\r\n    el = sibling.querySelector(selector);\r\n    if (el) {\r\n      return el;\r\n    }\r\n    sibling = sibling.previousSibling;\r\n  }\r\n  return undefined;\r\n}\r\n\r\nexport function getNextCharacter(global = window) {\r\n  const selection = global.getSelection();\r\n  if (!selection.anchorNode) {\r\n    return null;\r\n  }\r\n\r\n  const range = selection.getRangeAt(0);\r\n  const text = selection.anchorNode.textContent;\r\n  const offset = range.startOffset;\r\n  return text.substr(offset, 1);\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./node_modules/tslint-loader??ref--2!./public/app/containers/Explore/utils/dom.ts","const BRACES = {\r\n  '[': ']',\r\n  '{': '}',\r\n  '(': ')',\r\n};\r\n\r\nexport default function BracesPlugin() {\r\n  return {\r\n    onKeyDown(event, change) {\r\n      const { value } = change;\r\n      if (!value.isCollapsed) {\r\n        return undefined;\r\n      }\r\n\r\n      switch (event.key) {\r\n        case '{':\r\n        case '[': {\r\n          event.preventDefault();\r\n          // Insert matching braces\r\n          change\r\n            .insertText(`${event.key}${BRACES[event.key]}`)\r\n            .move(-1)\r\n            .focus();\r\n          return true;\r\n        }\r\n\r\n        case '(': {\r\n          event.preventDefault();\r\n          const text = value.anchorText.text;\r\n          const offset = value.anchorOffset;\r\n          const space = text.indexOf(' ', offset);\r\n          const length = space > 0 ? space : text.length;\r\n          const forward = length - offset;\r\n          // Insert matching braces\r\n          change\r\n            .insertText(event.key)\r\n            .move(forward)\r\n            .insertText(BRACES[event.key])\r\n            .move(-1 - forward)\r\n            .focus();\r\n          return true;\r\n        }\r\n\r\n        default: {\r\n          break;\r\n        }\r\n      }\r\n      return undefined;\r\n    },\r\n  };\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./node_modules/tslint-loader??ref--2!./public/app/containers/Explore/slate-plugins/braces.ts","// Clears the rest of the line after the caret\r\nexport default function ClearPlugin() {\r\n  return {\r\n    onKeyDown(event, change) {\r\n      const { value } = change;\r\n      if (!value.isCollapsed) {\r\n        return undefined;\r\n      }\r\n\r\n      if (event.key === 'k' && event.ctrlKey) {\r\n        event.preventDefault();\r\n        const text = value.anchorText.text;\r\n        const offset = value.anchorOffset;\r\n        const length = text.length;\r\n        const forward = length - offset;\r\n        change.deleteForward(forward);\r\n        return true;\r\n      }\r\n      return undefined;\r\n    },\r\n  };\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./node_modules/tslint-loader??ref--2!./public/app/containers/Explore/slate-plugins/clear.ts","function getIndent(text) {\r\n  let offset = text.length - text.trimLeft().length;\r\n  if (offset) {\r\n    let indent = text[0];\r\n    while (--offset) {\r\n      indent += text[0];\r\n    }\r\n    return indent;\r\n  }\r\n  return '';\r\n}\r\n\r\nexport default function NewlinePlugin() {\r\n  return {\r\n    onKeyDown(event, change) {\r\n      const { value } = change;\r\n      if (!value.isCollapsed) {\r\n        return undefined;\r\n      }\r\n\r\n      if (event.key === 'Enter' && event.shiftKey) {\r\n        event.preventDefault();\r\n\r\n        const { startBlock } = value;\r\n        const currentLineText = startBlock.text;\r\n        const indent = getIndent(currentLineText);\r\n\r\n        return change\r\n          .splitBlock()\r\n          .insertText(indent)\r\n          .focus();\r\n      }\r\n    },\r\n  };\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./node_modules/tslint-loader??ref--2!./public/app/containers/Explore/slate-plugins/newline.ts","import React from 'react';\r\nimport Prism from 'prismjs';\r\n\r\nimport Promql from './promql';\r\n\r\nPrism.languages.promql = Promql;\r\n\r\nconst TOKEN_MARK = 'prism-token';\r\n\r\nexport function configurePrismMetricsTokens(metrics) {\r\n  Prism.languages.promql.metric = {\r\n    alias: 'variable',\r\n    pattern: new RegExp(`(?:^|\\\\s)(${metrics.join('|')})(?:$|\\\\s)`),\r\n  };\r\n}\r\n\r\n/**\r\n * Code-highlighting plugin based on Prism and\r\n * https://github.com/ianstormtaylor/slate/blob/master/examples/code-highlighting/index.js\r\n *\r\n * (Adapted to handle nested grammar definitions.)\r\n */\r\n\r\nexport default function PrismPlugin() {\r\n  return {\r\n    /**\r\n     * Render a Slate mark with appropiate CSS class names\r\n     *\r\n     * @param {Object} props\r\n     * @return {Element}\r\n     */\r\n\r\n    renderMark(props) {\r\n      const { children, mark } = props;\r\n      // Only apply spans to marks identified by this plugin\r\n      if (mark.type !== TOKEN_MARK) {\r\n        return undefined;\r\n      }\r\n      const className = `token ${mark.data.get('types')}`;\r\n      return <span className={className}>{children}</span>;\r\n    },\r\n\r\n    /**\r\n     * Decorate code blocks with Prism.js highlighting.\r\n     *\r\n     * @param {Node} node\r\n     * @return {Array}\r\n     */\r\n\r\n    decorateNode(node) {\r\n      if (node.type !== 'paragraph') {\r\n        return [];\r\n      }\r\n\r\n      const texts = node.getTexts().toArray();\r\n      const tstring = texts.map(t => t.text).join('\\n');\r\n      const grammar = Prism.languages.promql;\r\n      const tokens = Prism.tokenize(tstring, grammar);\r\n      const decorations = [];\r\n      let startText = texts.shift();\r\n      let endText = startText;\r\n      let startOffset = 0;\r\n      let endOffset = 0;\r\n      let start = 0;\r\n\r\n      function processToken(token, acc?) {\r\n        // Accumulate token types down the tree\r\n        const types = `${acc || ''} ${token.type || ''} ${token.alias || ''}`;\r\n\r\n        // Add mark for token node\r\n        if (typeof token === 'string' || typeof token.content === 'string') {\r\n          startText = endText;\r\n          startOffset = endOffset;\r\n\r\n          const content = typeof token === 'string' ? token : token.content;\r\n          const newlines = content.split('\\n').length - 1;\r\n          const length = content.length - newlines;\r\n          const end = start + length;\r\n\r\n          let available = startText.text.length - startOffset;\r\n          let remaining = length;\r\n\r\n          endOffset = startOffset + remaining;\r\n\r\n          while (available < remaining) {\r\n            endText = texts.shift();\r\n            remaining = length - available;\r\n            available = endText.text.length;\r\n            endOffset = remaining;\r\n          }\r\n\r\n          // Inject marks from up the tree (acc) as well\r\n          if (typeof token !== 'string' || acc) {\r\n            const range = {\r\n              anchorKey: startText.key,\r\n              anchorOffset: startOffset,\r\n              focusKey: endText.key,\r\n              focusOffset: endOffset,\r\n              marks: [{ type: TOKEN_MARK, data: { types } }],\r\n            };\r\n\r\n            decorations.push(range);\r\n          }\r\n\r\n          start = end;\r\n        } else if (token.content && token.content.length) {\r\n          // Tokens can be nested\r\n          for (const subToken of token.content) {\r\n            processToken(subToken, types);\r\n          }\r\n        }\r\n      }\r\n\r\n      // Process top-level tokens\r\n      for (const token of tokens) {\r\n        processToken(token);\r\n      }\r\n\r\n      return decorations;\r\n    },\r\n  };\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./node_modules/tslint-loader??ref--2!./public/app/containers/Explore/slate-plugins/prism/index.tsx","export const OPERATORS = ['by', 'group_left', 'group_right', 'ignoring', 'on', 'offset', 'without'];\r\n\r\nconst AGGREGATION_OPERATORS = [\r\n  'sum',\r\n  'min',\r\n  'max',\r\n  'avg',\r\n  'stddev',\r\n  'stdvar',\r\n  'count',\r\n  'count_values',\r\n  'bottomk',\r\n  'topk',\r\n  'quantile',\r\n];\r\n\r\nexport const FUNCTIONS = [\r\n  ...AGGREGATION_OPERATORS,\r\n  'abs',\r\n  'absent',\r\n  'ceil',\r\n  'changes',\r\n  'clamp_max',\r\n  'clamp_min',\r\n  'count_scalar',\r\n  'day_of_month',\r\n  'day_of_week',\r\n  'days_in_month',\r\n  'delta',\r\n  'deriv',\r\n  'drop_common_labels',\r\n  'exp',\r\n  'floor',\r\n  'histogram_quantile',\r\n  'holt_winters',\r\n  'hour',\r\n  'idelta',\r\n  'increase',\r\n  'irate',\r\n  'label_replace',\r\n  'ln',\r\n  'log2',\r\n  'log10',\r\n  'minute',\r\n  'month',\r\n  'predict_linear',\r\n  'rate',\r\n  'resets',\r\n  'round',\r\n  'scalar',\r\n  'sort',\r\n  'sort_desc',\r\n  'sqrt',\r\n  'time',\r\n  'vector',\r\n  'year',\r\n  'avg_over_time',\r\n  'min_over_time',\r\n  'max_over_time',\r\n  'sum_over_time',\r\n  'count_over_time',\r\n  'quantile_over_time',\r\n  'stddev_over_time',\r\n  'stdvar_over_time',\r\n];\r\n\r\nconst tokenizer = {\r\n  comment: {\r\n    pattern: /(^|[^\\n])#.*/,\r\n    lookbehind: true,\r\n  },\r\n  'context-aggregation': {\r\n    pattern: /((by|without)\\s*)\\([^)]*\\)/, // by ()\r\n    lookbehind: true,\r\n    inside: {\r\n      'label-key': {\r\n        pattern: /[^,\\s][^,]*[^,\\s]*/,\r\n        alias: 'attr-name',\r\n      },\r\n    },\r\n  },\r\n  'context-labels': {\r\n    pattern: /\\{[^}]*(?=})/,\r\n    inside: {\r\n      'label-key': {\r\n        pattern: /[a-z_]\\w*(?=\\s*(=|!=|=~|!~))/,\r\n        alias: 'attr-name',\r\n      },\r\n      'label-value': {\r\n        pattern: /\"(?:\\\\.|[^\\\\\"])*\"/,\r\n        greedy: true,\r\n        alias: 'attr-value',\r\n      },\r\n    },\r\n  },\r\n  function: new RegExp(`\\\\b(?:${FUNCTIONS.join('|')})(?=\\\\s*\\\\()`, 'i'),\r\n  'context-range': [\r\n    {\r\n      pattern: /\\[[^\\]]*(?=])/, // [1m]\r\n      inside: {\r\n        'range-duration': {\r\n          pattern: /\\b\\d+[smhdwy]\\b/i,\r\n          alias: 'number',\r\n        },\r\n      },\r\n    },\r\n    {\r\n      pattern: /(offset\\s+)\\w+/, // offset 1m\r\n      lookbehind: true,\r\n      inside: {\r\n        'range-duration': {\r\n          pattern: /\\b\\d+[smhdwy]\\b/i,\r\n          alias: 'number',\r\n        },\r\n      },\r\n    },\r\n  ],\r\n  number: /\\b-?\\d+((\\.\\d*)?([eE][+-]?\\d+)?)?\\b/,\r\n  operator: new RegExp(`/[-+*/=%^~]|&&?|\\\\|?\\\\||!=?|<(?:=>?|<|>)?|>[>=]?|\\\\b(?:${OPERATORS.join('|')})\\\\b`, 'i'),\r\n  punctuation: /[{};()`,.]/,\r\n};\r\n\r\nexport default tokenizer;\r\n\n\n\n// WEBPACK FOOTER //\n// ./node_modules/tslint-loader??ref--2!./public/app/containers/Explore/slate-plugins/prism/promql.ts","export default function RunnerPlugin({ handler }) {\r\n  return {\r\n    onKeyDown(event) {\r\n      // Handle enter\r\n      if (handler && event.key === 'Enter' && !event.shiftKey) {\r\n        // Submit on Enter\r\n        event.preventDefault();\r\n        handler(event);\r\n        return true;\r\n      }\r\n      return undefined;\r\n    },\r\n  };\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./node_modules/tslint-loader??ref--2!./public/app/containers/Explore/slate-plugins/runner.ts","// Based on underscore.js debounce()\r\nexport default function debounce(func, wait) {\r\n  let timeout;\r\n  return function() {\r\n    const context = this;\r\n    const args = arguments;\r\n    const later = function() {\r\n      timeout = null;\r\n      func.apply(context, args);\r\n    };\r\n    clearTimeout(timeout);\r\n    timeout = setTimeout(later, wait);\r\n  };\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./node_modules/tslint-loader??ref--2!./public/app/containers/Explore/utils/debounce.ts","export const RATE_RANGES = ['1m', '5m', '10m', '30m', '1h'];\r\n\r\nexport function processLabels(labels) {\r\n  const values = {};\r\n  labels.forEach(l => {\r\n    const { __name__, ...rest } = l;\r\n    Object.keys(rest).forEach(key => {\r\n      if (!values[key]) {\r\n        values[key] = [];\r\n      }\r\n      if (values[key].indexOf(rest[key]) === -1) {\r\n        values[key].push(rest[key]);\r\n      }\r\n    });\r\n  });\r\n  return { values, keys: Object.keys(values) };\r\n}\r\n\r\n// Strip syntax chars\r\nexport const cleanText = s => s.replace(/[{}[\\]=\"(),!~+\\-*/^%]/g, '').trim();\r\n\n\n\n// WEBPACK FOOTER //\n// ./node_modules/tslint-loader??ref--2!./public/app/containers/Explore/utils/prometheus.ts","import React from 'react';\r\n\r\nfunction scrollIntoView(el) {\r\n  if (!el || !el.offsetParent) {\r\n    return;\r\n  }\r\n  const container = el.offsetParent;\r\n  if (el.offsetTop > container.scrollTop + container.offsetHeight || el.offsetTop < container.scrollTop) {\r\n    container.scrollTop = el.offsetTop - container.offsetTop;\r\n  }\r\n}\r\n\r\nclass TypeaheadItem extends React.PureComponent<any, any> {\r\n  el: any;\r\n  componentDidUpdate(prevProps) {\r\n    if (this.props.isSelected && !prevProps.isSelected) {\r\n      scrollIntoView(this.el);\r\n    }\r\n  }\r\n\r\n  getRef = el => {\r\n    this.el = el;\r\n  };\r\n\r\n  render() {\r\n    const { isSelected, label, onClickItem } = this.props;\r\n    const className = isSelected ? 'typeahead-item typeahead-item__selected' : 'typeahead-item';\r\n    const onClick = () => onClickItem(label);\r\n    return (\r\n      <li ref={this.getRef} className={className} onClick={onClick}>\r\n        {label}\r\n      </li>\r\n    );\r\n  }\r\n}\r\n\r\nclass TypeaheadGroup extends React.PureComponent<any, any> {\r\n  render() {\r\n    const { items, label, selected, onClickItem } = this.props;\r\n    return (\r\n      <li className=\"typeahead-group\">\r\n        <div className=\"typeahead-group__title\">{label}</div>\r\n        <ul className=\"typeahead-group__list\">\r\n          {items.map(item => (\r\n            <TypeaheadItem key={item} onClickItem={onClickItem} isSelected={selected.indexOf(item) > -1} label={item} />\r\n          ))}\r\n        </ul>\r\n      </li>\r\n    );\r\n  }\r\n}\r\n\r\nclass Typeahead extends React.PureComponent<any, any> {\r\n  render() {\r\n    const { groupedItems, menuRef, selectedItems, onClickItem } = this.props;\r\n    return (\r\n      <ul className=\"typeahead\" ref={menuRef}>\r\n        {groupedItems.map(g => (\r\n          <TypeaheadGroup key={g.label} onClickItem={onClickItem} selected={selectedItems} {...g} />\r\n        ))}\r\n      </ul>\r\n    );\r\n  }\r\n}\r\n\r\nexport default Typeahead;\r\n\n\n\n// WEBPACK FOOTER //\n// ./node_modules/tslint-loader??ref--2!./public/app/containers/Explore/Typeahead.tsx","import $ from 'jquery';\r\nimport React, { Component } from 'react';\r\nimport moment from 'moment';\r\n\r\nimport 'vendor/flot/jquery.flot';\r\nimport 'vendor/flot/jquery.flot.time';\r\nimport * as dateMath from 'app/core/utils/datemath';\r\nimport TimeSeries from 'app/core/time_series2';\r\n\r\nimport Legend from './Legend';\r\n\r\n// Copied from graph.ts\r\nfunction time_format(ticks, min, max) {\r\n  if (min && max && ticks) {\r\n    var range = max - min;\r\n    var secPerTick = range / ticks / 1000;\r\n    var oneDay = 86400000;\r\n    var oneYear = 31536000000;\r\n\r\n    if (secPerTick <= 45) {\r\n      return '%H:%M:%S';\r\n    }\r\n    if (secPerTick <= 7200 || range <= oneDay) {\r\n      return '%H:%M';\r\n    }\r\n    if (secPerTick <= 80000) {\r\n      return '%m/%d %H:%M';\r\n    }\r\n    if (secPerTick <= 2419200 || range <= oneYear) {\r\n      return '%m/%d';\r\n    }\r\n    return '%Y-%m';\r\n  }\r\n\r\n  return '%H:%M';\r\n}\r\n\r\nconst FLOT_OPTIONS = {\r\n  legend: {\r\n    show: false,\r\n  },\r\n  series: {\r\n    lines: {\r\n      linewidth: 1,\r\n      zero: false,\r\n    },\r\n    shadowSize: 0,\r\n  },\r\n  grid: {\r\n    minBorderMargin: 0,\r\n    markings: [],\r\n    backgroundColor: null,\r\n    borderWidth: 0,\r\n    // hoverable: true,\r\n    clickable: true,\r\n    color: '#a1a1a1',\r\n    margin: { left: 0, right: 0 },\r\n    labelMarginX: 0,\r\n  },\r\n  // selection: {\r\n  //   mode: 'x',\r\n  //   color: '#666',\r\n  // },\r\n  // crosshair: {\r\n  //   mode: 'x',\r\n  // },\r\n};\r\n\r\nclass Graph extends Component<any, any> {\r\n  componentDidMount() {\r\n    this.draw();\r\n  }\r\n\r\n  componentDidUpdate(prevProps) {\r\n    if (\r\n      prevProps.data !== this.props.data ||\r\n      prevProps.options !== this.props.options ||\r\n      prevProps.split !== this.props.split ||\r\n      prevProps.height !== this.props.height\r\n    ) {\r\n      this.draw();\r\n    }\r\n  }\r\n\r\n  draw() {\r\n    const { data, options: userOptions } = this.props;\r\n    if (!data) {\r\n      return;\r\n    }\r\n    const series = data.map((ts: TimeSeries) => ({\r\n      color: ts.color,\r\n      label: ts.label,\r\n      data: ts.getFlotPairs('null'),\r\n    }));\r\n\r\n    const $el = $(`#${this.props.id}`);\r\n    const ticks = $el.width() / 100;\r\n    let { from, to } = userOptions.range;\r\n    if (!moment.isMoment(from)) {\r\n      from = dateMath.parse(from, false);\r\n    }\r\n    if (!moment.isMoment(to)) {\r\n      to = dateMath.parse(to, true);\r\n    }\r\n    const min = from.valueOf();\r\n    const max = to.valueOf();\r\n    const dynamicOptions = {\r\n      xaxis: {\r\n        mode: 'time',\r\n        min: min,\r\n        max: max,\r\n        label: 'Datetime',\r\n        ticks: ticks,\r\n        timeformat: time_format(ticks, min, max),\r\n      },\r\n    };\r\n    const options = {\r\n      ...FLOT_OPTIONS,\r\n      ...dynamicOptions,\r\n      ...userOptions,\r\n    };\r\n    $.plot($el, series, options);\r\n  }\r\n\r\n  render() {\r\n    const { data, height } = this.props;\r\n    return (\r\n      <div className=\"panel-container\">\r\n        <div id={this.props.id} className=\"explore-graph\" style={{ height }} />\r\n        <Legend data={data} />\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default Graph;\r\n\n\n\n// WEBPACK FOOTER //\n// ./node_modules/tslint-loader??ref--2!./public/app/containers/Explore/Graph.tsx","import React, { PureComponent } from 'react';\r\n\r\nconst LegendItem = ({ series }) => (\r\n  <div className=\"graph-legend-series\">\r\n    <div className=\"graph-legend-icon\">\r\n      <i className=\"fa fa-minus pointer\" style={{ color: series.color }} />\r\n    </div>\r\n    <a className=\"graph-legend-alias pointer\">{series.alias}</a>\r\n  </div>\r\n);\r\n\r\nexport default class Legend extends PureComponent<any, any> {\r\n  render() {\r\n    const { className = '', data } = this.props;\r\n    const items = data || [];\r\n    return (\r\n      <div className={`${className} graph-legend ps`}>\r\n        {items.map(series => <LegendItem key={series.id} series={series} />)}\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./node_modules/tslint-loader??ref--2!./public/app/containers/Explore/Legend.tsx","import React, { PureComponent } from 'react';\r\n// import TableModel from 'app/core/table_model';\r\n\r\nconst EMPTY_TABLE = {\r\n  columns: [],\r\n  rows: [],\r\n};\r\n\r\nexport default class Table extends PureComponent<any, any> {\r\n  render() {\r\n    const { className = '', data } = this.props;\r\n    const tableModel = data || EMPTY_TABLE;\r\n    return (\r\n      <table className={`${className} filter-table`}>\r\n        <thead>\r\n          <tr>{tableModel.columns.map(col => <th key={col.text}>{col.text}</th>)}</tr>\r\n        </thead>\r\n        <tbody>\r\n          {tableModel.rows.map((row, i) => <tr key={i}>{row.map((content, j) => <td key={j}>{content}</td>)}</tr>)}\r\n        </tbody>\r\n      </table>\r\n    );\r\n  }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./node_modules/tslint-loader??ref--2!./public/app/containers/Explore/Table.tsx","import React, { PureComponent } from 'react';\r\nimport moment from 'moment';\r\n\r\nimport * as dateMath from 'app/core/utils/datemath';\r\nimport * as rangeUtil from 'app/core/utils/rangeutil';\r\n\r\nconst DATE_FORMAT = 'YYYY-MM-DD HH:mm:ss';\r\n\r\nexport const DEFAULT_RANGE = {\r\n  from: 'now-6h',\r\n  to: 'now',\r\n};\r\n\r\nexport function parseTime(value, isUtc = false, asString = false) {\r\n  if (value.indexOf('now') !== -1) {\r\n    return value;\r\n  }\r\n  if (!isNaN(value)) {\r\n    const epoch = parseInt(value);\r\n    const m = isUtc ? moment.utc(epoch) : moment(epoch);\r\n    return asString ? m.format(DATE_FORMAT) : m;\r\n  }\r\n  return undefined;\r\n}\r\n\r\nexport default class TimePicker extends PureComponent<any, any> {\r\n  dropdownEl: any;\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    const fromRaw = props.range ? props.range.from : DEFAULT_RANGE.from;\r\n    const toRaw = props.range ? props.range.to : DEFAULT_RANGE.to;\r\n    const range = {\r\n      from: parseTime(fromRaw),\r\n      to: parseTime(toRaw),\r\n    };\r\n    this.state = {\r\n      fromRaw: parseTime(fromRaw, props.isUtc, true),\r\n      isOpen: props.isOpen,\r\n      isUtc: props.isUtc,\r\n      rangeString: rangeUtil.describeTimeRange(range),\r\n      refreshInterval: '',\r\n      toRaw: parseTime(toRaw, props.isUtc, true),\r\n    };\r\n  }\r\n\r\n  move(direction) {\r\n    const { onChangeTime } = this.props;\r\n    const { fromRaw, toRaw } = this.state;\r\n    const range = {\r\n      from: dateMath.parse(fromRaw, false),\r\n      to: dateMath.parse(toRaw, true),\r\n    };\r\n\r\n    const timespan = (range.to.valueOf() - range.from.valueOf()) / 2;\r\n    let to, from;\r\n    if (direction === -1) {\r\n      to = range.to.valueOf() - timespan;\r\n      from = range.from.valueOf() - timespan;\r\n    } else if (direction === 1) {\r\n      to = range.to.valueOf() + timespan;\r\n      from = range.from.valueOf() + timespan;\r\n      if (to > Date.now() && range.to < Date.now()) {\r\n        to = Date.now();\r\n        from = range.from.valueOf();\r\n      }\r\n    } else {\r\n      to = range.to.valueOf();\r\n      from = range.from.valueOf();\r\n    }\r\n\r\n    const rangeString = rangeUtil.describeTimeRange(range);\r\n    // No need to convert to UTC again\r\n    to = moment(to);\r\n    from = moment(from);\r\n\r\n    this.setState(\r\n      {\r\n        rangeString,\r\n        fromRaw: from.format(DATE_FORMAT),\r\n        toRaw: to.format(DATE_FORMAT),\r\n      },\r\n      () => {\r\n        onChangeTime({ to, from });\r\n      }\r\n    );\r\n  }\r\n\r\n  handleChangeFrom = e => {\r\n    this.setState({\r\n      fromRaw: e.target.value,\r\n    });\r\n  };\r\n\r\n  handleChangeTo = e => {\r\n    this.setState({\r\n      toRaw: e.target.value,\r\n    });\r\n  };\r\n\r\n  handleClickApply = () => {\r\n    const { onChangeTime } = this.props;\r\n    const { toRaw, fromRaw } = this.state;\r\n    const range = {\r\n      from: dateMath.parse(fromRaw, false),\r\n      to: dateMath.parse(toRaw, true),\r\n    };\r\n    const rangeString = rangeUtil.describeTimeRange(range);\r\n    this.setState(\r\n      {\r\n        isOpen: false,\r\n        rangeString,\r\n      },\r\n      () => {\r\n        if (onChangeTime) {\r\n          onChangeTime(range);\r\n        }\r\n      }\r\n    );\r\n  };\r\n\r\n  handleClickLeft = () => this.move(-1);\r\n  handleClickPicker = () => {\r\n    this.setState(state => ({\r\n      isOpen: !state.isOpen,\r\n    }));\r\n  };\r\n  handleClickRight = () => this.move(1);\r\n  handleClickRefresh = () => {};\r\n  handleClickRelativeOption = range => {\r\n    const { onChangeTime } = this.props;\r\n    const rangeString = rangeUtil.describeTimeRange(range);\r\n    this.setState(\r\n      {\r\n        toRaw: range.to,\r\n        fromRaw: range.from,\r\n        isOpen: false,\r\n        rangeString,\r\n      },\r\n      () => {\r\n        if (onChangeTime) {\r\n          onChangeTime(range);\r\n        }\r\n      }\r\n    );\r\n  };\r\n\r\n  getTimeOptions() {\r\n    return rangeUtil.getRelativeTimesList({}, this.state.rangeString);\r\n  }\r\n\r\n  dropdownRef = el => {\r\n    this.dropdownEl = el;\r\n  };\r\n\r\n  renderDropdown() {\r\n    const { fromRaw, isOpen, toRaw } = this.state;\r\n    if (!isOpen) {\r\n      return null;\r\n    }\r\n    const timeOptions = this.getTimeOptions();\r\n    return (\r\n      <div ref={this.dropdownRef} className=\"gf-timepicker-dropdown\">\r\n        <div className=\"gf-timepicker-absolute-section\">\r\n          <h3 className=\"section-heading\">Custom range</h3>\r\n\r\n          <label className=\"small\">From:</label>\r\n          <div className=\"gf-form-inline\">\r\n            <div className=\"gf-form max-width-28\">\r\n              <input\r\n                type=\"text\"\r\n                className=\"gf-form-input input-large timepicker-from\"\r\n                value={fromRaw}\r\n                onChange={this.handleChangeFrom}\r\n              />\r\n            </div>\r\n          </div>\r\n\r\n          <label className=\"small\">To:</label>\r\n          <div className=\"gf-form-inline\">\r\n            <div className=\"gf-form max-width-28\">\r\n              <input\r\n                type=\"text\"\r\n                className=\"gf-form-input input-large timepicker-to\"\r\n                value={toRaw}\r\n                onChange={this.handleChangeTo}\r\n              />\r\n            </div>\r\n          </div>\r\n\r\n          {/* <label className=\"small\">Refreshing every:</label>\r\n          <div className=\"gf-form-inline\">\r\n            <div className=\"gf-form max-width-28\">\r\n              <select className=\"gf-form-input input-medium\" ng-options=\"f.value as f.text for f in ctrl.refresh.options\"></select>\r\n            </div>\r\n          </div> */}\r\n          <div className=\"gf-form\">\r\n            <button className=\"btn gf-form-btn btn-secondary\" onClick={this.handleClickApply}>\r\n              Apply\r\n            </button>\r\n          </div>\r\n        </div>\r\n\r\n        <div className=\"gf-timepicker-relative-section\">\r\n          <h3 className=\"section-heading\">Quick ranges</h3>\r\n          {Object.keys(timeOptions).map(section => {\r\n            const group = timeOptions[section];\r\n            return (\r\n              <ul key={section}>\r\n                {group.map(option => (\r\n                  <li className={option.active ? 'active' : ''} key={option.display}>\r\n                    <a onClick={() => this.handleClickRelativeOption(option)}>{option.display}</a>\r\n                  </li>\r\n                ))}\r\n              </ul>\r\n            );\r\n          })}\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  render() {\r\n    const { isUtc, rangeString, refreshInterval } = this.state;\r\n    return (\r\n      <div className=\"timepicker\">\r\n        <div className=\"navbar-buttons\">\r\n          <button className=\"btn navbar-button navbar-button--tight timepicker-left\" onClick={this.handleClickLeft}>\r\n            <i className=\"fa fa-chevron-left\" />\r\n          </button>\r\n          <button className=\"btn navbar-button gf-timepicker-nav-btn\" onClick={this.handleClickPicker}>\r\n            <i className=\"fa fa-clock-o\" />\r\n            <span className=\"timepicker-rangestring\">{rangeString}</span>\r\n            {isUtc ? <span className=\"gf-timepicker-utc\">UTC</span> : null}\r\n            {refreshInterval ? <span className=\"text-warning\">&nbsp; Refresh every {refreshInterval}</span> : null}\r\n          </button>\r\n          <button className=\"btn navbar-button navbar-button--tight timepicker-right\" onClick={this.handleClickRight}>\r\n            <i className=\"fa fa-chevron-right\" />\r\n          </button>\r\n        </div>\r\n        {this.renderDropdown()}\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./node_modules/tslint-loader??ref--2!./public/app/containers/Explore/TimePicker.tsx","export function buildQueryOptions({ format, interval, instant, range, queries }) {\r\n  return {\r\n    interval,\r\n    range,\r\n    targets: queries.map(expr => ({\r\n      expr,\r\n      format,\r\n      instant,\r\n    })),\r\n  };\r\n}\r\n\r\nexport function generateQueryKey(index = 0) {\r\n  return `Q-${Date.now()}-${Math.random()}-${index}`;\r\n}\r\n\r\nexport function ensureQueries(queries?) {\r\n  if (queries && typeof queries === 'object' && queries.length > 0 && typeof queries[0] === 'string') {\r\n    return queries.map((query, i) => ({ key: generateQueryKey(i), query }));\r\n  }\r\n  return [{ key: generateQueryKey(), query: '' }];\r\n}\r\n\r\nexport function hasQuery(queries) {\r\n  return queries.some(q => q.query);\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./node_modules/tslint-loader??ref--2!./public/app/containers/Explore/utils/query.ts"],"sourceRoot":""}